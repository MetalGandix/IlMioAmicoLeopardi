(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,i){t.exports=i("zUnb")},"4R65":function(t,e,i){!function(t){"use strict";function e(t){var e,i,n,r;for(i=1,n=arguments.length;i<n;i++)for(e in r=arguments[i])t[e]=r[e];return t}var i=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function n(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var r=0;function o(t){return t._leaflet_id=t._leaflet_id||++r,t._leaflet_id}function a(t,e,i){var n,r,o,a;return a=function(){n=!1,r&&(o.apply(i,r),r=!1)},o=function(){n?r=arguments:(t.apply(i,arguments),setTimeout(a,e),n=!0)}}function s(t,e,i){var n=e[1],r=e[0],o=n-r;return t===n&&i?t:((t-r)%o+o)%o+r}function l(){return!1}function c(t,e){var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function u(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function h(t){return u(t).split(/\s+/)}function p(t,e){for(var n in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?i(t.options):{}),e)t.options[n]=e[n];return t.options}function d(t,e,i){var n=[];for(var r in t)n.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var f=/\{ *([\w_-]+) *\}/g;function m(t,e){return t.replace(f,(function(t,i){var n=e[i];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n}))}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function v(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function x(t){var e=+new Date,i=Math.max(0,16-(e-b));return b=e+i,window.setTimeout(t,i)}var w=window.requestAnimationFrame||v("RequestAnimationFrame")||x,C=window.cancelAnimationFrame||v("CancelAnimationFrame")||v("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function S(t,e,i){if(!i||w!==x)return w.call(window,n(t,e));t.call(e)}function T(t){t&&C.call(window,t)}var k={extend:e,create:i,bind:n,lastId:r,stamp:o,throttle:a,wrapNum:s,falseFn:l,formatNum:c,trim:u,splitWords:h,setOptions:p,getParamString:d,template:m,isArray:g,indexOf:y,emptyImageUrl:_,requestFn:w,cancelFn:C,requestAnimFrame:S,cancelAnimFrame:T};function E(){}E.extend=function(t){var n=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=n.__super__=this.prototype,o=i(r);for(var a in o.constructor=n,n.prototype=o,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(n[a]=this[a]);return t.statics&&(e(n,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=g(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=e(i(o.options),t.options)),e(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},n},E.include=function(t){return e(this.prototype,t),this},E.mergeOptions=function(t){return e(this.prototype.options,t),this},E.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var P={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var r=0,o=(t=h(t)).length;r<o;r++)this._on(t[r],e,i);return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else for(var r=0,o=(t=h(t)).length;r<o;r++)this._off(t[r],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(this._events[t]=n=[]),i===this&&(i=void 0);for(var r={fn:e,ctx:i},o=n,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===i)return;o.push(r)},_off:function(t,e,i){var n,r,o;if(this._events&&(n=this._events[t]))if(e){if(i===this&&(i=void 0),n)for(r=0,o=n.length;r<o;r++){var a=n[r];if(a.ctx===i&&a.fn===e)return a.fn=l,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(r,1)}}else{for(r=0,o=n.length;r<o;r++)n[r].fn=l;delete this._events[t]}},fire:function(t,i,n){if(!this.listens(t,n))return this;var r=e({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var l=o[a];l.fn.call(l.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var o=n((function(){this.off(t,e,i).off(t,o,i)}),this);return this.on(t,e,i).on(t,o,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};P.addEventListener=P.on,P.removeEventListener=P.clearAllEventListeners=P.off,P.addOneTimeEventListener=P.once,P.fireEvent=P.fire,P.hasEventListeners=P.listens;var I=E.extend(P);function M(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var A=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function z(t,e,i){return t instanceof M?t:g(t)?new M(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new M(t.x,t.y):new M(t,e,i)}function O(t,e){if(t)for(var i=e?[t,e]:t,n=0,r=i.length;n<r;n++)this.extend(i[n])}function D(t,e){return!t||t instanceof O?t:new O(t,e)}function R(t,e){if(t)for(var i=e?[t,e]:t,n=0,r=i.length;n<r;n++)this.extend(i[n])}function B(t,e){return t instanceof R?t:new R(t,e)}function F(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function N(t,e,i){return t instanceof F?t:g(t)&&"object"!=typeof t[0]?3===t.length?new F(t[0],t[1],t[2]):2===t.length?new F(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new F(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new F(t,e,i)}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(t){return this.clone()._add(z(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(z(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new M(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new M(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=A(this.x),this.y=A(this.y),this},distanceTo:function(t){var e=(t=z(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=z(t)).x===this.x&&t.y===this.y},contains:function(t){return t=z(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},O.prototype={extend:function(t){return t=z(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new M(this.min.x,this.max.y)},getTopRight:function(){return new M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof M?z(t):D(t))instanceof O?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=D(t);var e=this.min,i=this.max,n=t.min,r=t.max;return r.x>=e.x&&n.x<=i.x&&r.y>=e.y&&n.y<=i.y},overlaps:function(t){t=D(t);var e=this.min,i=this.max,n=t.min,r=t.max;return r.x>e.x&&n.x<i.x&&r.y>e.y&&n.y<i.y},isValid:function(){return!(!this.min||!this.max)}},R.prototype={extend:function(t){var e,i,n=this._southWest,r=this._northEast;if(t instanceof F)e=t,i=t;else{if(!(t instanceof R))return t?this.extend(N(t)||B(t)):this;if(i=t._northEast,!(e=t._southWest)||!i)return this}return n||r?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),r.lat=Math.max(i.lat,r.lat),r.lng=Math.max(i.lng,r.lng)):(this._southWest=new F(e.lat,e.lng),this._northEast=new F(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,r=Math.abs(e.lng-i.lng)*t;return new R(new F(e.lat-n,e.lng-r),new F(i.lat+n,i.lng+r))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof F||"lat"in t?N(t):B(t);var e,i,n=this._southWest,r=this._northEast;return t instanceof R?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=r.lat&&e.lng>=n.lng&&i.lng<=r.lng},intersects:function(t){t=B(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast();return r.lat>=e.lat&&n.lat<=i.lat&&r.lng>=e.lng&&n.lng<=i.lng},overlaps:function(t){t=B(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast();return r.lat>e.lat&&n.lat<i.lat&&r.lng>e.lng&&n.lng<i.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=B(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},F.prototype={equals:function(t,e){return!!t&&(t=N(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+c(this.lat,t)+", "+c(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,N(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return B([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new F(this.lat,this.lng,this.alt)}};var V,j={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new O(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?s(t.lng,this.wrapLng,!0):t.lng;return new F(this.wrapLat?s(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,r=e.lng-i.lng;if(0===n&&0===r)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new R(new F(o.lat-n,o.lng-r),new F(a.lat-n,a.lng-r))}},U=e({},j,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,r=e.lat*i,o=Math.sin((e.lat-t.lat)*i/2),a=Math.sin((e.lng-t.lng)*i/2),s=o*o+Math.cos(n)*Math.cos(r)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),q=6378137,Z={R:q,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),r=Math.sin(n*e);return new M(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new F((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(V=q*Math.PI,new O([-V,-V],[V,V]))};function H(t,e,i,n){if(g(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function G(t,e,i,n){return new H(t,e,i,n)}H.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return t.x=(e=e||1)*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return new M((t.x/(e=e||1)-this._b)/this._a,(t.y/e-this._d)/this._c)}};var W,$=e({},U,{code:"EPSG:3857",projection:Z,transformation:(W=.5/(Math.PI*Z.R),G(W,.5,-W,.5))}),K=e({},$,{code:"EPSG:900913"});function X(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Q(t,e){var i,n,r,o,a,s,l="";for(i=0,r=t.length;i<r;i++){for(n=0,o=(a=t[i]).length;n<o;n++)l+=(n?"L":"M")+(s=a[n]).x+" "+s.y;l+=e?It?"z":"x":""}return l||"M0 0"}var Y=document.documentElement.style,J="ActiveXObject"in window,tt=J&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),it=At("webkit"),nt=At("android"),rt=At("android 2")||At("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=nt&&At("Google")&&ot<537&&!("AudioNode"in window),st=!!window.opera,lt=!et&&At("chrome"),ct=At("gecko")&&!it&&!st&&!J,ut=!lt&&At("safari"),ht=At("phantom"),pt="OTransition"in Y,dt=0===navigator.platform.indexOf("Win"),ft=J&&"transition"in Y,mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,gt="MozPerspective"in Y,yt=!window.L_DISABLE_3D&&(ft||mt||gt)&&!pt&&!ht,_t="undefined"!=typeof orientation||At("mobile"),vt=_t&&it,bt=_t&&mt,xt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!xt),Ct=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),St=_t&&st,Tt=_t&&ct,kt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Et=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(i){}return t}(),Pt=!!document.createElement("canvas").getContext,It=!(!document.createElementNS||!X("svg").createSVGRect),Mt=!It&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(i){return!1}}();function At(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var zt={ie:J,ielt9:tt,edge:et,webkit:it,android:nt,android23:rt,androidStock:at,opera:st,chrome:lt,gecko:ct,safari:ut,phantom:ht,opera12:pt,win:dt,ie3d:ft,webkit3d:mt,gecko3d:gt,any3d:yt,mobile:_t,mobileWebkit:vt,mobileWebkit3d:bt,msPointer:xt,pointer:wt,touch:Ct,mobileOpera:St,mobileGecko:Tt,retina:kt,passiveEvents:Et,canvas:Pt,svg:It,vml:Mt},Ot=xt?"MSPointerDown":"pointerdown",Lt=xt?"MSPointerMove":"pointermove",Dt=xt?"MSPointerUp":"pointerup",Rt=xt?"MSPointerCancel":"pointercancel",Bt={},Ft=!1;function Nt(t){Bt[t.pointerId]=t}function Vt(t){Bt[t.pointerId]&&(Bt[t.pointerId]=t)}function jt(t){delete Bt[t.pointerId]}function Ut(t,e){for(var i in t.touches=[],Bt)t.touches.push(Bt[i]);t.changedTouches=[t],e(t)}var qt,Zt,Ht,Gt,Wt,$t=xt?"MSPointerDown":wt?"pointerdown":"touchstart",Kt=xt?"MSPointerUp":wt?"pointerup":"touchend",Xt="_leaflet_",Qt=de(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Yt=de(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Jt="webkitTransition"===Yt||"OTransition"===Yt?Yt+"End":"transitionend";function te(t){return"string"==typeof t?document.getElementById(t):t}function ee(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function ie(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function ne(t){var e=t.parentNode;e&&e.removeChild(t)}function re(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function oe(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ae(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function se(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=he(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function le(t,e){if(void 0!==t.classList)for(var i=h(e),n=0,r=i.length;n<r;n++)t.classList.add(i[n]);else if(!se(t,e)){var o=he(t);ue(t,(o?o+" ":"")+e)}}function ce(t,e){void 0!==t.classList?t.classList.remove(e):ue(t,u((" "+he(t)+" ").replace(" "+e+" "," ")))}function ue(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function he(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function pe(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(r){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}(t,e)}function de(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function fe(t,e,i){var n=e||new M(0,0);t.style[Qt]=(ft?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function me(t,e){t._leaflet_pos=e,yt?fe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ge(t){return t._leaflet_pos||new M(0,0)}if("onselectstart"in document)qt=function(){Te(window,"selectstart",De)},Zt=function(){Ee(window,"selectstart",De)};else{var ye=de(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qt=function(){if(ye){var t=document.documentElement.style;Ht=t[ye],t[ye]="none"}},Zt=function(){ye&&(document.documentElement.style[ye]=Ht,Ht=void 0)}}function _e(){Te(window,"dragstart",De)}function ve(){Ee(window,"dragstart",De)}function be(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(xe(),Gt=t,Wt=t.style.outline,t.style.outline="none",Te(window,"keydown",xe))}function xe(){Gt&&(Gt.style.outline=Wt,Gt=void 0,Wt=void 0,Ee(window,"keydown",xe))}function we(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Ce(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Se={TRANSFORM:Qt,TRANSITION:Yt,TRANSITION_END:Jt,get:te,getStyle:ee,create:ie,remove:ne,empty:re,toFront:oe,toBack:ae,hasClass:se,addClass:le,removeClass:ce,setClass:ue,getClass:he,setOpacity:pe,testProp:de,setTransform:fe,setPosition:me,getPosition:ge,disableTextSelection:qt,enableTextSelection:Zt,disableImageDrag:_e,enableImageDrag:ve,preventOutline:be,restoreOutline:xe,getSizedParentNode:we,getScale:Ce};function Te(t,e,i,n){if("object"==typeof e)for(var r in e)Me(t,r,e[r],i);else for(var o=0,a=(e=h(e)).length;o<a;o++)Me(t,e[o],i,n);return this}var ke="_leaflet_events";function Ee(t,e,i,n){if("object"==typeof e)for(var r in e)Ae(t,r,e[r],i);else if(e)for(var o=0,a=(e=h(e)).length;o<a;o++)Ae(t,e[o],i,n);else{for(var s in t[ke])Ae(t,s,t[ke][s]);delete t[ke]}return this}function Pe(){if(wt)return!(et||ut)}var Ie={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Me(t,e,i,r){var a=e+o(i)+(r?"_"+o(r):"");if(t[ke]&&t[ke][a])return this;var s=function(e){return i.call(r||t,e||window.event)},l=s;wt&&0===e.indexOf("touch")?function(t,e,i,r){"touchstart"===e?function(t,e,i){var r=n((function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&De(t),Ut(t,e)}));t["_leaflet_touchstart"+i]=r,t.addEventListener(Ot,r,!1),Ft||(document.addEventListener(Ot,Nt,!0),document.addEventListener(Lt,Vt,!0),document.addEventListener(Dt,jt,!0),document.addEventListener(Rt,jt,!0),Ft=!0)}(t,i,r):"touchmove"===e?function(t,e,i){var n=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Ut(t,e)};t["_leaflet_touchmove"+i]=n,t.addEventListener(Lt,n,!1)}(t,i,r):"touchend"===e&&function(t,e,i){var n=function(t){Ut(t,e)};t["_leaflet_touchend"+i]=n,t.addEventListener(Dt,n,!1),t.addEventListener(Rt,n,!1)}(t,i,r)}(t,e,s,a):Ct&&"dblclick"===e&&!Pe()?function(t,e,i){var n,r,o=!1;function a(t){if(wt){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),i=e-(n||e);r=t.touches?t.touches[0]:t,o=i>0&&i<=250,n=e}function s(t){if(o&&!r.cancelBubble){if(wt){if("mouse"===t.pointerType)return;var i,a,s={};for(a in r)s[a]=(i=r[a])&&i.bind?i.bind(r):i;r=s}r.type="dblclick",r.button=0,e(r),n=null}}t[Xt+$t+i]=a,t[Xt+Kt+i]=s,t[Xt+"dblclick"+i]=e,t.addEventListener($t,a,!!Et&&{passive:!1}),t.addEventListener(Kt,s,!!Et&&{passive:!1}),t.addEventListener("dblclick",e,!1)}(t,s,a):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Ie[e]||e,s,!!Et&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?t.addEventListener(Ie[e],s=function(e){e=e||window.event,qe(t,e)&&l(e)},!1):t.addEventListener(e,l,!1):"attachEvent"in t&&t.attachEvent("on"+e,s),t[ke]=t[ke]||{},t[ke][a]=s}function Ae(t,e,i,n){var r=e+o(i)+(n?"_"+o(n):""),a=t[ke]&&t[ke][r];if(!a)return this;wt&&0===e.indexOf("touch")?function(t,e,i){var n=t["_leaflet_"+e+i];"touchstart"===e?t.removeEventListener(Ot,n,!1):"touchmove"===e?t.removeEventListener(Lt,n,!1):"touchend"===e&&(t.removeEventListener(Dt,n,!1),t.removeEventListener(Rt,n,!1))}(t,e,r):Ct&&"dblclick"===e&&!Pe()?function(t,e){var i=t[Xt+Kt+e],n=t[Xt+"dblclick"+e];t.removeEventListener($t,t[Xt+$t+e],!!Et&&{passive:!1}),t.removeEventListener(Kt,i,!!Et&&{passive:!1}),t.removeEventListener("dblclick",n,!1)}(t,r):"removeEventListener"in t?t.removeEventListener(Ie[e]||e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[ke][r]=null}function ze(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ue(t),this}function Oe(t){return Me(t,"wheel",ze),this}function Le(t){return Te(t,"mousedown touchstart dblclick",ze),Me(t,"click",je),this}function De(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Re(t){return De(t),ze(t),this}function Be(t,e){if(!e)return new M(t.clientX,t.clientY);var i=Ce(e),n=i.boundingClientRect;return new M((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var Fe=dt&&lt?2*window.devicePixelRatio:ct?window.devicePixelRatio:1;function Ne(t){return et?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Fe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ve={};function je(t){Ve[t.type]=!0}function Ue(t){var e=Ve[t.type];return Ve[t.type]=!1,e}function qe(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(n){return!1}return i!==t}var Ze={on:Te,off:Ee,stopPropagation:ze,disableScrollPropagation:Oe,disableClickPropagation:Le,preventDefault:De,stop:Re,getMousePosition:Be,getWheelDelta:Ne,fakeStop:je,skipped:Ue,isExternalTarget:qe,addListener:Te,removeListener:Ee},He=I.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=ge(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=S(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),me(this._el,i),this.fire("step")},_complete:function(){T(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ge=I.extend({options:{crs:$,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=n(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(N(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Yt&&yt&&!St&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Te(this._proxy,Jt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,n){return i=void 0===i?this._zoom:this._limitZoom(i),t=this._limitCenter(N(t),i,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=e({animate:n.animate},n.zoom),n.pan=e({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,n.zoom):this._tryAnimatedPan(t,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,i),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t=t||(yt?this.options.zoomDelta:1)),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t=t||(yt?this.options.zoomDelta:1)),e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof M?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/n),a=this.containerPointToLatLng(r.add(o));return this.setView(a,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():B(t);var i=z(e.paddingTopLeft||e.padding||[0,0]),n=z(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,i.add(n));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var o=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),r),s=this.project(t.getNorthEast(),r);return{center:this.unproject(a.add(s).divideBy(2).add(o),r),zoom:r}},fitBounds:function(t,e){if(!(t=B(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=z(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new He,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){le(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!yt)return this.setView(t,e,i);this._stop();var n=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),a=this._zoom;t=N(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),l=s*this.getZoomScale(a,e),c=r.distanceTo(n)||1,u=1.42,h=2.0164;function p(t){var e=(l*l-s*s+(t?-1:1)*h*h*c*c)/(2*(t?l:s)*h*c),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function d(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var m=p(0);var g=Date.now(),y=(p(1)-m)/u,_=i.duration?1e3*i.duration:1e3*y*.8;return this._moveStart(!0,i.noMoveStart),(function i(){var o=(Date.now()-g)/_,l=function(t){return 1-Math.pow(1-t,1.5)}(o)*y;o<=1?(this._flyToFrame=S(i,this),this._move(this.unproject(n.add(r.subtract(n).multiplyBy(function(t){return s*(f(m)*(d(e=m+u*t)/f(e))-d(m))/h;var e}(l)/c)),a),this.getScaleZoom(s/function(t){return s*(f(m)/f(m+u*t))}(l),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}).call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return(t=B(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,B(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=z((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=z(e.paddingBottomRight||e.padding||[0,0]),r=this.getCenter(),o=this.project(r),a=this.project(t),s=this.getPixelBounds(),l=s.getSize().divideBy(2),c=D([s.min.add(i),s.max.subtract(n)]);if(!c.contains(a)){this._enforcingBounds=!0;var u=o.subtract(a),h=z(a.x+u.x,a.y+u.y);(a.x<c.min.x||a.x>c.max.x)&&(h.x=o.x-u.x,u.x>0?h.x+=l.x-i.x:h.x-=l.x-n.x),(a.y<c.min.y||a.y>c.max.y)&&(h.y=o.y-u.y,u.y>0?h.y+=l.y-i.y:h.y-=l.y-n.y),this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=i.divideBy(2).round(),a=r.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=n(this._handleGeolocationResponse,this),r=n(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,r,t):navigator.geolocation.getCurrentPosition(i,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=new F(t.coords.latitude,t.coords.longitude),i=e.toBounds(2*t.coords.accuracy),n=this._locateOptions;if(n.setView){var r=this.getBoundsZoom(i);this.setView(e,n.maxZoom?Math.min(r,n.maxZoom):r)}var o={latlng:e,bounds:i,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ne(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(T(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ne(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=ie("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new R(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=B(t),i=z(i||[0,0]);var n=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(i),c=D(this.project(s,n),this.project(a,n)).getSize(),u=yt?this.options.zoomSnap:1,h=l.x/c.x,p=l.y/c.y,d=e?Math.max(h,p):Math.min(h,p);return n=this.getScaleZoom(d,n),u&&(n=Math.round(n/(u/100))*(u/100),n=e?Math.ceil(n/u)*u:Math.floor(n/u)*u),Math.max(r,Math.min(o,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new O(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs,n=i.zoom(t*i.scale(e=void 0===e?this._zoom:e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(N(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(z(t),e)},layerPointToLatLng:function(t){var e=z(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(N(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(N(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(B(t))},distance:function(t,e){return this.options.crs.distance(N(t),N(e))},containerPointToLayerPoint:function(t){return z(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return z(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(z(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(N(t)))},mouseEventToContainerPoint:function(t){return Be(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=te(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Te(e,"scroll",this._onScroll,this),this._containerId=o(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&yt,le(t,"leaflet-container"+(Ct?" leaflet-touch":"")+(kt?" leaflet-retina":"")+(tt?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ee(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),me(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(le(t.markerPane,"leaflet-zoom-hide"),le(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){me(this._mapPane,new M(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,!1)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return T(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){me(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[o(this._container)]=this;var e=t?Ee:Te;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),yt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){T(this._resizeRequest),this._resizeRequest=S((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],r="mouseout"===e||"mouseover"===e,a=t.target||t.srcElement,s=!1;a;){if((i=this._targets[o(a)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){s=!0;break}if(i&&i.listens(e,!0)){if(r&&!qe(a,t))break;if(n.push(i),r)break}if(a===this._container)break;a=a.parentNode}return n.length||s||r||!qe(a,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!Ue(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||be(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,n){if("click"===t.type){var r=e({},t);r.type="preclick",this._fireDOMEvent(r,r.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,i))).length){var o=n[0];"contextmenu"===i&&o.listens(i,!0)&&De(t);var a={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var l=0;l<n.length;l++)if(n[l].fire(i,a,!0),a.originalEvent._stopped||!1===n[l].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,i))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ge(this._mapPane)||new M(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return D([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),r=this.getSize().divideBy(2),o=new O(n.subtract(r),n.add(r)),a=this._getBoundsOffset(o,i,e);return a.round().equals([0,0])?t:this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new O(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=D(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),r=n.min.subtract(t.min),o=n.max.subtract(t.max);return new M(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=yt?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ce(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i)||(this.panBy(i,e),0))},_createAnimProxy:function(){var t=this._proxy=ie("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=Qt,i=this._proxy.style[e];fe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ne(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();fe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(r)||(S((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,i,r){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,le(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(n(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ce(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),S((function(){this._moveEnd(!0)}),this))}}),We=E.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return le(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ne(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),$e=function(t){return new We(t)};Ge.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=ie("div",e+"control-container",this._container);function n(n,r){t[n+r]=ie("div",e+n+" "+e+r,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ne(this._controlCorners[t]);ne(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ke=We.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){for(var n in p(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return We.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(o(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){le(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(le(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ce(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ce(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ie("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Le(e),Oe(e);var n=this._section=ie("section",t+"-list");i&&(this._map.on("click",this.collapse,this),nt||Te(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=ie("a",t+"-toggle",e);r.href="#",r.title="Layers",Ct?(Te(r,"click",Re),Te(r,"click",this.expand,this)):Te(r,"focus",this.expand,this),i||this.expand(),this._baseLayersList=ie("div",t+"-base",n),this._separator=ie("div",t+"-separator",n),this._overlaysList=ie("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(n((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;re(this._baseLayersList),re(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,r=0;for(i=0;i<this._layers.length;i++)this._addItem(n=this._layers[i]),e=e||n.overlay,t=t||!n.overlay,r+=n.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(t=t&&r>1)?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(o(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers_"+o(this),n),this._layerControlInputs.push(e),e.layerId=o(t.layer),Te(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var a=document.createElement("div");return i.appendChild(a),a.appendChild(e),a.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],r=[];this._handlingClick=!0;for(var o=i.length-1;o>=0;o--)e=this._getLayer((t=i[o]).layerId).layer,t.checked?n.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<n.length;o++)this._map.hasLayer(n[o])||this._map.addLayer(n[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),r=i.length-1;r>=0;r--)e=this._getLayer((t=i[r]).layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Xe=We.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=ie("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,r){var o=ie("a",i,n);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Le(o),Te(o,"click",Re),Te(o,"click",r,this),Te(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ce(this._zoomInButton,e),ce(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&le(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&le(this._zoomInButton,e)}});Ge.mergeOptions({zoomControl:!0}),Ge.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Xe,this.addControl(this.zoomControl))}));var Qe=We.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=ie("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=ie("div",e,i)),t.imperial&&(this._iScale=ie("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t);this._updateScale(this._mScale,e<1e3?e+" m":e/1e3+" km",e/t)},_updateImperial:function(t){var e,i,n,r=3.2808399*t;r>5280?(i=this._getRoundNum(e=r/5280),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(r),this._updateScale(this._iScale,n+" ft",n/r))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),Ye=We.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ie("div","leaflet-control-attribution"),Le(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}});Ge.mergeOptions({attributionControl:!0}),Ge.addInitHook((function(){this.options.attributionControl&&(new Ye).addTo(this)})),We.Layers=Ke,We.Zoom=Xe,We.Scale=Qe,We.Attribution=Ye,$e.layers=function(t,e,i){return new Ke(t,e,i)},$e.zoom=function(t){return new Xe(t)},$e.scale=function(t){return new Qe(t)},$e.attribution=function(t){return new Ye(t)};var Je=E.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Je.addTo=function(t,e){return t.addHandler(e,this),this};var ti,ei={Events:P},ii=Ct?"touchstart mousedown":"mousedown",ni={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ri={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},oi=I.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){p(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(Te(this._dragStartTarget,ii,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(oi._dragging===this&&this.finishDrag(),Ee(this._dragStartTarget,ii,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!se(this._element,"leaflet-zoom-anim")&&!(oi._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(oi._dragging=this,this._preventOutline&&be(this._element),_e(),qt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,i=we(this._element);this._startPoint=new M(e.clientX,e.clientY),this._parentScale=Ce(i),Te(document,ri[t.type],this._onMove,this),Te(document,ni[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new M(e.clientX,e.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,De(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ge(this._element).subtract(i),le(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),le(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,T(this._animRequest),this._lastEvent=t,this._animRequest=S(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),me(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in ce(document.body,"leaflet-dragging"),this._lastTarget&&(ce(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ri)Ee(document,ri[t],this._onMove,this),Ee(document,ni[t],this._onUp,this);ve(),Zt(),this._moved&&this._moving&&(T(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,oi._dragging=!1}});function ai(t,e){if(!e||!t.length)return t.slice();var i=e*e;return function(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,function t(e,i,n,r,o){var a,s,l,c=0;for(s=r+1;s<=o-1;s++)(l=hi(e[s],e[r],e[o],!0))>c&&(a=s,c=l);c>n&&(i[a]=1,t(e,i,n,r,a),t(e,i,n,a,o))}(t,n,e,0,i-1);var r,o=[];for(r=0;r<i;r++)n[r]&&o.push(t[r]);return o}(t=function(t,e){for(var i=[t[0]],n=1,r=0,o=t.length;n<o;n++)l=void 0,c=void 0,(l=(s=t[r]).x-(a=t[n]).x)*l+(c=s.y-a.y)*c>e&&(i.push(t[n]),r=n);var a,s,l,c;return r<o-1&&i.push(t[o-1]),i}(t,i),i)}function si(t,e,i){return Math.sqrt(hi(t,e,i,!0))}function li(t,e,i,n,r){var o,a,s,l=n?ti:ui(t,i),c=ui(e,i);for(ti=c;;){if(!(l|c))return[t,e];if(l&c)return!1;s=ui(a=ci(t,e,o=l||c,i,r),i),o===l?(t=a,l=s):(e=a,c=s)}}function ci(t,e,i,n,r){var o,a,s=e.x-t.x,l=e.y-t.y,c=n.min,u=n.max;return 8&i?(o=t.x+s*(u.y-t.y)/l,a=u.y):4&i?(o=t.x+s*(c.y-t.y)/l,a=c.y):2&i?(o=u.x,a=t.y+l*(u.x-t.x)/s):1&i&&(o=c.x,a=t.y+l*(c.x-t.x)/s),new M(o,a,r)}function ui(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function hi(t,e,i,n){var r,o=e.x,a=e.y,s=i.x-o,l=i.y-a,c=s*s+l*l;return c>0&&((r=((t.x-o)*s+(t.y-a)*l)/c)>1?(o=i.x,a=i.y):r>0&&(o+=s*r,a+=l*r)),s=t.x-o,l=t.y-a,n?s*s+l*l:new M(o,a)}function pi(t){return!g(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function di(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),pi(t)}var fi={simplify:ai,pointToSegmentDistance:si,closestPointOnSegment:function(t,e,i){return hi(t,e,i)},clipSegment:li,_getEdgeIntersection:ci,_getBitCode:ui,_sqClosestPointOnSegment:hi,isFlat:pi,_flat:di};function mi(t,e,i){var n,r,o,a,s,l,c,u,h,p=[1,4,2,8];for(r=0,c=t.length;r<c;r++)t[r]._code=ui(t[r],e);for(a=0;a<4;a++){for(u=p[a],n=[],r=0,o=(c=t.length)-1;r<c;o=r++)l=t[o],(s=t[r])._code&u?l._code&u||((h=ci(l,s,u,e,i))._code=ui(h,e),n.push(h)):(l._code&u&&((h=ci(l,s,u,e,i))._code=ui(h,e),n.push(h)),n.push(s));t=n}return t}var gi={clipPolygon:mi},yi={project:function(t){return new M(t.lng,t.lat)},unproject:function(t){return new F(t.y,t.x)},bounds:new O([-180,-90],[180,90])},_i={R:6378137,R_MINOR:6356752.314245179,bounds:new O([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),a=o*Math.sin(n),s=Math.tan(Math.PI/4-n/2)/Math.pow((1-a)/(1+a),o/2);return n=-i*Math.log(Math.max(s,1e-10)),new M(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),a=Math.exp(-t.y/n),s=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=c=Math.PI/2-2*Math.atan(a*e)-s;return new F(s*i,t.x*i/n)}},vi={LonLat:yi,Mercator:_i,SphericalMercator:Z},bi=e({},U,{code:"EPSG:3395",projection:_i,transformation:function(){var t=.5/(Math.PI*_i.R);return G(t,.5,-t,.5)}()}),xi=e({},U,{code:"EPSG:4326",projection:yi,transformation:G(1/180,1,-1/180,.5)}),wi=e({},j,{projection:yi,transformation:G(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});j.Earth=U,j.EPSG3395=bi,j.EPSG3857=$,j.EPSG900913=K,j.EPSG4326=xi,j.Simple=wi;var Ci=I.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[o(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",(function(){e.off(i,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ge.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=o(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=o(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&o(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?g(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=o(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var r=this._zoomBoundLayers[n].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Si=Ci.extend({initialize:function(t,e){var i,n;if(p(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o(t)}}),Ti=Si.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Si.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Si.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new R;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),ki=E.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var r=z(n),o=z("shadow"===e&&i.shadowAnchor||i.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return kt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Ei=ki.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Ei.imagePath||(Ei.imagePath=this._detectIconPath()),(this.options.imagePath||Ei.imagePath)+ki.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ie("div","leaflet-default-icon-path",document.body),e=ee(t,"background-image")||ee(t,"backgroundImage");return document.body.removeChild(t),null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Pi=Je.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new oi(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),le(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ce(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=ge(e._icon),a=i.getPixelBounds(),s=i.getPixelOrigin(),l=D(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));if(!l.contains(o)){var c=z((Math.max(l.max.x,o.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(n);i.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),me(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=S(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(T(this._panRequest),this._panRequest=S(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=ge(e._icon),r=e._map.layerPointToLatLng(n);i&&me(i,n),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){T(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ii=Ci.extend({options:{icon:new Ei,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){p(this,e),this._latlng=N(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=N(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),le(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(le(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ne(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ne(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&me(this._icon,t),this._shadow&&me(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(le(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Pi)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Pi(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&pe(this._icon,t),this._shadow&&pe(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Mi=Ci.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Ai=Mi.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=N(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=N(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Mi.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new O(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),zi=Ai.extend({initialize:function(t,i,n){if("number"==typeof i&&(i=e({},n,{radius:i})),p(this,i),this._latlng=N(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new R(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Mi.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===U.distance){var r=Math.PI/180,o=this._mRadius/U.R/r,a=i.project([e+o,t]),s=i.project([e-o,t]),l=a.add(s).divideBy(2),c=i.unproject(l).lat,u=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(c*r))/(Math.cos(e*r)*Math.cos(c*r)))/r;(isNaN(u)||0===u)&&(u=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-i.project([c,t-u]).x,this._radiusY=l.y-a.y}else{var h=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(h).x}this._updateBounds()}}),Oi=Mi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,r=null,o=hi,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],c=1,u=l.length;c<u;c++){var h=o(t,e=l[c-1],i=l[c],!0);h<n&&(n=h,r=o(t,e,i))}return r&&(r.distance=Math.sqrt(n)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,r,o,a,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,n=0;t<l-1;t++)if((n+=i=(r=s[t]).distanceTo(o=s[t+1]))>e)return this._map.layerPointToLatLng([o.x-(a=(n-e)/i)*(o.x-r.x),o.y-a*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=N(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new R,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return pi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=pi(t),n=0,r=t.length;n<r;n++)i?(e[n]=N(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new O;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new M(t,t);this._pxBounds=new O([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,i){var n,r,o=t.length;if(t[0]instanceof F){for(r=[],n=0;n<o;n++)r[n]=this._map.latLngToLayerPoint(t[n]),i.extend(r[n]);e.push(r)}else for(n=0;n<o;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,i,n,r,o,a,s,l=this._parts;for(e=0,n=0,r=this._rings.length;e<r;e++)for(i=0,o=(s=this._rings[e]).length;i<o-1;i++)(a=li(s[i],s[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(a[0]),a[1]===s[i+1]&&i!==o-2||(l[n].push(a[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=ai(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,r,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,o=this._parts.length;i<o;i++)for(n=0,r=(a=(s=this._parts[i]).length)-1;n<a;r=n++)if((e||0!==n)&&si(t,s[r],s[n])<=l)return!0;return!1}});Oi._flat=di;var Li=Oi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,r,o,a,s,l=this._rings[0],c=l.length;if(!c)return null;for(o=a=s=0,t=0,e=c-1;t<c;e=t++)a+=((i=l[t]).x+(n=l[e]).x)*(r=i.y*n.x-n.y*i.x),s+=(i.y+n.y)*r,o+=3*r;return this._map.layerPointToLatLng(0===o?l[0]:[a/o,s/o])},_convertLatLngs:function(t){var e=Oi.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof F&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Oi.prototype._setLatLngs.call(this,t),pi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return pi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new M(e,e);if(t=new O(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,r=0,o=this._rings.length;r<o;r++)(n=mi(this._rings[r],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,r,o,a,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,s=this._parts.length;r<s;r++)for(o=0,a=(l=(e=this._parts[r]).length)-1;o<l;a=o++)(i=e[o]).y>t.y!=(n=e[a]).y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c||Oi.prototype._containsPoint.call(this,t,!0)}}),Di=Ti.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,r=g(t)?t:t.features;if(r){for(e=0,i=r.length;e<i;e++)((n=r[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=Ri(t,o);return a?(a.feature=qi(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Ri(t,e){var i,n,r,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],c=e&&e.pointToLayer,u=e&&e.coordsToLatLng||Fi;if(!s&&!a)return null;switch(a.type){case"Point":return Bi(c,t,i=u(s),e);case"MultiPoint":for(r=0,o=s.length;r<o;r++)i=u(s[r]),l.push(Bi(c,t,i,e));return new Ti(l);case"LineString":case"MultiLineString":return n=Ni(s,"LineString"===a.type?0:1,u),new Oi(n,e);case"Polygon":case"MultiPolygon":return n=Ni(s,"Polygon"===a.type?1:2,u),new Li(n,e);case"GeometryCollection":for(r=0,o=a.geometries.length;r<o;r++){var h=Ri({geometry:a.geometries[r],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new Ti(l);default:throw new Error("Invalid GeoJSON object.")}}function Bi(t,e,i,n){return t?t(e,i):new Ii(i,n&&n.markersInheritOptions&&n)}function Fi(t){return new F(t[1],t[0],t[2])}function Ni(t,e,i){for(var n,r=[],o=0,a=t.length;o<a;o++)n=e?Ni(t[o],e-1,i):(i||Fi)(t[o]),r.push(n);return r}function Vi(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[c(t.lng,e),c(t.lat,e),c(t.alt,e)]:[c(t.lng,e),c(t.lat,e)]}function ji(t,e,i,n){for(var r=[],o=0,a=t.length;o<a;o++)r.push(e?ji(t[o],e-1,i,n):Vi(t[o],n));return!e&&i&&r.push(r[0]),r}function Ui(t,i){return t.feature?e({},t.feature,{geometry:i}):qi(i)}function qi(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Zi={toGeoJSON:function(t){return Ui(this,{type:"Point",coordinates:Vi(this.getLatLng(),t)})}};function Hi(t,e){return new Di(t,e)}Ii.include(Zi),zi.include(Zi),Ai.include(Zi),Oi.include({toGeoJSON:function(t){var e=!pi(this._latlngs);return Ui(this,{type:(e?"Multi":"")+"LineString",coordinates:ji(this._latlngs,e?1:0,!1,t)})}}),Li.include({toGeoJSON:function(t){var e=!pi(this._latlngs),i=e&&!pi(this._latlngs[0]),n=ji(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),Ui(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Si.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(i){e.push(i.toGeoJSON(t).geometry.coordinates)})),Ui(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,n=[];return this.eachLayer((function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(i)n.push(r.geometry);else{var o=qi(r);"FeatureCollection"===o.type?n.push.apply(n,o.features):n.push(o)}}})),i?Ui(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var Gi=Hi,Wi=Ci.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=B(e),p(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(le(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ne(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&oe(this._image),this},bringToBack:function(){return this._map&&ae(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=B(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ie("img");le(e,"leaflet-image-layer"),this._zoomAnimated&&le(e,"leaflet-zoom-animated"),this.options.className&&le(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=n(this.fire,this,"load"),e.onerror=n(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;fe(this._image,i,e)},_reset:function(){var t=this._image,e=new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();me(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){pe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),$i=Wi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ie("video");if(le(e,"leaflet-image-layer"),this._zoomAnimated&&le(e,"leaflet-zoom-animated"),this.options.className&&le(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=n(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),r=[],o=0;o<i.length;o++)r.push(i[o].src);this._url=i.length>0?r:[e.src]}else{g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var a=0;a<this._url.length;a++){var s=ie("source");s.src=this._url[a],e.appendChild(s)}}}}),Ki=Wi.extend({_initImage:function(){var t=this._image=this._url;le(t,"leaflet-image-layer"),this._zoomAnimated&&le(t,"leaflet-zoom-animated"),this.options.className&&le(t,this.options.className),t.onselectstart=l,t.onmousemove=l}}),Xi=Ci.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){p(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&pe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&pe(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(pe(this._container,0),this._removeTimeout=setTimeout(n(ne,void 0,this._container),200)):ne(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=N(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&oe(this._container),this},bringToBack:function(){return this._map&&ae(this._container),this},_prepareOpen:function(t,e,i){if(e instanceof Ci||(i=e,e=t),e instanceof Ti)for(var n in t._layers){e=t._layers[n];break}if(!i)if(e.getCenter)i=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");i=e.getLatLng()}return this._source=e,this.update(),i},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=z(this.options.offset),i=this._getAnchor();this._zoomAnimated?me(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),Qi=Xi.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Xi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Mi||this._source.on("preclick",ze))},onRemove:function(t){Xi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Mi||this._source.off("preclick",ze))},getEvents:function(){var t=Xi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ie("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=ie("div",t+"-content-wrapper",e);if(this._contentNode=ie("div",t+"-content",i),Le(e),Oe(this._contentNode),Te(e,"contextmenu",ze),this._tipContainer=ie("div",t+"-tip-container",e),this._tip=ie("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=ie("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",Te(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=this.options.maxHeight,r="leaflet-popup-scrolled";n&&t.offsetHeight>n?(e.height=n+"px",le(t,r)):ce(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();me(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(ee(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,r=new M(this._containerLeft,-i-this._containerBottom);r._add(ge(this._container));var o=t.layerPointToContainerPoint(r),a=z(this.options.autoPanPadding),s=z(this.options.autoPanPaddingTopLeft||a),l=z(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),u=0,h=0;o.x+n+l.x>c.x&&(u=o.x+n-c.x+l.x),o.x-u-s.x<0&&(u=o.x-s.x),o.y+i+l.y>c.y&&(h=o.y+i-c.y+l.y),o.y-h-s.y<0&&(h=o.y-s.y),(u||h)&&t.fire("autopanstart").panBy([u,h])}},_onCloseButtonClick:function(t){this._close(),Re(t)},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ge.mergeOptions({closePopupOnClick:!0}),Ge.include({openPopup:function(t,e,i){return t instanceof Qi||(t=new Qi(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Ci.include({bindPopup:function(t,e){return t instanceof Qi?(p(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Qi(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Re(t),e instanceof Mi?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Yi=Xi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Xi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Xi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Xi.prototype.getEvents.call(this);return Ct&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){this._contentNode=this._container=ie("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,n=this._map,r=this._container,o=n.latLngToContainerPoint(n.getCenter()),a=n.layerPointToContainerPoint(t),s=this.options.direction,l=r.offsetWidth,c=r.offsetHeight,u=z(this.options.offset),h=this._getAnchor();"top"===s?(e=l/2,i=c):"bottom"===s?(e=l/2,i=0):"center"===s?(e=l/2,i=c/2):"right"===s?(e=0,i=c/2):"left"===s?(e=l,i=c/2):a.x<o.x?(s="right",e=0,i=c/2):(s="left",e=l+2*(u.x+h.x),i=c/2),t=t.subtract(z(e,i,!0)).add(u).add(h),ce(r,"leaflet-tooltip-right"),ce(r,"leaflet-tooltip-left"),ce(r,"leaflet-tooltip-top"),ce(r,"leaflet-tooltip-bottom"),le(r,"leaflet-tooltip-"+s),me(r,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&pe(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ge.include({openTooltip:function(t,e,i){return t instanceof Yi||(t=new Yi(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Ci.include({bindTooltip:function(t,e){return t instanceof Yi?(p(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Yi(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),Ct&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(le(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ce(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){this._tooltip&&this._map&&this.openTooltip(t.layer||t.target,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var Ji=ki.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(re(e),e.appendChild(i.html)):e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=z(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});ki.Default=Ei;var tn=Ci.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_t,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ne(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(oe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ae(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof M?t:new M(t,t)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),r=0,o=i.length;r<o;r++)e=i[r].style.zIndex,i[r]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!tt){pe(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var r=this._tiles[n];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);pe(r.el,o),o<1?e=!0:(r.active?i=!0:this._onOpaqueTile(r),r.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(T(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=ie("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(ne(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],r=this._map;return n||((n=this._levels[t]={}).el=ie("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,r.getCenter(),r.getZoom()),this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ne(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var r=Math.floor(t/2),o=Math.floor(e/2),a=i-1,s=new M(+r,+o);s.z=+a;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>n&&this._retainParent(r,o,a,n))},_retainChildren:function(t,e,i,n){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new M(r,o);a.z=i+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(r,o,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var r=Math.round(e);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r),n&&!(this.options.updateWhenZooming&&r!==this._tileZoom)||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),r=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();yt?fe(t.el,r,n):me(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*n);return new O(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(n),o=r.getCenter(),a=[],s=this.options.keepBuffer,l=new O(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new M(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(t,i);else{for(var h=r.min.y;h<=r.max.y;h++)for(var p=r.min.x;p<=r.max.x;p++){var d=new M(p,h);if(d.z=this._tileZoom,this._isValidTile(d)){var f=this._tiles[this._tileCoordsToKey(d)];f?f.current=!0:a.push(d)}}if(a.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(p=0;p<a.length;p++)this._addTile(a[p],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return B(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),r=n.add(i);return[e.unproject(n,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new R(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new M(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(ne(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){le(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,tt&&this.options.opacity<1&&pe(t,this.options.opacity),nt&&!rt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),n(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&S(n(this._tileReady,this,t,null,o)),me(o,i),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var r=this._tileCoordsToKey(t);(i=this._tiles[r])&&(i.loaded=+new Date,this._map._fadeAnimated?(pe(i.el,0),T(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(le(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tt||!this._map._fadeAnimated?S(this._pruneTiles,this):setTimeout(n(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new M(this._wrapX?s(t.x,this._wrapX):t.x,this._wrapY?s(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new O(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),en=tn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=p(this,e)).detectRetina&&kt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return Te(i,"load",n(this._tileOnLoad,this,e,i)),Te(i,"error",n(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var i={r:kt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=n),i["-y"]=n}return m(this._url,e(i,this.options))},_tileOnLoad:function(t,e){tt?setTimeout(n(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom;return this.options.zoomReverse&&(t=this.options.maxZoom-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,e.complete||(e.src=_,ne(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return at||e.el.setAttribute("src",_),tn.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==_))return tn.prototype._tileReady.call(this,t,e,i)}});function nn(t,e){return new en(t,e)}var rn=en.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var n=e({},this.defaultWmsParams);for(var r in i)r in this.options||(n[r]=i[r]);var o=(i=p(this,i)).detectRetina&&kt?2:1,a=this.getTileSize();n.width=a.x*o,n.height=a.y*o,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,en.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=D(i.project(e[0]),i.project(e[1])),r=n.min,o=n.max,a=(this._wmsVersion>=1.3&&this._crs===xi?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),s=en.prototype.getTileUrl.call(this,t);return s+d(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,i){return e(this.wmsParams,t),i||this.redraw(),this}});en.WMS=rn,nn.wms=function(t,e){return new rn(t,e)};var on=Ci.extend({options:{padding:.1,tolerance:0},initialize:function(t){p(this,t),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&le(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=ge(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=r.multiplyBy(-i).add(n).add(r).subtract(a);yt?fe(this._container,s,i):me(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new O(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),an=on.extend({getEvents:function(){var t=on.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){on.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Te(t,"mousemove",this._onMouseMove,this),Te(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Te(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){T(this._redrawRequest),delete this._ctx,ne(this._container),Ee(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){on.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=kt?2:1;me(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",kt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){on.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[o(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[o(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,i,n=t.options.dashArray.split(/[, ]+/),r=[];for(i=0;i<n.length;i++){if(e=Number(n[i]),isNaN(e))return;r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||S(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new O,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,r,o,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),i=0;i<s;i++){for(n=0,r=a[i].length;n<r;n++)l[n?"lineTo":"moveTo"]((o=a[i][n]).x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||n)/n;1!==r&&(i.save(),i.scale(1,r)),i.beginPath(),i.arc(e.x,e.y/r,n,0,2*Math.PI,!1),1!==r&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(n)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(i=e);i&&(je(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ce(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,r,o=this._drawFirst;o;o=o.next)(i=o.layer).options.interactive&&i._containsPoint(e)&&(r=i);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(le(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(n((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function sn(t){return Pt?new an(t):null}var ln=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),cn={_initContainer:function(){this._container=ie("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(on.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=ln("shape");le(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=ln("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ne(e),t.removeInteractiveTarget(e),delete this._layers[o(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,r=t._container;r.stroked=!!n.stroke,r.filled=!!n.fill,n.stroke?(e||(e=t._stroke=ln("stroke")),r.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,e.dashStyle=n.dashArray?g(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):"",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(r.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=ln("fill")),r.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(r.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){oe(t._container)},_bringToBack:function(t){ae(t._container)}},un=Mt?ln:X,hn=on.extend({getEvents:function(){var t=on.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=un("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=un("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ne(this._container),Ee(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){on.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),me(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=un("path");t.options.className&&le(e,t.options.className),t.options.interactive&&le(e,"leaflet-interactive"),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ne(t._path),t.removeInteractiveTarget(t._path),delete this._layers[o(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Q(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){oe(t._path)},_bringToBack:function(t){ae(t._path)}});function pn(t){return It||Mt?new hn(t):null}Mt&&hn.include(cn),Ge.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&sn(t)||pn(t)}});var dn=Li.extend({initialize:function(t,e){Li.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=B(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});hn.create=un,hn.pointsToPath=Q,Di.geometryToLayer=Ri,Di.coordsToLatLng=Fi,Di.coordsToLatLngs=Ni,Di.latLngToCoords=Vi,Di.latLngsToCoords=ji,Di.getFeature=Ui,Di.asFeature=qi,Ge.mergeOptions({boxZoom:!0});var fn=Je.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Te(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ne(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),qt(),_e(),this._startPoint=this._map.mouseEventToContainerPoint(t),Te(document,{contextmenu:Re,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ie("div","leaflet-zoom-box",this._container),le(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new O(this._point,this._startPoint),i=e.getSize();me(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(ne(this._box),ce(this._container,"leaflet-crosshair")),Zt(),ve(),Ee(document,{contextmenu:Re,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(n(this._resetState,this),0);var e=new R(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ge.addInitHook("addHandler","boxZoom",fn),Ge.mergeOptions({doubleClickZoom:!0});var mn=Je.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,r=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});Ge.addInitHook("addHandler","doubleClickZoom",mn),Ge.mergeOptions({dragging:!0,inertia:!rt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gn=Je.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new oi(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}le(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ce(this._map._container,"leaflet-grab"),ce(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=B(this._map.options.maxBounds);this._offsetLimit=D(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,r=(n-e+i)%t+e-i,o=(n+e+i)%t-e-i,a=Math.abs(r+i)<Math.abs(o+i)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=i.easeLinearity,a=r.multiplyBy(o/((this._lastTime-this._times[0])/1e3)),s=a.distanceTo([0,0]),l=Math.min(i.inertiaMaxSpeed,s),c=a.multiplyBy(l/s),u=l/(i.inertiaDeceleration*o),h=c.multiplyBy(-u/2).round();h.x||h.y?(h=e._limitOffset(h,e.options.maxBounds),S((function(){e.panBy(h,{duration:u,easeLinearity:o,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});Ge.addInitHook("addHandler","dragging",gn),Ge.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yn=Je.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Te(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ee(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},r=this.keyCodes;for(e=0,i=r.left.length;e<i;e++)n[r.left[e]]=[-1*t,0];for(e=0,i=r.right.length;e<i;e++)n[r.right[e]]=[t,0];for(e=0,i=r.down.length;e<i;e++)n[r.down[e]]=[0,t];for(e=0,i=r.up.length;e<i;e++)n[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},r=this.keyCodes;for(e=0,i=r.zoomIn.length;e<i;e++)n[r.zoomIn[e]]=t;for(e=0,i=r.zoomOut.length;e<i;e++)n[r.zoomOut[e]]=-t},_addHooks:function(){Te(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys)n._panAnim&&n._panAnim._inProgress||(e=this._panKeys[i],t.shiftKey&&(e=z(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}Re(t)}}});Ge.addInitHook("addHandler","keyboard",yn),Ge.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _n=Je.extend({addHooks:function(){Te(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ne(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n(this._performZoom,this),r),Re(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,r=i?Math.ceil(n/i)*i:n,o=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,o&&("center"===t.options.scrollWheelZoom?t.setZoom(e+o):t.setZoomAround(this._lastMousePos,e+o))}});Ge.addInitHook("addHandler","scrollWheelZoom",_n),Ge.mergeOptions({tap:!0,tapTolerance:15});var vn=Je.extend({addHooks:function(){Te(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(De(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new M(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&le(i,"leaflet-active"),this._holdTimeout=setTimeout(n((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Te(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Ee(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&ce(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new M(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}});!Ct||wt&&!ut||Ge.addInitHook("addHandler","tap",vn),Ge.mergeOptions({touchZoom:Ct&&!rt,bounceAtZoomLimits:!0});var bn=Je.extend({addHooks:function(){le(this._map._container,"leaflet-touch-zoom"),Te(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ce(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Te(document,"touchmove",this._onTouchMove,this),Te(document,"touchend",this._onTouchEnd,this),De(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=i._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),T(this._animRequest);var s=n(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=S(s,this,!0),De(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,T(this._animRequest),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ge.addInitHook("addHandler","touchZoom",bn),Ge.BoxZoom=fn,Ge.DoubleClickZoom=mn,Ge.Drag=gn,Ge.Keyboard=yn,Ge.ScrollWheelZoom=_n,Ge.Tap=vn,Ge.TouchZoom=bn,t.version="1.7.1",t.Control=We,t.control=$e,t.Browser=zt,t.Evented=I,t.Mixin=ei,t.Util=k,t.Class=E,t.Handler=Je,t.extend=e,t.bind=n,t.stamp=o,t.setOptions=p,t.DomEvent=Ze,t.DomUtil=Se,t.PosAnimation=He,t.Draggable=oi,t.LineUtil=fi,t.PolyUtil=gi,t.Point=M,t.point=z,t.Bounds=O,t.bounds=D,t.Transformation=H,t.transformation=G,t.Projection=vi,t.LatLng=F,t.latLng=N,t.LatLngBounds=R,t.latLngBounds=B,t.CRS=j,t.GeoJSON=Di,t.geoJSON=Hi,t.geoJson=Gi,t.Layer=Ci,t.LayerGroup=Si,t.layerGroup=function(t,e){return new Si(t,e)},t.FeatureGroup=Ti,t.featureGroup=function(t,e){return new Ti(t,e)},t.ImageOverlay=Wi,t.imageOverlay=function(t,e,i){return new Wi(t,e,i)},t.VideoOverlay=$i,t.videoOverlay=function(t,e,i){return new $i(t,e,i)},t.SVGOverlay=Ki,t.svgOverlay=function(t,e,i){return new Ki(t,e,i)},t.DivOverlay=Xi,t.Popup=Qi,t.popup=function(t,e){return new Qi(t,e)},t.Tooltip=Yi,t.tooltip=function(t,e){return new Yi(t,e)},t.Icon=ki,t.icon=function(t){return new ki(t)},t.DivIcon=Ji,t.divIcon=function(t){return new Ji(t)},t.Marker=Ii,t.marker=function(t,e){return new Ii(t,e)},t.TileLayer=en,t.tileLayer=nn,t.GridLayer=tn,t.gridLayer=function(t){return new tn(t)},t.SVG=hn,t.svg=pn,t.Renderer=on,t.Canvas=an,t.canvas=sn,t.Path=Mi,t.CircleMarker=Ai,t.circleMarker=function(t,e){return new Ai(t,e)},t.Circle=zi,t.circle=function(t,e,i){return new zi(t,e,i)},t.Polyline=Oi,t.polyline=function(t,e){return new Oi(t,e)},t.Polygon=Li,t.polygon=function(t,e){return new Li(t,e)},t.Rectangle=dn,t.rectangle=function(t,e){return new dn(t,e)},t.Map=Ge,t.map=function(t,e){return new Ge(t,e)};var xn=window.L;t.noConflict=function(){return window.L=xn,this},window.L=t}(e)},"4ZJM":function(t,e,i){t.exports=function(){"use strict";var t,e,i;function n(n,r){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),i=r(a),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=r;else t=r}return n(0,(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var i=n;function n(t,e,i,n){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=i,this.p2y=n}n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var i,n,r,o,a;for(void 0===e&&(e=1e-6),r=t,a=0;a<8;a++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=o/s}if((r=t)<(i=0))return i;if(r>(n=1))return n;for(;i<n;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;t>o?i=r:n=r,r=.5*(n-i)+i}return r},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var r=o;function o(t,e){this.x=t,this.y=e}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=n,this},_rotateAround:function(t,e){var i=Math.cos(t),n=Math.sin(t),r=e.y+n*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-n*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var a="undefined"!=typeof self?self:{},s=Math.pow(2,53)-1;function l(t,e,n,r){var o=new i(t,e,n,r);return function(t){return o.solve(t)}}var c=l(.25,.1,.25,1);function u(t,e,i){return Math.min(i,Math.max(e,t))}function h(t,e,i){var n=i-e,r=((t-e)%n+n)%n+e;return r===e?i:r}function p(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var n=0,r=e;n<r.length;n+=1){var o=r[n];for(var a in o)t[a]=o[a]}return t}var d=1;function f(){return d++}function m(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function g(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function y(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function _(t,e){return-1!==t.indexOf(e,t.length-e.length)}function v(t,e,i){var n={};for(var r in t)n[r]=e.call(i||this,t[r],r,t);return n}function b(t,e,i){var n={};for(var r in t)e.call(i||this,t[r],r,t)&&(n[r]=t[r]);return n}function x(t){return Array.isArray(t)?t.map(x):"object"==typeof t&&t?v(t,x):t}var w={};function C(t){w[t]||("undefined"!=typeof console&&console.warn(t),w[t]=!0)}function S(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function T(t){for(var e=0,i=0,n=t.length,r=n-1,o=void 0,a=void 0;i<n;r=i++)e+=((a=t[r]).x-(o=t[i]).x)*(o.y+a.y);return e}function k(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function E(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,i,n,r){var o=n||r;return e[i]=!o||o.toLowerCase(),""})),e["max-age"]){var i=parseInt(e["max-age"],10);isNaN(i)?delete e["max-age"]:e["max-age"]=i}return e}var P=null;function I(t){if(null==P){var e=t.navigator?t.navigator.userAgent:null;P=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return P}function M(t){try{var e=a[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var A,z,O,L,D=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now.bind(Date),R=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame,B=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.msCancelAnimationFrame,F={now:D,frame:function(t){var e=R(t);return{cancel:function(){return B(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var i=a.document.createElement("canvas"),n=i.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return A||(A=a.document.createElement("a")),A.href=t,A.href},hardwareConcurrency:a.navigator&&a.navigator.hardwareConcurrency||4,get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==z&&(z=a.matchMedia("(prefers-reduced-motion: reduce)")),z.matches)}},N={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},V={supported:!1,testSupport:function(t){!j&&L&&(U?q(t):O=t)}},j=!1,U=!1;function q(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,L),t.isContextLost())return;V.supported=!0}catch(t){}t.deleteTexture(e),j=!0}a.document&&((L=a.document.createElement("img")).onload=function(){O&&q(O),O=null,U=!0},L.onerror=function(){j=!0,O=null},L.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Z="01",H=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function G(t){return 0===t.indexOf("mapbox:")}H.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Z,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},H.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},H.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},H.prototype.normalizeStyleURL=function(t,e){if(!G(t))return t;var i=X(t);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},H.prototype.normalizeGlyphsURL=function(t,e){if(!G(t))return t;var i=X(t);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},H.prototype.normalizeSourceURL=function(t,e){if(!G(t))return t;var i=X(t);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||e)},H.prototype.normalizeSpriteURL=function(t,e,i,n){var r=X(t);return G(t)?(r.path="/styles/v1"+r.path+"/sprite"+e+i,this._makeAPIURL(r,this._customAccessToken||n)):(r.path+=""+e+i,Q(r))},H.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!G(t))return t;var i=X(t);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(F.devicePixelRatio>=2||512===e?"@2x":"")+(V.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var n=this._customAccessToken||function(t){for(var e=0,i=t;e<i.length;e+=1){var n=i[e].match(/^access_token=(.*)$/);if(n)return n[1]}return null}(i.params)||N.ACCESS_TOKEN;return N.REQUIRE_ACCESS_TOKEN&&n&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,n)},H.prototype.canonicalizeTileURL=function(t,e){var i=X(t);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return t;var n="mapbox://tiles/";n+=i.path.replace("/v4/","");var r=i.params;return e&&(r=r.filter((function(t){return!t.match(/^access_token=/)}))),r.length&&(n+="?"+r.join("&")),n},H.prototype.canonicalizeTileset=function(t,e){for(var i=!!e&&G(e),n=[],r=0,o=t.tiles||[];r<o.length;r+=1){var a=o[r];$(a)?n.push(this.canonicalizeTileURL(a,i)):n.push(a)}return n},H.prototype._makeAPIURL=function(t,e){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=X(N.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"http"===t.protocol){var r=t.params.indexOf("secure");r>=0&&t.params.splice(r,1)}if("/"!==n.path&&(t.path=""+n.path+t.path),!N.REQUIRE_ACCESS_TOKEN)return Q(t);if(!(e=e||N.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),Q(t)};var W=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function $(t){return W.test(t)}var K=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function X(t){var e=t.match(K);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Q(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function Y(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var J=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};J.prototype.getStorageKey=function(t){var e,i=Y(N.ACCESS_TOKEN);return e=i&&i.u?a.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):N.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},J.prototype.fetchEventData=function(){var t=M("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{var n=a.localStorage.getItem(e);n&&(this.eventData=JSON.parse(n));var r=a.localStorage.getItem(i);r&&(this.anonId=r)}catch(t){C("Unable to read from LocalStorage")}},J.prototype.saveEventData=function(){var t=M("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{a.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){C("Unable to write to LocalStorage")}},J.prototype.processRequests=function(t){},J.prototype.postEvent=function(t,e,i,n){var r=this;if(N.EVENTS_URL){var o=X(N.EVENTS_URL);o.params.push("access_token="+(n||N.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.0",skuId:Z,userId:this.anonId},s=e?p(a,e):a,l={url:Q(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=xt(l,(function(t){r.pendingRequest=null,i(t),r.saveEventData(),r.processRequests(n)}))}},J.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var tt,et,it=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,i,n){this.skuToken=i,(N.EVENTS_URL&&n||N.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return G(t)||$(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},n)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var i=this.queue.shift(),n=i.id,r=i.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),g(this.anonId)||(this.anonId=m()),this.postEvent(r,{skuToken:this.skuToken},(function(t){t||n&&(e.success[n]=!0)}),t))}},e}(J),nt=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){N.EVENTS_URL&&N.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return G(t)||$(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var i=Y(N.ACCESS_TOKEN),n=i?i.u:N.ACCESS_TOKEN,r=n!==this.eventData.tokenU;g(this.anonId)||(this.anonId=m(),r=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),l=(o-this.eventData.lastSuccess)/864e5;r=r||l>=1||l<-1||a.getDate()!==s.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=n)}),t)}},e}(J)),rt=nt.postTurnstileEvent.bind(nt),ot=new it,at=ot.postMapLoadEvent.bind(ot),st=500,lt=50;function ct(){a.caches&&!tt&&(tt=a.caches.open("mapbox-tiles"))}function ut(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var ht,pt=1/0;function dt(){return null==ht&&(ht=a.OffscreenCanvas&&new a.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof a.createImageBitmap),ht}var ft={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ft);var mt,gt,yt=function(t){function e(e,i,n){401===i&&$(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=i,this.url=n,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),_t=k()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===a.location.protocol?a.parent:a).location.href},vt=function(t,e){if(!(/^file:/.test(i=t.url)||/^file:/.test(_t())&&!/^\w+:/.test(i))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(t,e){var i,n=new a.AbortController,r=new a.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:_t(),signal:n.signal}),o=!1,s=!1,l=(i=r.url).indexOf("sku=")>0&&$(i);"json"===t.type&&r.headers.set("Accept","application/json");var c=function(i,n,o){if(!s){if(i&&"SecurityError"!==i.message&&C(i),n&&o)return u(n);var c=Date.now();a.fetch(r).then((function(i){if(i.ok){var n=l?i.clone():null;return u(i,n,c)}return e(new yt(i.statusText,i.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},u=function(i,n,l){("arrayBuffer"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text()).then((function(t){s||(n&&l&&function(t,e,i){if(ct(),tt){var n={status:e.status,statusText:e.statusText,headers:new a.Headers};e.headers.forEach((function(t,e){return n.headers.set(e,t)}));var r=E(e.headers.get("Cache-Control")||"");r["no-store"]||(r["max-age"]&&n.headers.set("Expires",new Date(i+1e3*r["max-age"]).toUTCString()),new Date(n.headers.get("Expires")).getTime()-i<42e4||function(t,e){if(void 0===et)try{new Response(new ReadableStream),et=!0}catch(t){et=!1}et?e(t.body):t.blob().then(e)}(e,(function(e){var i=new a.Response(e,n);ct(),tt&&tt.then((function(e){return e.put(ut(t.url),i)})).catch((function(t){return C(t.message)}))})))}}(r,n,l),o=!0,e(null,t,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((function(t){s||e(new Error(t.message))}))};return l?function(t,e){if(ct(),!tt)return e(null);var i=ut(t.url);tt.then((function(t){t.match(i).then((function(n){var r=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),i=E(t.headers.get("Cache-Control")||"");return e>Date.now()&&!i["no-cache"]}(n);t.delete(i),r&&t.put(i,n.clone()),e(null,n,r)})).catch(e)})).catch(e)}(r,c):c(null,null),{cancel:function(){s=!0,o||n.abort()}}}(t,e);if(k()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(t,e){var i=new a.XMLHttpRequest;for(var n in i.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(i.responseType="arraybuffer"),t.headers)i.setRequestHeader(n,t.headers[n]);return"json"===t.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===t.credentials,i.onerror=function(){e(new Error(i.statusText))},i.onload=function(){if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){var n=i.response;if("json"===t.type)try{n=JSON.parse(i.response)}catch(t){return e(t)}e(null,n,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else e(new yt(i.statusText,i.status,t.url))},i.send(t.body),{cancel:function(){return i.abort()}}}(t,e)},bt=function(t,e){return vt(p(t,{type:"arrayBuffer"}),e)},xt=function(t,e){return vt(p(t,{method:"POST"}),e)},wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";mt=[],gt=0;var Ct=function(t,e){if(V.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),gt>=N.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return mt.push(i),i}gt++;var n=!1,r=function(){if(!n)for(n=!0,gt--;mt.length&&gt<N.MAX_PARALLEL_IMAGE_REQUESTS;){var t=mt.shift();t.cancelled||(t.cancel=Ct(t.requestParameters,t.callback).cancel)}},o=bt(t,(function(t,i,n,o){r(),t?e(t):i&&(dt()?function(t,e){var i=new a.Blob([new Uint8Array(t)],{type:"image/png"});a.createImageBitmap(i).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(i,e):function(t,e,i,n){var r=new a.Image,o=a.URL;r.onload=function(){e(null,r),o.revokeObjectURL(r.src),r.onload=null,r.src=wt},r.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new a.Blob([new Uint8Array(t)],{type:"image/png"});r.cacheControl=i,r.expires=n,r.src=t.byteLength?o.createObjectURL(s):wt}(i,e,n,o))}));return{cancel:function(){o.cancel(),r()}}};function St(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function Tt(t,e,i){if(i&&i[t]){var n=i[t].indexOf(e);-1!==n&&i[t].splice(n,1)}}var kt=function(t,e){void 0===e&&(e={}),p(this,e),this.type=t},Et=function(t){function e(e,i){void 0===i&&(i={}),t.call(this,"error",p({error:e},i))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(kt),Pt=function(){};Pt.prototype.on=function(t,e){return this._listeners=this._listeners||{},St(t,e,this._listeners),this},Pt.prototype.off=function(t,e){return Tt(t,e,this._listeners),Tt(t,e,this._oneTimeListeners),this},Pt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},St(t,e,this._oneTimeListeners),this},Pt.prototype.fire=function(t,e){"string"==typeof t&&(t=new kt(t,e||{}));var i=t.type;if(this.listens(i)){t.target=this;for(var n=0,r=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];n<r.length;n+=1)r[n].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];o<a.length;o+=1){var s=a[o];Tt(i,s,this._oneTimeListeners),s.call(this,t)}var l=this._eventedParent;l&&(p(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof Et&&console.error(t.error);return this},Pt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Pt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var It={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Mt=function(t,e,i,n){this.message=(t?t+": ":"")+i,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)};function At(t){var e=t.value;return e?[new Mt(t.key,e,"constants have been deprecated as of v8")]:[]}function zt(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var n=0,r=e;n<r.length;n+=1){var o=r[n];for(var a in o)t[a]=o[a]}return t}function Ot(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Lt(t){if(Array.isArray(t))return t.map(Lt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var i in t)e[i]=Lt(t[i]);return e}return Ot(t)}var Dt=function(t){function e(e,i){t.call(this,i),this.message=i,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Rt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var i=0,n=e;i<n.length;i+=1){var r=n[i];this.bindings[r[0]]=r[1]}};Rt.prototype.concat=function(t){return new Rt(this,t)},Rt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Rt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Bt={kind:"null"},Ft={kind:"number"},Nt={kind:"string"},Vt={kind:"boolean"},jt={kind:"color"},Ut={kind:"object"},qt={kind:"value"},Zt={kind:"collator"},Ht={kind:"formatted"},Gt={kind:"resolvedImage"};function Wt(t,e){return{kind:"array",itemType:t,N:e}}function $t(t){if("array"===t.kind){var e=$t(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Kt=[Bt,Ft,Nt,Vt,jt,Ht,Ut,Wt(qt),Gt];function Xt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Xt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var i=0,n=Kt;i<n.length;i+=1)if(!Xt(n[i],e))return null}return"Expected "+$t(t)+" but found "+$t(e)+" instead."}function Qt(t,e){return e.some((function(e){return e.kind===t.kind}))}function Yt(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var Jt=e((function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function a(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in i)return i[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=s.indexOf("("),c=s.indexOf(")");if(-1!==l&&c+1===s.length){var u=s.substr(0,l),h=s.substr(l+1,c-(l+1)).split(","),p=1;switch(u){case"rgba":if(4!==h.length)return null;p=o(h.pop());case"rgb":return 3!==h.length?null:[r(h[0]),r(h[1]),r(h[2]),p];case"hsla":if(4!==h.length)return null;p=o(h.pop());case"hsl":if(3!==h.length)return null;var d=(parseFloat(h[0])%360+360)%360/360,f=o(h[1]),m=o(h[2]),g=m<=.5?m*(f+1):m+f-m*f,y=2*m-g;return[n(255*a(y,g,d+1/3)),n(255*a(y,g,d)),n(255*a(y,g,d-1/3)),p];default:return null}}return null}}catch(t){}})).parseCSSColor,te=function(t,e,i,n){void 0===n&&(n=1),this.r=t,this.g=e,this.b=i,this.a=n};te.parse=function(t){if(t){if(t instanceof te)return t;if("string"==typeof t){var e=Jt(t);if(e)return new te(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},te.prototype.toString=function(){var t=this.toArray(),e=t[1],i=t[2],n=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(i)+","+n+")"},te.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},te.black=new te(0,0,0,1),te.white=new te(1,1,1,1),te.transparent=new te(0,0,0,0),te.red=new te(1,0,0,1);var ee=function(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ee.prototype.compare=function(t,e){return this.collator.compare(t,e)},ee.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ie=function(t,e,i,n,r){this.text=t,this.image=e,this.scale=i,this.fontStack=n,this.textColor=r},ne=function(t){this.sections=t};ne.fromString=function(t){return new ne([new ie(t,null,null,null,null)])},ne.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},ne.factory=function(t){return t instanceof ne?t:ne.fromString(t)},ne.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},ne.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var n=i[e];if(n.image)t.push(["image",n.image.name]);else{t.push(n.text);var r={};n.fontStack&&(r["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(r["font-scale"]=n.scale),n.textColor&&(r["text-color"]=["rgba"].concat(n.textColor.toArray())),t.push(r)}}return t};var re=function(t){this.name=t.name,this.available=t.available};function oe(t,e,i,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[t,e,i,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[t,e,i,n]:[t,e,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ae(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof te)return!0;if(t instanceof ee)return!0;if(t instanceof ne)return!0;if(t instanceof re)return!0;if(Array.isArray(t)){for(var e=0,i=t;e<i.length;e+=1)if(!ae(i[e]))return!1;return!0}if("object"==typeof t){for(var n in t)if(!ae(t[n]))return!1;return!0}return!1}function se(t){if(null===t)return Bt;if("string"==typeof t)return Nt;if("boolean"==typeof t)return Vt;if("number"==typeof t)return Ft;if(t instanceof te)return jt;if(t instanceof ee)return Zt;if(t instanceof ne)return Ht;if(t instanceof re)return Gt;if(Array.isArray(t)){for(var e,i=t.length,n=0,r=t;n<r.length;n+=1){var o=se(r[n]);if(e){if(e===o)continue;e=qt;break}e=o}return Wt(e||qt,i)}return Ut}function le(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof te||t instanceof ne||t instanceof re?t.toString():JSON.stringify(t)}re.prototype.toString=function(){return this.name},re.fromString=function(t){return t?new re({name:t,available:!1}):null},re.prototype.serialize=function(){return["image",this.name]};var ce=function(t,e){this.type=t,this.value=e};ce.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!ae(t[1]))return e.error("invalid value");var i=t[1],n=se(i),r=e.expectedType;return"array"!==n.kind||0!==n.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(n=r),new ce(n,i)},ce.prototype.evaluate=function(){return this.value},ce.prototype.eachChild=function(){},ce.prototype.outputDefined=function(){return!0},ce.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof te?["rgba"].concat(this.value.toArray()):this.value instanceof ne?this.value.serialize():this.value};var ue=function(t){this.name="ExpressionEvaluationError",this.message=t};ue.prototype.toJSON=function(){return this.message};var he={string:Nt,number:Ft,boolean:Vt,object:Ut},pe=function(t,e){this.type=t,this.args=e};pe.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i,n=1,r=t[0];if("array"===r){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in he)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=he[s],n++}else o=qt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],n++}i=Wt(o,a)}else i=he[r];for(var l=[];n<t.length;n++){var c=e.parse(t[n],n,qt);if(!c)return null;l.push(c)}return new pe(i,l)},pe.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!Xt(this.type,se(i)))return i;if(e===this.args.length-1)throw new ue("Expected value to be of type "+$t(this.type)+", but found "+$t(se(i))+" instead.")}return null},pe.prototype.eachChild=function(t){this.args.forEach(t)},pe.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},pe.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);var n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var de=function(t){this.type=Ht,this.sections=t};de.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");for(var n=[],r=!1,o=1;o<=t.length-1;++o){var a=t[o];if(r&&"object"==typeof a&&!Array.isArray(a)){r=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,Ft)))return null;var l=null;if(a["text-font"]&&!(l=e.parse(a["text-font"],1,Wt(Nt))))return null;var c=null;if(a["text-color"]&&!(c=e.parse(a["text-color"],1,jt)))return null;var u=n[n.length-1];u.scale=s,u.font=l,u.textColor=c}else{var h=e.parse(t[o],1,qt);if(!h)return null;var p=h.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,n.push({content:h,scale:null,font:null,textColor:null})}}return new de(n)},de.prototype.evaluate=function(t){return new ne(this.sections.map((function(e){var i=e.content.evaluate(t);return se(i)===Gt?new ie("",i,null,null,null):new ie(le(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},de.prototype.eachChild=function(t){for(var e=0,i=this.sections;e<i.length;e+=1){var n=i[e];t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}},de.prototype.outputDefined=function(){return!1},de.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var n=i[e];t.push(n.content.serialize());var r={};n.scale&&(r["font-scale"]=n.scale.serialize()),n.font&&(r["text-font"]=n.font.serialize()),n.textColor&&(r["text-color"]=n.textColor.serialize()),t.push(r)}return t};var fe=function(t){this.type=Gt,this.input=t};fe.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Nt);return i?new fe(i):e.error("No image name provided.")},fe.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=re.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i},fe.prototype.eachChild=function(t){t(this.input)},fe.prototype.outputDefined=function(){return!1},fe.prototype.serialize=function(){return["image",this.input.serialize()]};var me={"to-boolean":Vt,"to-color":jt,"to-number":Ft,"to-string":Nt},ge=function(t,e){this.type=t,this.args=e};ge.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");for(var n=me[i],r=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,qt);if(!a)return null;r.push(a)}return new ge(n,r)},ge.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,i,n=0,r=this.args;n<r.length;n+=1){if(i=null,(e=r[n].evaluate(t))instanceof te)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(i=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":oe(e[0],e[1],e[2],e[3])))return new te(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ue(i||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(t)))return 0;var c=Number(a);if(!isNaN(c))return c}throw new ue("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?ne.fromString(le(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?re.fromString(le(this.args[0].evaluate(t))):le(this.args[0].evaluate(t))},ge.prototype.eachChild=function(t){this.args.forEach(t)},ge.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ge.prototype.serialize=function(){if("formatted"===this.type.kind)return new de([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new fe(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var ye=["Unknown","Point","LineString","Polygon"],_e=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};_e.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},_e.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ye[this.feature.type]:this.feature.type:null},_e.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},_e.prototype.canonicalID=function(){return this.canonical},_e.prototype.properties=function(){return this.feature&&this.feature.properties||{}},_e.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=te.parse(t)),e};var ve=function(t,e,i,n){this.name=t,this.type=e,this._evaluate=i,this.args=n};ve.prototype.evaluate=function(t){return this._evaluate(t,this.args)},ve.prototype.eachChild=function(t){this.args.forEach(t)},ve.prototype.outputDefined=function(){return!1},ve.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},ve.parse=function(t,e){var i,n=t[0],r=ve.definitions[n];if(!r)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(r)?r[0]:r.type,a=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,s=a.filter((function(e){var i=e[0];return!Array.isArray(i)||i.length===t.length-1})),l=null,c=0,u=s;c<u.length;c+=1){var h=u[c],p=h[0],d=h[1];l=new je(e.registry,e.path,null,e.scope);for(var f=[],m=!1,g=1;g<t.length;g++){var y=t[g],_=Array.isArray(p)?p[g-1]:p.type,v=l.parse(y,1+f.length,_);if(!v){m=!0;break}f.push(v)}if(!m)if(Array.isArray(p)&&p.length!==f.length)l.error("Expected "+p.length+" arguments, but found "+f.length+" instead.");else{for(var b=0;b<f.length;b++){var x=Array.isArray(p)?p[b]:p.type,w=f[b];l.concat(b+1).checkSubtype(x,w.type)}if(0===l.errors.length)return new ve(n,o,d,f)}}if(1===s.length)(i=e.errors).push.apply(i,l.errors);else{for(var C=(s.length?s:a).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map($t).join(", ")+")":"("+$t(e.type)+"...)"})).join(" | "),S=[],T=1;T<t.length;T++){var k=e.parse(t[T],1+S.length);if(!k)return null;S.push($t(k.type))}e.error("Expected arguments of type "+C+", but found ("+S.join(", ")+") instead.")}return null},ve.register=function(t,e){for(var i in ve.definitions=e,e)t[i]=ve};var be=function(t,e,i){this.type=Zt,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e};function xe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function we(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Ce(t,e){var i=(180+t[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,r=Math.pow(2,e.z);return[Math.round(i*r*8192),Math.round(n*r*8192)]}function Se(t,e,i){return e[1]>t[1]!=i[1]>t[1]&&t[0]<(i[0]-e[0])*(t[1]-e[1])/(i[1]-e[1])+e[0]}function Te(t,e){for(var i,n,r,o,a,s,l,c=!1,u=0,h=e.length;u<h;u++)for(var p=e[u],d=0,f=p.length;d<f-1;d++){if((o=(i=t)[0]-(n=p[d])[0])*(l=i[1]-(r=p[d+1])[1])-(s=i[0]-r[0])*(a=i[1]-n[1])==0&&o*s<=0&&a*l<=0)return!1;Se(t,p[d],p[d+1])&&(c=!c)}return c}function ke(t,e){for(var i=0;i<e.length;i++)if(Te(t,e[i]))return!0;return!1}function Ee(t,e,i,n){var r=n[0]-i[0],o=n[1]-i[1],a=(t[0]-i[0])*o-r*(t[1]-i[1]),s=(e[0]-i[0])*o-r*(e[1]-i[1]);return a>0&&s<0||a<0&&s>0}function Pe(t,e,i){for(var n=0,r=i;n<r.length;n+=1)for(var o=r[n],a=0;a<o.length-1;++a)if(0!=(h=[(u=o[a+1])[0]-(c=o[a])[0],u[1]-c[1]])[0]*(p=[(l=e)[0]-(s=t)[0],l[1]-s[1]])[1]-h[1]*p[0]&&Ee(s,l,c,u)&&Ee(c,u,s,l))return!0;var s,l,c,u,h,p;return!1}function Ie(t,e){for(var i=0;i<t.length;++i)if(!Te(t[i],e))return!1;for(var n=0;n<t.length-1;++n)if(Pe(t[n],t[n+1],e))return!1;return!0}function Me(t,e){for(var i=0;i<e.length;i++)if(Ie(t,e[i]))return!0;return!1}function Ae(t,e,i){for(var n=[],r=0;r<t.length;r++){for(var o=[],a=0;a<t[r].length;a++){var s=Ce(t[r][a],i);xe(e,s),o.push(s)}n.push(o)}return n}function ze(t,e,i){for(var n=[],r=0;r<t.length;r++){var o=Ae(t[r],e,i);n.push(o)}return n}function Oe(t,e,i,n){if(t[0]<i[0]||t[0]>i[2]){var r=.5*n,o=t[0]-i[0]>r?-n:i[0]-t[0]>r?n:0;0===o&&(o=t[0]-i[2]>r?-n:i[2]-t[0]>r?n:0),t[0]+=o}xe(e,t)}function Le(t,e,i,n){for(var r=8192*Math.pow(2,n.z),o=[8192*n.x,8192*n.y],a=[],s=0,l=t;s<l.length;s+=1)for(var c=0,u=l[s];c<u.length;c+=1){var h=u[c],p=[h.x+o[0],h.y+o[1]];Oe(p,e,i,r),a.push(p)}return a}function De(t,e,i,n){for(var r,o=8192*Math.pow(2,n.z),a=[8192*n.x,8192*n.y],s=[],l=0,c=t;l<c.length;l+=1){for(var u=[],h=0,p=c[l];h<p.length;h+=1){var d=p[h],f=[d.x+a[0],d.y+a[1]];xe(e,f),u.push(f)}s.push(u)}if(e[2]-e[0]<=o/2){(r=e)[0]=r[1]=1/0,r[2]=r[3]=-1/0;for(var m=0,g=s;m<g.length;m+=1)for(var y=0,_=g[m];y<_.length;y+=1)Oe(_[y],e,i,o)}return s}be.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Vt);if(!n)return null;var r=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Vt);if(!r)return null;var o=null;return i.locale&&!(o=e.parse(i.locale,1,Nt))?null:new be(n,r,o)},be.prototype.evaluate=function(t){return new ee(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},be.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},be.prototype.outputDefined=function(){return!1},be.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Re=function(t,e){this.type=Vt,this.geojson=t,this.geometries=e};function Be(t){if(t instanceof ve){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Re)return!1;var e=!0;return t.eachChild((function(t){e&&!Be(t)&&(e=!1)})),e}function Fe(t){if(t instanceof ve&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!Fe(t)&&(e=!1)})),e}function Ne(t,e){if(t instanceof ve&&e.indexOf(t.name)>=0)return!1;var i=!0;return t.eachChild((function(t){i&&!Ne(t,e)&&(i=!1)})),i}Re.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(ae(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var n=0;n<i.features.length;++n){var r=i.features[n].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new Re(i,i.features[n].geometry)}else if("Feature"===i.type){var o=i.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Re(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new Re(i,i)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Re.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){var o=Ae(e.coordinates,n,r),a=Le(t.geometry(),i,n,r);if(!we(i,n))return!1;for(var s=0,l=a;s<l.length;s+=1)if(!Te(l[s],o))return!1}if("MultiPolygon"===e.type){var c=ze(e.coordinates,n,r),u=Le(t.geometry(),i,n,r);if(!we(i,n))return!1;for(var h=0,p=u;h<p.length;h+=1)if(!ke(p[h],c))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){var o=Ae(e.coordinates,n,r),a=De(t.geometry(),i,n,r);if(!we(i,n))return!1;for(var s=0,l=a;s<l.length;s+=1)if(!Ie(l[s],o))return!1}if("MultiPolygon"===e.type){var c=ze(e.coordinates,n,r),u=De(t.geometry(),i,n,r);if(!we(i,n))return!1;for(var h=0,p=u;h<p.length;h+=1)if(!Me(p[h],c))return!1}return!0}(t,this.geometries)}return!1},Re.prototype.eachChild=function(){},Re.prototype.outputDefined=function(){return!0},Re.prototype.serialize=function(){return["within",this.geojson]};var Ve=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Ve.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var i=t[1];return e.scope.has(i)?new Ve(i,e.scope.get(i)):e.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Ve.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Ve.prototype.eachChild=function(){},Ve.prototype.outputDefined=function(){return!1},Ve.prototype.serialize=function(){return["var",this.name]};var je=function(t,e,i,n,r){void 0===e&&(e=[]),void 0===n&&(n=new Rt),void 0===r&&(r=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=n,this.errors=r,this.expectedType=i};function Ue(t,e){for(var i,n=t.length-1,r=0,o=n,a=0;r<=o;)if((i=t[a=Math.floor((r+o)/2)])<=e){if(a===n||e<t[a+1])return a;r=a+1}else{if(!(i>e))throw new ue("Input is not a number.");o=a-1}return 0}je.prototype.parse=function(t,e,i,n,r){return void 0===r&&(r={}),e?this.concat(e,i,n)._parse(t,r):this._parse(t,r)},je.prototype._parse=function(t,e){function i(t,e,i){return"assert"===i?new pe(e,[t]):"coerce"===i?new ge(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var r=this.registry[n];if(r){var o=r.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=i(o,a,e.typeAnnotation||"coerce");else o=i(o,a,e.typeAnnotation||"assert")}if(!(o instanceof ce)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof Ve)return t(e.boundExpression);if(e instanceof ve&&"error"===e.name)return!1;if(e instanceof be)return!1;if(e instanceof Re)return!1;var i=e instanceof ge||e instanceof pe,n=!0;return e.eachChild((function(e){n=i?n&&t(e):n&&e instanceof ce})),!!n&&Be(e)&&Ne(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var l=new _e;try{o=new ce(o.type,o.evaluate(l))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},je.prototype.concat=function(t,e,i){var n="number"==typeof t?this.path.concat(t):this.path,r=i?this.scope.concat(i):this.scope;return new je(this.registry,n,e||null,r,this.errors)},je.prototype.error=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var n=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Dt(n,t))},je.prototype.checkSubtype=function(t,e){var i=Xt(t,e);return i&&this.error(i),i};var qe=function(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var n=0,r=i;n<r.length;n+=1){var o=r[n],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function Ze(t,e,i){return t*(1-i)+e*i}qe.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var i=e.parse(t[1],1,Ft);if(!i)return null;var n=[],r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],l=o,c=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(n.length&&n[n.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var u=e.parse(s,c,r);if(!u)return null;r=r||u.type,n.push([a,u])}return new qe(r,i,n)},qe.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);var r=e.length;return n>=e[r-1]?i[r-1].evaluate(t):i[Ue(e,n)].evaluate(t)},qe.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},qe.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},qe.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var He=Object.freeze({__proto__:null,number:Ze,color:function(t,e,i){return new te(Ze(t.r,e.r,i),Ze(t.g,e.g,i),Ze(t.b,e.b,i),Ze(t.a,e.a,i))},array:function(t,e,i){return t.map((function(t,n){return Ze(t,e[n],i)}))}}),Ge=6/29*3*(6/29),We=Math.PI/180,$e=180/Math.PI;function Ke(t){return t>.008856451679035631?Math.pow(t,1/3):t/Ge+4/29}function Xe(t){return t>6/29?t*t*t:Ge*(t-4/29)}function Qe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ye(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Je(t){var e=Ye(t.r),i=Ye(t.g),n=Ye(t.b),r=Ke((.4124564*e+.3575761*i+.1804375*n)/.95047),o=Ke((.2126729*e+.7151522*i+.072175*n)/1);return{l:116*o-16,a:500*(r-o),b:200*(o-Ke((.0193339*e+.119192*i+.9503041*n)/1.08883)),alpha:t.a}}function ti(t){var e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*Xe(e),i=.95047*Xe(i),n=1.08883*Xe(n),new te(Qe(3.2404542*i-1.5371385*e-.4985314*n),Qe(-.969266*i+1.8760108*e+.041556*n),Qe(.0556434*i-.2040259*e+1.0572252*n),t.alpha)}function ei(t,e,i){var n=e-t;return t+i*(n>180||n<-180?n-360*Math.round(n/360):n)}var ii={forward:Je,reverse:ti,interpolate:function(t,e,i){return{l:Ze(t.l,e.l,i),a:Ze(t.a,e.a,i),b:Ze(t.b,e.b,i),alpha:Ze(t.alpha,e.alpha,i)}}},ni={forward:function(t){var e=Je(t),i=e.l,n=e.a,r=e.b,o=Math.atan2(r,n)*$e;return{h:o<0?o+360:o,c:Math.sqrt(n*n+r*r),l:i,alpha:t.a}},reverse:function(t){var e=t.h*We,i=t.c;return ti({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:ei(t.h,e.h,i),c:Ze(t.c,e.c,i),l:Ze(t.l,e.l,i),alpha:Ze(t.alpha,e.alpha,i)}}},ri=Object.freeze({__proto__:null,lab:ii,hcl:ni}),oi=function(t,e,i,n,r){this.type=t,this.operator=e,this.interpolation=i,this.input=n,this.labels=[],this.outputs=[];for(var o=0,a=r;o<a.length;o+=1){var s=a[o],l=s[1];this.labels.push(s[0]),this.outputs.push(l)}};function ai(t,e,i,n){var r=n-i,o=t-i;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}oi.interpolationFactor=function(t,e,n,r){var o=0;if("exponential"===t.name)o=ai(e,t.base,n,r);else if("linear"===t.name)o=ai(e,1,n,r);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new i(a[0],a[1],a[2],a[3]).solve(ai(e,1,n,r))}return o},oi.parse=function(t,e){var i=t[0],n=t[1],r=t[2],o=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var a=n[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:a}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,Ft)))return null;var l=[],c=null;"interpolate-hcl"===i||"interpolate-lab"===i?c=jt:e.expectedType&&"value"!==e.expectedType.kind&&(c=e.expectedType);for(var u=0;u<o.length;u+=2){var h=o[u],p=o[u+1],d=u+3,f=u+4;if("number"!=typeof h)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(l.length&&l[l.length-1][0]>=h)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var m=e.parse(p,f,c);if(!m)return null;c=c||m.type,l.push([h,m])}return"number"===c.kind||"color"===c.kind||"array"===c.kind&&"number"===c.itemType.kind&&"number"==typeof c.N?new oi(c,i,n,r,l):e.error("Type "+$t(c)+" is not interpolatable.")},oi.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);var r=e.length;if(n>=e[r-1])return i[r-1].evaluate(t);var o=Ue(e,n),a=oi.interpolationFactor(this.interpolation,n,e[o],e[o+1]),s=i[o].evaluate(t),l=i[o+1].evaluate(t);return"interpolate"===this.operator?He[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?ni.reverse(ni.interpolate(ni.forward(s),ni.forward(l),a)):ii.reverse(ii.interpolate(ii.forward(s),ii.forward(l),a))},oi.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},oi.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},oi.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e};var si=function(t,e){this.type=t,this.args=e};si.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var i=null,n=e.expectedType;n&&"value"!==n.kind&&(i=n);for(var r=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+r.length,i,void 0,{typeAnnotation:"omit"});if(!s)return null;i=i||s.type,r.push(s)}var l=n&&r.some((function(t){return Xt(n,t.type)}));return new si(l?qt:i,r)},si.prototype.evaluate=function(t){for(var e,i=null,n=0,r=0,o=this.args;r<o.length&&(n++,(i=o[r].evaluate(t))&&i instanceof re&&!i.available&&(e||(e=i.name),i=null,n===this.args.length&&(i=e)),null===i);r+=1);return i},si.prototype.eachChild=function(t){this.args.forEach(t)},si.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},si.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var li=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};li.prototype.evaluate=function(t){return this.result.evaluate(t)},li.prototype.eachChild=function(t){for(var e=0,i=this.bindings;e<i.length;e+=1)t(i[e][1]);t(this.result)},li.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],n=1;n<t.length-1;n+=2){var r=t[n];if("string"!=typeof r)return e.error("Expected string, but found "+typeof r+" instead.",n);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var o=e.parse(t[n+1],n+1);if(!o)return null;i.push([r,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return a?new li(i,a):null},li.prototype.outputDefined=function(){return this.result.outputDefined()},li.prototype.serialize=function(){for(var t=["let"],e=0,i=this.bindings;e<i.length;e+=1){var n=i[e];t.push(n[0],n[1].serialize())}return t.push(this.result.serialize()),t};var ci=function(t,e,i){this.type=t,this.index=e,this.input=i};ci.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Ft),n=e.parse(t[2],2,Wt(e.expectedType||qt));return i&&n?new ci(n.type.itemType,i,n):null},ci.prototype.evaluate=function(t){var e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new ue("Array index out of bounds: "+e+" < 0.");if(e>=i.length)throw new ue("Array index out of bounds: "+e+" > "+(i.length-1)+".");if(e!==Math.floor(e))throw new ue("Array index must be an integer, but found "+e+" instead.");return i[e]},ci.prototype.eachChild=function(t){t(this.index),t(this.input)},ci.prototype.outputDefined=function(){return!1},ci.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ui=function(t,e){this.type=Vt,this.needle=t,this.haystack=e};ui.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,qt),n=e.parse(t[2],2,qt);return i&&n?Qt(i.type,[Vt,Nt,Ft,Bt,qt])?new ui(i,n):e.error("Expected first argument to be of type boolean, string, number or null, but found "+$t(i.type)+" instead"):null},ui.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!Yt(e,["boolean","string","number","null"]))throw new ue("Expected first argument to be of type boolean, string, number or null, but found "+$t(se(e))+" instead.");if(!Yt(i,["string","array"]))throw new ue("Expected second argument to be of type array or string, but found "+$t(se(i))+" instead.");return i.indexOf(e)>=0},ui.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},ui.prototype.outputDefined=function(){return!0},ui.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var hi=function(t,e,i){this.type=Ft,this.needle=t,this.haystack=e,this.fromIndex=i};hi.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,qt),n=e.parse(t[2],2,qt);if(!i||!n)return null;if(!Qt(i.type,[Vt,Nt,Ft,Bt,qt]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+$t(i.type)+" instead");if(4===t.length){var r=e.parse(t[3],3,Ft);return r?new hi(i,n,r):null}return new hi(i,n)},hi.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!Yt(e,["boolean","string","number","null"]))throw new ue("Expected first argument to be of type boolean, string, number or null, but found "+$t(se(e))+" instead.");if(!Yt(i,["string","array"]))throw new ue("Expected second argument to be of type array or string, but found "+$t(se(i))+" instead.");if(this.fromIndex){var n=this.fromIndex.evaluate(t);return i.indexOf(e,n)}return i.indexOf(e)},hi.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},hi.prototype.outputDefined=function(){return!1},hi.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var pi=function(t,e,i,n,r,o){this.inputType=t,this.type=e,this.input=i,this.cases=n,this.outputs=r,this.otherwise=o};pi.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var i,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],l=t[a+1];Array.isArray(s)||(s=[s]);var c=e.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(var u=0,h=s;u<h.length;u+=1){var p=h[u];if("number"!=typeof p&&"string"!=typeof p)return c.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return c.error("Numeric branch labels must be integer values.");if(i){if(c.checkSubtype(i,se(p)))return null}else i=se(p);if(void 0!==r[String(p)])return c.error("Branch labels must be unique.");r[String(p)]=o.length}var d=e.parse(l,a,n);if(!d)return null;n=n||d.type,o.push(d)}var f=e.parse(t[1],1,qt);if(!f)return null;var m=e.parse(t[t.length-1],t.length-1,n);return m?"value"!==f.type.kind&&e.concat(1).checkSubtype(i,f.type)?null:new pi(i,n,f,r,o,m):null},pi.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(se(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},pi.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},pi.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},pi.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],i=[],n={},r=0,o=Object.keys(this.cases).sort();r<o.length;r+=1){var a=o[r];void 0===(h=n[this.cases[a]])?(n[this.cases[a]]=i.length,i.push([this.cases[a],[a]])):i[h][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,c=i;l<c.length;l+=1){var u=c[l],h=u[0],p=u[1];e.push(1===p.length?s(p[0]):p.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var di=function(t,e,i){this.type=t,this.branches=e,this.otherwise=i};di.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var n=[],r=1;r<t.length-1;r+=2){var o=e.parse(t[r],r,Vt);if(!o)return null;var a=e.parse(t[r+1],r+1,i);if(!a)return null;n.push([o,a]),i=i||a.type}var s=e.parse(t[t.length-1],t.length-1,i);return s?new di(i,n,s):null},di.prototype.evaluate=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var n=i[e],r=n[1];if(n[0].evaluate(t))return r.evaluate(t)}return this.otherwise.evaluate(t)},di.prototype.eachChild=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var n=i[e],r=n[1];t(n[0]),t(r)}t(this.otherwise)},di.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},di.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var fi=function(t,e,i,n){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=n};function mi(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function gi(t,e,i,n){return 0===n.compare(e,i)}function yi(t,e,i){var n="=="!==t&&"!="!==t;return function(){function r(t,e,i){this.type=Vt,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return r.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var i=t[0],o=e.parse(t[1],1,qt);if(!o)return null;if(!mi(i,o.type))return e.concat(1).error('"'+i+"\" comparisons are not supported for type '"+$t(o.type)+"'.");var a=e.parse(t[2],2,qt);if(!a)return null;if(!mi(i,a.type))return e.concat(2).error('"'+i+"\" comparisons are not supported for type '"+$t(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+$t(o.type)+"' and '"+$t(a.type)+"'.");n&&("value"===o.type.kind&&"value"!==a.type.kind?o=new pe(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new pe(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Zt)))return null}return new r(o,a,s)},r.prototype.evaluate=function(r){var o=this.lhs.evaluate(r),a=this.rhs.evaluate(r);if(n&&this.hasUntypedArgument){var s=se(o),l=se(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new ue('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var c=se(o),u=se(a);if("string"!==c.kind||"string"!==u.kind)return e(r,o,a)}return this.collator?i(r,o,a,this.collator.evaluate(r)):e(r,o,a)},r.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},r.prototype.outputDefined=function(){return!0},r.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},r}()}fi.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,qt),n=e.parse(t[2],2,Ft);if(!i||!n)return null;if(!Qt(i.type,[Wt(qt),Nt,qt]))return e.error("Expected first argument to be of type array or string, but found "+$t(i.type)+" instead");if(4===t.length){var r=e.parse(t[3],3,Ft);return r?new fi(i.type,i,n,r):null}return new fi(i.type,i,n)},fi.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!Yt(e,["string","array"]))throw new ue("Expected first argument to be of type array or string, but found "+$t(se(e))+" instead.");if(this.endIndex){var n=this.endIndex.evaluate(t);return e.slice(i,n)}return e.slice(i)},fi.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},fi.prototype.outputDefined=function(){return!1},fi.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var _i=yi("==",(function(t,e,i){return e===i}),gi),vi=yi("!=",(function(t,e,i){return e!==i}),(function(t,e,i,n){return!gi(0,e,i,n)})),bi=yi("<",(function(t,e,i){return e<i}),(function(t,e,i,n){return n.compare(e,i)<0})),xi=yi(">",(function(t,e,i){return e>i}),(function(t,e,i,n){return n.compare(e,i)>0})),wi=yi("<=",(function(t,e,i){return e<=i}),(function(t,e,i,n){return n.compare(e,i)<=0})),Ci=yi(">=",(function(t,e,i){return e>=i}),(function(t,e,i,n){return n.compare(e,i)>=0})),Si=function(t,e,i,n,r){this.type=Nt,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=n,this.maxFractionDigits=r};Si.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Ft);if(!i)return null;var n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");var r=null;if(n.locale&&!(r=e.parse(n.locale,1,Nt)))return null;var o=null;if(n.currency&&!(o=e.parse(n.currency,1,Nt)))return null;var a=null;if(n["min-fraction-digits"]&&!(a=e.parse(n["min-fraction-digits"],1,Ft)))return null;var s=null;return n["max-fraction-digits"]&&!(s=e.parse(n["max-fraction-digits"],1,Ft))?null:new Si(i,r,o,a,s)},Si.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Si.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Si.prototype.outputDefined=function(){return!1},Si.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Ti=function(t){this.type=Ft,this.input=t};Ti.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found "+$t(i.type)+" instead."):new Ti(i):null},Ti.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ue("Expected value to be of type string or array, but found "+$t(se(e))+" instead.")},Ti.prototype.eachChild=function(t){t(this.input)},Ti.prototype.outputDefined=function(){return!1},Ti.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var ki={"==":_i,"!=":vi,">":xi,"<":bi,">=":Ci,"<=":wi,array:pe,at:ci,boolean:pe,case:di,coalesce:si,collator:be,format:de,image:fe,in:ui,"index-of":hi,interpolate:oi,"interpolate-hcl":oi,"interpolate-lab":oi,length:Ti,let:li,literal:ce,match:pi,number:pe,"number-format":Si,object:pe,slice:fi,step:qe,string:pe,"to-boolean":ge,"to-color":ge,"to-number":ge,"to-string":ge,var:Ve,within:Re};function Ei(t,e){var i=e[0],n=e[1],r=e[2],o=e[3];i=i.evaluate(t),n=n.evaluate(t),r=r.evaluate(t);var a=o?o.evaluate(t):1,s=oe(i,n,r,a);if(s)throw new ue(s);return new te(i/255*a,n/255*a,r/255*a,a)}function Pi(t,e){return t in e}function Ii(t,e){var i=e[t];return void 0===i?null:i}function Mi(t){return{type:t}}function Ai(t){return{result:"success",value:t}}function zi(t){return{result:"error",value:t}}function Oi(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Li(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Di(t){return!!t.expression&&t.expression.interpolated}function Ri(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Bi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Fi(t){return t}function Ni(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function Vi(t,e,i,n,r){return Ni(typeof i===r?n[i]:void 0,t.default,e.default)}function ji(t,e,i){if("number"!==Ri(i))return Ni(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];var r=Ue(t.stops.map((function(t){return t[0]})),i);return t.stops[r][1]}function Ui(t,e,i){var n=void 0!==t.base?t.base:1;if("number"!==Ri(i))return Ni(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];var o=Ue(t.stops.map((function(t){return t[0]})),i),a=function(t,e,i,n){var r=n-i,o=t-i;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}(i,n,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1],c=He[e.type]||Fi;if(t.colorSpace&&"rgb"!==t.colorSpace){var u=ri[t.colorSpace];c=function(t,e){return u.reverse(u.interpolate(u.forward(t),u.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=s.evaluate.apply(void 0,t),n=l.evaluate.apply(void 0,t);if(void 0!==i&&void 0!==n)return c(i,n,a)}}:c(s,l,a)}function qi(t,e,i){return"color"===e.type?i=te.parse(i):"formatted"===e.type?i=ne.fromString(i.toString()):"resolvedImage"===e.type?i=re.fromString(i.toString()):Ri(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),Ni(i,t.default,e.default)}ve.register(ki,{error:[{kind:"error"},[Nt],function(t,e){throw new ue(e[0].evaluate(t))}],typeof:[Nt,[qt],function(t,e){return $t(se(e[0].evaluate(t)))}],"to-rgba":[Wt(Ft,4),[jt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[jt,[Ft,Ft,Ft],Ei],rgba:[jt,[Ft,Ft,Ft,Ft],Ei],has:{type:Vt,overloads:[[[Nt],function(t,e){return Pi(e[0].evaluate(t),t.properties())}],[[Nt,Ut],function(t,e){var i=e[1];return Pi(e[0].evaluate(t),i.evaluate(t))}]]},get:{type:qt,overloads:[[[Nt],function(t,e){return Ii(e[0].evaluate(t),t.properties())}],[[Nt,Ut],function(t,e){var i=e[1];return Ii(e[0].evaluate(t),i.evaluate(t))}]]},"feature-state":[qt,[Nt],function(t,e){return Ii(e[0].evaluate(t),t.featureState||{})}],properties:[Ut,[],function(t){return t.properties()}],"geometry-type":[Nt,[],function(t){return t.geometryType()}],id:[qt,[],function(t){return t.id()}],zoom:[Ft,[],function(t){return t.globals.zoom}],"heatmap-density":[Ft,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Ft,[],function(t){return t.globals.lineProgress||0}],accumulated:[qt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Ft,Mi(Ft),function(t,e){for(var i=0,n=0,r=e;n<r.length;n+=1)i+=r[n].evaluate(t);return i}],"*":[Ft,Mi(Ft),function(t,e){for(var i=1,n=0,r=e;n<r.length;n+=1)i*=r[n].evaluate(t);return i}],"-":{type:Ft,overloads:[[[Ft,Ft],function(t,e){var i=e[1];return e[0].evaluate(t)-i.evaluate(t)}],[[Ft],function(t,e){return-e[0].evaluate(t)}]]},"/":[Ft,[Ft,Ft],function(t,e){var i=e[1];return e[0].evaluate(t)/i.evaluate(t)}],"%":[Ft,[Ft,Ft],function(t,e){var i=e[1];return e[0].evaluate(t)%i.evaluate(t)}],ln2:[Ft,[],function(){return Math.LN2}],pi:[Ft,[],function(){return Math.PI}],e:[Ft,[],function(){return Math.E}],"^":[Ft,[Ft,Ft],function(t,e){var i=e[1];return Math.pow(e[0].evaluate(t),i.evaluate(t))}],sqrt:[Ft,[Ft],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Ft,[Ft],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Ft,[Ft],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Ft,[Ft],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Ft,[Ft],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Ft,[Ft],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Ft,[Ft],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Ft,[Ft],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Ft,[Ft],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Ft,[Ft],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Ft,Mi(Ft),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[Ft,Mi(Ft),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[Ft,[Ft],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Ft,[Ft],function(t,e){var i=e[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[Ft,[Ft],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Ft,[Ft],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[Vt,[Nt,qt],function(t,e){var i=e[0],n=e[1];return t.properties()[i.value]===n.value}],"filter-id-==":[Vt,[qt],function(t,e){var i=e[0];return t.id()===i.value}],"filter-type-==":[Vt,[Nt],function(t,e){var i=e[0];return t.geometryType()===i.value}],"filter-<":[Vt,[Nt,qt],function(t,e){var i=e[0],n=e[1],r=t.properties()[i.value],o=n.value;return typeof r==typeof o&&r<o}],"filter-id-<":[Vt,[qt],function(t,e){var i=e[0],n=t.id(),r=i.value;return typeof n==typeof r&&n<r}],"filter->":[Vt,[Nt,qt],function(t,e){var i=e[0],n=e[1],r=t.properties()[i.value],o=n.value;return typeof r==typeof o&&r>o}],"filter-id->":[Vt,[qt],function(t,e){var i=e[0],n=t.id(),r=i.value;return typeof n==typeof r&&n>r}],"filter-<=":[Vt,[Nt,qt],function(t,e){var i=e[0],n=e[1],r=t.properties()[i.value],o=n.value;return typeof r==typeof o&&r<=o}],"filter-id-<=":[Vt,[qt],function(t,e){var i=e[0],n=t.id(),r=i.value;return typeof n==typeof r&&n<=r}],"filter->=":[Vt,[Nt,qt],function(t,e){var i=e[0],n=e[1],r=t.properties()[i.value],o=n.value;return typeof r==typeof o&&r>=o}],"filter-id->=":[Vt,[qt],function(t,e){var i=e[0],n=t.id(),r=i.value;return typeof n==typeof r&&n>=r}],"filter-has":[Vt,[qt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Vt,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Vt,[Wt(Nt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Vt,[Wt(qt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Vt,[Nt,Wt(qt)],function(t,e){var i=e[0];return e[1].value.indexOf(t.properties()[i.value])>=0}],"filter-in-large":[Vt,[Nt,Wt(qt)],function(t,e){var i=e[0],n=e[1];return function(t,e,i,n){for(;i<=n;){var r=i+n>>1;if(e[r]===t)return!0;e[r]>t?n=r-1:i=r+1}return!1}(t.properties()[i.value],n.value,0,n.value.length-1)}],all:{type:Vt,overloads:[[[Vt,Vt],function(t,e){var i=e[1];return e[0].evaluate(t)&&i.evaluate(t)}],[Mi(Vt),function(t,e){for(var i=0,n=e;i<n.length;i+=1)if(!n[i].evaluate(t))return!1;return!0}]]},any:{type:Vt,overloads:[[[Vt,Vt],function(t,e){var i=e[1];return e[0].evaluate(t)||i.evaluate(t)}],[Mi(Vt),function(t,e){for(var i=0,n=e;i<n.length;i+=1)if(n[i].evaluate(t))return!0;return!1}]]},"!":[Vt,[Vt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Vt,[Nt],function(t,e){var i=t.globals&&t.globals.isSupportedScript;return!i||i(e[0].evaluate(t))}],upcase:[Nt,[Nt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Nt,[Nt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Nt,Mi(qt),function(t,e){return e.map((function(e){return le(e.evaluate(t))})).join("")}],"resolved-locale":[Nt,[Zt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Zi=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new _e,this._defaultValue=e?function(t){return"color"===t.type&&Bi(t.default)?new te(0,0,0,0):"color"===t.type?te.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Hi(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in ki}function Gi(t,e){var i=new je(ki,[],e?function(t){var e={color:jt,string:Nt,number:Ft,enum:Nt,boolean:Vt,formatted:Ht,resolvedImage:Gt};return"array"===t.type?Wt(e[t.value]||qt,t.length):e[t.type]}(e):void 0),n=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?Ai(new Zi(n,e)):zi(i.errors)}Zi.prototype.evaluateWithoutErrorHandling=function(t,e,i,n,r,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},Zi.prototype.evaluate=function(t,e,i,n,r,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new ue("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Wi=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Fe(e.expression)};Wi.prototype.evaluateWithoutErrorHandling=function(t,e,i,n,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,r,o)},Wi.prototype.evaluate=function(t,e,i,n,r,o){return this._styleExpression.evaluate(t,e,i,n,r,o)};var $i=function(t,e,i,n){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Fe(e.expression),this.interpolationType=n};function Ki(t,e){if("error"===(t=Gi(t,e)).result)return t;var i=t.value.expression,n=Be(i);if(!n&&!Oi(e))return zi([new Dt("","data expressions not supported")]);var r=Ne(i,["zoom"]);if(!r&&!Li(e))return zi([new Dt("","zoom expressions not supported")]);var o=function t(e){var i=null;if(e instanceof li)i=t(e.result);else if(e instanceof si)for(var n=0,r=e.args;n<r.length&&!(i=t(r[n]));n+=1);else(e instanceof qe||e instanceof oi)&&e.input instanceof ve&&"zoom"===e.input.name&&(i=e);return i instanceof Dt||e.eachChild((function(e){var n=t(e);n instanceof Dt?i=n:!i&&n?i=new Dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&n&&i!==n&&(i=new Dt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),i}(i);return o||r?o instanceof Dt?zi([o]):o instanceof oi&&!Di(e)?zi([new Dt("",'"interpolate" expressions cannot be used with this property')]):Ai(o?new $i(n?"camera":"composite",t.value,o.labels,o instanceof oi?o.interpolation:void 0):new Wi(n?"constant":"source",t.value)):zi([new Dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}$i.prototype.evaluateWithoutErrorHandling=function(t,e,i,n,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,r,o)},$i.prototype.evaluate=function(t,e,i,n,r,o){return this._styleExpression.evaluate(t,e,i,n,r,o)},$i.prototype.interpolationFactor=function(t,e,i){return this.interpolationType?oi.interpolationFactor(this.interpolationType,t,e,i):0};var Xi=function(t,e){this._parameters=t,this._specification=e,zt(this,function t(e,i){var n,r,o,a="color"===i.type,s=e.stops&&"object"==typeof e.stops[0][0],l=s||!(s||void 0!==e.property),c=e.type||(Di(i)?"exponential":"interval");if(a&&((e=zt({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],te.parse(t[1])]}))),e.default=te.parse(e.default?e.default:i.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!ri[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)n=Ui;else if("interval"===c)n=ji;else if("categorical"===c){n=Vi,r=Object.create(null);for(var u=0,h=e.stops;u<h.length;u+=1){var p=h[u];r[p[0]]=p[1]}o=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');n=qi}if(s){for(var d={},f=[],m=0;m<e.stops.length;m++){var g=e.stops[m],y=g[0].zoom;void 0===d[y]&&(d[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]},f.push(y)),d[y].stops.push([g[0].value,g[1]])}for(var _=[],v=0,b=f;v<b.length;v+=1){var x=b[v];_.push([d[x].zoom,t(d[x],i)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:oi.interpolationFactor.bind(void 0,w),zoomStops:_.map((function(t){return t[0]})),evaluate:function(t,n){var r=t.zoom;return Ui({stops:_,base:e.base},i,r).evaluate(r,n)}}}if(l){var C="exponential"===c?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:oi.interpolationFactor.bind(void 0,C),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return n(e,i,t.zoom,r,o)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?Ni(e.default,i.default):n(e,i,s,r,o)}}}(this._parameters,this._specification))};function Qi(t){var e=t.key,i=t.value,n=t.valueSpec||{},r=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],l=Ri(i);if("object"!==l)return[new Mt(e,i,"object expected, "+l+" found")];for(var c in i){var u=c.split(".")[0],h=n[u]||n["*"],p=void 0;if(r[u])p=r[u];else if(n[u])p=Cn;else if(r["*"])p=r["*"];else{if(!n["*"]){s.push(new Mt(e,i[c],'unknown property "'+c+'"'));continue}p=Cn}s=s.concat(p({key:(e?e+".":e)+c,value:i[c],valueSpec:h,style:o,styleSpec:a,object:i,objectKey:c},i))}for(var d in n)r[d]||n[d].required&&void 0===n[d].default&&void 0===i[d]&&s.push(new Mt(e,i,'missing required property "'+d+'"'));return s}function Yi(t){var e=t.value,i=t.valueSpec,n=t.style,r=t.styleSpec,o=t.key,a=t.arrayElementValidator||Cn;if("array"!==Ri(e))return[new Mt(o,e,"array expected, "+Ri(e)+" found")];if(i.length&&e.length!==i.length)return[new Mt(o,e,"array length "+i.length+" expected, length "+e.length+" found")];if(i["min-length"]&&e.length<i["min-length"])return[new Mt(o,e,"array length at least "+i["min-length"]+" expected, length "+e.length+" found")];var s={type:i.value,values:i.values};r.$version<7&&(s.function=i.function),"object"===Ri(i.value)&&(s=i.value);for(var l=[],c=0;c<e.length;c++)l=l.concat(a({array:e,arrayIndex:c,value:e[c],valueSpec:s,style:n,styleSpec:r,key:o+"["+c+"]"}));return l}function Ji(t){var e=t.key,i=t.value,n=t.valueSpec,r=Ri(i);return"number"===r&&i!=i&&(r="NaN"),"number"!==r?[new Mt(e,i,"number expected, "+r+" found")]:"minimum"in n&&i<n.minimum?[new Mt(e,i,i+" is less than the minimum value "+n.minimum)]:"maximum"in n&&i>n.maximum?[new Mt(e,i,i+" is greater than the maximum value "+n.maximum)]:[]}function tn(t){var e,i,n,r=t.valueSpec,o=Ot(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,l=!s,c="array"===Ri(t.value.stops)&&"array"===Ri(t.value.stops[0])&&"object"===Ri(t.value.stops[0][0]),u=Qi({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new Mt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],i=t.value;return e=e.concat(Yi({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Ri(i)&&0===i.length&&e.push(new Mt(t.key,i,"array must have at least one stop")),e},default:function(t){return Cn({key:t.key,value:t.value,valueSpec:r,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&u.push(new Mt(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||u.push(new Mt(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Di(t.valueSpec)&&u.push(new Mt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Oi(t.valueSpec)?u.push(new Mt(t.key,t.value,"property functions not supported")):s&&!Li(t.valueSpec)&&u.push(new Mt(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!c||void 0!==t.value.property||u.push(new Mt(t.key,t.value,'"property" property is required')),u;function h(t){var e=[],o=t.value,s=t.key;if("array"!==Ri(o))return[new Mt(s,o,"array expected, "+Ri(o)+" found")];if(2!==o.length)return[new Mt(s,o,"array length 2 expected, length "+o.length+" found")];if(c){if("object"!==Ri(o[0]))return[new Mt(s,o,"object expected, "+Ri(o[0])+" found")];if(void 0===o[0].zoom)return[new Mt(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Mt(s,o,"object stop key must have value")];if(n&&n>Ot(o[0].zoom))return[new Mt(s,o[0].zoom,"stop zoom values must appear in ascending order")];Ot(o[0].zoom)!==n&&(n=Ot(o[0].zoom),i=void 0,a={}),e=e.concat(Qi({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Ji,value:p}}))}else e=e.concat(p({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return Hi(Lt(o[1]))?e.concat([new Mt(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(Cn({key:s+"[1]",value:o[1],valueSpec:r,style:t.style,styleSpec:t.styleSpec}))}function p(t,n){var s=Ri(t.value),l=Ot(t.value),c=null!==t.value?t.value:n;if(e){if(s!==e)return[new Mt(t.key,c,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Mt(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var u="number expected, "+s+" found";return Oi(r)&&void 0===o&&(u+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Mt(t.key,c,u)]}return"categorical"!==o||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===s&&void 0!==i&&l<i?[new Mt(t.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===o&&l in a?[new Mt(t.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new Mt(t.key,c,"integer expected, found "+l)]}}function en(t){var e=("property"===t.expressionContext?Ki:Gi)(Lt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new Mt(""+t.key+e.key,t.value,e.message)}));var i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new Mt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Fe(i))return[new Mt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Fe(i))return[new Mt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Ne(i,["zoom","feature-state"]))return[new Mt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Be(i))return[new Mt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function nn(t){var e=t.key,i=t.value,n=t.valueSpec,r=[];return Array.isArray(n.values)?-1===n.values.indexOf(Ot(i))&&r.push(new Mt(e,i,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(n.values).indexOf(Ot(i))&&r.push(new Mt(e,i,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(i)+" found")),r}function rn(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,i=t.slice(1);e<i.length;e+=1){var n=i[e];if(!rn(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}Xi.deserialize=function(t){return new Xi(t._parameters,t._specification)},Xi.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var on={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function an(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};rn(t)||(t=ln(t));var e=Gi(t,on);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,i,n){return e.value.evaluate(t,i,{},n)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var i=1;i<e.length;i++)if(t(e[i]))return!0;return!1}(t)}}function sn(t,e){return t<e?-1:t>e?1:0}function ln(t){if(!t)return!0;var e,i=t[0];return t.length<=1?"any"!==i:"=="===i?cn(t[1],t[2],"=="):"!="===i?pn(cn(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?cn(t[1],t[2],i):"any"===i?(e=t.slice(1),["any"].concat(e.map(ln))):"all"===i?["all"].concat(t.slice(1).map(ln)):"none"===i?["all"].concat(t.slice(1).map(ln).map(pn)):"in"===i?un(t[1],t.slice(2)):"!in"===i?pn(un(t[1],t.slice(2))):"has"===i?hn(t[1]):"!has"===i?pn(hn(t[1])):"within"!==i||t}function cn(t,e,i){switch(t){case"$type":return["filter-type-"+i,e];case"$id":return["filter-id-"+i,e];default:return["filter-"+i,t,e]}}function un(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(sn)]]:["filter-in-small",t,["literal",e]]}}function hn(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function pn(t){return["!",t]}function dn(t){return rn(Lt(t.value))?en(zt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var i=e.value,n=e.key;if("array"!==Ri(i))return[new Mt(n,i,"array expected, "+Ri(i)+" found")];var r,o=e.styleSpec,a=[];if(i.length<1)return[new Mt(n,i,"filter array must have at least 1 element")];switch(a=a.concat(nn({key:n+"[0]",value:i[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),Ot(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===Ot(i[1])&&a.push(new Mt(n,i,'"$type" cannot be use with operator "'+i[0]+'"'));case"==":case"!=":3!==i.length&&a.push(new Mt(n,i,'filter array for operator "'+i[0]+'" must have 3 elements'));case"in":case"!in":i.length>=2&&"string"!==(r=Ri(i[1]))&&a.push(new Mt(n+"[1]",i[1],"string expected, "+r+" found"));for(var s=2;s<i.length;s++)r=Ri(i[s]),"$type"===Ot(i[1])?a=a.concat(nn({key:n+"["+s+"]",value:i[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&a.push(new Mt(n+"["+s+"]",i[s],"string, number, or boolean expected, "+r+" found"));break;case"any":case"all":case"none":for(var l=1;l<i.length;l++)a=a.concat(t({key:n+"["+l+"]",value:i[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=Ri(i[1]),2!==i.length?a.push(new Mt(n,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"string"!==r&&a.push(new Mt(n+"[1]",i[1],"string expected, "+r+" found"));break;case"within":r=Ri(i[1]),2!==i.length?a.push(new Mt(n,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"object"!==r&&a.push(new Mt(n+"[1]",i[1],"object expected, "+r+" found"))}return a}(t)}function fn(t,e){var i=t.key,n=t.style,r=t.styleSpec,o=t.value,a=t.objectKey,s=r[e+"_"+t.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return Cn({key:i,value:o,valueSpec:r.transition,style:n,styleSpec:r});var c,u=t.valueSpec||s[a];if(!u)return[new Mt(i,o,'unknown property "'+a+'"')];if("string"===Ri(o)&&Oi(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(o)))return[new Mt(i,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(c[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===a&&n&&!n.glyphs&&h.push(new Mt(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Bi(Lt(o))&&"identity"===Ot(o.type)&&h.push(new Mt(i,o,'"text-font" does not support identity functions'))),h.concat(Cn({key:t.key,value:o,valueSpec:u,style:n,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:a}))}function mn(t){return fn(t,"paint")}function gn(t){return fn(t,"layout")}function yn(t){var e=[],i=t.value,n=t.key,r=t.style,o=t.styleSpec;i.type||i.ref||e.push(new Mt(n,i,'either "type" or "ref" is required'));var a,s=Ot(i.type),l=Ot(i.ref);if(i.id)for(var c=Ot(i.id),u=0;u<t.arrayIndex;u++){var h=r.layers[u];Ot(h.id)===c&&e.push(new Mt(n,i.id,'duplicate layer id "'+i.id+'", previously used at line '+h.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach((function(t){t in i&&e.push(new Mt(n,i[t],'"'+t+'" is prohibited for ref layers'))})),r.layers.forEach((function(t){Ot(t.id)===l&&(a=t)})),a?a.ref?e.push(new Mt(n,i.ref,"ref cannot reference another ref layer")):s=Ot(a.type):e.push(new Mt(n,i.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(i.source){var p=r.sources&&r.sources[i.source],d=p&&Ot(p.type);p?"vector"===d&&"raster"===s?e.push(new Mt(n,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===d&&"raster"!==s?e.push(new Mt(n,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==d||i["source-layer"]?"raster-dem"===d&&"hillshade"!==s?e.push(new Mt(n,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!i.paint||!i.paint["line-gradient"]||"geojson"===d&&p.lineMetrics||e.push(new Mt(n,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Mt(n,i,'layer "'+i.id+'" must specify a "source-layer"')):e.push(new Mt(n,i.source,'source "'+i.source+'" not found'))}else e.push(new Mt(n,i,'missing required property "source"'));return e=e.concat(Qi({key:n,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Cn({key:n+".type",value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"})},filter:dn,layout:function(t){return Qi({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return gn(zt({layerType:s},t))}}})},paint:function(t){return Qi({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return mn(zt({layerType:s},t))}}})}}}))}function _n(t){var e=t.value,i=t.key,n=Ri(e);return"string"!==n?[new Mt(i,e,"string expected, "+n+" found")]:[]}var vn={promoteId:function(t){var e=t.key,i=t.value;if("string"===Ri(i))return _n({key:e,value:i});var n=[];for(var r in i)n.push.apply(n,_n({key:e+"."+r,value:i[r]}));return n}};function bn(t){var e=t.value,i=t.key,n=t.styleSpec,r=t.style;if(!e.type)return[new Mt(i,e,'"type" is required')];var o,a=Ot(e.type);switch(a){case"vector":case"raster":case"raster-dem":return Qi({key:i,value:e,valueSpec:n["source_"+a.replace("-","_")],style:t.style,styleSpec:n,objectElementValidators:vn});case"geojson":if(o=Qi({key:i,value:e,valueSpec:n.source_geojson,style:r,styleSpec:n,objectElementValidators:vn}),e.cluster)for(var s in e.clusterProperties){var l=e.clusterProperties[s],c=l[0],u="string"==typeof c?[c,["accumulated"],["get",s]]:c;o.push.apply(o,en({key:i+"."+s+".map",value:l[1],expressionContext:"cluster-map"})),o.push.apply(o,en({key:i+"."+s+".reduce",value:u,expressionContext:"cluster-reduce"}))}return o;case"video":return Qi({key:i,value:e,valueSpec:n.source_video,style:r,styleSpec:n});case"image":return Qi({key:i,value:e,valueSpec:n.source_image,style:r,styleSpec:n});case"canvas":return[new Mt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return nn({key:i+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:n})}}function xn(t){var e=t.value,i=t.styleSpec,n=i.light,r=t.style,o=[],a=Ri(e);if(void 0===e)return o;if("object"!==a)return o.concat([new Mt("light",e,"object expected, "+a+" found")]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=o.concat(l&&n[l[1]]&&n[l[1]].transition?Cn({key:s,value:e[s],valueSpec:i.transition,style:r,styleSpec:i}):n[s]?Cn({key:s,value:e[s],valueSpec:n[s],style:r,styleSpec:i}):[new Mt(s,e[s],'unknown property "'+s+'"')])}return o}var wn={"*":function(){return[]},array:Yi,boolean:function(t){var e=t.value,i=t.key,n=Ri(e);return"boolean"!==n?[new Mt(i,e,"boolean expected, "+n+" found")]:[]},number:Ji,color:function(t){var e=t.key,i=t.value,n=Ri(i);return"string"!==n?[new Mt(e,i,"color expected, "+n+" found")]:null===Jt(i)?[new Mt(e,i,'color expected, "'+i+'" found')]:[]},constants:At,enum:nn,filter:dn,function:tn,layer:yn,object:Qi,source:bn,light:xn,string:_n,formatted:function(t){return 0===_n(t).length?[]:en(t)},resolvedImage:function(t){return 0===_n(t).length?[]:en(t)}};function Cn(t){var e=t.value,i=t.valueSpec,n=t.styleSpec;return i.expression&&Bi(Ot(e))?tn(t):i.expression&&Hi(Lt(e))?en(t):i.type&&wn[i.type]?wn[i.type](t):Qi(zt({},t,{valueSpec:i.type?n[i.type]:i}))}function Sn(t){var e=t.value,i=t.key,n=_n(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new Mt(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new Mt(i,e,'"glyphs" url must include a "{range}" token'))),n}function Tn(t,e){void 0===e&&(e=It);var i=[];return i=i.concat(Cn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Sn,"*":function(){return[]}}})),t.constants&&(i=i.concat(At({key:"constants",value:t.constants,style:t,styleSpec:e}))),kn(i)}function kn(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function En(t){return function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return kn(t.apply(this,e))}}Tn.source=En(bn),Tn.light=En(xn),Tn.layer=En(yn),Tn.filter=En(dn),Tn.paintProperty=En(mn),Tn.layoutProperty=En(gn);var Pn=Tn,In=Pn.light,Mn=Pn.paintProperty,An=Pn.layoutProperty;function zn(t,e){var i=!1;if(e&&e.length)for(var n=0,r=e;n<r.length;n+=1)t.fire(new Et(new Error(r[n].message))),i=!0;return i}var On=Ln;function Ln(t,e,i){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],this.d=(e=r[1])+2*(i=r[2]);for(var o=0;o<this.d*this.d;o++){var a=r[3+o],s=r[3+o+1];n.push(a===s?null:r.subarray(a,s))}var l=r[3+n.length+1];this.keys=r.subarray(r[3+n.length],l),this.bboxes=r.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var c=0;c<this.d*this.d;c++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var u=i/e*t;this.min=-u,this.max=t+u}Ln.prototype.insert=function(t,e,i,n,r){this._forEachCell(e,i,n,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)},Ln.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ln.prototype._insertCell=function(t,e,i,n,r,o){this.cells[r].push(o)},Ln.prototype.query=function(t,e,i,n,r){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=i&&a<=n&&!r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,i,n,this._queryCell,s,{},r),s},Ln.prototype._queryCell=function(t,e,i,n,r,o,a,s){var l=this.cells[r];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var p=l[h];if(void 0===a[p]){var d=4*p;(s?s(u[d+0],u[d+1],u[d+2],u[d+3]):t<=u[d+2]&&e<=u[d+3]&&i>=u[d+0]&&n>=u[d+1])?(a[p]=!0,o.push(c[p])):a[p]=!1}}},Ln.prototype._forEachCell=function(t,e,i,n,r,o,a,s){for(var l=this._convertToCellCoord(t),c=this._convertToCellCoord(e),u=this._convertToCellCoord(i),h=this._convertToCellCoord(n),p=l;p<=u;p++)for(var d=c;d<=h;d++){var f=this.d*d+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(d),this._convertFromCellCoord(p+1),this._convertFromCellCoord(d+1)))&&r.call(this,t,e,i,n,f,o,a,s))return}},Ln.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Ln.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Ln.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,i=0,n=0;n<this.cells.length;n++)i+=this.cells[n].length;var r=new Int32Array(e+i+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];r[3+a]=o,r.set(s,o),o+=s.length}return r[3+t.length]=o,r.set(this.keys,o),r[3+t.length+1]=o+=this.keys.length,r.set(this.bboxes,o),o+=this.bboxes.length,r.buffer};var Dn=a.ImageData,Rn=a.ImageBitmap,Bn={};function Fn(t,e,i){void 0===i&&(i={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Bn[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}for(var Nn in Fn("Object",Object),On.serialize=function(t,e){var i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}},On.deserialize=function(t){return new On(t.buffer)},Fn("Grid",On),Fn("Color",te),Fn("Error",Error),Fn("ResolvedImage",re),Fn("StylePropertyFunction",Xi),Fn("StyleExpression",Zi,{omit:["_evaluator"]}),Fn("ZoomDependentExpression",$i),Fn("ZoomConstantExpression",Wi),Fn("CompoundExpression",ve,{omit:["_evaluate"]}),ki)ki[Nn]._classRegistryKey||Fn("Expression_"+Nn,ki[Nn]);function Vn(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function jn(t){return Rn&&t instanceof Rn}function Un(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Vn(t)||jn(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var i=t;return e&&e.push(i.buffer),i}if(t instanceof Dn)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],r=0,o=t;r<o.length;r+=1)n.push(Un(o[r],e));return n}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var l=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var c in t)if(t.hasOwnProperty(c)&&!(Bn[s].omit.indexOf(c)>=0)){var u=t[c];l[c]=Bn[s].shallow.indexOf(c)>=0?u:Un(u,e)}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(l.$name=s),l}throw new Error("can't serialize object of type "+typeof t)}function qn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Vn(t)||jn(t)||ArrayBuffer.isView(t)||t instanceof Dn)return t;if(Array.isArray(t))return t.map(qn);if("object"==typeof t){var e=t.$name||"Object",i=Bn[e].klass;if(!i)throw new Error("can't deserialize unregistered class "+e);if(i.deserialize)return i.deserialize(t);for(var n=Object.create(i.prototype),r=0,o=Object.keys(t);r<o.length;r+=1){var a=o[r];if("$name"!==a){var s=t[a];n[a]=Bn[e].shallow.indexOf(a)>=0?s:qn(s)}}return n}throw new Error("can't deserialize object of type "+typeof t)}var Zn=function(){this.first=!0};Zn.prototype.update=function(t,e){var i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))};var Hn={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Gn(t){for(var e=0,i=t;e<i.length;e+=1)if(Wn(i[e].charCodeAt(0)))return!0;return!1}function Wn(t){return!(746!==t&&747!==t&&(t<4352||!(Hn["Bopomofo Extended"](t)||Hn.Bopomofo(t)||Hn["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Hn["CJK Compatibility Ideographs"](t)||Hn["CJK Compatibility"](t)||Hn["CJK Radicals Supplement"](t)||Hn["CJK Strokes"](t)||!(!Hn["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Hn["CJK Unified Ideographs Extension A"](t)||Hn["CJK Unified Ideographs"](t)||Hn["Enclosed CJK Letters and Months"](t)||Hn["Hangul Compatibility Jamo"](t)||Hn["Hangul Jamo Extended-A"](t)||Hn["Hangul Jamo Extended-B"](t)||Hn["Hangul Jamo"](t)||Hn["Hangul Syllables"](t)||Hn.Hiragana(t)||Hn["Ideographic Description Characters"](t)||Hn.Kanbun(t)||Hn["Kangxi Radicals"](t)||Hn["Katakana Phonetic Extensions"](t)||Hn.Katakana(t)&&12540!==t||!(!Hn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Hn["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Hn["Unified Canadian Aboriginal Syllabics"](t)||Hn["Unified Canadian Aboriginal Syllabics Extended"](t)||Hn["Vertical Forms"](t)||Hn["Yijing Hexagram Symbols"](t)||Hn["Yi Syllables"](t)||Hn["Yi Radicals"](t))))}function $n(t){return!(Wn(t)||function(t){return!!(Hn["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Hn["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Hn["Letterlike Symbols"](t)||Hn["Number Forms"](t)||Hn["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Hn["Control Pictures"](t)&&9251!==t||Hn["Optical Character Recognition"](t)||Hn["Enclosed Alphanumerics"](t)||Hn["Geometric Shapes"](t)||Hn["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Hn["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Hn["CJK Symbols and Punctuation"](t)||Hn.Katakana(t)||Hn["Private Use Area"](t)||Hn["CJK Compatibility Forms"](t)||Hn["Small Form Variants"](t)||Hn["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Kn(t){return t>=1424&&t<=2303||Hn["Arabic Presentation Forms-A"](t)||Hn["Arabic Presentation Forms-B"](t)}function Xn(t,e){return!(!e&&Kn(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Hn.Khmer(t))}function Qn(t){for(var e=0,i=t;e<i.length;e+=1)if(Kn(i[e].charCodeAt(0)))return!0;return!1}var Yn=null,Jn="unavailable",tr=null,er=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Jn="error"),Yn&&Yn(t)};function ir(){nr.fire(new kt("pluginStateChange",{pluginStatus:Jn,pluginURL:tr}))}var nr=new Pt,rr=function(){return Jn},or=function(){if("deferred"!==Jn||!tr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Jn="loading",ir(),tr&&bt({url:tr},(function(t){t?er(t):(Jn="loaded",ir())}))},ar={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Jn||null!=ar.applyArabicShaping},isLoading:function(){return"loading"===Jn},setState:function(t){Jn=t.pluginStatus,tr=t.pluginURL},isParsed:function(){return null!=ar.applyArabicShaping&&null!=ar.processBidirectionalText&&null!=ar.processStyledBidirectionalText},getPluginURL:function(){return tr}},sr=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Zn,this.transition={})};sr.prototype.isSupportedScript=function(t){return function(t,e){for(var i=0,n=t;i<n.length;i+=1)if(!Xn(n[i].charCodeAt(0),e))return!1;return!0}(t,ar.isLoaded())},sr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},sr.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}};var lr=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Bi(t))return new Xi(t,e);if(Hi(t)){var i=Ki(t,e);if("error"===i.result)throw new Error(i.value.map((function(t){return t.key+": "+t.message})).join(", "));return i.value}var n=t;return"string"==typeof t&&"color"===e.type&&(n=te.parse(t)),{kind:"constant",evaluate:function(){return n}}}(void 0===e?t.specification.default:e,t.specification)};lr.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},lr.prototype.possiblyEvaluate=function(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)};var cr=function(t){this.property=t,this.value=new lr(t,void 0)};cr.prototype.transitioned=function(t,e){return new hr(this.property,this.value,e,p({},t.transition,this.transition),t.now)},cr.prototype.untransitioned=function(){return new hr(this.property,this.value,null,{},0)};var ur=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};ur.prototype.getValue=function(t){return x(this._values[t].value.value)},ur.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new cr(this._values[t].property)),this._values[t].value=new lr(this._values[t].property,null===e?void 0:x(e))},ur.prototype.getTransition=function(t){return x(this._values[t].transition)},ur.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new cr(this._values[t].property)),this._values[t].transition=x(e)||void 0},ur.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var n=i[e],r=this.getValue(n);void 0!==r&&(t[n]=r);var o=this.getTransition(n);void 0!==o&&(t[n+"-transition"]=o)}return t},ur.prototype.transitioned=function(t,e){for(var i=new pr(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var o=r[n];i._values[o]=this._values[o].transitioned(t,e._values[o])}return i},ur.prototype.untransitioned=function(){for(var t=new pr(this._properties),e=0,i=Object.keys(this._values);e<i.length;e+=1){var n=i[e];t._values[n]=this._values[n].untransitioned()}return t};var hr=function(t,e,i,n,r){this.property=t,this.value=e,this.begin=r+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=i)};hr.prototype.possiblyEvaluate=function(t,e,i){var n=t.now||0,r=this.value.possiblyEvaluate(t,e,i),o=this.prior;if(o){if(n>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(n<this.begin)return o.possiblyEvaluate(t,e,i);var a=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,i),r,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}(a))}return r};var pr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};pr.prototype.possiblyEvaluate=function(t,e,i){for(var n=new mr(this._properties),r=0,o=Object.keys(this._values);r<o.length;r+=1){var a=o[r];n._values[a]=this._values[a].possiblyEvaluate(t,e,i)}return n},pr.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var dr=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};dr.prototype.getValue=function(t){return x(this._values[t].value)},dr.prototype.setValue=function(t,e){this._values[t]=new lr(this._values[t].property,null===e?void 0:x(e))},dr.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var n=i[e],r=this.getValue(n);void 0!==r&&(t[n]=r)}return t},dr.prototype.possiblyEvaluate=function(t,e,i){for(var n=new mr(this._properties),r=0,o=Object.keys(this._values);r<o.length;r+=1){var a=o[r];n._values[a]=this._values[a].possiblyEvaluate(t,e,i)}return n};var fr=function(t,e,i){this.property=t,this.value=e,this.parameters=i};fr.prototype.isConstant=function(){return"constant"===this.value.kind},fr.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},fr.prototype.evaluate=function(t,e,i,n){return this.property.evaluate(this.value,this.parameters,t,e,i,n)};var mr=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};mr.prototype.get=function(t){return this._values[t]};var gr=function(t){this.specification=t};gr.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},gr.prototype.interpolate=function(t,e,i){var n=He[this.specification.type];return n?n(t,e,i):t};var yr=function(t,e){this.specification=t,this.overrides=e};yr.prototype.possiblyEvaluate=function(t,e,i,n){return new fr(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,n)}:t.expression,e)},yr.prototype.interpolate=function(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new fr(this,{kind:"constant",value:void 0},t.parameters);var n=He[this.specification.type];return n?new fr(this,{kind:"constant",value:n(t.value.value,e.value.value,i)},t.parameters):t},yr.prototype.evaluate=function(t,e,i,n,r,o){return"constant"===t.kind?t.value:t.evaluate(e,i,n,r,o)};var _r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,i,n){if(void 0===t.value)return new fr(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var r=t.expression.evaluate(e,null,{},i,n),o="resolvedImage"===t.property.specification.type&&"string"!=typeof r?r.name:r,a=this._calculate(o,o,o,e);return new fr(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new fr(this,{kind:"constant",value:s},e)}return new fr(this,t.expression,e)},e.prototype.evaluate=function(t,e,i,n,r,o){if("source"===t.kind){var a=t.evaluate(e,i,n,r,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,n),t.evaluate({zoom:Math.floor(e.zoom)},i,n),t.evaluate({zoom:Math.floor(e.zoom)+1},i,n),e):t.value},e.prototype._calculate=function(t,e,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},e.prototype.interpolate=function(t){return t},e}(yr),vr=function(t){this.specification=t};vr.prototype.possiblyEvaluate=function(t,e,i,n){if(void 0!==t.value){if("constant"===t.expression.kind){var r=t.expression.evaluate(e,null,{},i,n);return this._calculate(r,r,r,e)}return this._calculate(t.expression.evaluate(new sr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new sr(Math.floor(e.zoom),e)),t.expression.evaluate(new sr(Math.floor(e.zoom+1),e)),e)}},vr.prototype._calculate=function(t,e,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},vr.prototype.interpolate=function(t){return t};var br=function(t){this.specification=t};br.prototype.possiblyEvaluate=function(t,e,i,n){return!!t.expression.evaluate(e,null,{},i,n)},br.prototype.interpolate=function(){return!1};var xr=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var i=t[e];i.specification.overridable&&this.overridableProperties.push(e);var n=this.defaultPropertyValues[e]=new lr(i,void 0),r=this.defaultTransitionablePropertyValues[e]=new cr(i);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}};Fn("DataDrivenProperty",yr),Fn("DataConstantProperty",gr),Fn("CrossFadedDataDrivenProperty",_r),Fn("CrossFadedProperty",vr),Fn("ColorRampProperty",br);var wr=function(t){function e(e,i){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),i.layout&&(this._unevaluatedLayout=new dr(i.layout)),i.paint)){for(var n in this._transitionablePaint=new ur(i.paint),e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(var r in e.layout)this.setLayoutProperty(r,e.layout[r],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new mr(i.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,i){void 0===i&&(i={}),null!=e&&this._validate(An,"layers."+this.id+".layout."+t,t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return _(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,i){if(void 0===i&&(i={}),null!=e&&this._validate(Mn,"layers."+this.id+".paint."+t,t,e,i))return!1;if(_(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var n=this._transitionablePaint._values[t],r="cross-faded-data-driven"===n.property.specification["property-type"],o=n.value.isDataDriven(),a=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||r||this._handleOverridablePaintPropertyUpdate(t,a,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,i){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),b(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,i,n,r){return void 0===r&&(r={}),(!r||!1!==r.validate)&&zn(this,t.call(Pn,{key:e,layerType:this.type,objectKey:i,value:n,styleSpec:It,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof fr&&Oi(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(Pt),Cr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Sr=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Tr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function kr(t,e){void 0===e&&(e=1);var i=0,n=0;return{members:t.map((function(t){var r=Cr[t.type].BYTES_PER_ELEMENT,o=i=Er(i,Math.max(e,r)),a=t.components||1;return n=Math.max(n,r),i+=r*a,{name:t.name,type:t.type,components:a,offset:o}})),size:Er(i,Math.max(n,e)),alignment:e}}function Er(t,e){return Math.ceil(t/e)*e}Tr.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Tr.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Tr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Tr.prototype.clear=function(){this.length=0},Tr.prototype.resize=function(t){this.reserve(t),this.length=t},Tr.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Tr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Pr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var n=2*t;return this.int16[n+0]=e,this.int16[n+1]=i,t},e}(Tr);Pr.prototype.bytesPerElement=4,Fn("StructArrayLayout2i4",Pr);var Ir=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)},e.prototype.emplace=function(t,e,i,n,r){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.int16[o+2]=n,this.int16[o+3]=r,t},e}(Tr);Ir.prototype.bytesPerElement=8,Fn("StructArrayLayout4i8",Ir);var Mr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,n,r,o)},e.prototype.emplace=function(t,e,i,n,r,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Tr);Mr.prototype.bytesPerElement=12,Fn("StructArrayLayout2i4i12",Mr);var Ar=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,n,r,o)},e.prototype.emplace=function(t,e,i,n,r,o,a){var s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.uint8[l+4]=n,this.uint8[l+5]=r,this.uint8[l+6]=o,this.uint8[l+7]=a,t},e}(Tr);Ar.prototype.bytesPerElement=8,Fn("StructArrayLayout2i4ub8",Ar);var zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var n=2*t;return this.float32[n+0]=e,this.float32[n+1]=i,t},e}(Tr);zr.prototype.bytesPerElement=8,Fn("StructArrayLayout2f8",zr);var Or=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o,a,s,l,c){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,i,n,r,o,a,s,l,c)},e.prototype.emplace=function(t,e,i,n,r,o,a,s,l,c,u){var h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=i,this.uint16[h+2]=n,this.uint16[h+3]=r,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,t},e}(Tr);Or.prototype.bytesPerElement=20,Fn("StructArrayLayout10ui20",Or);var Lr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o,a,s,l,c,u,h){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,i,n,r,o,a,s,l,c,u,h)},e.prototype.emplace=function(t,e,i,n,r,o,a,s,l,c,u,h,p){var d=12*t;return this.int16[d+0]=e,this.int16[d+1]=i,this.int16[d+2]=n,this.int16[d+3]=r,this.uint16[d+4]=o,this.uint16[d+5]=a,this.uint16[d+6]=s,this.uint16[d+7]=l,this.int16[d+8]=c,this.int16[d+9]=u,this.int16[d+10]=h,this.int16[d+11]=p,t},e}(Tr);Lr.prototype.bytesPerElement=24,Fn("StructArrayLayout4i4ui4i24",Lr);var Dr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)},e.prototype.emplace=function(t,e,i,n){var r=3*t;return this.float32[r+0]=e,this.float32[r+1]=i,this.float32[r+2]=n,t},e}(Tr);Dr.prototype.bytesPerElement=12,Fn("StructArrayLayout3f12",Dr);var Rr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Tr);Rr.prototype.bytesPerElement=4,Fn("StructArrayLayout1ul4",Rr);var Br=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o,a,s,l){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,i,n,r,o,a,s,l)},e.prototype.emplace=function(t,e,i,n,r,o,a,s,l,c){var u=10*t,h=5*t;return this.int16[u+0]=e,this.int16[u+1]=i,this.int16[u+2]=n,this.int16[u+3]=r,this.int16[u+4]=o,this.int16[u+5]=a,this.uint32[h+3]=s,this.uint16[u+8]=l,this.uint16[u+9]=c,t},e}(Tr);Br.prototype.bytesPerElement=20,Fn("StructArrayLayout6i1ul2ui20",Br);var Fr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,n,r,o)},e.prototype.emplace=function(t,e,i,n,r,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Tr);Fr.prototype.bytesPerElement=12,Fn("StructArrayLayout2i2i2i12",Fr);var Nr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,n,r)},e.prototype.emplace=function(t,e,i,n,r,o){var a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=i,this.float32[a+2]=n,this.int16[s+6]=r,this.int16[s+7]=o,t},e}(Tr);Nr.prototype.bytesPerElement=16,Fn("StructArrayLayout2f1f2i16",Nr);var Vr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)},e.prototype.emplace=function(t,e,i,n,r){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=i,this.float32[a+1]=n,this.float32[a+2]=r,t},e}(Tr);Vr.prototype.bytesPerElement=12,Fn("StructArrayLayout2ub2f12",Vr);var jr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)},e.prototype.emplace=function(t,e,i,n){var r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=i,this.uint16[r+2]=n,t},e}(Tr);jr.prototype.bytesPerElement=6,Fn("StructArrayLayout3ui6",jr);var Ur=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o,a,s,l,c,u,h,p,d,f,m,g){var y=this.length;return this.resize(y+1),this.emplace(y,t,e,i,n,r,o,a,s,l,c,u,h,p,d,f,m,g)},e.prototype.emplace=function(t,e,i,n,r,o,a,s,l,c,u,h,p,d,f,m,g,y){var _=24*t,v=12*t,b=48*t;return this.int16[_+0]=e,this.int16[_+1]=i,this.uint16[_+2]=n,this.uint16[_+3]=r,this.uint32[v+2]=o,this.uint32[v+3]=a,this.uint32[v+4]=s,this.uint16[_+10]=l,this.uint16[_+11]=c,this.uint16[_+12]=u,this.float32[v+7]=h,this.float32[v+8]=p,this.uint8[b+36]=d,this.uint8[b+37]=f,this.uint8[b+38]=m,this.uint32[v+10]=g,this.int16[_+22]=y,t},e}(Tr);Ur.prototype.bytesPerElement=48,Fn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ur);var qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o,a,s,l,c,u,h,p,d,f,m,g,y,_,v,b,x,w,C,S,T,k,E){var P=this.length;return this.resize(P+1),this.emplace(P,t,e,i,n,r,o,a,s,l,c,u,h,p,d,f,m,g,y,_,v,b,x,w,C,S,T,k,E)},e.prototype.emplace=function(t,e,i,n,r,o,a,s,l,c,u,h,p,d,f,m,g,y,_,v,b,x,w,C,S,T,k,E,P){var I=34*t,M=17*t;return this.int16[I+0]=e,this.int16[I+1]=i,this.int16[I+2]=n,this.int16[I+3]=r,this.int16[I+4]=o,this.int16[I+5]=a,this.int16[I+6]=s,this.int16[I+7]=l,this.uint16[I+8]=c,this.uint16[I+9]=u,this.uint16[I+10]=h,this.uint16[I+11]=p,this.uint16[I+12]=d,this.uint16[I+13]=f,this.uint16[I+14]=m,this.uint16[I+15]=g,this.uint16[I+16]=y,this.uint16[I+17]=_,this.uint16[I+18]=v,this.uint16[I+19]=b,this.uint16[I+20]=x,this.uint16[I+21]=w,this.uint16[I+22]=C,this.uint32[M+12]=S,this.float32[M+13]=T,this.float32[M+14]=k,this.float32[M+15]=E,this.float32[M+16]=P,t},e}(Tr);qr.prototype.bytesPerElement=68,Fn("StructArrayLayout8i15ui1ul4f68",qr);var Zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Tr);Zr.prototype.bytesPerElement=4,Fn("StructArrayLayout1f4",Zr);var Hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)},e.prototype.emplace=function(t,e,i,n){var r=3*t;return this.int16[r+0]=e,this.int16[r+1]=i,this.int16[r+2]=n,t},e}(Tr);Hr.prototype.bytesPerElement=6,Fn("StructArrayLayout3i6",Hr);var Gr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)},e.prototype.emplace=function(t,e,i,n){var r=4*t;return this.uint32[2*t+0]=e,this.uint16[r+2]=i,this.uint16[r+3]=n,t},e}(Tr);Gr.prototype.bytesPerElement=8,Fn("StructArrayLayout1ul2ui8",Gr);var Wr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,t},e}(Tr);Wr.prototype.bytesPerElement=4,Fn("StructArrayLayout2ui4",Wr);var $r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Tr);$r.prototype.bytesPerElement=2,Fn("StructArrayLayout1ui2",$r);var Kr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)},e.prototype.emplace=function(t,e,i,n,r){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=i,this.float32[o+2]=n,this.float32[o+3]=r,t},e}(Tr);Kr.prototype.bytesPerElement=16,Fn("StructArrayLayout4f16",Kr);var Xr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,i),e}(Sr);Xr.prototype.size=20;var Qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Xr(this,t)},e}(Br);Fn("CollisionBoxArray",Qr);var Yr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,i),e}(Sr);Yr.prototype.size=48;var Jr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Yr(this,t)},e}(Ur);Fn("PlacedSymbolArray",Jr);var to=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,i),e}(Sr);to.prototype.size=68;var eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new to(this,t)},e}(qr);Fn("SymbolInstanceArray",eo);var io=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(Zr);Fn("GlyphOffsetArray",io);var no=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(Hr);Fn("SymbolLineVertexArray",no);var ro=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,i),e}(Sr);ro.prototype.size=8;var oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new ro(this,t)},e}(Gr);Fn("FeatureIndexArray",oo);var ao=kr([{name:"a_pos",components:2,type:"Int16"}],4).members,so=function(t){void 0===t&&(t=[]),this.segments=t};function lo(t,e){return 256*(t=u(Math.floor(t),0,255))+u(Math.floor(e),0,255)}so.prototype.prepareSegment=function(t,e,i,n){var r=this.segments[this.segments.length-1];return t>so.MAX_VERTEX_ARRAY_LENGTH&&C("Max vertices per segment is "+so.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!r||r.vertexLength+t>so.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==n)&&(r={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==n&&(r.sortKey=n),this.segments.push(r)),r},so.prototype.get=function(){return this.segments},so.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var i=e[t];for(var n in i.vaos)i.vaos[n].destroy()}},so.simpleSegment=function(t,e,i,n){return new so([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:n,vaos:{},sortKey:0}])},so.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Fn("SegmentVector",so);var co=kr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),uo=e((function(t){t.exports=function(t,e){var i,n,r,o,a,s,l,c;for(n=t.length-(i=3&t.length),r=e,a=3432918353,s=461845907,c=0;c<n;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,r=27492+(65535&(o=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}})),ho=e((function(t){t.exports=function(t,e){for(var i,n=t.length,r=e^n,o=0;n>=4;)i=1540483477*(65535&(i=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:r^=(255&t.charCodeAt(o+2))<<16;case 2:r^=(255&t.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}})),po=uo,fo=ho;po.murmur3=uo,po.murmur2=fo;var mo=function(){this.ids=[],this.positions=[],this.indexed=!1};mo.prototype.add=function(t,e,i,n){this.ids.push(yo(t)),this.positions.push(e,i,n)},mo.prototype.getPositions=function(t){for(var e=yo(t),i=0,n=this.ids.length-1;i<n;){var r=i+n>>1;this.ids[r]>=e?n=r:i=r+1}for(var o=[];this.ids[i]===e;)o.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return o},mo.serialize=function(t,e){var i=new Float64Array(t.ids),n=new Uint32Array(t.positions);return function t(e,i,n,r){for(;n<r;){for(var o=e[n+r>>1],a=n-1,s=r+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;_o(e,a,s),_o(i,3*a,3*s),_o(i,3*a+1,3*s+1),_o(i,3*a+2,3*s+2)}s-n<r-s?(t(e,i,n,s),n=s+1):(t(e,i,s+1,r),r=s)}}(i,n,0,i.length-1),e&&e.push(i.buffer,n.buffer),{ids:i,positions:n}},mo.deserialize=function(t){var e=new mo;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var go=Math.pow(2,53)-1;function yo(t){var e=+t;return!isNaN(e)&&e<=go?e:po(String(t))}function _o(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}Fn("FeaturePositionMap",mo);var vo=function(t,e){this.gl=t.gl,this.location=e},bo=function(t){function e(e,i){t.call(this,e,i),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(vo),xo=function(t){function e(e,i){t.call(this,e,i),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(vo),wo=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(vo),Co=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(vo),So=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(vo),To=function(t){function e(e,i){t.call(this,e,i),this.current=te.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(vo),ko=new Float32Array(16),Eo=function(t){function e(e,i){t.call(this,e,i),this.current=ko}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(vo);function Po(t){return[lo(255*t.r,255*t.g),lo(255*t.b,255*t.a)]}var Io=function(t,e,i){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=i};Io.prototype.setUniform=function(t,e,i){t.set(i.constantOr(this.value))},Io.prototype.getBinding=function(t,e,i){return"color"===this.type?new To(t,e):new xo(t,e)};var Mo=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Mo.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Mo.prototype.setUniform=function(t,e,i,n){var r="u_pattern_to"===n?this.patternTo:"u_pattern_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null;r&&t.set(r)},Mo.prototype.getBinding=function(t,e,i){return"u_pattern"===i.substr(0,9)?new So(t,e):new xo(t,e)};var Ao=function(t,e,i,n){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?2:1,offset:0}})),this.paintVertexArray=new n};Ao.prototype.populatePaintArray=function(t,e,i,n,r){var o=this.paintVertexArray.length,a=this.expression.evaluate(new sr(0),e,{},n,[],r);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},Ao.prototype.updatePaintArray=function(t,e,i,n){var r=this.expression.evaluate({zoom:0},i,n);this._setPaintValue(t,e,r)},Ao.prototype._setPaintValue=function(t,e,i){if("color"===this.type)for(var n=Po(i),r=t;r<e;r++)this.paintVertexArray.emplace(r,n[0],n[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Ao.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ao.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var zo=function(t,e,i,n,r,o){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=i,this.useIntegerZoom=n,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?4:2,offset:0}})),this.paintVertexArray=new o};zo.prototype.populatePaintArray=function(t,e,i,n,r){var o=this.expression.evaluate(new sr(this.zoom),e,{},n,[],r),a=this.expression.evaluate(new sr(this.zoom+1),e,{},n,[],r),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},zo.prototype.updatePaintArray=function(t,e,i,n){var r=this.expression.evaluate({zoom:this.zoom},i,n),o=this.expression.evaluate({zoom:this.zoom+1},i,n);this._setPaintValue(t,e,r,o)},zo.prototype._setPaintValue=function(t,e,i,n){if("color"===this.type)for(var r=Po(i),o=Po(n),a=t;a<e;a++)this.paintVertexArray.emplace(a,r[0],r[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,i,n);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(n))}},zo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},zo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},zo.prototype.setUniform=function(t,e){var i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,n=u(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(n)},zo.prototype.getBinding=function(t,e,i){return new xo(t,e)};var Oo=function(t,e,i,n,r,o){this.expression=t,this.type=e,this.useIntegerZoom=i,this.zoom=n,this.layerId=o,this.zoomInPaintVertexArray=new r,this.zoomOutPaintVertexArray=new r};Oo.prototype.populatePaintArray=function(t,e,i){var n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(n,t,e.patterns&&e.patterns[this.layerId],i)},Oo.prototype.updatePaintArray=function(t,e,i,n,r){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],r)},Oo.prototype._setPaintValues=function(t,e,i,n){if(n&&i){var r=n[i.min],o=n[i.mid],a=n[i.max];if(r&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],r.tl[0],r.tl[1],r.br[0],r.br[1],o.pixelRatio,r.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},Oo.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,co.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,co.members,this.expression.isStateDependent))},Oo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Lo=function(t,e,i){this.binders={},this._buffers=[];var n=[];for(var r in t.paint._values)if(i(r)){var o=t.paint.get(r);if(o instanceof fr&&Oi(o.property.specification)){var a=Ro(r,t.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===s.kind)this.binders[r]=h?new Mo(s.value,a):new Io(s.value,a,l),n.push("/u_"+r);else if("source"===s.kind||h){var p=Bo(r,l,"source");this.binders[r]=h?new Oo(s,l,c,e,p,t.id):new Ao(s,a,l,p),n.push("/a_"+r)}else{var d=Bo(r,l,"composite");this.binders[r]=new zo(s,a,l,c,e,d),n.push("/z_"+r)}}}this.cacheKey=n.sort().join("")};Lo.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof Ao||e instanceof zo?e.maxValue:0},Lo.prototype.populatePaintArrays=function(t,e,i,n,r){for(var o in this.binders){var a=this.binders[o];(a instanceof Ao||a instanceof zo||a instanceof Oo)&&a.populatePaintArray(t,e,i,n,r)}},Lo.prototype.setConstantPatternPositions=function(t,e){for(var i in this.binders){var n=this.binders[i];n instanceof Mo&&n.setConstantPatternPositions(t,e)}},Lo.prototype.updatePaintArrays=function(t,e,i,n,r){var o=!1;for(var a in t)for(var s=0,l=e.getPositions(a);s<l.length;s+=1){var c=l[s],u=i.feature(c.index);for(var h in this.binders){var p=this.binders[h];if((p instanceof Ao||p instanceof zo||p instanceof Oo)&&!0===p.expression.isStateDependent){var d=n.paint.get(h);p.expression=d.value,p.updatePaintArray(c.start,c.end,u,t[a],r),o=!0}}}return o},Lo.prototype.defines=function(){var t=[];for(var e in this.binders){var i=this.binders[e];(i instanceof Io||i instanceof Mo)&&t.push.apply(t,i.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},Lo.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var i=this.binders[e];if(i instanceof Ao||i instanceof zo)for(var n=0;n<i.paintVertexAttributes.length;n++)t.push(i.paintVertexAttributes[n].name);else if(i instanceof Oo)for(var r=0;r<co.members.length;r++)t.push(co.members[r].name)}return t},Lo.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var i=this.binders[e];if(i instanceof Io||i instanceof Mo||i instanceof zo)for(var n=0,r=i.uniformNames;n<r.length;n+=1)t.push(r[n])}return t},Lo.prototype.getPaintVertexBuffers=function(){return this._buffers},Lo.prototype.getUniforms=function(t,e){var i=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof Io||r instanceof Mo||r instanceof zo)for(var o=0,a=r.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var l=r.getBinding(t,e[s],s);i.push({name:s,property:n,binding:l})}}}return i},Lo.prototype.setUniforms=function(t,e,i,n){for(var r=0,o=e;r<o.length;r+=1){var a=o[r],s=a.name,l=a.property;this.binders[l].setUniform(a.binding,n,i.get(l),s)}},Lo.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var i=this.binders[e];if(t&&i instanceof Oo){var n=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;n&&this._buffers.push(n)}else(i instanceof Ao||i instanceof zo)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Lo.prototype.upload=function(t){for(var e in this.binders){var i=this.binders[e];(i instanceof Ao||i instanceof zo||i instanceof Oo)&&i.upload(t)}this.updatePaintBuffers()},Lo.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof Ao||e instanceof zo||e instanceof Oo)&&e.destroy()}};var Do=function(t,e,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var n=0,r=t;n<r.length;n+=1){var o=r[n];this.programConfigurations[o.id]=new Lo(o,e,i)}this.needsUpload=!1,this._featureMap=new mo,this._bufferOffset=0};function Ro(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Bo(t,e,i){var n={color:{source:zr,composite:Kr},number:{source:Zr,composite:zr}},r=function(t){return{"line-pattern":{source:Or,composite:Or},"fill-pattern":{source:Or,composite:Or},"fill-extrusion-pattern":{source:Or,composite:Or}}[t]}(t);return r&&r[i]||n[e][i]}Do.prototype.populatePaintArrays=function(t,e,i,n,r,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,n,r,o);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Do.prototype.updatePaintArrays=function(t,e,i,n){for(var r=0,o=i;r<o.length;r+=1){var a=o[r];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,n)||this.needsUpload}},Do.prototype.get=function(t){return this.programConfigurations[t]},Do.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Do.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Fn("ConstantBinder",Io),Fn("CrossFadedConstantBinder",Mo),Fn("SourceExpressionBinder",Ao),Fn("CrossFadedCompositeBinder",Oo),Fn("CompositeExpressionBinder",zo),Fn("ProgramConfiguration",Lo,{omit:["_buffers"]}),Fn("ProgramConfigurationSet",Do);var Fo=Math.pow(2,14)-1,No=-Fo-1;function Vo(t){for(var e=8192/t.extent,i=t.loadGeometry(),n=0;n<i.length;n++)for(var r=i[n],o=0;o<r.length;o++){var a=r[o],s=Math.round(a.x*e),l=Math.round(a.y*e);a.x=u(s,No,Fo),a.y=u(l,No,Fo),(s<a.x||s>a.x+1||l<a.y||l>a.y+1)&&C("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function jo(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?Vo(t):[]}}function Uo(t,e,i,n,r){t.emplaceBack(2*e+(n+1)/2,2*i+(r+1)/2)}var qo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Pr,this.indexArray=new jr,this.segments=new so,this.programConfigurations=new Do(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Zo(t,e){for(var i=0;i<t.length;i++)if(Jo(e,t[i]))return!0;for(var n=0;n<e.length;n++)if(Jo(t,e[n]))return!0;return!!$o(t,e)}function Ho(t,e,i){return!!Jo(t,e)||!!Xo(e,t,i)}function Go(t,e){if(1===t.length)return Yo(e,t[0]);for(var i=0;i<e.length;i++)for(var n=e[i],r=0;r<n.length;r++)if(Jo(t,n[r]))return!0;for(var o=0;o<t.length;o++)if(Yo(e,t[o]))return!0;for(var a=0;a<e.length;a++)if($o(t,e[a]))return!0;return!1}function Wo(t,e,i){if(t.length>1){if($o(t,e))return!0;for(var n=0;n<e.length;n++)if(Xo(e[n],t,i))return!0}for(var r=0;r<t.length;r++)if(Xo(t[r],e,i))return!0;return!1}function $o(t,e){if(0===t.length||0===e.length)return!1;for(var i=0;i<t.length-1;i++)for(var n=t[i],r=t[i+1],o=0;o<e.length-1;o++)if(Ko(n,r,e[o],e[o+1]))return!0;return!1}function Ko(t,e,i,n){return S(t,i,n)!==S(e,i,n)&&S(t,e,i)!==S(t,e,n)}function Xo(t,e,i){var n=i*i;if(1===e.length)return t.distSqr(e[0])<n;for(var r=1;r<e.length;r++)if(Qo(t,e[r-1],e[r])<n)return!0;return!1}function Qo(t,e,i){var n=e.distSqr(i);if(0===n)return t.distSqr(e);var r=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n;return t.distSqr(r<0?e:r>1?i:i.sub(e)._mult(r)._add(e))}function Yo(t,e){for(var i,n,r,o=!1,a=0;a<t.length;a++)for(var s=0,l=(i=t[a]).length-1;s<i.length;l=s++)(n=i[s]).y>e.y!=(r=i[l]).y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(o=!o);return o}function Jo(t,e){for(var i=!1,n=0,r=t.length-1;n<t.length;r=n++){var o=t[n],a=t[r];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(i=!i)}return i}function ta(t,e,i){var n=i[0],r=i[2];if(t.x<n.x&&e.x<n.x||t.x>r.x&&e.x>r.x||t.y<n.y&&e.y<n.y||t.y>r.y&&e.y>r.y)return!1;var o=S(t,e,i[0]);return o!==S(t,e,i[1])||o!==S(t,e,i[2])||o!==S(t,e,i[3])}function ea(t,e,i){var n=e.paint.get(t).value;return"constant"===n.kind?n.value:i.programConfigurations.get(e.id).getMaxValue(t)}function ia(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function na(t,e,i,n,o){if(!e[0]&&!e[1])return t;var a=r.convert(e)._mult(o);"viewport"===i&&a._rotate(-n);for(var s=[],l=0;l<t.length;l++)s.push(t[l].sub(a));return s}qo.prototype.populate=function(t,e,i){var n=this.layers[0],r=[],o=null;"circle"===n.type&&(o=n.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var l=s[a],c=l.feature,u=l.id,h=l.index,p=l.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,f=jo(c,d);if(this.layers[0]._featureFilter.filter(new sr(this.zoom),f,i)){var m=o?o.evaluate(f,{},i):void 0,g={id:u,properties:c.properties,type:c.type,sourceLayerIndex:p,index:h,geometry:d?f.geometry:Vo(c),patterns:{},sortKey:m};r.push(g)}}o&&r.sort((function(t,e){return t.sortKey-e.sortKey}));for(var y=0,_=r;y<_.length;y+=1){var v=_[y],b=v.geometry,x=v.index,w=v.sourceLayerIndex,C=t[x].feature;this.addFeature(v,b,x,i),e.featureIndex.insert(C,b,x,w,this.index)}},qo.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},qo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},qo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ao),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},qo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qo.prototype.addFeature=function(t,e,i,n){for(var r=0,o=e;r<o.length;r+=1)for(var a=0,s=o[r];a<s.length;a+=1){var l=s[a],c=l.x,u=l.y;if(!(c<0||c>=8192||u<0||u>=8192)){var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),p=h.vertexLength;Uo(this.layoutVertexArray,c,u,-1,-1),Uo(this.layoutVertexArray,c,u,1,-1),Uo(this.layoutVertexArray,c,u,1,1),Uo(this.layoutVertexArray,c,u,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},n)},Fn("CircleBucket",qo,{omit:["layers"]});var ra=new xr({"circle-sort-key":new yr(It.layout_circle["circle-sort-key"])}),oa={paint:new xr({"circle-radius":new yr(It.paint_circle["circle-radius"]),"circle-color":new yr(It.paint_circle["circle-color"]),"circle-blur":new yr(It.paint_circle["circle-blur"]),"circle-opacity":new yr(It.paint_circle["circle-opacity"]),"circle-translate":new gr(It.paint_circle["circle-translate"]),"circle-translate-anchor":new gr(It.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new gr(It.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new gr(It.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yr(It.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yr(It.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yr(It.paint_circle["circle-stroke-opacity"])}),layout:ra},aa="undefined"!=typeof Float32Array?Float32Array:Array;function sa(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function la(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=e[9],d=e[10],f=e[11],m=e[12],g=e[13],y=e[14],_=e[15],v=i[0],b=i[1],x=i[2],w=i[3];return t[0]=v*n+b*s+x*h+w*m,t[1]=v*r+b*l+x*p+w*g,t[2]=v*o+b*c+x*d+w*y,t[3]=v*a+b*u+x*f+w*_,t[4]=(v=i[4])*n+(b=i[5])*s+(x=i[6])*h+(w=i[7])*m,t[5]=v*r+b*l+x*p+w*g,t[6]=v*o+b*c+x*d+w*y,t[7]=v*a+b*u+x*f+w*_,t[8]=(v=i[8])*n+(b=i[9])*s+(x=i[10])*h+(w=i[11])*m,t[9]=v*r+b*l+x*p+w*g,t[10]=v*o+b*c+x*d+w*y,t[11]=v*a+b*u+x*f+w*_,t[12]=(v=i[12])*n+(b=i[13])*s+(x=i[14])*h+(w=i[15])*m,t[13]=v*r+b*l+x*p+w*g,t[14]=v*o+b*c+x*d+w*y,t[15]=v*a+b*u+x*f+w*_,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,i=arguments.length;i--;)e+=t[i]*t[i];return Math.sqrt(e)});var ca,ua=la;function ha(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*o+i[12]*a,t[1]=i[1]*n+i[5]*r+i[9]*o+i[13]*a,t[2]=i[2]*n+i[6]*r+i[10]*o+i[14]*a,t[3]=i[3]*n+i[7]*r+i[11]*o+i[15]*a,t}ca=new aa(3),aa!=Float32Array&&(ca[0]=0,ca[1]=0,ca[2]=0),function(){var t=new aa(4);aa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var pa=(function(){var t=new aa(2);aa!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,oa)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new qo(t)},e.prototype.queryRadius=function(t){var e=t;return ea("circle-radius",this,e)+ea("circle-stroke-width",this,e)+ia(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,n,r,o,a,s){for(var l=na(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),c=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),u="map"===this.paint.get("circle-pitch-alignment"),h=u?l:function(t,e){return t.map((function(t){return da(t,e)}))}(l,s),p=u?c*a:c,d=0,f=n;d<f.length;d+=1)for(var m=0,g=f[d];m<g.length;m+=1){var y=g[m],_=u?y:da(y,s),v=p,b=ha([],[y.x,y.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?v*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(v*=o.cameraToCenterDistance/b[3]),Ho(h,_,v))return!0}return!1},e}(wr));function da(t,e){var i=ha([],[t.x,t.y,0,1],e);return new r(i[0]/i[3],i[1]/i[3])}var fa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(qo);function ma(t,e,i,n){var r=e.width,o=e.height;if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==r*o*i)throw new RangeError("mismatched image size")}else n=new Uint8Array(r*o*i);return t.width=r,t.height=o,t.data=n,t}function ga(t,e,i){var n=e.width,r=e.height;if(n!==t.width||r!==t.height){var o=ma({},{width:n,height:r},i);ya(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,r)},i),t.width=n,t.height=r,t.data=o.data}}function ya(t,e,i,n,r,o){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||i.x>t.width-r.width||i.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||n.x>e.width-r.width||n.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,l=0;l<r.height;l++)for(var c=((i.y+l)*t.width+i.x)*o,u=((n.y+l)*e.width+n.x)*o,h=0;h<r.width*o;h++)s[u+h]=a[c+h];return e}Fn("HeatmapBucket",fa,{omit:["layers"]});var _a=function(t,e){ma(this,t,1,e)};_a.prototype.resize=function(t){ga(this,t,1)},_a.prototype.clone=function(){return new _a({width:this.width,height:this.height},new Uint8Array(this.data))},_a.copy=function(t,e,i,n,r){ya(t,e,i,n,r,1)};var va=function(t,e){ma(this,t,4,e)};va.prototype.resize=function(t){ga(this,t,4)},va.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},va.prototype.clone=function(){return new va({width:this.width,height:this.height},new Uint8Array(this.data))},va.copy=function(t,e,i,n,r){ya(t,e,i,n,r,4)},Fn("AlphaImage",_a),Fn("RGBAImage",va);var ba={paint:new xr({"heatmap-radius":new yr(It.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yr(It.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new gr(It.paint_heatmap["heatmap-intensity"]),"heatmap-color":new br(It.paint_heatmap["heatmap-color"]),"heatmap-opacity":new gr(It.paint_heatmap["heatmap-opacity"])})};function xa(t){var e={},i=t.resolution||256,n=t.clips?t.clips.length:1,r=t.image||new va({width:i,height:n}),o=function(i,n,o){e[t.evaluationKey]=o;var a=t.expression.evaluate(e);r.data[i+n+0]=Math.floor(255*a.r/a.a),r.data[i+n+1]=Math.floor(255*a.g/a.a),r.data[i+n+2]=Math.floor(255*a.b/a.a),r.data[i+n+3]=Math.floor(255*a.a)};if(t.clips)for(var a=0,s=0;a<n;++a,s+=4*i)for(var l=0,c=0;l<i;l++,c+=4){var u=l/(i-1),h=t.clips[a];o(s,c,h.start*(1-u)+h.end*u)}else for(var p=0,d=0;p<i;p++,d+=4)o(0,d,p/(i-1));return r}var wa=function(t){function e(e){t.call(this,e,ba),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new fa(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=xa({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(wr),Ca={paint:new xr({"hillshade-illumination-direction":new gr(It.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new gr(It.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new gr(It.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new gr(It.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new gr(It.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new gr(It.paint_hillshade["hillshade-accent-color"])})},Sa=function(t){function e(e){t.call(this,e,Ca)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(wr),Ta=kr([{name:"a_pos",components:2,type:"Int16"}],4).members,ka=Pa,Ea=Pa;function Pa(t,e,i){i=i||2;var n,r,o,a,s,l,c,u=e&&e.length,h=u?e[0]*i:t.length,p=Ia(t,0,h,i,!0),d=[];if(!p||p.next===p.prev)return d;if(u&&(p=function(t,e,i,n){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++)(a=Ia(t,e[r]*n,r<o-1?e[r+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),s.push(Va(a));for(s.sort(Ra),r=0;r<s.length;r++)Ba(s[r],i),i=Ma(i,i.next);return i}(t,e,p,i)),t.length>80*i){n=o=t[0],r=a=t[1];for(var f=i;f<h;f+=i)(s=t[f])<n&&(n=s),(l=t[f+1])<r&&(r=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-n,a-r))?1/c:0}return Aa(p,d,i,n,r,c),d}function Ia(t,e,i,n,r){var o,a;if(r===Ja(t,e,i,n)>0)for(o=e;o<i;o+=n)a=Xa(o,t[o],t[o+1],a);else for(o=i-n;o>=e;o-=n)a=Xa(o,t[o],t[o+1],a);return a&&Za(a,a.next)&&(Qa(a),a=a.next),a}function Ma(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!Za(n,n.next)&&0!==qa(n.prev,n,n.next))n=n.next;else{if(Qa(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function Aa(t,e,i,n,r,o,a){if(t){!a&&o&&function(t,e,i,n){var r=t;do{null===r.z&&(r.z=Na(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,o,a,s,l,c=1;do{for(i=t,t=null,o=null,a=0;i;){for(a++,n=i,s=0,e=0;e<c&&(s++,n=n.nextZ);e++);for(l=c;s>0||l>0&&n;)0!==s&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,s--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,c*=2}while(a>1)}(r)}(t,n,r,o);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?Oa(t,n,r,o):za(t))e.push(s.i/i),e.push(t.i/i),e.push(l.i/i),Qa(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?Aa(t=La(Ma(t),e,i),e,i,n,r,o,2):2===a&&Da(t,e,i,n,r,o):Aa(Ma(t),e,i,n,r,o,1);break}}}function za(t){var e=t.prev,i=t,n=t.next;if(qa(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(ja(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&qa(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Oa(t,e,i,n){var r=t.prev,o=t,a=t.next;if(qa(r,o,a)>=0)return!1;for(var s=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,l=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,c=Na(r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,e,i,n),u=Na(s,l,e,i,n),h=t.prevZ,p=t.nextZ;h&&h.z>=c&&p&&p.z<=u;){if(h!==t.prev&&h!==t.next&&ja(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&qa(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==t.prev&&p!==t.next&&ja(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&qa(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=c;){if(h!==t.prev&&h!==t.next&&ja(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&qa(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=u;){if(p!==t.prev&&p!==t.next&&ja(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&qa(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function La(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!Za(r,o)&&Ha(r,n,n.next,o)&&$a(r,o)&&$a(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),Qa(n),Qa(n.next),n=t=o),n=n.next}while(n!==t);return Ma(n)}function Da(t,e,i,n,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Ua(a,s)){var l=Ka(a,s);return a=Ma(a,a.next),l=Ma(l,l.next),Aa(a,e,i,n,r,o),void Aa(l,e,i,n,r,o)}s=s.next}a=a.next}while(a!==t)}function Ra(t,e){return t.x-e.x}function Ba(t,e){if(e=function(t,e){var i,n=e,r=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>a){if(a=s,s===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===a)return i;var l,c=i,u=i.x,h=i.y,p=1/0;n=i;do{r>=n.x&&n.x>=u&&r!==n.x&&ja(o<h?r:a,o,u,h,o<h?a:r,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(r-n.x),$a(n,t)&&(l<p||l===p&&(n.x>i.x||n.x===i.x&&Fa(i,n)))&&(i=n,p=l)),n=n.next}while(n!==c);return i}(t,e)){var i=Ka(e,t);Ma(e,e.next),Ma(i,i.next)}}function Fa(t,e){return qa(t.prev,t,e.prev)<0&&qa(e.next,t,t.next)<0}function Na(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Va(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function ja(t,e,i,n,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(n-s)-(i-a)*(e-s)>=0&&(i-a)*(o-s)-(r-a)*(n-s)>=0}function Ua(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Ha(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&($a(t,e)&&$a(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(qa(t.prev,t,e.prev)||qa(t,e.prev,e))||Za(t,e)&&qa(t.prev,t,t.next)>0&&qa(e.prev,e,e.next)>0)}function qa(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Za(t,e){return t.x===e.x&&t.y===e.y}function Ha(t,e,i,n){var r=Wa(qa(t,e,i)),o=Wa(qa(t,e,n)),a=Wa(qa(i,n,t)),s=Wa(qa(i,n,e));return r!==o&&a!==s||!(0!==r||!Ga(t,i,e))||!(0!==o||!Ga(t,n,e))||!(0!==a||!Ga(i,t,n))||!(0!==s||!Ga(i,e,n))}function Ga(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Wa(t){return t>0?1:t<0?-1:0}function $a(t,e){return qa(t.prev,t,t.next)<0?qa(t,e,t.next)>=0&&qa(t,t.prev,e)>=0:qa(t,e,t.prev)<0||qa(t,t.next,e)<0}function Ka(t,e){var i=new Ya(t.i,t.x,t.y),n=new Ya(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function Xa(t,e,i,n){var r=new Ya(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Qa(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ya(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ja(t,e,i,n){for(var r=0,o=e,a=i-n;o<i;o+=n)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function ts(t,e,i,n,r){!function t(e,i,n,r,o){for(;r>n;){if(r-n>600){var a=r-n+1,s=i-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);t(e,i,Math.max(n,Math.floor(i-s*c/a+u)),Math.min(r,Math.floor(i+(a-s)*c/a+u)),o)}var h=e[i],p=n,d=r;for(es(e,n,i),o(e[r],h)>0&&es(e,n,r);p<d;){for(es(e,p,d),p++,d--;o(e[p],h)<0;)p++;for(;o(e[d],h)>0;)d--}0===o(e[n],h)?es(e,n,d):es(e,++d,r),d<=i&&(n=d+1),i<=d&&(r=d-1)}}(t,e,i||0,n||t.length-1,r||is)}function es(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function is(t,e){return t<e?-1:t>e?1:0}function ns(t,e){var i=t.length;if(i<=1)return[t];for(var n,r,o=[],a=0;a<i;a++){var s=T(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===r&&(r=s<0),r===s<0?(n&&o.push(n),n=[t[a]]):n.push(t[a]))}if(n&&o.push(n),e>1)for(var l=0;l<o.length;l++)o[l].length<=e||(ts(o[l],e,1,o[l].length-1,rs),o[l]=o[l].slice(0,e));return o}function rs(t,e){return e.area-t.area}function os(t,e,i){for(var n=i.patternDependencies,r=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(r=!0);var l=s.constantOr(null);l&&(r=!0,n[l.to]=!0,n[l.from]=!0)}return r}function as(t,e,i,n,r){for(var o=r.patternDependencies,a=0,s=e;a<s.length;a+=1){var l=s[a],c=l.paint.get(t+"-pattern").value;if("constant"!==c.kind){var u=c.evaluate({zoom:n-1},i,{},r.availableImages),h=c.evaluate({zoom:n},i,{},r.availableImages),p=c.evaluate({zoom:n+1},i,{},r.availableImages);h=h&&h.name?h.name:h,p=p&&p.name?p.name:p,o[u=u&&u.name?u.name:u]=!0,o[h]=!0,o[p]=!0,i.patterns[l.id]={min:u,mid:h,max:p}}}return i}Pa.deviation=function(t,e,i,n){var r=e&&e.length,o=Math.abs(Ja(t,0,r?e[0]*i:t.length,i));if(r)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Ja(t,e[a]*i,a<s-1?e[a+1]*i:t.length,i));var l=0;for(a=0;a<n.length;a+=3){var c=n[a]*i,u=n[a+1]*i,h=n[a+2]*i;l+=Math.abs((t[c]-t[h])*(t[u+1]-t[c+1])-(t[c]-t[u])*(t[h+1]-t[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Pa.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[r][o][a]);r>0&&i.holes.push(n+=t[r-1].length)}return i},ka.default=Ea;var ss=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pr,this.indexArray=new jr,this.indexArray2=new Wr,this.programConfigurations=new Do(t.layers,t.zoom),this.segments=new so,this.segments2=new so,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};ss.prototype.populate=function(t,e,i){this.hasPattern=os("fill",this.layers,e);for(var n=this.layers[0].layout.get("fill-sort-key"),r=[],o=0,a=t;o<a.length;o+=1){var s=a[o],l=s.feature,c=s.id,u=s.index,h=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d=jo(l,p);if(this.layers[0]._featureFilter.filter(new sr(this.zoom),d,i)){var f=n?n.evaluate(d,{},i,e.availableImages):void 0,m={id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:u,geometry:p?d.geometry:Vo(l),patterns:{},sortKey:f};r.push(m)}}n&&r.sort((function(t,e){return t.sortKey-e.sortKey}));for(var g=0,y=r;g<y.length;g+=1){var _=y[g],v=_.geometry,b=_.index,x=_.sourceLayerIndex;if(this.hasPattern){var w=as("fill",this.layers,_,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(_,v,b,i,{});e.featureIndex.insert(t[b].feature,v,b,x,this.index)}},ss.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},ss.prototype.addFeatures=function(t,e,i){for(var n=0,r=this.patternFeatures;n<r.length;n+=1){var o=r[n];this.addFeature(o,o.geometry,o.index,e,i)}},ss.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ss.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ss.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ta),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ss.prototype.addFeature=function(t,e,i,n,r){for(var o=0,a=ns(e,500);o<a.length;o+=1){for(var s=a[o],l=0,c=0,u=s;c<u.length;c+=1)l+=u[c].length;for(var h=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray),p=h.vertexLength,d=[],f=[],m=0,g=s;m<g.length;m+=1){var y=g[m];if(0!==y.length){y!==s[0]&&f.push(d.length/2);var _=this.segments2.prepareSegment(y.length,this.layoutVertexArray,this.indexArray2),v=_.vertexLength;this.layoutVertexArray.emplaceBack(y[0].x,y[0].y),this.indexArray2.emplaceBack(v+y.length-1,v),d.push(y[0].x),d.push(y[0].y);for(var b=1;b<y.length;b++)this.layoutVertexArray.emplaceBack(y[b].x,y[b].y),this.indexArray2.emplaceBack(v+b-1,v+b),d.push(y[b].x),d.push(y[b].y);_.vertexLength+=y.length,_.primitiveLength+=y.length}}for(var x=ka(d,f),w=0;w<x.length;w+=3)this.indexArray.emplaceBack(p+x[w],p+x[w+1],p+x[w+2]);h.vertexLength+=l,h.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,r,n)},Fn("FillBucket",ss,{omit:["layers","patternFeatures"]});var ls=new xr({"fill-sort-key":new yr(It.layout_fill["fill-sort-key"])}),cs={paint:new xr({"fill-antialias":new gr(It.paint_fill["fill-antialias"]),"fill-opacity":new yr(It.paint_fill["fill-opacity"]),"fill-color":new yr(It.paint_fill["fill-color"]),"fill-outline-color":new yr(It.paint_fill["fill-outline-color"]),"fill-translate":new gr(It.paint_fill["fill-translate"]),"fill-translate-anchor":new gr(It.paint_fill["fill-translate-anchor"]),"fill-pattern":new _r(It.paint_fill["fill-pattern"])}),layout:ls},us=function(t){function e(e){t.call(this,e,cs)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,i){t.prototype.recalculate.call(this,e,i);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new ss(t)},e.prototype.queryRadius=function(){return ia(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,n,r,o,a){return Go(na(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),n)},e.prototype.isTileClipped=function(){return!0},e}(wr),hs=kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ps=ds;function ds(t,e,i,n,r){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=r,t.readFields(fs,this,e)}function fs(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var n=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[n]=r}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function ms(t){for(var e,i,n=0,r=0,o=t.length,a=o-1;r<o;a=r++)n+=((i=t[a]).x-(e=t[r]).x)*(e.y+i.y);return n}ds.types=["Unknown","Point","LineString","Polygon"],ds.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,n=1,o=0,a=0,s=0,l=[];t.pos<i;){if(o<=0){var c=t.readVarint();n=7&c,o=c>>3}if(o--,1===n||2===n)a+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&l.push(e),e=[]),e.push(new r(a,s));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&l.push(e),l},ds.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,n=0,r=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;t.pos<e;){if(n<=0){var u=t.readVarint();i=7&u,n=u>>3}if(n--,1===i||2===i)(r+=t.readSVarint())<a&&(a=r),r>s&&(s=r),(o+=t.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==i)throw new Error("unknown command "+i)}return[a,l,s,c]},ds.prototype.toGeoJSON=function(t,e,i){var n,r,o=this.extent*Math.pow(2,i),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),c=ds.types[this.type];function u(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(n=0;n<l.length;n++)h[n]=l[n][0];u(l=h);break;case 2:for(n=0;n<l.length;n++)u(l[n]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var i,n,r=[],o=0;o<e;o++){var a=ms(t[o]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(i&&r.push(i),i=[t[o]]):i.push(t[o]))}return i&&r.push(i),r}(l),n=0;n<l.length;n++)for(r=0;r<l[n].length;r++)u(l[n][r])}1===l.length?l=l[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var gs=ys;function ys(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(_s,this,e),this.length=this._features.length}function _s(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(i))}function vs(t,e,i){if(3===t){var n=new gs(i,i.readVarint()+i.pos);n.length&&(e[n.name]=n)}}ys.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new ps(this._pbf,e,this.extent,this._keys,this._values)};var bs={VectorTile:function(t,e){this.layers=t.readFields(vs,{},e)},VectorTileFeature:ps,VectorTileLayer:gs},xs=bs.VectorTileFeature.types,ws=Math.pow(2,13);function Cs(t,e,i,n,r,o,a,s){t.emplaceBack(e,i,2*Math.floor(n*ws)+a,r*ws*2,o*ws*2,Math.round(s))}var Ss=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Mr,this.indexArray=new jr,this.programConfigurations=new Do(t.layers,t.zoom),this.segments=new so,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Ts(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}Ss.prototype.populate=function(t,e,i){this.features=[],this.hasPattern=os("fill-extrusion",this.layers,e);for(var n=0,r=t;n<r.length;n+=1){var o=r[n],a=o.feature,s=o.id,l=o.index,c=o.sourceLayerIndex,u=this.layers[0]._featureFilter.needGeometry,h=jo(a,u);if(this.layers[0]._featureFilter.filter(new sr(this.zoom),h,i)){var p={id:s,sourceLayerIndex:c,index:l,geometry:u?h.geometry:Vo(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(as("fill-extrusion",this.layers,p,this.zoom,e)):this.addFeature(p,p.geometry,l,i,{}),e.featureIndex.insert(a,p.geometry,l,c,this.index,!0)}}},Ss.prototype.addFeatures=function(t,e,i){for(var n=0,r=this.features;n<r.length;n+=1){var o=r[n];this.addFeature(o,o.geometry,o.index,e,i)}},Ss.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Ss.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ss.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ss.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,hs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ss.prototype.addFeature=function(t,e,i,n,r){for(var o=0,a=ns(e,500);o<a.length;o+=1){for(var s=a[o],l=0,c=0,u=s;c<u.length;c+=1)l+=u[c].length;for(var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,d=s;p<d.length;p+=1){var f=d[p];if(0!==f.length&&!((z=f).every((function(t){return t.x<0}))||z.every((function(t){return t.x>8192}))||z.every((function(t){return t.y<0}))||z.every((function(t){return t.y>8192}))))for(var m=0,g=0;g<f.length;g++){var y=f[g];if(g>=1){var _=f[g-1];if(!Ts(y,_)){h.vertexLength+4>so.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=y.sub(_)._perp()._unit(),b=_.dist(y);m+b>32768&&(m=0),Cs(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,m),Cs(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,m),Cs(this.layoutVertexArray,_.x,_.y,v.x,v.y,0,0,m+=b),Cs(this.layoutVertexArray,_.x,_.y,v.x,v.y,0,1,m);var x=h.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),h.vertexLength+=4,h.primitiveLength+=2}}}}if(h.vertexLength+l>so.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray)),"Polygon"===xs[t.type]){for(var w=[],C=[],S=h.vertexLength,T=0,k=s;T<k.length;T+=1){var E=k[T];if(0!==E.length){E!==s[0]&&C.push(w.length/2);for(var P=0;P<E.length;P++){var I=E[P];Cs(this.layoutVertexArray,I.x,I.y,0,0,1,1,0),w.push(I.x),w.push(I.y)}}}for(var M=ka(w,C),A=0;A<M.length;A+=3)this.indexArray.emplaceBack(S+M[A],S+M[A+2],S+M[A+1]);h.primitiveLength+=M.length/3,h.vertexLength+=l}}var z;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,r,n)},Fn("FillExtrusionBucket",Ss,{omit:["layers","features"]});var ks={paint:new xr({"fill-extrusion-opacity":new gr(It["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yr(It["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new gr(It["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new gr(It["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _r(It["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yr(It["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yr(It["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new gr(It["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Es=function(t){function e(e){t.call(this,e,ks)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Ss(t)},e.prototype.queryRadius=function(){return ia(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,i,n,o,a,s,l){var c=na(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),u=this.paint.get("fill-extrusion-height").evaluate(e,i),h=this.paint.get("fill-extrusion-base").evaluate(e,i),p=function(t,e,i,n){for(var o=[],a=0,s=t;a<s.length;a+=1){var l=s[a],c=[l.x,l.y,0,1];ha(c,c,e),o.push(new r(c[0]/c[3],c[1]/c[3]))}return o}(c,l),d=function(t,e,i,n){for(var o=[],a=[],s=n[8]*e,l=n[9]*e,c=n[10]*e,u=n[11]*e,h=n[8]*i,p=n[9]*i,d=n[10]*i,f=n[11]*i,m=0,g=t;m<g.length;m+=1){for(var y=[],_=[],v=0,b=g[m];v<b.length;v+=1){var x=b[v],w=x.x,C=x.y,S=n[0]*w+n[4]*C+n[12],T=n[1]*w+n[5]*C+n[13],k=n[2]*w+n[6]*C+n[14],E=n[3]*w+n[7]*C+n[15],P=k+c,I=E+u,M=S+h,A=T+p,z=k+d,O=E+f,L=new r((S+s)/I,(T+l)/I);L.z=P/I,y.push(L);var D=new r(M/O,A/O);D.z=z/O,_.push(D)}o.push(y),a.push(_)}return[o,a]}(n,h,u,l);return function(t,e,i){var n=1/0;Go(i,e)&&(n=Is(i,e[0]));for(var r=0;r<e.length;r++)for(var o=e[r],a=t[r],s=0;s<o.length-1;s++){var l=o[s],c=[l,o[s+1],a[s+1],a[s],l];Zo(i,c)&&(n=Math.min(n,Is(i,c)))}return n!==1/0&&n}(d[0],d[1],p)},e}(wr);function Ps(t,e){return t.x*e.x+t.y*e.y}function Is(t,e){if(1===t.length){for(var i,n=0,r=e[n++];!i||r.equals(i);)if(!(i=e[n++]))return 1/0;for(;n<e.length;n++){var o=e[n],a=t[0],s=i.sub(r),l=o.sub(r),c=a.sub(r),u=Ps(s,s),h=Ps(s,l),p=Ps(l,l),d=Ps(c,s),f=Ps(c,l),m=u*p-h*h,g=(p*d-h*f)/m,y=(u*f-h*d)/m,_=r.z*(1-g-y)+i.z*g+o.z*y;if(isFinite(_))return _}return 1/0}for(var v=1/0,b=0,x=e;b<x.length;b+=1)v=Math.min(v,x[b].z);return v}var Ms=kr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,As=kr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,zs=bs.VectorTileFeature.types,Os=Math.cos(Math.PI/180*37.5),Ls=Math.pow(2,14)/.5,Ds=function(t){var e=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(t){e.gradients[t.id]={}})),this.layoutVertexArray=new Ar,this.layoutVertexArray2=new zr,this.indexArray=new jr,this.programConfigurations=new Do(t.layers,t.zoom),this.segments=new so,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Ds.prototype.populate=function(t,e,i){this.hasPattern=os("line",this.layers,e);for(var n=this.layers[0].layout.get("line-sort-key"),r=[],o=0,a=t;o<a.length;o+=1){var s=a[o],l=s.feature,c=s.id,u=s.index,h=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d=jo(l,p);if(this.layers[0]._featureFilter.filter(new sr(this.zoom),d,i)){var f=n?n.evaluate(d,{},i):void 0,m={id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:u,geometry:p?d.geometry:Vo(l),patterns:{},sortKey:f};r.push(m)}}n&&r.sort((function(t,e){return t.sortKey-e.sortKey}));for(var g=0,y=r;g<y.length;g+=1){var _=y[g],v=_.geometry,b=_.index,x=_.sourceLayerIndex;if(this.hasPattern){var w=as("line",this.layers,_,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(_,v,b,i,{});e.featureIndex.insert(t[b].feature,v,b,x,this.index)}},Ds.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Ds.prototype.addFeatures=function(t,e,i){for(var n=0,r=this.patternFeatures;n<r.length;n+=1){var o=r[n];this.addFeature(o,o.geometry,o.index,e,i)}},Ds.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ds.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ds.prototype.upload=function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,As)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ms),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ds.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ds.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},Ds.prototype.addFeature=function(t,e,i,n,r){var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var u=0,h=e;u<h.length;u+=1)this.addLine(h[u],t,a,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,r,n)},Ds.prototype.addLine=function(t,e,i,n,r,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===zs[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var c=0;c<l-1&&t[c].equals(t[c+1]);)c++;if(!(l<(s?3:2))){"bevel"===i&&(r=1.05);var u,h=this.overscaling<=16?122880/(512*this.overscaling):0,p=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray),d=void 0,f=void 0,m=void 0,g=void 0;this.e1=this.e2=-1,s&&(g=t[c].sub(u=t[l-2])._unit()._perp());for(var y=c;y<l;y++)if(!(f=y===l-1?s?t[c+1]:void 0:t[y+1])||!t[y].equals(f)){g&&(m=g),u&&(d=u),u=t[y],g=f?f.sub(u)._unit()._perp():m;var _=(m=m||g).add(g);0===_.x&&0===_.y||_._unit();var v=m.x*g.x+m.y*g.y,b=_.x*g.x+_.y*g.y,x=0!==b?1/b:1/0,w=2*Math.sqrt(2-2*b),C=b<Os&&d&&f,S=m.x*g.y-m.y*g.x>0;if(C&&y>c){var T=u.dist(d);if(T>2*h){var k=u.sub(u.sub(d)._mult(h/T)._round());this.updateDistance(d,k),this.addCurrentVertex(k,m,0,0,p),d=k}}var E=d&&f,P=E?i:s?"butt":n;if(E&&"round"===P&&(x<o?P="miter":x<=2&&(P="fakeround")),"miter"===P&&x>r&&(P="bevel"),"bevel"===P&&(x>2&&(P="flipbevel"),x<r&&(P="miter")),d&&this.updateDistance(d,u),"miter"===P)_._mult(x),this.addCurrentVertex(u,_,0,0,p);else if("flipbevel"===P){if(x>100)_=g.mult(-1);else{var I=x*m.add(g).mag()/m.sub(g).mag();_._perp()._mult(I*(S?-1:1))}this.addCurrentVertex(u,_,0,0,p),this.addCurrentVertex(u,_.mult(-1),0,0,p)}else if("bevel"===P||"fakeround"===P){var M=-Math.sqrt(x*x-1),A=S?M:0,z=S?0:M;if(d&&this.addCurrentVertex(u,m,A,z,p),"fakeround"===P)for(var O=Math.round(180*w/Math.PI/20),L=1;L<O;L++){var D=L/O;if(.5!==D){var R=D-.5;D+=D*R*(D-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*R*R+(.848013+v*(.215638*v-1.06021)))}var B=g.sub(m)._mult(D)._add(m)._unit()._mult(S?-1:1);this.addHalfVertex(u,B.x,B.y,!1,S,0,p)}f&&this.addCurrentVertex(u,g,-A,-z,p)}else if("butt"===P)this.addCurrentVertex(u,_,0,0,p);else if("square"===P){var F=d?1:-1;this.addCurrentVertex(u,_,F,F,p)}else"round"===P&&(d&&(this.addCurrentVertex(u,m,0,0,p),this.addCurrentVertex(u,m,1,1,p,!0)),f&&(this.addCurrentVertex(u,g,-1,-1,p,!0),this.addCurrentVertex(u,g,0,0,p)));if(C&&y<l-1){var N=u.dist(f);if(N>2*h){var V=u.add(f.sub(u)._mult(h/N)._round());this.updateDistance(u,V),this.addCurrentVertex(V,g,0,0,p),u=V}}}}},Ds.prototype.addCurrentVertex=function(t,e,i,n,r,o){void 0===o&&(o=!1);var a=e.y*n-e.x,s=-e.y-e.x*n;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,o,!1,i,r),this.addHalfVertex(t,a,s,o,!0,-n,r),this.distance>Ls/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,i,n,r,o))},Ds.prototype.addHalfVertex=function(t,e,i,n,r,o,a){var s=.5*(this.lineClips?this.scaledDistance*(Ls-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(n?1:0),(t.y<<1)+(r?1:0),Math.round(63*e)+128,Math.round(63*i)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var l=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),a.primitiveLength++),r?this.e2=l:this.e1=l},Ds.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ds.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Fn("LineBucket",Ds,{omit:["layers","patternFeatures"]});var Rs=new xr({"line-cap":new gr(It.layout_line["line-cap"]),"line-join":new yr(It.layout_line["line-join"]),"line-miter-limit":new gr(It.layout_line["line-miter-limit"]),"line-round-limit":new gr(It.layout_line["line-round-limit"]),"line-sort-key":new yr(It.layout_line["line-sort-key"])}),Bs={paint:new xr({"line-opacity":new yr(It.paint_line["line-opacity"]),"line-color":new yr(It.paint_line["line-color"]),"line-translate":new gr(It.paint_line["line-translate"]),"line-translate-anchor":new gr(It.paint_line["line-translate-anchor"]),"line-width":new yr(It.paint_line["line-width"]),"line-gap-width":new yr(It.paint_line["line-gap-width"]),"line-offset":new yr(It.paint_line["line-offset"]),"line-blur":new yr(It.paint_line["line-blur"]),"line-dasharray":new vr(It.paint_line["line-dasharray"]),"line-pattern":new _r(It.paint_line["line-pattern"]),"line-gradient":new br(It.paint_line["line-gradient"])}),layout:Rs},Fs=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,i){return i=new sr(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),t.prototype.possiblyEvaluate.call(this,e,i)},e.prototype.evaluate=function(e,i,n,r){return i=p({},i,{zoom:Math.floor(i.zoom)}),t.prototype.evaluate.call(this,e,i,n,r)},e}(yr))(Bs.paint.properties["line-width"].specification);Fs.useIntegerZoom=!0;var Ns=function(t){function e(e){t.call(this,e,Bs),this.gradientVersion=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof qe,this.gradientVersion=(this.gradientVersion+1)%s)},e.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},e.prototype.recalculate=function(e,i){t.prototype.recalculate.call(this,e,i),this.paint._values["line-floorwidth"]=Fs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Ds(t)},e.prototype.queryRadius=function(t){var e=t,i=Vs(ea("line-width",this,e),ea("line-gap-width",this,e)),n=ea("line-offset",this,e);return i/2+Math.abs(n)+ia(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,n,o,a,s){var l=na(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),c=s/2*Vs(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),u=this.paint.get("line-offset").evaluate(e,i);return u&&(n=function(t,e){for(var i=[],n=new r(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],l=0;l<a.length;l++){var c=a[l],u=a[l+1],h=0===l?n:c.sub(a[l-1])._unit()._perp(),p=l===a.length-1?n:u.sub(c)._unit()._perp(),d=h._add(p)._unit();d._mult(1/(d.x*p.x+d.y*p.y)),s.push(d._mult(e)._add(c))}i.push(s)}return i}(n,u*s)),function(t,e,i){for(var n=0;n<e.length;n++){var r=e[n];if(t.length>=3)for(var o=0;o<r.length;o++)if(Jo(t,r[o]))return!0;if(Wo(t,r,i))return!0}return!1}(l,n,c)},e.prototype.isTileClipped=function(){return!0},e}(wr);function Vs(t,e){return e>0?e+2*t:t}var js=kr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Us=kr([{name:"a_projected_pos",components:3,type:"Float32"}],4),qs=(kr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),kr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Zs=(kr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Hs=kr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Gs(t,e,i){return t.sections.forEach((function(t){t.text=function(t,e,i){var n=e.layout.get("text-transform").evaluate(i,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),ar.applyArabicShaping&&(t=ar.applyArabicShaping(t)),t}(t.text,e,i)})),t}kr([{name:"triangle",components:3,type:"Uint16"}]),kr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),kr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),kr([{type:"Float32",name:"offsetX"}]),kr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ws={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},$s=function(t,e,i,n,r){var o,a,s=8*r-n-1,l=(1<<s)-1,c=l>>1,u=-7,h=i?r-1:0,p=i?-1:1,d=t[e+h];for(h+=p,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=p,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=256*a+t[e+h],h+=p,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=c}return(d?-1:1)*a*Math.pow(2,o-n)},Ks=function(t,e,i,n,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,f=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[i+d]=255&s,d+=f,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;t[i+d]=255&a,d+=f,a/=256,c-=8);t[i+d-f]|=128*m},Xs=Qs;function Qs(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Qs.Varint=0,Qs.Fixed64=1,Qs.Bytes=2,Qs.Fixed32=5;var Ys="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Js(t){return t.type===Qs.Bytes?t.readVarint()+t.pos:t.pos+1}function tl(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function el(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function il(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function nl(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function rl(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function ol(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function al(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function sl(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function ll(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function cl(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function ul(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function hl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function pl(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function dl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function fl(t,e,i){1===t&&i.readMessage(ml,e)}function ml(t,e,i){if(3===t){var n=i.readMessage(gl,{}),r=n.width,o=n.height,a=n.left,s=n.top,l=n.advance;e.push({id:n.id,bitmap:new _a({width:r+6,height:o+6},n.bitmap),metrics:{width:r,height:o,left:a,top:s,advance:l}})}}function gl(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function yl(t){for(var e=0,i=0,n=0,r=t;n<r.length;n+=1){var o=r[n];e+=o.w*o.h,i=Math.max(i,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}],s=0,l=0,c=0,u=t;c<u.length;c+=1)for(var h=u[c],p=a.length-1;p>=0;p--){var d=a[p];if(!(h.w>d.w||h.h>d.h)){if(h.x=d.x,h.y=d.y,l=Math.max(l,h.y+h.h),s=Math.max(s,h.x+h.w),h.w===d.w&&h.h===d.h){var f=a.pop();p<a.length&&(a[p]=f)}else h.h===d.h?(d.x+=h.w,d.w-=h.w):h.w===d.w?(d.y+=h.h,d.h-=h.h):(a.push({x:d.x+h.w,y:d.y,w:d.w-h.w,h:h.h}),d.y+=h.h,d.h-=h.h);break}}return{w:s,h:l,fill:e/(s*l)||0}}Qs.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,o=this.pos;this.type=7&n,t(r,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=hl(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=dl(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=hl(this.buf,this.pos)+4294967296*hl(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=hl(this.buf,this.pos)+4294967296*dl(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=$s(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=$s(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,r,o=i.buf;if(n=(112&(r=o[i.pos++]))>>4,r<128)return tl(t,n,e);if(n|=(127&(r=o[i.pos++]))<<3,r<128)return tl(t,n,e);if(n|=(127&(r=o[i.pos++]))<<10,r<128)return tl(t,n,e);if(n|=(127&(r=o[i.pos++]))<<17,r<128)return tl(t,n,e);if(n|=(127&(r=o[i.pos++]))<<24,r<128)return tl(t,n,e);if(n|=(1&(r=o[i.pos++]))<<31,r<128)return tl(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Ys?function(t,e,i){return Ys.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var n="",r=e;r<i;){var o,a,s,l=t[r],c=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u>i)break;1===u?l<128&&(c=l):2===u?128==(192&(o=t[r+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=t[r+2],128==(192&(o=t[r+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=t[r+2],s=t[r+3],128==(192&(o=t[r+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),r+=u}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Qs.Bytes)return t.push(this.readVarint(e));var i=Js(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Qs.Bytes)return t.push(this.readSVarint());var e=Js(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Qs.Bytes)return t.push(this.readBoolean());var e=Js(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Qs.Bytes)return t.push(this.readFloat());var e=Js(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Qs.Bytes)return t.push(this.readDouble());var e=Js(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Qs.Bytes)return t.push(this.readFixed32());var e=Js(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Qs.Bytes)return t.push(this.readSFixed32());var e=Js(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Qs.Bytes)return t.push(this.readFixed64());var e=Js(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Qs.Bytes)return t.push(this.readSFixed64());var e=Js(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Qs.Varint)for(;this.buf[this.pos++]>127;);else if(e===Qs.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Qs.Fixed32)this.pos+=4;else{if(e!==Qs.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),pl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),pl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),pl(this.buf,-1&t,this.pos),pl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),pl(this.buf,-1&t,this.pos),pl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,n;if(t>=0?(i=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,r,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){n>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&el(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),Ks(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Ks(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&el(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,Qs.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,il,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,nl,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,al,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,rl,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,ol,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,sl,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,ll,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,cl,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,ul,e)},writeBytesField:function(t,e){this.writeTag(t,Qs.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Qs.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Qs.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Qs.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Qs.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Qs.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Qs.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Qs.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Qs.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Qs.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var _l=function(t,e){var i=e.pixelRatio,n=e.version,r=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=i,this.stretchX=r,this.stretchY=o,this.content=a,this.version=n},vl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};vl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},vl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},vl.tlbr.get=function(){return this.tl.concat(this.br)},vl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(_l.prototype,vl);var bl=function(t,e){var i={},n={};this.haveRenderCallbacks=[];var r=[];this.addImages(t,i,r),this.addImages(e,n,r);var o=yl(r),a=new va({width:o.w||1,height:o.h||1});for(var s in t){var l=t[s],c=i[s].paddedRect;va.copy(l.data,a,{x:0,y:0},{x:c.x+1,y:c.y+1},l.data)}for(var u in e){var h=e[u],p=n[u].paddedRect,d=p.x+1,f=p.y+1,m=h.data.width,g=h.data.height;va.copy(h.data,a,{x:0,y:0},{x:d,y:f},h.data),va.copy(h.data,a,{x:0,y:g-1},{x:d,y:f-1},{width:m,height:1}),va.copy(h.data,a,{x:0,y:0},{x:d,y:f+g},{width:m,height:1}),va.copy(h.data,a,{x:m-1,y:0},{x:d-1,y:f},{width:1,height:g}),va.copy(h.data,a,{x:0,y:0},{x:d+m,y:f},{width:1,height:g})}this.image=a,this.iconPositions=i,this.patternPositions=n};bl.prototype.addImages=function(t,e,i){for(var n in t){var r=t[n],o={x:0,y:0,w:r.data.width+2,h:r.data.height+2};i.push(o),e[n]=new _l(o,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(n)}},bl.prototype.patchUpdatedImages=function(t,e){for(var i in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)},bl.prototype.patchUpdatedImage=function(t,e,i){if(t&&e&&t.version!==e.version){t.version=e.version;var n=t.tl;i.update(e.data,void 0,{x:n[0],y:n[1]})}},Fn("ImagePosition",_l),Fn("ImageAtlas",bl);var xl={horizontal:1,vertical:2,horizontalOnly:3},wl=function(){this.scale=1,this.fontStack="",this.imageName=null};wl.forText=function(t,e){var i=new wl;return i.scale=t||1,i.fontStack=e,i},wl.forImage=function(t){var e=new wl;return e.imageName=t,e};var Cl=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Sl(t,e,i,n,r,o,a,s,l,c,u,h,p,d,f,m){var g,y=Cl.fromFeature(t,r);h===xl.vertical&&y.verticalizePunctuation();var _=ar.processBidirectionalText,v=ar.processStyledBidirectionalText;if(_&&1===y.sections.length){g=[];for(var b=0,x=_(y.toString(),Al(y,c,o,e,n,d,f));b<x.length;b+=1){var w=x[b],C=new Cl;C.text=w,C.sections=y.sections;for(var S=0;S<w.length;S++)C.sectionIndex.push(0);g.push(C)}}else if(v){g=[];for(var T=0,k=v(y.text,y.sectionIndex,Al(y,c,o,e,n,d,f));T<k.length;T+=1){var E=k[T],P=new Cl;P.text=E[0],P.sectionIndex=E[1],P.sections=y.sections,g.push(P)}}else g=function(t,e){for(var i=[],n=t.text,r=0,o=0,a=e;o<a.length;o+=1){var s=a[o];i.push(t.substring(r,s)),r=s}return r<n.length&&i.push(t.substring(r,n.length)),i}(y,Al(y,c,o,e,n,d,f));var I=[],M={positionedLines:I,text:y.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(t,e,i,n,r,o,a,s,l,c,u,h){for(var p=0,d=-17,f=0,m=0,g="right"===s?1:"left"===s?0:.5,y=0,_=0,v=r;_<v.length;_+=1){var b=v[_];b.trim();var x=b.getMaxScale(),w=24*(x-1),C={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=C;var S=C.positionedGlyphs,T=0;if(b.length()){for(var k=0;k<b.length();k++){var E=b.getSection(k),P=b.getSectionIndex(k),I=b.getCharCode(k),M=0,A=null,z=null,O=null,L=24,D=!(l===xl.horizontal||!u&&!Wn(I)||u&&(Tl[I]||(Z=I,Hn.Arabic(Z)||Hn["Arabic Supplement"](Z)||Hn["Arabic Extended-A"](Z)||Hn["Arabic Presentation Forms-A"](Z)||Hn["Arabic Presentation Forms-B"](Z))));if(E.imageName){var R=n[E.imageName];if(!R)continue;O=E.imageName,t.iconsInText=t.iconsInText||!0,z=R.paddedRect;var B=R.displaySize;E.scale=24*E.scale/h,M=w+(24-B[1]*E.scale),L=(A={width:B[0],height:B[1],left:1,top:-3,advance:D?B[1]:B[0]}).advance;var F=D?B[0]*E.scale-24*x:B[1]*E.scale-24*x;F>0&&F>T&&(T=F)}else{var N=i[E.fontStack],V=N&&N[I];if(V&&V.rect)z=V.rect,A=V.metrics;else{var j=e[E.fontStack],U=j&&j[I];if(!U)continue;A=U.metrics}M=24*(x-E.scale)}D?(t.verticalizable=!0,S.push({glyph:I,imageName:O,x:p,y:d+M,vertical:D,scale:E.scale,fontStack:E.fontStack,sectionIndex:P,metrics:A,rect:z}),p+=L*E.scale+c):(S.push({glyph:I,imageName:O,x:p,y:d+M,vertical:D,scale:E.scale,fontStack:E.fontStack,sectionIndex:P,metrics:A,rect:z}),p+=A.advance*E.scale+c)}0!==S.length&&(f=Math.max(p-c,f),Ol(S,0,S.length-1,g,T)),p=0;var q=o*x+T;C.lineOffset=Math.max(T,w),d+=q,m=Math.max(q,m),++y}else d+=o,++y}var Z,H=d- -17,G=zl(a),W=G.horizontalAlign,$=G.verticalAlign;(function(t,e,i,n,r,o,a,s,l){var c,u=(e-i)*r;c=o!==a?-s*n- -17:(-n*l+.5)*a;for(var h=0,p=t;h<p.length;h+=1)for(var d=0,f=p[h].positionedGlyphs;d<f.length;d+=1){var m=f[d];m.x+=u,m.y+=c}})(t.positionedLines,g,W,$,f,m,o,H,r.length),t.top+=-$*H,t.bottom=t.top+H,t.left+=-W*f,t.right=t.left+f}(M,e,i,n,g,a,s,l,h,c,p,m),!function(t){for(var e=0,i=t;e<i.length;e+=1)if(0!==i[e].positionedGlyphs.length)return!1;return!0}(I)&&M}Cl.fromFeature=function(t,e){for(var i=new Cl,n=0;n<t.sections.length;n++){var r=t.sections[n];r.image?i.addImageSection(r):i.addTextSection(r,e)}return i},Cl.prototype.length=function(){return this.text.length},Cl.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},Cl.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},Cl.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},Cl.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i+1)||null,r=t.charCodeAt(i-1)||null;e+=n&&$n(n)&&!Ws[t[i+1]]||r&&$n(r)&&!Ws[t[i-1]]||!Ws[t[i]]?t[i]:Ws[t[i]]}return e}(this.text)},Cl.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Tl[this.text.charCodeAt(e)];e++)t++;for(var i=this.text.length,n=this.text.length-1;n>=0&&n>=t&&Tl[this.text.charCodeAt(n)];n--)i--;this.text=this.text.substring(t,i),this.sectionIndex=this.sectionIndex.slice(t,i)},Cl.prototype.substring=function(t,e){var i=new Cl;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i},Cl.prototype.toString=function(){return this.text},Cl.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,i){return Math.max(e,t.sections[i].scale)}),0)},Cl.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(wl.forText(t.scale,t.fontStack||e));for(var i=this.sections.length-1,n=0;n<t.text.length;++n)this.sectionIndex.push(i)},Cl.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(wl.forImage(e)),this.sectionIndex.push(this.sections.length-1)):C("Reached maximum number of images 6401")}else C("Can't add FormattedSection with an empty image.")},Cl.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Tl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},kl={};function El(t,e,i,n,r,o){if(e.imageName){var a=n[e.imageName];return a?a.displaySize[0]*e.scale*24/o+r:0}var s=i[e.fontStack],l=s&&s[t];return l?l.metrics.advance*e.scale+r:0}function Pl(t,e,i,n){var r=Math.pow(t-e,2);return n?t<e?r/2:2*r:r+Math.abs(i)*i}function Il(t,e,i){var n=0;return 10===t&&(n-=1e4),i&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function Ml(t,e,i,n,r,o){for(var a=null,s=Pl(e,i,r,o),l=0,c=n;l<c.length;l+=1){var u=c[l],h=Pl(e-u.x,i,r,o)+u.badness;h<=s&&(a=u,s=h)}return{index:t,x:e,priorBreak:a,badness:s}}function Al(t,e,i,n,r,o,a){if("point"!==o)return[];if(!t)return[];for(var s,l=[],c=function(t,e,i,n,r,o){for(var a=0,s=0;s<t.length();s++){var l=t.getSection(s);a+=El(t.getCharCode(s),l,n,r,e,o)}return a/Math.max(1,Math.ceil(a/i))}(t,e,i,n,r,a),u=t.text.indexOf("\u200b")>=0,h=0,p=0;p<t.length();p++){var d=t.getSection(p),f=t.getCharCode(p);if(Tl[f]||(h+=El(f,d,n,r,e,a)),p<t.length()-1){var m=!((s=f)<11904||!(Hn["Bopomofo Extended"](s)||Hn.Bopomofo(s)||Hn["CJK Compatibility Forms"](s)||Hn["CJK Compatibility Ideographs"](s)||Hn["CJK Compatibility"](s)||Hn["CJK Radicals Supplement"](s)||Hn["CJK Strokes"](s)||Hn["CJK Symbols and Punctuation"](s)||Hn["CJK Unified Ideographs Extension A"](s)||Hn["CJK Unified Ideographs"](s)||Hn["Enclosed CJK Letters and Months"](s)||Hn["Halfwidth and Fullwidth Forms"](s)||Hn.Hiragana(s)||Hn["Ideographic Description Characters"](s)||Hn["Kangxi Radicals"](s)||Hn["Katakana Phonetic Extensions"](s)||Hn.Katakana(s)||Hn["Vertical Forms"](s)||Hn["Yi Radicals"](s)||Hn["Yi Syllables"](s)));(kl[f]||m||d.imageName)&&l.push(Ml(p+1,h,c,l,Il(f,t.getCharCode(p+1),m&&u),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Ml(t.length(),h,c,l,0,!0))}function zl(t){var e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function Ol(t,e,i,n,r){if(n||r)for(var o=t[i],a=(t[i].x+o.metrics.advance*o.scale)*n,s=e;s<=i;s++)t[s].x-=a,t[s].y+=r}function Ll(t,e,i,n,r,o){var a,s=t.image;if(s.content){var l=s.content,c=s.pixelRatio||1;a=[l[0]/c,l[1]/c,s.displaySize[0]-l[2]/c,s.displaySize[1]-l[3]/c]}var u,h,p,d,f=e.left*o,m=e.right*o;"width"===i||"both"===i?(d=r[0]+f-n[3],h=r[0]+m+n[1]):h=(d=r[0]+(f+m-s.displaySize[0])/2)+s.displaySize[0];var g=e.top*o,y=e.bottom*o;return"height"===i||"both"===i?(u=r[1]+g-n[0],p=r[1]+y+n[2]):p=(u=r[1]+(g+y-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:u,right:h,bottom:p,left:d,collisionPadding:a}}kl[10]=!0,kl[32]=!0,kl[38]=!0,kl[40]=!0,kl[41]=!0,kl[43]=!0,kl[45]=!0,kl[47]=!0,kl[173]=!0,kl[183]=!0,kl[8203]=!0,kl[8208]=!0,kl[8211]=!0,kl[8231]=!0;var Dl=function(t){function e(e,i,n,r){t.call(this,e,i),this.angle=n,void 0!==r&&(this.segment=r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(r);function Rl(t,e){var i=e.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new sr(t+1))};if("source"===i.kind)return{kind:"source"};for(var n=i.zoomStops,r=i.interpolationType,o=0;o<n.length&&n[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<n.length&&n[a]<t+1;)a++;a=Math.min(n.length-1,a);var s=n[o],l=n[a];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:r}:{kind:"camera",minZoom:s,maxZoom:l,minSize:i.evaluate(new sr(s)),maxSize:i.evaluate(new sr(l)),interpolationType:r}}function Bl(t,e,i){var n=e.uSize,r=i.lowerSize;return"source"===t.kind?r/128:"composite"===t.kind?Ze(r/128,i.upperSize/128,e.uSizeT):n}function Fl(t,e){var i=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){var r=t.interpolationType,o=r?u(oi.interpolationFactor(r,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?n=Ze(t.minSize,t.maxSize,o):i=o}return{uSizeT:i,uSize:n}}Fn("Anchor",Dl);var Nl=Object.freeze({__proto__:null,getSizeData:Rl,evaluateSizeForFeature:Bl,evaluateSizeForZoom:Fl,SIZE_PACK_FACTOR:128});function Vl(t,e,i,n,r){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-i/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var l=[],c=0;s<i/2;){var u=t[a],h=t[a+1];if(!h)return!1;var p=t[a-1].angleTo(u)-u.angleTo(h);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:p}),c+=p;s-l[0].distance>n;)c-=l.shift().angleDelta;if(c>r)return!1;a++,s+=u.dist(h)}return!0}function jl(t){for(var e=0,i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function Ul(t,e,i){return t?.6*e*i:0}function ql(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Zl(t,e,i,n,r,o){for(var a=Ul(i,r,o),s=ql(i,n)*o,l=0,c=jl(t)/2,u=0;u<t.length-1;u++){var h=t[u],p=t[u+1],d=h.dist(p);if(l+d>c){var f=(c-l)/d,m=Ze(h.x,p.x,f),g=Ze(h.y,p.y,f),y=new Dl(m,g,p.angleTo(h),u);return y._round(),!a||Vl(t,y,s,a,e)?y:void 0}l+=d}}function Hl(t,e,i,n,r,o,a,s,l){var c=Ul(n,o,a),u=ql(n,r),h=u*a,p=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),function t(e,i,n,r,o,a,s,l,c){for(var u=a/2,h=jl(e),p=0,d=i-n,f=[],m=0;m<e.length-1;m++){for(var g=e[m],y=e[m+1],_=g.dist(y),v=y.angleTo(g);d+n<p+_;){var b=((d+=n)-p)/_,x=Ze(g.x,y.x,b),w=Ze(g.y,y.y,b);if(x>=0&&x<c&&w>=0&&w<c&&d-u>=0&&d+u<=h){var C=new Dl(x,w,v,m);C._round(),r&&!Vl(e,C,a,r,o)||f.push(C)}}p+=_}return l||f.length||s||(f=t(e,p/2,n,r,o,a,s,!0,c)),f}(t,p?e/2*s%e:(u/2+2*o)*a*s%e,e,c,i,h,p,!1,l)}function Gl(t,e,i,n,o){for(var a=[],s=0;s<t.length;s++)for(var l=t[s],c=void 0,u=0;u<l.length-1;u++){var h=l[u],p=l[u+1];h.x<e&&p.x<e||(h.x<e?h=new r(e,h.y+(e-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x<e&&(p=new r(e,h.y+(e-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y<i&&p.y<i||(h.y<i?h=new r(h.x+(i-h.y)/(p.y-h.y)*(p.x-h.x),i)._round():p.y<i&&(p=new r(h.x+(i-h.y)/(p.y-h.y)*(p.x-h.x),i)._round()),h.x>=n&&p.x>=n||(h.x>=n?h=new r(n,h.y+(n-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x>=n&&(p=new r(n,h.y+(n-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y>=o&&p.y>=o||(h.y>=o?h=new r(h.x+(o-h.y)/(p.y-h.y)*(p.x-h.x),o)._round():p.y>=o&&(p=new r(h.x+(o-h.y)/(p.y-h.y)*(p.x-h.x),o)._round()),c&&h.equals(c[c.length-1])||a.push(c=[h]),c.push(p)))))}return a}function Wl(t,e,i,n){var o=[],a=t.image,s=a.pixelRatio,l=a.paddedRect.w-2,c=a.paddedRect.h-2,u=t.right-t.left,h=t.bottom-t.top,p=a.stretchX||[[0,l]],d=a.stretchY||[[0,c]],f=function(t,e){return t+e[1]-e[0]},m=p.reduce(f,0),g=d.reduce(f,0),y=l-m,_=c-g,v=0,b=m,x=0,w=g,C=0,S=y,T=0,k=_;if(a.content&&n){var E=a.content;v=$l(p,0,E[0]),x=$l(d,0,E[1]),b=$l(p,E[0],E[2]),w=$l(d,E[1],E[3]),C=E[0]-v,T=E[1]-x,S=E[2]-E[0]-b,k=E[3]-E[1]-w}var P=function(n,o,l,c){var p=Xl(n.stretch-v,b,u,t.left),d=Ql(n.fixed-C,S,n.stretch,m),f=Xl(o.stretch-x,w,h,t.top),y=Ql(o.fixed-T,k,o.stretch,g),_=Xl(l.stretch-v,b,u,t.left),E=Ql(l.fixed-C,S,l.stretch,m),P=Xl(c.stretch-x,w,h,t.top),I=Ql(c.fixed-T,k,c.stretch,g),M=new r(p,f),A=new r(_,f),z=new r(_,P),O=new r(p,P),L=new r(d/s,y/s),D=new r(E/s,I/s),R=e*Math.PI/180;if(R){var B=Math.sin(R),F=Math.cos(R),N=[F,-B,B,F];M._matMult(N),A._matMult(N),O._matMult(N),z._matMult(N)}var V=n.stretch+n.fixed,j=o.stretch+o.fixed;return{tl:M,tr:A,bl:O,br:z,tex:{x:a.paddedRect.x+1+V,y:a.paddedRect.y+1+j,w:l.stretch+l.fixed-V,h:c.stretch+c.fixed-j},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:L,pixelOffsetBR:D,minFontScaleX:S/s/u,minFontScaleY:k/s/h,isSDF:i}};if(n&&(a.stretchX||a.stretchY))for(var I=Kl(p,y,m),M=Kl(d,_,g),A=0;A<I.length-1;A++)for(var z=I[A],O=I[A+1],L=0;L<M.length-1;L++)o.push(P(z,M[L],O,M[L+1]));else o.push(P({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return o}function $l(t,e,i){for(var n=0,r=0,o=t;r<o.length;r+=1){var a=o[r];n+=Math.max(e,Math.min(i,a[1]))-Math.max(e,Math.min(i,a[0]))}return n}function Kl(t,e,i){for(var n=[{fixed:-1,stretch:0}],r=0,o=t;r<o.length;r+=1){var a=o[r],s=a[0],l=a[1],c=n[n.length-1];n.push({fixed:s-c.stretch,stretch:c.stretch}),n.push({fixed:s-c.stretch,stretch:c.stretch+(l-s)})}return n.push({fixed:e+1,stretch:i}),n}function Xl(t,e,i,n){return t/e*i+n}function Ql(t,e,i,n){return t-e*i/n}var Yl=function(t,e,i,n,o,a,s,l,c,u){if(this.boxStartIndex=t.length,c){var h=a.top,p=a.bottom,d=a.collisionPadding;d&&(h-=d[1],p+=d[3]);var f=p-h;f>0&&(f=Math.max(10,f),this.circleDiameter=f)}else{var m=a.top*s-l,g=a.bottom*s+l,y=a.left*s-l,_=a.right*s+l,v=a.collisionPadding;if(v&&(y-=v[0]*s,m-=v[1]*s,_+=v[2]*s,g+=v[3]*s),u){var b=new r(y,m),x=new r(_,m),w=new r(y,g),C=new r(_,g),S=u*Math.PI/180;b._rotate(S),x._rotate(S),w._rotate(S),C._rotate(S),y=Math.min(b.x,x.x,w.x,C.x),_=Math.max(b.x,x.x,w.x,C.x),m=Math.min(b.y,x.y,w.y,C.y),g=Math.max(b.y,x.y,w.y,C.y)}t.emplaceBack(e.x,e.y,y,m,_,g,i,n,o)}this.boxEndIndex=t.length},Jl=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=tc),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function tc(t,e){return t<e?-1:t>e?1:0}function ec(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);for(var n=1/0,o=1/0,a=-1/0,s=-1/0,l=t[0],c=0;c<l.length;c++){var u=l[c];(!c||u.x<n)&&(n=u.x),(!c||u.y<o)&&(o=u.y),(!c||u.x>a)&&(a=u.x),(!c||u.y>s)&&(s=u.y)}var h=Math.min(a-n,s-o),p=h/2,d=new Jl([],ic);if(0===h)return new r(n,o);for(var f=n;f<a;f+=h)for(var m=o;m<s;m+=h)d.push(new nc(f+p,m+p,p,t));for(var g=function(t){for(var e=0,i=0,n=0,r=t[0],o=0,a=r.length,s=a-1;o<a;s=o++){var l=r[o],c=r[s],u=l.x*c.y-c.x*l.y;i+=(l.x+c.x)*u,n+=(l.y+c.y)*u,e+=3*u}return new nc(i/e,n/e,0,t)}(t),y=d.length;d.length;){var _=d.pop();(_.d>g.d||!g.d)&&(g=_,i&&console.log("found best %d after %d probes",Math.round(1e4*_.d)/1e4,y)),_.max-g.d<=e||(d.push(new nc(_.p.x-(p=_.h/2),_.p.y-p,p,t)),d.push(new nc(_.p.x+p,_.p.y-p,p,t)),d.push(new nc(_.p.x-p,_.p.y+p,p,t)),d.push(new nc(_.p.x+p,_.p.y+p,p,t)),y+=4)}return i&&(console.log("num probes: "+y),console.log("best distance: "+g.d)),g.p}function ic(t,e){return e.max-t.max}function nc(t,e,i,n){this.p=new r(t,e),this.h=i,this.d=function(t,e){for(var i=!1,n=1/0,r=0;r<e.length;r++)for(var o=e[r],a=0,s=o.length,l=s-1;a<s;l=a++){var c=o[a],u=o[l];c.y>t.y!=u.y>t.y&&t.x<(u.x-c.x)*(t.y-c.y)/(u.y-c.y)+c.x&&(i=!i),n=Math.min(n,Qo(t,c,u))}return(i?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}Jl.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Jl.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Jl.prototype.peek=function(){return this.data[0]},Jl.prototype._up=function(t){for(var e=this.data,i=this.compare,n=e[t];t>0;){var r=t-1>>1,o=e[r];if(i(n,o)>=0)break;e[t]=o,t=r}e[t]=n},Jl.prototype._down=function(t){for(var e=this.data,i=this.compare,n=this.length>>1,r=e[t];t<n;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&i(e[s],a)<0&&(o=s,a=e[s]),i(a,r)>=0)break;e[t]=a,t=o}e[t]=r};var rc=Number.POSITIVE_INFINITY;function oc(t,e){return e[1]!==rc?function(t,e,i){var n=0,r=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":r=i-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-i}switch(t){case"top-right":case"bottom-right":case"right":n=-e;break;case"top-left":case"bottom-left":case"left":n=e}return[n,r]}(t,e[0],e[1]):function(t,e){var i=0,n=0;e<0&&(e=0);var r=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":n=r-7;break;case"bottom-right":case"bottom-left":n=7-r;break;case"bottom":n=7-e;break;case"top":n=e-7}switch(t){case"top-right":case"bottom-right":i=-r;break;case"top-left":case"bottom-left":i=r;break;case"left":i=e;break;case"right":i=-e}return[i,n]}(t,e[0])}function ac(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function sc(t,e,i,n,o,a,s,l,c,u,h,p,d,f,m){var g=function(t,e,i,n,o,a,s,l){for(var c=n.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,u=[],h=0,p=e.positionedLines;h<p.length;h+=1)for(var d=p[h],f=0,m=d.positionedGlyphs;f<m.length;f+=1){var g=m[f];if(g.rect){var y=g.rect||{},_=4,v=!0,b=1,x=0,w=(o||l)&&g.vertical,C=g.metrics.advance*g.scale/2;if(l&&e.verticalizable&&(x=d.lineOffset/2-(g.imageName?-(24-g.metrics.width*g.scale)/2:24*(g.scale-1))),g.imageName){var S=s[g.imageName];v=S.sdf,_=1/(b=S.pixelRatio)}var T=o?[g.x+C,g.y]:[0,0],k=o?[0,0]:[g.x+C+i[0],g.y+i[1]-x],E=[0,0];w&&(E=k,k=[0,0]);var P=(g.metrics.left-_)*g.scale-C+k[0],I=(-g.metrics.top-_)*g.scale+k[1],M=P+y.w*g.scale/b,A=I+y.h*g.scale/b,z=new r(P,I),O=new r(M,I),L=new r(P,A),D=new r(M,A);if(w){var R=new r(-C,C- -17),B=-Math.PI/2,F=12-C,N=new r(22-F,-(g.imageName?F:0)),V=new(Function.prototype.bind.apply(r,[null].concat(E)));z._rotateAround(B,R)._add(N)._add(V),O._rotateAround(B,R)._add(N)._add(V),L._rotateAround(B,R)._add(N)._add(V),D._rotateAround(B,R)._add(N)._add(V)}if(c){var j=Math.sin(c),U=Math.cos(c),q=[U,-j,j,U];z._matMult(q),O._matMult(q),L._matMult(q),D._matMult(q)}var Z=new r(0,0),H=new r(0,0);u.push({tl:z,tr:O,bl:L,br:D,tex:y,writingMode:e.writingMode,glyphOffset:T,sectionIndex:g.sectionIndex,isSDF:v,pixelOffsetTL:Z,pixelOffsetBR:H,minFontScaleX:0,minFontScaleY:0})}}return u}(0,i,l,o,a,s,n,t.allowVerticalPlacement),y=t.textSizeData,_=null;"source"===y.kind?(_=[128*o.layout.get("text-size").evaluate(s,{})])[0]>32640&&C(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===y.kind&&((_=[128*f.compositeTextSizes[0].evaluate(s,{},m),128*f.compositeTextSizes[1].evaluate(s,{},m)])[0]>32640||_[1]>32640)&&C(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,g,_,l,a,s,u,e,c.lineStartIndex,c.lineLength,d,m);for(var v=0,b=h;v<b.length;v+=1)p[b[v]]=t.text.placedSymbolArray.length-1;return 4*g.length}function lc(t){for(var e in t)return t[e];return null}function cc(t,e,i,n){var r=t.compareText;if(e in r){for(var o=r[e],a=o.length-1;a>=0;a--)if(n.dist(o[a])<i)return!0}else r[e]=[];return r[e].push(n),!1}var uc=bs.VectorTileFeature.types,hc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pc(t,e,i,n,r,o,a,s,l,c,u,h,p){var d=s?Math.min(32640,Math.round(s[0])):0,f=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,i,Math.round(32*n),Math.round(32*r),o,a,(d<<1)+(l?1:0),f,16*c,16*u,256*h,256*p)}function dc(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function fc(t){for(var e=0,i=t.sections;e<i.length;e+=1)if(Qn(i[e].text))return!0;return!1}var mc=function(t){this.layoutVertexArray=new Lr,this.indexArray=new jr,this.programConfigurations=t,this.segments=new so,this.dynamicLayoutVertexArray=new Dr,this.opacityVertexArray=new Rr,this.placedSymbolArray=new Jr};mc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},mc.prototype.upload=function(t,e,i,n){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,js.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Us.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,hc,!0),this.opacityVertexBuffer.itemSize=1),(i||n)&&this.programConfigurations.upload(t))},mc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Fn("SymbolBuffers",mc);var gc=function(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new so,this.collisionVertexArray=new Vr};gc.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,qs.members,!0)},gc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Fn("CollisionBuffers",gc);var yc=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=sa([]),this.placementViewportMatrix=sa([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Rl(this.zoom,e["text-size"]),this.iconSizeData=Rl(this.zoom,e["icon-size"]);var i=this.layers[0].layout,n=i.get("symbol-sort-key"),r=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==r&&void 0!==n.constantOr(1),this.sortFeaturesByY=("viewport-y"===r||"auto"===r&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((function(t){return xl[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};yc.prototype.createArrays=function(){this.text=new mc(new Do(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new mc(new Do(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new io,this.lineVertexArray=new no,this.symbolInstances=new eo},yc.prototype.calculateGlyphDependencies=function(t,e,i,n,r){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(i||n)&&r){var a=Ws[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},yc.prototype.populate=function(t,e,i){var n=this.layers[0],r=n.layout,o=r.get("text-font"),a=r.get("text-field"),s=r.get("icon-image"),l=("constant"!==a.value.kind||a.value.value instanceof ne&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),c="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,u=r.get("symbol-sort-key");if(this.features=[],l||c){for(var h=e.iconDependencies,p=e.glyphDependencies,d=e.availableImages,f=new sr(this.zoom),m=0,g=t;m<g.length;m+=1){var y=g[m],_=y.feature,v=y.id,b=y.index,x=y.sourceLayerIndex,w=n._featureFilter.needGeometry,C=jo(_,w);if(n._featureFilter.filter(f,C,i)){w||(C.geometry=Vo(_));var S=void 0;if(l){var T=n.getValueAndResolveTokens("text-field",C,i,d),k=ne.factory(T);fc(k)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===rr()||this.hasRTLText&&ar.isParsed())&&(S=Gs(k,n,C))}var E=void 0;if(c){var P=n.getValueAndResolveTokens("icon-image",C,i,d);E=P instanceof re?P:re.fromString(P)}if(S||E){var I=this.sortFeaturesByKey?u.evaluate(C,{},i):void 0;if(this.features.push({id:v,text:S,icon:E,index:b,sourceLayerIndex:x,geometry:C.geometry,properties:_.properties,type:uc[_.type],sortKey:I}),E&&(h[E.name]=!0),S){var M=o.evaluate(C,{},i).join(","),A="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(xl.vertical)>=0;for(var z=0,O=S.sections;z<O.length;z+=1){var L=O[z];if(L.image)h[L.image.name]=!0;else{var D=Gn(S.toString()),R=L.fontStack||M,B=p[R]=p[R]||{};this.calculateGlyphDependencies(L.text,B,A,this.allowVerticalPlacement,D)}}}}}}"line"===r.get("symbol-placement")&&(this.features=function(t){var e={},i={},n=[],r=0;function o(e){n.push(t[e]),r++}function a(t,e,r){var o=i[t];return delete i[t],i[e]=o,n[o].geometry[0].pop(),n[o].geometry[0]=n[o].geometry[0].concat(r[0]),o}function s(t,i,r){var o=e[i];return delete e[i],e[t]=o,n[o].geometry[0].shift(),n[o].geometry[0]=r[0].concat(n[o].geometry[0]),o}function l(t,e,i){var n=i?e[0][e[0].length-1]:e[0][0];return t+":"+n.x+":"+n.y}for(var c=0;c<t.length;c++){var u=t[c],h=u.geometry,p=u.text?u.text.toString():null;if(p){var d=l(p,h),f=l(p,h,!0);if(d in i&&f in e&&i[d]!==e[f]){var m=s(d,f,h),g=a(d,f,n[m].geometry);delete e[d],delete i[f],i[l(p,n[g].geometry,!0)]=g,n[m].geometry=null}else d in i?a(d,f,h):f in e?s(d,f,h):(o(c),e[d]=r-1,i[f]=r-1)}else o(c)}return n.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},yc.prototype.update=function(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))},yc.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},yc.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},yc.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},yc.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},yc.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},yc.prototype.addToLineVertexArray=function(t,e){var i=this.lineVertexArray.length;if(void 0!==t.segment){for(var n=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:n},a<e.length-1&&(n+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:r},s>0&&(r+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var c=o[l];this.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},yc.prototype.addSymbols=function(t,e,i,n,r,o,a,s,l,c,u,h){for(var p=t.indexArray,d=t.layoutVertexArray,f=t.segments.prepareSegment(4*e.length,d,p,this.canOverlap?o.sortKey:void 0),m=this.glyphOffsetArray.length,g=f.vertexLength,y=this.allowVerticalPlacement&&a===xl.vertical?Math.PI/2:0,_=o.text&&o.text.sections,v=0;v<e.length;v++){var b=e[v],x=b.tl,w=b.tr,C=b.bl,S=b.br,T=b.tex,k=b.pixelOffsetTL,E=b.pixelOffsetBR,P=b.minFontScaleX,I=b.minFontScaleY,M=b.glyphOffset,A=b.isSDF,z=b.sectionIndex,O=f.vertexLength,L=M[1];pc(d,s.x,s.y,x.x,L+x.y,T.x,T.y,i,A,k.x,k.y,P,I),pc(d,s.x,s.y,w.x,L+w.y,T.x+T.w,T.y,i,A,E.x,k.y,P,I),pc(d,s.x,s.y,C.x,L+C.y,T.x,T.y+T.h,i,A,k.x,E.y,P,I),pc(d,s.x,s.y,S.x,L+S.y,T.x+T.w,T.y+T.h,i,A,E.x,E.y,P,I),dc(t.dynamicLayoutVertexArray,s,y),p.emplaceBack(O,O+1,O+2),p.emplaceBack(O+1,O+2,O+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(M[0]),v!==e.length-1&&z===e[v+1].sectionIndex||t.programConfigurations.populatePaintArrays(d.length,o,o.index,{},h,_&&_[z])}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,g,l,c,s.segment,i?i[0]:0,i?i[1]:0,n[0],n[1],a,0,!1,0,u)},yc.prototype._addCollisionDebugVertex=function(t,e,i,n,r,o){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,n,r,Math.round(o.x),Math.round(o.y))},yc.prototype.addCollisionDebugVertices=function(t,e,i,n,o,a,s){var l=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),c=l.vertexLength,u=o.layoutVertexArray,h=o.collisionVertexArray,p=s.anchorX,d=s.anchorY;this._addCollisionDebugVertex(u,h,a,p,d,new r(t,e)),this._addCollisionDebugVertex(u,h,a,p,d,new r(i,e)),this._addCollisionDebugVertex(u,h,a,p,d,new r(i,n)),this._addCollisionDebugVertex(u,h,a,p,d,new r(t,n)),l.vertexLength+=4;var f=o.indexArray;f.emplaceBack(c,c+1),f.emplaceBack(c+1,c+2),f.emplaceBack(c+2,c+3),f.emplaceBack(c+3,c),l.primitiveLength+=4},yc.prototype.addDebugCollisionBoxes=function(t,e,i,n){for(var r=t;r<e;r++){var o=this.collisionBoxArray.get(r);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,n?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,i)}},yc.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gc(Fr,Zs.members,Wr),this.iconCollisionBox=new gc(Fr,Zs.members,Wr);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},yc.prototype._deserializeCollisionBoxesForSymbol=function(t,e,i,n,r,o,a,s,l){for(var c={},u=e;u<i;u++){var h=t.get(u);c.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},c.textFeatureIndex=h.featureIndex;break}for(var p=n;p<r;p++){var d=t.get(p);c.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},c.verticalTextFeatureIndex=d.featureIndex;break}for(var f=o;f<a;f++){var m=t.get(f);c.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},c.iconFeatureIndex=m.featureIndex;break}for(var g=s;g<l;g++){var y=t.get(g);c.verticalIconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},c.verticalIconFeatureIndex=y.featureIndex;break}return c},yc.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},yc.prototype.hasTextData=function(){return this.text.segments.get().length>0},yc.prototype.hasIconData=function(){return this.icon.segments.get().length>0},yc.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},yc.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},yc.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},yc.prototype.addIndicesForPlacedSymbol=function(t,e){for(var i=t.placedSymbolArray.get(e),n=i.vertexStartIndex+4*i.numGlyphs,r=i.vertexStartIndex;r<n;r+=4)t.indexArray.emplaceBack(r,r+1,r+2),t.indexArray.emplaceBack(r+1,r+2,r+3)},yc.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),i=Math.cos(t),n=[],r=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);n.push(0|Math.round(e*s.anchorX+i*s.anchorY)),r.push(s.featureIndex)}return o.sort((function(t,e){return n[t]-n[e]||r[e]-r[t]})),o},yc.prototype.addToSortKeyRanges=function(t,e){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},yc.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,n=this.symbolInstanceIndexes;i<n.length;i+=1){var r=this.symbolInstances.get(n[i]);this.featureSortOrder.push(r.featureIndex),[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((function(t,i,n){t>=0&&n.indexOf(t)===i&&e.addIndicesForPlacedSymbol(e.text,t)})),r.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,r.verticalPlacedTextSymbolIndex),r.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,r.placedIconSymbolIndex),r.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,r.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Fn("SymbolBucket",yc,{omit:["layers","collisionBoxArray","features","compareText"]}),yc.MAX_GLYPHS=65535,yc.addDynamicAttributes=dc;var _c=new xr({"symbol-placement":new gr(It.layout_symbol["symbol-placement"]),"symbol-spacing":new gr(It.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new gr(It.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yr(It.layout_symbol["symbol-sort-key"]),"symbol-z-order":new gr(It.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new gr(It.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new gr(It.layout_symbol["icon-ignore-placement"]),"icon-optional":new gr(It.layout_symbol["icon-optional"]),"icon-rotation-alignment":new gr(It.layout_symbol["icon-rotation-alignment"]),"icon-size":new yr(It.layout_symbol["icon-size"]),"icon-text-fit":new gr(It.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gr(It.layout_symbol["icon-text-fit-padding"]),"icon-image":new yr(It.layout_symbol["icon-image"]),"icon-rotate":new yr(It.layout_symbol["icon-rotate"]),"icon-padding":new gr(It.layout_symbol["icon-padding"]),"icon-keep-upright":new gr(It.layout_symbol["icon-keep-upright"]),"icon-offset":new yr(It.layout_symbol["icon-offset"]),"icon-anchor":new yr(It.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new gr(It.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new gr(It.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new gr(It.layout_symbol["text-rotation-alignment"]),"text-field":new yr(It.layout_symbol["text-field"]),"text-font":new yr(It.layout_symbol["text-font"]),"text-size":new yr(It.layout_symbol["text-size"]),"text-max-width":new yr(It.layout_symbol["text-max-width"]),"text-line-height":new gr(It.layout_symbol["text-line-height"]),"text-letter-spacing":new yr(It.layout_symbol["text-letter-spacing"]),"text-justify":new yr(It.layout_symbol["text-justify"]),"text-radial-offset":new yr(It.layout_symbol["text-radial-offset"]),"text-variable-anchor":new gr(It.layout_symbol["text-variable-anchor"]),"text-anchor":new yr(It.layout_symbol["text-anchor"]),"text-max-angle":new gr(It.layout_symbol["text-max-angle"]),"text-writing-mode":new gr(It.layout_symbol["text-writing-mode"]),"text-rotate":new yr(It.layout_symbol["text-rotate"]),"text-padding":new gr(It.layout_symbol["text-padding"]),"text-keep-upright":new gr(It.layout_symbol["text-keep-upright"]),"text-transform":new yr(It.layout_symbol["text-transform"]),"text-offset":new yr(It.layout_symbol["text-offset"]),"text-allow-overlap":new gr(It.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new gr(It.layout_symbol["text-ignore-placement"]),"text-optional":new gr(It.layout_symbol["text-optional"])}),vc={paint:new xr({"icon-opacity":new yr(It.paint_symbol["icon-opacity"]),"icon-color":new yr(It.paint_symbol["icon-color"]),"icon-halo-color":new yr(It.paint_symbol["icon-halo-color"]),"icon-halo-width":new yr(It.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yr(It.paint_symbol["icon-halo-blur"]),"icon-translate":new gr(It.paint_symbol["icon-translate"]),"icon-translate-anchor":new gr(It.paint_symbol["icon-translate-anchor"]),"text-opacity":new yr(It.paint_symbol["text-opacity"]),"text-color":new yr(It.paint_symbol["text-color"],{runtimeType:jt,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new yr(It.paint_symbol["text-halo-color"]),"text-halo-width":new yr(It.paint_symbol["text-halo-width"]),"text-halo-blur":new yr(It.paint_symbol["text-halo-blur"]),"text-translate":new gr(It.paint_symbol["text-translate"]),"text-translate-anchor":new gr(It.paint_symbol["text-translate-anchor"])}),layout:_c},bc=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Bt,this.defaultValue=t};bc.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},bc.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},bc.prototype.outputDefined=function(){return!1},bc.prototype.serialize=function(){return null},Fn("FormatSectionOverride",bc,{omit:["defaultValue"]});var xc=function(t){function e(e){t.call(this,e,vc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,i){if(t.prototype.recalculate.call(this,e,i),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var n=this.layout.get("text-writing-mode");if(n){for(var r=[],o=0,a=n;o<a.length;o+=1){var s=a[o];r.indexOf(s)<0&&r.push(s)}this.layout._values["text-writing-mode"]=r}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,i,n){var r=this.layout.get(t).evaluate(e,{},i,n),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Hi(o.value)||!r?r:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,i){return i in t?String(t[i]):""}))}(e.properties,r)},e.prototype.createBucket=function(t){return new yc(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,i=vc.paint.overridableProperties;t<i.length;t+=1){var n=i[t];if(e.hasPaintOverride(this.layout,n)){var r,o=this.paint.get(n),a=new bc(o),s=new Zi(a,o.property.specification);r="constant"===o.value.kind||"source"===o.value.kind?new Wi("source",s):new $i("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[n]=new fr(o.property,r,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,i,n){return!(!this.layout||i.isDataDriven()||n.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var i=t.get("text-field"),n=vc.paint.properties[e],r=!1,o=function(t){for(var e=0,i=t;e<i.length;e+=1)if(n.overrides&&n.overrides.hasOverride(i[e]))return void(r=!0)};if("constant"===i.value.kind&&i.value.value instanceof ne)o(i.value.value.sections);else if("source"===i.value.kind){var a=function(t){r||(t instanceof ce&&se(t.value)===Ht?o(t.value.sections):t instanceof de?o(t.sections):t.eachChild(a))},s=i.value;s._styleExpression&&a(s._styleExpression.expression)}return r},e}(wr),wc={paint:new xr({"background-color":new gr(It.paint_background["background-color"]),"background-pattern":new vr(It.paint_background["background-pattern"]),"background-opacity":new gr(It.paint_background["background-opacity"])})},Cc=function(t){function e(e){t.call(this,e,wc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(wr),Sc={paint:new xr({"raster-opacity":new gr(It.paint_raster["raster-opacity"]),"raster-hue-rotate":new gr(It.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new gr(It.paint_raster["raster-brightness-min"]),"raster-brightness-max":new gr(It.paint_raster["raster-brightness-max"]),"raster-saturation":new gr(It.paint_raster["raster-saturation"]),"raster-contrast":new gr(It.paint_raster["raster-contrast"]),"raster-resampling":new gr(It.paint_raster["raster-resampling"]),"raster-fade-duration":new gr(It.paint_raster["raster-fade-duration"])})},Tc=function(t){function e(e){t.call(this,e,Sc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(wr),kc=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(wr),Ec={circle:pa,heatmap:wa,hillshade:Sa,fill:us,"fill-extrusion":Es,line:Ns,symbol:xc,background:Cc,raster:Tc},Pc=a.HTMLImageElement,Ic=a.HTMLCanvasElement,Mc=a.HTMLVideoElement,Ac=a.ImageData,zc=a.ImageBitmap,Oc=function(t,e,i,n){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,n)};Oc.prototype.update=function(t,e,i){var n=t.width,r=t.height,o=!(this.size&&this.size[0]===n&&this.size[1]===r||i),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[n,r],t instanceof Pc||t instanceof Ic||t instanceof Mc||t instanceof Ac||zc&&t instanceof zc?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,n,r,0,this.format,s.UNSIGNED_BYTE,t.data);else{var l=i||{x:0,y:0},c=l.x,u=l.y;t instanceof Pc||t instanceof Ic||t instanceof Mc||t instanceof Ac||zc&&t instanceof zc?s.texSubImage2D(s.TEXTURE_2D,0,c,u,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,c,u,n,r,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Oc.prototype.bind=function(t,e,i){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),i!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)},Oc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Oc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Lc=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Lc.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},Lc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Dc=function(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},y(["receive","process"],this),this.invoker=new Lc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=k()?t:a};function Rc(t,e,i){var n=2*Math.PI*6378137/256/Math.pow(2,i);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}Dc.prototype.send=function(t,e,i,n,r){var o=this;void 0===r&&(r=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[a]=i);var s=I(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!i,targetMapId:n,mustQueue:r,sourceMapId:this.mapId,data:Un(e,s)},s),{cancel:function(){i&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:n,sourceMapId:o.mapId})}}},Dc.prototype.receive=function(t){var e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[i];var n=this.cancelCallbacks[i];delete this.cancelCallbacks[i],n&&n()}else k()||e.mustQueue?(this.tasks[i]=e,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,e)},Dc.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Dc.prototype.processTask=function(t,e){var i=this;if("<response>"===e.type){var n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(qn(e.error)):n(null,qn(e.data)))}else{var r=!1,o=I(this.globalScope)?void 0:[],a=e.hasCallback?function(e,n){r=!0,delete i.cancelCallbacks[t],i.target.postMessage({id:t,type:"<response>",sourceMapId:i.mapId,error:e?Un(e):null,data:Un(n,o)},o)}:function(t){r=!0},s=null,l=qn(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,l,a);else if(this.parent.getWorkerSource){var c=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,c[0],l.source)[c[1]](l,a)}else a(new Error("Could not find function "+e.type));!r&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Dc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Bc=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Bc.prototype.setNorthEast=function(t){return this._ne=t instanceof Fc?new Fc(t.lng,t.lat):Fc.convert(t),this},Bc.prototype.setSouthWest=function(t){return this._sw=t instanceof Fc?new Fc(t.lng,t.lat):Fc.convert(t),this},Bc.prototype.extend=function(t){var e,i,n=this._sw,r=this._ne;if(t instanceof Fc)e=t,i=t;else{if(!(t instanceof Bc))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Bc.convert(t)):this.extend(Fc.convert(t)):this;if(i=t._ne,!(e=t._sw)||!i)return this}return n||r?(n.lng=Math.min(e.lng,n.lng),n.lat=Math.min(e.lat,n.lat),r.lng=Math.max(i.lng,r.lng),r.lat=Math.max(i.lat,r.lat)):(this._sw=new Fc(e.lng,e.lat),this._ne=new Fc(i.lng,i.lat)),this},Bc.prototype.getCenter=function(){return new Fc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Bc.prototype.getSouthWest=function(){return this._sw},Bc.prototype.getNorthEast=function(){return this._ne},Bc.prototype.getNorthWest=function(){return new Fc(this.getWest(),this.getNorth())},Bc.prototype.getSouthEast=function(){return new Fc(this.getEast(),this.getSouth())},Bc.prototype.getWest=function(){return this._sw.lng},Bc.prototype.getSouth=function(){return this._sw.lat},Bc.prototype.getEast=function(){return this._ne.lng},Bc.prototype.getNorth=function(){return this._ne.lat},Bc.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Bc.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Bc.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Bc.prototype.contains=function(t){var e=Fc.convert(t),i=e.lng,n=e.lat,r=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r},Bc.convert=function(t){return!t||t instanceof Bc?t:new Bc(t)};var Fc=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Fc.prototype.wrap=function(){return new Fc(h(this.lng,-180,180),this.lat)},Fc.prototype.toArray=function(){return[this.lng,this.lat]},Fc.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Fc.prototype.distanceTo=function(t){var e=Math.PI/180,i=this.lat*e,n=t.lat*e,r=Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(r,1))},Fc.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new Bc(new Fc(this.lng-i,this.lat-e),new Fc(this.lng+i,this.lat+e))},Fc.convert=function(t){if(t instanceof Fc)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Fc(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Fc(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Nc=2*Math.PI*6371008.8;function Vc(t){return Nc*Math.cos(t*Math.PI/180)}function jc(t){return(180+t)/360}function Uc(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function qc(t,e){return t/Vc(e)}function Zc(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var Hc=function(t,e,i){void 0===i&&(i=0),this.x=+t,this.y=+e,this.z=+i};Hc.fromLngLat=function(t,e){void 0===e&&(e=0);var i=Fc.convert(t);return new Hc(jc(i.lng),Uc(i.lat),qc(e,i.lat))},Hc.prototype.toLngLat=function(){return new Fc(360*this.x-180,Zc(this.y))},Hc.prototype.toAltitude=function(){return this.z*Vc(Zc(this.y))},Hc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Nc*(t=Zc(this.y),1/Math.cos(t*Math.PI/180));var t};var Gc=function(t,e,i){this.z=t,this.x=e,this.y=i,this.key=Kc(0,t,t,e,i)};Gc.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Gc.prototype.url=function(t,e){var i,n,r,o,a,s=(n=this.y,r=this.z,o=Rc(256*(i=this.x),256*(n=Math.pow(2,r)-n-1),r),a=Rc(256*(i+1),256*(n+1),r),o[0]+","+o[1]+","+a[0]+","+a[1]),l=function(t,e,i){for(var n,r="",o=t;o>0;o--)r+=(e&(n=1<<o-1)?1:0)+(i&n?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},Gc.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new r(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},Gc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Wc=function(t,e){this.wrap=t,this.canonical=e,this.key=Kc(t,e.z,e.z,e.x,e.y)},$c=function(t,e,i,n,r){this.overscaledZ=t,this.wrap=e,this.canonical=new Gc(i,+n,+r),this.key=Kc(e,t,i,n,r)};function Kc(t,e,i,n,r){(t*=2)<0&&(t=-1*t-1);var o=1<<i;return(o*o*t+o*r+n).toString(36)+i.toString(36)+e.toString(36)}$c.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},$c.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new $c(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new $c(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},$c.prototype.calculateScaledKey=function(t,e){var i=this.canonical.z-t;return t>this.canonical.z?Kc(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Kc(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)},$c.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},$c.prototype.children=function(t){if(this.overscaledZ>=t)return[new $c(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,i=2*this.canonical.x,n=2*this.canonical.y;return[new $c(e,this.wrap,e,i,n),new $c(e,this.wrap,e,i+1,n),new $c(e,this.wrap,e,i,n+1),new $c(e,this.wrap,e,i+1,n+1)]},$c.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},$c.prototype.wrapped=function(){return new $c(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},$c.prototype.unwrapTo=function(t){return new $c(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},$c.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},$c.prototype.toUnwrapped=function(){return new Wc(this.wrap,this.canonical)},$c.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},$c.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Hc(t.x-this.wrap,t.y))},Fn("CanonicalTileID",Gc),Fn("OverscaledTileID",$c,{omit:["posMatrix"]});var Xc=function(t,e,i){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return C('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var n=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox";for(var r=0;r<n;r++)this.data[this._idx(-1,r)]=this.data[this._idx(0,r)],this.data[this._idx(n,r)]=this.data[this._idx(n-1,r)],this.data[this._idx(r,-1)]=this.data[this._idx(r,0)],this.data[this._idx(r,n)]=this.data[this._idx(r,n-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(n,-1)]=this.data[this._idx(n-1,0)],this.data[this._idx(-1,n)]=this.data[this._idx(0,n-1)],this.data[this._idx(n,n)]=this.data[this._idx(n-1,n-1)]};Xc.prototype.get=function(t,e){var i=new Uint8Array(this.data.buffer),n=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[n],i[n+1],i[n+2])},Xc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Xc.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Xc.prototype._unpackMapbox=function(t,e,i){return(256*t*256+256*e+i)/10-1e4},Xc.prototype._unpackTerrarium=function(t,e,i){return 256*t+e+i/256-32768},Xc.prototype.getPixels=function(){return new va({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Xc.prototype.backfillBorder=function(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var n=e*this.dim,r=e*this.dim+this.dim,o=i*this.dim,a=i*this.dim+this.dim;switch(e){case-1:n=r-1;break;case 1:r=n+1}switch(i){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,l=-i*this.dim,c=o;c<a;c++)for(var u=n;u<r;u++)this.data[this._idx(u,c)]=t.data[this._idx(u+s,c+l)]},Fn("DEMData",Xc);var Qc=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}};Qc.prototype.encode=function(t){return this._stringToNumber[t]},Qc.prototype.decode=function(t){return this._numberToString[t]};var Yc=function(t,e,i,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=n,this.properties=t.properties,this.id=r},Jc={geometry:{configurable:!0}};Jc.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Jc.geometry.set=function(t){this._geometry=t},Yc.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Yc.prototype,Jc);var tu=function(){this.state={},this.stateChanges={},this.deletedStates={}};tu.prototype.updateState=function(t,e,i){var n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},p(this.stateChanges[t][n],i),null===this.deletedStates[t])for(var r in this.deletedStates[t]={},this.state[t])r!==n&&(this.deletedStates[t][r]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][n])for(var o in this.deletedStates[t][n]={},this.state[t][n])i[o]||(this.deletedStates[t][n][o]=null);else for(var a in i)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][a]&&delete this.deletedStates[t][n][a]},tu.prototype.removeFeatureState=function(t,e,i){if(null!==this.deletedStates[t]){var n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(i in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][i]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}},tu.prototype.getState=function(t,e){var i=String(e),n=p({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var r=this.deletedStates[t][e];if(null===r)return{};for(var o in r)delete n[o]}return n},tu.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},tu.prototype.coalesceChanges=function(t,e){var i={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var r={};for(var o in this.stateChanges[n])this.state[n][o]||(this.state[n][o]={}),p(this.state[n][o],this.stateChanges[n][o]),r[o]=this.state[n][o];i[n]=r}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var l in this.state[a])s[l]={},this.state[a][l]={};else for(var c in this.deletedStates[a]){if(null===this.deletedStates[a][c])this.state[a][c]={};else for(var u=0,h=Object.keys(this.deletedStates[a][c]);u<h.length;u+=1)delete this.state[a][c][h[u]];s[c]=this.state[a][c]}i[a]=i[a]||{},p(i[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var d in t)t[d].setFeatureState(i,e)};var eu=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new On(8192,16,0),this.grid3D=new On(8192,16,0),this.featureIndexArray=new oo,this.promoteId=e};function iu(t,e,i,n,r){return v(t,(function(t,o){var a=e instanceof mr?e.get(o):null;return a&&a.evaluate?a.evaluate(i,n,r):a}))}function nu(t){for(var e=1/0,i=1/0,n=-1/0,r=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),i=Math.min(i,s.y),n=Math.max(n,s.x),r=Math.max(r,s.y)}return{minX:e,minY:i,maxX:n,maxY:r}}function ru(t,e){return e-t}eu.prototype.insert=function(t,e,i,n,r,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,n,r);for(var s=o?this.grid3D:this.grid,l=0;l<e.length;l++){for(var c=e[l],u=[1/0,1/0,-1/0,-1/0],h=0;h<c.length;h++){var p=c[h];u[0]=Math.min(u[0],p.x),u[1]=Math.min(u[1],p.y),u[2]=Math.max(u[2],p.x),u[3]=Math.max(u[3],p.y)}u[0]<8192&&u[1]<8192&&u[2]>=0&&u[3]>=0&&s.insert(a,u[0],u[1],u[2],u[3])}},eu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new bs.VectorTile(new Xs(this.rawTileData)).layers,this.sourceLayerCoder=new Qc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},eu.prototype.query=function(t,e,i,n){var o=this;this.loadVTLayers();for(var a=t.params||{},s=8192/t.tileSize/t.scale,l=an(a.filter),c=t.queryGeometry,u=t.queryPadding*s,h=nu(c),p=this.grid.query(h.minX-u,h.minY-u,h.maxX+u,h.maxY+u),d=nu(t.cameraQueryGeometry),f=0,m=this.grid3D.query(d.minX-u,d.minY-u,d.maxX+u,d.maxY+u,(function(e,i,n,o){return function(t,e,i,n,o){for(var a=0,s=t;a<s.length;a+=1){var l=s[a];if(e<=l.x&&i<=l.y&&n>=l.x&&o>=l.y)return!0}var c=[new r(e,i),new r(e,o),new r(n,o),new r(n,i)];if(t.length>2)for(var u=0,h=c;u<h.length;u+=1)if(Jo(t,h[u]))return!0;for(var p=0;p<t.length-1;p++)if(ta(t[p],t[p+1],c))return!0;return!1}(t.cameraQueryGeometry,e-u,i-u,n+u,o+u)}));f<m.length;f+=1)p.push(m[f]);p.sort(ru);for(var g,y={},_=function(r){var u=p[r];if(u!==g){g=u;var h=o.featureIndexArray.get(u),d=null;o.loadMatchingFeature(y,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,l,a.layers,a.availableImages,e,i,n,(function(e,i,n){return d||(d=Vo(e)),i.queryIntersectsFeature(c,e,n,d,o.z,t.transform,s,t.pixelPosMatrix)}))}},v=0;v<p.length;v++)_(v);return y},eu.prototype.loadMatchingFeature=function(t,e,i,n,r,o,a,s,l,c,u){var h=this.bucketLayerIDs[e];if(!o||function(t,e){for(var i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1}(o,h)){var d=this.sourceLayerCoder.decode(i),f=this.vtLayers[d].feature(n);if(r.needGeometry){var m=jo(f,!0);if(!r.filter(new sr(this.tileID.overscaledZ),m,this.tileID.canonical))return}else if(!r.filter(new sr(this.tileID.overscaledZ),f))return;for(var g=this.getId(f,d),y=0;y<h.length;y++){var _=h[y];if(!(o&&o.indexOf(_)<0)){var v=s[_];if(v){var b={};void 0!==g&&c&&(b=c.getState(v.sourceLayer||"_geojsonTileLayer",g));var x=p({},l[_]);x.paint=iu(x.paint,v.paint,f,b,a),x.layout=iu(x.layout,v.layout,f,b,a);var w=!u||u(f,v,b);if(w){var C=new Yc(f,this.z,this.x,this.y,g);C.layer=x;var S=t[_];void 0===S&&(S=t[_]=[]),S.push({featureIndex:n,feature:C,intersectionZ:w})}}}}}},eu.prototype.lookupSymbolFeatures=function(t,e,i,n,r,o,a,s){var l={};this.loadVTLayers();for(var c=an(r),u=0,h=t;u<h.length;u+=1)this.loadMatchingFeature(l,i,n,h[u],c,o,a,s,e);return l},eu.prototype.hasLayer=function(t){for(var e=0,i=this.bucketLayerIDs;e<i.length;e+=1)for(var n=0,r=i[e];n<r.length;n+=1)if(t===r[n])return!0;return!1},eu.prototype.getId=function(t,e){var i=t.id;return this.promoteId&&"boolean"==typeof(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(i=Number(i)),i},Fn("FeatureIndex",eu,{omit:["rawTileData","sourceLayerCoder"]});var ou=function(t,e){this.tileID=t,this.uid=f(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ou.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<F.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},ou.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ou.prototype.loadVectorData=function(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var n in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var i={};if(!e)return i;for(var n=function(){var t=o[r],n=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==n.length){t.layers=n,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return n.filter((function(e){return e.id===t}))[0]})));for(var a=0,s=n;a<s.length;a+=1)i[s[a].id]=t}},r=0,o=t;r<o.length;r+=1)n();return i}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var r=this.buckets[n];if(r instanceof yc){if(this.hasSymbolBuckets=!0,!i)break;r.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof yc&&a.hasRTLText){this.hasRTLText=!0,ar.isLoading()||ar.isLoaded()||"deferred"!==rr()||or();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(l))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Qr},ou.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ou.prototype.getBucket=function(t){return this.buckets[t.id]},ou.prototype.upload=function(t){for(var e in this.buckets){var i=this.buckets[e];i.uploadPending()&&i.upload(t)}var n=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Oc(t,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Oc(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)},ou.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},ou.prototype.queryRenderedFeatures=function(t,e,i,n,r,o,a,s,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:r,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:a,queryPadding:this.queryPadding*l},t,e,i):{}},ou.prototype.querySourceFeatures=function(t,e){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var n=i.loadVTLayers(),r=e?e.sourceLayer:"",o=n._geojsonTileLayer||n[r];if(o)for(var a=an(e&&e.filter),s=this.tileID.canonical,l=s.z,c=s.x,u=s.y,h={z:l,x:c,y:u},p=0;p<o.length;p++){var d=o.feature(p);if(a.needGeometry){var f=jo(d,!0);if(!a.filter(new sr(this.tileID.overscaledZ),f,this.tileID.canonical))continue}else if(!a.filter(new sr(this.tileID.overscaledZ),d))continue;var m=i.getId(d,r),g=new Yc(d,l,c,u,m);g.tile=h,t.push(g)}}},ou.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ou.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ou.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var i=E(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var n=Date.now(),r=!1;if(this.expirationTime>n)r=!1;else if(e)if(this.expirationTime<e)r=!0;else{var o=this.expirationTime-e;o?this.expirationTime=n+Math.max(o,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ou.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},ou.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var i=this.latestFeatureIndex.loadVTLayers();for(var n in this.buckets)if(e.style.hasLayer(n)){var r=this.buckets[n],o=r.layers[0].sourceLayer||"_geojsonTileLayer",a=i[o],s=t[o];if(a&&s&&0!==Object.keys(s).length){r.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var l=e&&e.style&&e.style.getLayer(n);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(r)))}}}},ou.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},ou.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<F.now()},ou.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ou.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=F.now()+t},ou.prototype.setDependencies=function(t,e){for(var i={},n=0,r=e;n<r.length;n+=1)i[r[n]]=!0;this.dependencies[t]=i},ou.prototype.hasDependency=function(t,e){for(var i=0,n=t;i<n.length;i+=1){var r=this.dependencies[n[i]];if(r)for(var o=0,a=e;o<a.length;o+=1)if(r[a[o]])return!0}return!1};var au=a.performance,su=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},au.mark(this._marks.start)};su.prototype.finish=function(){au.mark(this._marks.end);var t=au.getEntriesByName(this._marks.measure);return 0===t.length&&(au.measure(this._marks.measure,this._marks.start,this._marks.end),t=au.getEntriesByName(this._marks.measure),au.clearMarks(this._marks.start),au.clearMarks(this._marks.end),au.clearMeasures(this._marks.measure)),t},t.Actor=Dc,t.AlphaImage=_a,t.CanonicalTileID=Gc,t.CollisionBoxArray=Qr,t.Color=te,t.DEMData=Xc,t.DataConstantProperty=gr,t.DictionaryCoder=Qc,t.EXTENT=8192,t.ErrorEvent=Et,t.EvaluationParameters=sr,t.Event=kt,t.Evented=Pt,t.FeatureIndex=eu,t.FillBucket=ss,t.FillExtrusionBucket=Ss,t.ImageAtlas=bl,t.ImagePosition=_l,t.LineBucket=Ds,t.LngLat=Fc,t.LngLatBounds=Bc,t.MercatorCoordinate=Hc,t.ONE_EM=24,t.OverscaledTileID=$c,t.Point=r,t.Point$1=r,t.Properties=xr,t.Protobuf=Xs,t.RGBAImage=va,t.RequestManager=H,t.RequestPerformance=su,t.ResourceType=ft,t.SegmentVector=so,t.SourceFeatureState=tu,t.StructArrayLayout1ui2=$r,t.StructArrayLayout2f1f2i16=Nr,t.StructArrayLayout2i4=Pr,t.StructArrayLayout3ui6=jr,t.StructArrayLayout4i8=Ir,t.SymbolBucket=yc,t.Texture=Oc,t.Tile=ou,t.Transitionable=ur,t.Uniform1f=xo,t.Uniform1i=bo,t.Uniform2f=wo,t.Uniform3f=Co,t.Uniform4f=So,t.UniformColor=To,t.UniformMatrix4f=Eo,t.UnwrappedTileID=Wc,t.ValidationError=Mt,t.WritingMode=xl,t.ZoomHistory=Zn,t.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},t.addDynamicAttributes=dc,t.asyncAll=function(t,e,i){if(!t.length)return i(null,[]);var n=t.length,r=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),r[a]=e,0==--n&&i(o,r)}))}))},t.bezier=l,t.bindAll=y,t.browser=F,t.cacheEntryPossiblyAdded=function(t){++pt>lt&&(t.getActor().send("enforceCacheSizeLimit",st),pt=0)},t.clamp=u,t.clearTileCache=function(t){var e=a.caches.delete("mapbox-tiles");t&&e.catch(t).then((function(){return t()}))},t.clipLine=Gl,t.clone=function(t){var e=new aa(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=x,t.clone$2=function(t){var e=new aa(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=Hs,t.config=N,t.create=function(){var t=new aa(16);return aa!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new aa(9);return aa!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new aa(4);return aa!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Gi,t.createLayout=kr,t.createStyleLayer=function(t){return"custom"===t.type?new kc(t):new Ec[t.type](t)},t.cross=function(t,e,i){var n=e[0],r=e[1],o=e[2],a=i[0],s=i[1],l=i[2];return t[0]=r*l-o*s,t[1]=o*a-n*l,t[2]=n*s-r*a,t},t.deepEqual=function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(var n=0;n<e.length;n++)if(!t(e[n],i[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==i){if("object"!=typeof i)return!1;if(Object.keys(e).length!==Object.keys(i).length)return!1;for(var r in e)if(!t(e[r],i[r]))return!1;return!0}return e===i},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=c,t.emitValidationErrors=zn,t.endsWith=_,t.enforceCacheSizeLimit=function(t){ct(),tt&&tt.then((function(e){e.keys().then((function(i){for(var n=0;n<i.length-t;n++)e.delete(i[n])}))}))},t.evaluateSizeForFeature=Bl,t.evaluateSizeForZoom=Fl,t.evaluateVariableOffset=oc,t.evented=nr,t.extend=p,t.featureFilter=an,t.filterObject=b,t.fromRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=zl,t.getAnchorJustification=ac,t.getArrayBuffer=bt,t.getImage=Ct,t.getJSON=function(t,e){return vt(p(t,{type:"json"}),e)},t.getRTLTextPluginStatus=rr,t.getReferrer=_t,t.getVideo=function(t,e){var i,n,r=a.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(var o=0;o<t.length;o++){var s=a.document.createElement("source");i=t[o],n=void 0,(n=a.document.createElement("a")).href=i,(n.protocol!==a.document.location.protocol||n.host!==a.document.location.host)&&(r.crossOrigin="Anonymous"),s.src=t[o],r.appendChild(s)}return{cancel:function(){}}},t.identity=sa,t.invert=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],p=e[10],d=e[11],f=e[12],m=e[13],g=e[14],y=e[15],_=i*s-n*a,v=i*l-r*a,b=i*c-o*a,x=n*l-r*s,w=n*c-o*s,C=r*c-o*l,S=u*m-h*f,T=u*g-p*f,k=u*y-d*f,E=h*g-p*m,P=h*y-d*m,I=p*y-d*g,M=_*I-v*P+b*E+x*k-w*T+C*S;return M?(t[0]=(s*I-l*P+c*E)*(M=1/M),t[1]=(r*P-n*I-o*E)*M,t[2]=(m*C-g*w+y*x)*M,t[3]=(p*w-h*C-d*x)*M,t[4]=(l*k-a*I-c*T)*M,t[5]=(i*I-r*k+o*T)*M,t[6]=(g*b-f*C-y*v)*M,t[7]=(u*C-p*b+d*v)*M,t[8]=(a*P-s*k+c*S)*M,t[9]=(n*k-i*P-o*S)*M,t[10]=(f*w-m*b+y*_)*M,t[11]=(h*b-u*w-d*_)*M,t[12]=(s*T-a*E-l*S)*M,t[13]=(i*E-n*T+r*S)*M,t[14]=(m*v-f*x-g*_)*M,t[15]=(u*x-h*v+p*_)*M,t):null},t.isChar=Hn,t.isMapboxURL=G,t.keysDifference=function(t,e){var i=[];for(var n in t)n in e||i.push(n);return i},t.makeRequest=vt,t.mapObject=v,t.mercatorXfromLng=jc,t.mercatorYfromLat=Uc,t.mercatorZfromAltitude=qc,t.mul=ua,t.multiply=la,t.mvt=bs,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=function(t,e){var i=e[0],n=e[1],r=e[2],o=i*i+n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=Ze,t.offscreenCanvasSupported=dt,t.ortho=function(t,e,i,n,r,o,a){var s=1/(e-i),l=1/(n-r),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*s,t[13]=(r+n)*l,t[14]=(a+o)*c,t[15]=1,t},t.parseGlyphPBF=function(t){return new Xs(t).readFields(fl,[])},t.pbf=Xs,t.performSymbolLayout=function(t,e,i,n,r,o,a){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,l=t.layers[0]._unevaluatedLayout._values,c={};if("composite"===t.textSizeData.kind){var u=t.textSizeData,h=u.maxZoom;c.compositeTextSizes=[l["text-size"].possiblyEvaluate(new sr(u.minZoom),a),l["text-size"].possiblyEvaluate(new sr(h),a)]}if("composite"===t.iconSizeData.kind){var p=t.iconSizeData,d=p.maxZoom;c.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new sr(p.minZoom),a),l["icon-size"].possiblyEvaluate(new sr(d),a)]}c.layoutTextSize=l["text-size"].possiblyEvaluate(new sr(t.zoom+1),a),c.layoutIconSize=l["icon-size"].possiblyEvaluate(new sr(t.zoom+1),a),c.textMaxSize=l["text-size"].possiblyEvaluate(new sr(18));for(var f=24*s.get("text-line-height"),m="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),g=s.get("text-keep-upright"),y=s.get("text-size"),_=function(){var o=b[v],l=s.get("text-font").evaluate(o,{},a).join(","),u=y.evaluate(o,{},a),h=c.layoutTextSize.evaluate(o,{},a),p=c.layoutIconSize.evaluate(o,{},a),d={horizontal:{},vertical:void 0},_=o.text,x=[0,0];if(_){var w=_.toString(),S=24*s.get("text-letter-spacing").evaluate(o,{},a),T=function(t){for(var e=0,i=t;e<i.length;e+=1)if(n=i[e].charCodeAt(0),Hn.Arabic(n)||Hn["Arabic Supplement"](n)||Hn["Arabic Extended-A"](n)||Hn["Arabic Presentation Forms-A"](n)||Hn["Arabic Presentation Forms-B"](n))return!1;var n;return!0}(w)?S:0,k=s.get("text-anchor").evaluate(o,{},a),E=s.get("text-variable-anchor");if(!E){var P=s.get("text-radial-offset").evaluate(o,{},a);x=P?oc(k,[24*P,rc]):s.get("text-offset").evaluate(o,{},a).map((function(t){return 24*t}))}var I=m?"center":s.get("text-justify").evaluate(o,{},a),M=s.get("symbol-placement"),A="point"===M?24*s.get("text-max-width").evaluate(o,{},a):0,z=function(){t.allowVerticalPlacement&&Gn(w)&&(d.vertical=Sl(_,e,i,r,l,A,f,k,"left",T,x,xl.vertical,!0,M,h,u))};if(!m&&E){for(var O="auto"===I?E.map((function(t){return ac(t)})):[I],L=!1,D=0;D<O.length;D++){var R=O[D];if(!d.horizontal[R])if(L)d.horizontal[R]=d.horizontal[0];else{var B=Sl(_,e,i,r,l,A,f,"center",R,T,x,xl.horizontal,!1,M,h,u);B&&(d.horizontal[R]=B,L=1===B.positionedLines.length)}}z()}else{"auto"===I&&(I=ac(k));var F=Sl(_,e,i,r,l,A,f,k,I,T,x,xl.horizontal,!1,M,h,u);F&&(d.horizontal[I]=F),z(),Gn(w)&&m&&g&&(d.vertical=Sl(_,e,i,r,l,A,f,k,I,T,x,xl.vertical,!1,M,h,u))}}var N=void 0,V=!1;if(o.icon&&o.icon.name){var j=n[o.icon.name];j&&(N=function(t,e,i){var n=zl(i),r=e[0]-t.displaySize[0]*n.horizontalAlign,o=e[1]-t.displaySize[1]*n.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:r,right:r+t.displaySize[0]}}(r[o.icon.name],s.get("icon-offset").evaluate(o,{},a),s.get("icon-anchor").evaluate(o,{},a)),V=j.sdf,void 0===t.sdfIcons?t.sdfIcons=j.sdf:t.sdfIcons!==j.sdf&&C("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(j.pixelRatio!==t.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var U=lc(d.horizontal)||d.vertical;t.iconsInText=!!U&&U.iconsInText,(U||N)&&function(t,e,i,n,r,o,a,s,l,c,u){var h=o.textMaxSize.evaluate(e,{});void 0===h&&(h=a);var p,d=t.layers[0].layout,f=d.get("icon-offset").evaluate(e,{},u),m=lc(i.horizontal),g=a/24,y=t.tilePixelRatio*g,_=t.tilePixelRatio*h/24,v=t.tilePixelRatio*s,b=t.tilePixelRatio*d.get("symbol-spacing"),x=d.get("text-padding")*t.tilePixelRatio,w=d.get("icon-padding")*t.tilePixelRatio,S=d.get("text-max-angle")/180*Math.PI,T="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),k="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),E=d.get("symbol-placement"),P=b/2,I=d.get("icon-text-fit");n&&"none"!==I&&(t.allowVerticalPlacement&&i.vertical&&(p=Ll(n,i.vertical,I,d.get("icon-text-fit-padding"),f,g)),m&&(n=Ll(n,m,I,d.get("icon-text-fit-padding"),f,g)));var M=function(s,h){h.x<0||h.x>=8192||h.y<0||h.y>=8192||function(t,e,i,n,r,o,a,s,l,c,u,h,p,d,f,m,g,y,_,v,b,x,w,S,T){var k,E,P,I,M,A=t.addToLineVertexArray(e,i),z=0,O=0,L=0,D=0,R=-1,B=-1,F={},N=po(""),V=0,j=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(V=(k=s.layout.get("text-offset").evaluate(b,{},S).map((function(t){return 24*t})))[0],j=k[1]):(V=24*s.layout.get("text-radial-offset").evaluate(b,{},S),j=rc),t.allowVerticalPlacement&&n.vertical){var U=s.layout.get("text-rotate").evaluate(b,{},S)+90;I=new Yl(l,e,c,u,h,n.vertical,p,d,f,U),a&&(M=new Yl(l,e,c,u,h,a,g,y,f,U))}if(r){var q=s.layout.get("icon-rotate").evaluate(b,{}),Z="none"!==s.layout.get("icon-text-fit"),H=Wl(r,q,w,Z),G=a?Wl(a,q,w,Z):void 0;P=new Yl(l,e,c,u,h,r,g,y,!1,q),z=4*H.length;var W=t.iconSizeData,$=null;"source"===W.kind?($=[128*s.layout.get("icon-size").evaluate(b,{})])[0]>32640&&C(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===W.kind&&(($=[128*x.compositeIconSizes[0].evaluate(b,{},S),128*x.compositeIconSizes[1].evaluate(b,{},S)])[0]>32640||$[1]>32640)&&C(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,H,$,v,_,b,!1,e,A.lineStartIndex,A.lineLength,-1,S),R=t.icon.placedSymbolArray.length-1,G&&(O=4*G.length,t.addSymbols(t.icon,G,$,v,_,b,xl.vertical,e,A.lineStartIndex,A.lineLength,-1,S),B=t.icon.placedSymbolArray.length-1)}for(var K in n.horizontal){var X=n.horizontal[K];if(!E){N=po(X.text);var Q=s.layout.get("text-rotate").evaluate(b,{},S);E=new Yl(l,e,c,u,h,X,p,d,f,Q)}var Y=1===X.positionedLines.length;if(L+=sc(t,e,X,o,s,f,b,m,A,n.vertical?xl.horizontal:xl.horizontalOnly,Y?Object.keys(n.horizontal):[K],F,R,x,S),Y)break}n.vertical&&(D+=sc(t,e,n.vertical,o,s,f,b,m,A,xl.vertical,["vertical"],F,B,x,S));var J=E?E.boxStartIndex:t.collisionBoxArray.length,tt=E?E.boxEndIndex:t.collisionBoxArray.length,et=I?I.boxStartIndex:t.collisionBoxArray.length,it=I?I.boxEndIndex:t.collisionBoxArray.length,nt=P?P.boxStartIndex:t.collisionBoxArray.length,rt=P?P.boxEndIndex:t.collisionBoxArray.length,ot=M?M.boxStartIndex:t.collisionBoxArray.length,at=M?M.boxEndIndex:t.collisionBoxArray.length,st=-1,lt=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};st=lt(E,st),st=lt(I,st),st=lt(P,st);var ct=(st=lt(M,st))>-1?1:0;ct&&(st*=T/24),t.glyphOffsetArray.length>=yc.MAX_GLYPHS&&C("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,R,B,N,J,tt,et,it,nt,rt,ot,at,c,L,D,z,O,ct,0,p,V,j,st)}(t,h,s,i,n,r,p,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,y,x,T,l,v,w,k,f,e,o,c,u,a)};if("line"===E)for(var A=0,z=Gl(e.geometry,0,0,8192,8192);A<z.length;A+=1)for(var O=z[A],L=0,D=Hl(O,b,S,i.vertical||m,n,24,_,t.overscaling,8192);L<D.length;L+=1){var R=D[L];m&&cc(t,m.text,P,R)||M(O,R)}else if("line-center"===E)for(var B=0,F=e.geometry;B<F.length;B+=1){var N=F[B];if(N.length>1){var V=Zl(N,S,i.vertical||m,n,24,_);V&&M(N,V)}}else if("Polygon"===e.type)for(var j=0,U=ns(e.geometry,0);j<U.length;j+=1){var q=U[j],Z=ec(q,16);M(q[0],new Dl(Z.x,Z.y,0))}else if("LineString"===e.type)for(var H=0,G=e.geometry;H<G.length;H+=1){var W=G[H];M(W,new Dl(W[0].x,W[0].y,0))}else if("Point"===e.type)for(var $=0,K=e.geometry;$<K.length;$+=1)for(var X=0,Q=K[$];X<Q.length;X+=1){var Y=Q[X];M([Y],new Dl(Y.x,Y.y,0))}}(t,o,d,N,n,c,h,p,x,V,a)},v=0,b=t.features;v<b.length;v+=1)_();o&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,i,n,r){var o,a=1/Math.tan(e/2);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+n)*(o=1/(n-r)),t[14]=2*r*n*o):(t[10]=-1,t[14]=-2*n),t},t.pick=function(t,e){for(var i={},n=0;n<e.length;n++){var r=e[n];r in t&&(i[r]=t[r])}return i},t.plugin=ar,t.polygonIntersectsPolygon=Zo,t.postMapLoadEvent=at,t.postTurnstileEvent=rt,t.potpack=yl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Fn,t.registerForPluginStateChange=function(t){return t({pluginStatus:Jn,pluginURL:tr}),nr.on("pluginStateChange",t),t},t.renderColorRamp=xa,t.rotate=function(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(i),l=Math.cos(i);return t[0]=n*l+o*s,t[1]=r*l+a*s,t[2]=n*-s+o*l,t[3]=r*-s+a*l,t},t.rotateX=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+c*n,t[5]=a*r+u*n,t[6]=s*r+h*n,t[7]=l*r+p*n,t[8]=c*r-o*n,t[9]=u*r-a*n,t[10]=h*r-s*n,t[11]=p*r-l*n,t},t.rotateZ=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+c*n,t[1]=a*r+u*n,t[2]=s*r+h*n,t[3]=l*r+p*n,t[4]=c*r-o*n,t[5]=u*r-a*n,t[6]=h*r-s*n,t[7]=p*r-l*n,t},t.scale=function(t,e,i){var n=i[0],r=i[1],o=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},t.scale$2=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},t.setCacheLimits=function(t,e){st=t,lt=e},t.setRTLTextPlugin=function(t,e,i){if(void 0===i&&(i=!1),"deferred"===Jn||"loading"===Jn||"loaded"===Jn)throw new Error("setRTLTextPlugin cannot be called multiple times.");tr=F.resolveURL(t),Jn="deferred",Yn=e,ir(),i||or()},t.sphericalToCartesian=function(t){var e=t[0],i=t[1],n=t[2];return i+=90,i*=Math.PI/180,n*=Math.PI/180,{x:e*Math.cos(i)*Math.sin(n),y:e*Math.sin(i)*Math.sin(n),z:e*Math.cos(n)}},t.sqrLen=function(t){var e=t[0],i=t[1];return e*e+i*i},t.styleSpec=It,t.sub=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},t.symbolSize=Nl,t.transformMat3=function(t,e,i){var n=e[0],r=e[1],o=e[2];return t[0]=n*i[0]+r*i[3]+o*i[6],t[1]=n*i[1]+r*i[4]+o*i[7],t[2]=n*i[2]+r*i[5]+o*i[8],t},t.transformMat4=ha,t.translate=function(t,e,i){var n,r,o,a,s,l,c,u,h,p,d,f,m=i[0],g=i[1],y=i[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=e[9],d=e[10],f=e[11],t[0]=n=e[0],t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=p,t[10]=d,t[11]=f,t[12]=n*m+s*g+h*y+e[12],t[13]=r*m+l*g+p*y+e[13],t[14]=o*m+c*g+d*y+e[14],t[15]=a*m+u*g+f*y+e[15]),t},t.triggerPluginCompletionEvent=er,t.uniqueId=f,t.validateCustomStyleLayer=function(t){var e=[],i=t.id;return void 0===i&&e.push({message:"layers."+i+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+i+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=In,t.validateStyle=Pn,t.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},t.vectorTile=bs,t.version="1.13.0",t.warnOnce=C,t.webpSupported=V,t.window=a,t.wrap=h})),n(0,(function(t){function e(t){var i=typeof t;if("number"===i||"boolean"===i||"string"===i||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var n="[",r=0,o=t;r<o.length;r+=1)n+=e(o[r])+",";return n+"]"}for(var a=Object.keys(t).sort(),s="{",l=0;l<a.length;l++)s+=JSON.stringify(a[l])+":"+e(t[a[l]])+",";return s+"}"}function i(i){for(var n="",r=0,o=t.refProperties;r<o.length;r+=1)n+="/"+e(i[o[r]]);return n}var n=function(t){this.keyCache={},t&&this.replace(t)};n.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},n.prototype.update=function(e,n){for(var r=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=t.createStyleLayer(s);l._featureFilter=t.featureFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var c=0,u=n;c<u.length;c+=1){var h=u[c];delete this.keyCache[h],delete this._layerConfigs[h],delete this._layers[h]}this.familiesBySource={};for(var p=0,d=function(t,e){for(var n={},r=0;r<t.length;r++){var o=e&&e[t[r].id]||i(t[r]);e&&(e[t[r].id]=o);var a=n[o];a||(a=n[o]=[]),a.push(t[r])}var s=[];for(var l in n)s.push(n[l]);return s}(t.values(this._layerConfigs),this.keyCache);p<d.length;p+=1){var f=d[p].map((function(t){return r._layers[t.id]})),m=f[0];if("none"!==m.visibility){var g=m.source||"",y=this.familiesBySource[g];y||(y=this.familiesBySource[g]={});var _=m.sourceLayer||"_geojsonTileLayer",v=y[_];v||(v=y[_]=[]),v.push(f)}}};var r=function(e){var i={},n=[];for(var r in e){var o=e[r],a=i[r]={};for(var s in o){var l=o[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var c={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};n.push(c),a[s]={rect:c,metrics:l.metrics}}}}var u=t.potpack(n),h=new t.AlphaImage({width:u.w||1,height:u.h||1});for(var p in e){var d=e[p];for(var f in d){var m=d[+f];if(m&&0!==m.bitmap.width&&0!==m.bitmap.height){var g=i[p][f].rect;t.AlphaImage.copy(m.bitmap,h,{x:0,y:0},{x:g.x+1,y:g.y+1},m.bitmap)}}}this.image=h,this.positions=i};t.register("GlyphAtlas",r);var o=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};function a(e,i,n){for(var r=new t.EvaluationParameters(i),o=0,a=e;o<a.length;o+=1)a[o].recalculate(r,n)}function s(e,i){var n=t.getArrayBuffer(e.request,(function(e,n,r,o){e?i(e):n&&i(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(n)),rawData:n,cacheControl:r,expires:o})}));return function(){n.cancel(),i()}}o.prototype.parse=function(e,i,n,o,s){var l=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var c=new t.DictionaryCoder(Object.keys(e.layers).sort()),u=new t.FeatureIndex(this.tileID,this.promoteId);u.bucketLayerIDs=[];var h,p,d,f,m={},g={featureIndex:u,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:n},y=i.familiesBySource[this.source];for(var _ in y){var v=e.layers[_];if(v){1===v.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+_+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var b=c.encode(_),x=[],w=0;w<v.length;w++){var C=v.feature(w),S=u.getId(C,_);x.push({feature:C,id:S,index:w,sourceLayerIndex:b})}for(var T=0,k=y[_];T<k.length;T+=1){var E=k[T],P=E[0];P.minzoom&&this.zoom<Math.floor(P.minzoom)||P.maxzoom&&this.zoom>=P.maxzoom||"none"!==P.visibility&&(a(E,this.zoom,n),(m[P.id]=P.createBucket({index:u.bucketLayerIDs.length,layers:E,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source})).populate(x,g,this.tileID.canonical),u.bucketLayerIDs.push(E.map((function(t){return t.id}))))}}}var I=t.mapObject(g.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(I).length?o.send("getGlyphs",{uid:this.uid,stacks:I},(function(t,e){h||(h=t,p=e,z.call(l))})):p={};var M=Object.keys(g.iconDependencies);M.length?o.send("getImages",{icons:M,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){h||(h=t,d=e,z.call(l))})):d={};var A=Object.keys(g.patternDependencies);function z(){if(h)return s(h);if(p&&d&&f){var e=new r(p),i=new t.ImageAtlas(d,f);for(var o in m){var l=m[o];l instanceof t.SymbolBucket?(a(l.layers,this.zoom,n),t.performSymbolLayout(l,p,e.positions,d,i.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):l.hasPattern&&(l instanceof t.LineBucket||l instanceof t.FillBucket||l instanceof t.FillExtrusionBucket)&&(a(l.layers,this.zoom,n),l.addFeatures(g,this.tileID.canonical,i.patternPositions))}this.status="done",s(null,{buckets:t.values(m).filter((function(t){return!t.isEmpty()})),featureIndex:u,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:i,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?e.positions:null})}}A.length?o.send("getImages",{icons:A,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){h||(h=t,f=e,z.call(l))})):f={},z.call(this)};var l=function(t,e,i,n){this.actor=t,this.layerIndex=e,this.availableImages=i,this.loadVectorData=n||s,this.loading={},this.loaded={}};l.prototype.loadTile=function(e,i){var n=this,r=e.uid;this.loading||(this.loading={});var a=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),s=this.loading[r]=new o(e);s.abort=this.loadVectorData(e,(function(e,o){if(delete n.loading[r],e||!o)return s.status="done",n.loaded[r]=s,i(e);var l=o.rawData,c={};o.expires&&(c.expires=o.expires),o.cacheControl&&(c.cacheControl=o.cacheControl);var u={};if(a){var h=a.finish();h&&(u.resourceTiming=JSON.parse(JSON.stringify(h)))}s.vectorTile=o.vectorTile,s.parse(o.vectorTile,n.layerIndex,n.availableImages,n.actor,(function(e,n){if(e||!n)return i(e);i(null,t.extend({rawTileData:l.slice(0)},n,c,u))})),n.loaded=n.loaded||{},n.loaded[r]=s}))},l.prototype.reloadTile=function(t,e){var i=this,n=this.loaded,r=t.uid,o=this;if(n&&n[r]){var a=n[r];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,n){var r=a.reloadCallback;r&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,i.availableImages,o.actor,r)),e(t,n)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},l.prototype.abortTile=function(t,e){var i=this.loading,n=t.uid;i&&i[n]&&i[n].abort&&(i[n].abort(),delete i[n]),e()},l.prototype.removeTile=function(t,e){var i=this.loaded,n=t.uid;i&&i[n]&&delete i[n],e()};var c=t.window.ImageBitmap,u=function(){this.loaded={}};function h(t,e){if(0!==t.length){p(t[0],e);for(var i=1;i<t.length;i++)p(t[i],!e)}}function p(t,e){for(var i=0,n=0,r=t.length,o=r-1;n<r;o=n++)i+=(t[n][0]-t[o][0])*(t[o][1]+t[n][1]);i>=0!=!!e&&t.reverse()}u.prototype.loadTile=function(e,i){var n=e.uid,r=e.encoding,o=e.rawImageData,a=c&&o instanceof c?this.getImageData(o):o,s=new t.DEMData(n,a,r);this.loaded=this.loaded||{},this.loaded[n]=s,i(null,s)},u.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var i=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:i.width,height:i.height},i.data)},u.prototype.removeTile=function(t){var e=this.loaded,i=t.uid;e&&e[i]&&delete e[i]};var d=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,f=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};f.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],i=0,n=this._feature.geometry;i<n.length;i+=1){var r=n[i];e.push([new t.Point$1(r[0],r[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var l=[],c=0,u=s[a];c<u.length;c+=1){var h=u[c];l.push(new t.Point$1(h[0],h[1]))}o.push(l)}return o},f.prototype.toGeoJSON=function(t,e,i){return d.call(this,t,e,i)};var m=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};m.prototype.feature=function(t){return new f(this._features[t])};var g=t.vectorTile.VectorTileFeature,y=_;function _(t,e){this.options=e||{},this.features=t,this.length=t.length}function v(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}_.prototype.feature=function(t){return new v(this.features[t],this.options.extent)},v.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var i=0;i<e.length;i++){for(var n=e[i],r=[],o=0;o<n.length;o++)r.push(new t.Point$1(n[o][0],n[o][1]));this.geometry.push(r)}return this.geometry},v.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,n=1/0,r=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),i=Math.max(i,l.x),n=Math.min(n,l.y),r=Math.max(r,l.y)}return[e,n,i,r]},v.prototype.toGeoJSON=g.prototype.toGeoJSON;var b=w,x=y;function w(e){var i=new t.pbf;return function(t,e){for(var i in t.layers)e.writeMessage(3,C,t.layers[i])}(e,i),i.finish()}function C(t,e){var i;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)n.feature=t.feature(i),e.writeMessage(2,S,n);var r=n.keys;for(i=0;i<r.length;i++)e.writeStringField(3,r[i]);var o=n.values;for(i=0;i<o.length;i++)e.writeMessage(4,I,o[i])}function S(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,T,t),e.writeVarintField(3,i.type),e.writeMessage(4,P,i)}function T(t,e){var i=t.feature,n=t.keys,r=t.values,o=t.keycache,a=t.valuecache;for(var s in i.properties){var l=o[s];void 0===l&&(n.push(s),o[s]=l=n.length-1),e.writeVarint(l);var c=i.properties[s],u=typeof c;"string"!==u&&"boolean"!==u&&"number"!==u&&(c=JSON.stringify(c));var h=u+":"+c,p=a[h];void 0===p&&(r.push(c),a[h]=p=r.length-1),e.writeVarint(p)}}function k(t,e){return(e<<3)+(7&t)}function E(t){return t<<1^t>>31}function P(t,e){for(var i=t.loadGeometry(),n=t.type,r=0,o=0,a=i.length,s=0;s<a;s++){var l=i[s],c=1;1===n&&(c=l.length),e.writeVarint(k(1,c));for(var u=3===n?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==n&&e.writeVarint(k(2,u-1));var p=l[h].x-r,d=l[h].y-o;e.writeVarint(E(p)),e.writeVarint(E(d)),r+=p,o+=d}3===n&&e.writeVarint(k(7,1))}}function I(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function M(t,e,i,n){A(t,i,n),A(e,2*i,2*n),A(e,2*i+1,2*n+1)}function A(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function z(t,e,i,n){var r=t-i,o=e-n;return r*r+o*o}b.fromVectorTileJs=w,b.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var n in t)i[n]=new y(t[n].features,e),i[n].name=n,i[n].version=e.version,i[n].extent=e.extent;return w({layers:i})},b.GeoJSONWrapper=x;var O=function(t){return t[0]},L=function(t){return t[1]},D=function(t,e,i,n,r){void 0===e&&(e=O),void 0===i&&(i=L),void 0===n&&(n=64),void 0===r&&(r=Float64Array),this.nodeSize=n,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new r(2*t.length),l=0;l<t.length;l++)a[l]=l,s[2*l]=e(t[l]),s[2*l+1]=i(t[l]);!function t(e,i,n,r,o,a){if(!(o-r<=n)){var s=r+o>>1;!function t(e,i,n,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,l=n-r+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);t(e,i,n,Math.max(r,Math.floor(n-l*u/s+h)),Math.min(o,Math.floor(n+(s-l)*u/s+h)),a)}var p=i[2*n+a],d=r,f=o;for(M(e,i,r,n),i[2*o+a]>p&&M(e,i,r,o);d<f;){for(M(e,i,d,f),d++,f--;i[2*d+a]<p;)d++;for(;i[2*f+a]>p;)f--}i[2*r+a]===p?M(e,i,r,f):M(e,i,++f,o),f<=n&&(r=f+1),n<=f&&(o=f-1)}}(e,i,s,r,o,a%2),t(e,i,n,r,s-1,a+1),t(e,i,n,s+1,o,a+1)}}(a,s,n,0,a.length-1,0)};D.prototype.range=function(t,e,i,n){return function(t,e,i,n,r,o,a){for(var s,l,c=[0,t.length-1,0],u=[];c.length;){var h=c.pop(),p=c.pop(),d=c.pop();if(p-d<=a)for(var f=d;f<=p;f++)l=e[2*f+1],(s=e[2*f])>=i&&s<=r&&l>=n&&l<=o&&u.push(t[f]);else{var m=Math.floor((d+p)/2);l=e[2*m+1],(s=e[2*m])>=i&&s<=r&&l>=n&&l<=o&&u.push(t[m]);var g=(h+1)%2;(0===h?i<=s:n<=l)&&(c.push(d),c.push(m-1),c.push(g)),(0===h?r>=s:o>=l)&&(c.push(m+1),c.push(p),c.push(g))}}return u}(this.ids,this.coords,t,e,i,n,this.nodeSize)},D.prototype.within=function(t,e,i){return function(t,e,i,n,r,o){for(var a=[0,t.length-1,0],s=[],l=r*r;a.length;){var c=a.pop(),u=a.pop(),h=a.pop();if(u-h<=o)for(var p=h;p<=u;p++)z(e[2*p],e[2*p+1],i,n)<=l&&s.push(t[p]);else{var d=Math.floor((h+u)/2),f=e[2*d],m=e[2*d+1];z(f,m,i,n)<=l&&s.push(t[d]);var g=(c+1)%2;(0===c?i-r<=f:n-r<=m)&&(a.push(h),a.push(d-1),a.push(g)),(0===c?i+r>=f:n+r>=m)&&(a.push(d+1),a.push(u),a.push(g))}}return s}(this.ids,this.coords,t,e,i,this.nodeSize)};var R={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},B=function(t){this.options=Z(Object.create(R),t),this.trees=new Array(this.options.maxZoom+1)};function F(t,e,i,n,r){return{x:t,y:e,zoom:1/0,id:i,parentId:-1,numPoints:n,properties:r}}function N(t,e){var i=t.geometry.coordinates,n=i[1];return{x:U(i[0]),y:q(n),zoom:1/0,index:e,parentId:-1}}function V(t){return{type:"Feature",id:t.id,properties:j(t),geometry:{type:"Point",coordinates:[(n=t.x,360*(n-.5)),(e=t.y,i=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(i))/Math.PI-90)]}};var e,i,n}function j(t){var e=t.numPoints,i=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return Z(Z({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function U(t){return t/360+.5}function q(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function Z(t,e){for(var i in e)t[i]=e[i];return t}function H(t){return t.x}function G(t){return t.y}function W(t,e,i,n,r,o){var a=r-i,s=o-n;if(0!==a||0!==s){var l=((t-i)*a+(e-n)*s)/(a*a+s*s);l>1?(i=r,n=o):l>0&&(i+=a*l,n+=s*l)}return(a=t-i)*a+(s=e-n)*s}function $(t,e,i,n){var r={id:void 0===t?null:t,type:e,geometry:i,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)K(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var n=0;n<e.length;n++)K(t,e[n]);else if("MultiPolygon"===i)for(n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)K(t,e[n][r])}(r),r}function K(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function X(t,e,i,n){if(e.geometry){var r=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=e.id;if(i.promoteId?l=e.properties[i.promoteId]:i.generateId&&(l=n||0),"Point"===o)Q(r,s);else if("MultiPoint"===o)for(var c=0;c<r.length;c++)Q(r[c],s);else if("LineString"===o)Y(r,s,a,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(c=0;c<r.length;c++)Y(r[c],s=[],a,!1),t.push($(l,"LineString",s,e.properties));return}J(r,s,a,!1)}else if("Polygon"===o)J(r,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)X(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},i,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<r.length;c++){var u=[];J(r[c],u,a,!0),s.push(u)}}t.push($(l,o,s,e.properties))}}function Q(t,e){e.push(tt(t[0])),e.push(et(t[1])),e.push(0)}function Y(t,e,i,n){for(var r,o,a=0,s=0;s<t.length;s++){var l=tt(t[s][0]),c=et(t[s][1]);e.push(l),e.push(c),e.push(0),s>0&&(a+=n?(r*c-l*o)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(c-o,2))),r=l,o=c}var u=e.length-3;e[2]=1,function t(e,i,n,r){for(var o,a=r,s=n-i>>1,l=n-i,c=e[i],u=e[i+1],h=e[n],p=e[n+1],d=i+3;d<n;d+=3){var f=W(e[d],e[d+1],c,u,h,p);if(f>a)o=d,a=f;else if(f===a){var m=Math.abs(d-s);m<l&&(o=d,l=m)}}a>r&&(o-i>3&&t(e,i,o,r),e[o+2]=a,n-o>3&&t(e,o,n,r))}(e,0,u,i),e[u+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function J(t,e,i,n){for(var r=0;r<t.length;r++){var o=[];Y(t[r],o,i,n),e.push(o)}}function tt(t){return t/360+.5}function et(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function it(t,e,i,n,r,o,a,s){if(n/=e,o>=(i/=e)&&a<n)return t;if(a<i||o>=n)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],h=u.geometry,p=u.type,d=0===r?u.minX:u.minY,f=0===r?u.maxX:u.maxY;if(d>=i&&f<n)l.push(u);else if(!(f<i||d>=n)){var m=[];if("Point"===p||"MultiPoint"===p)nt(h,m,i,n,r);else if("LineString"===p)rt(h,m,i,n,r,!1,s.lineMetrics);else if("MultiLineString"===p)at(h,m,i,n,r,!1);else if("Polygon"===p)at(h,m,i,n,r,!0);else if("MultiPolygon"===p)for(var g=0;g<h.length;g++){var y=[];at(h[g],y,i,n,r,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===p){for(g=0;g<m.length;g++)l.push($(u.id,p,m[g],u.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===m.length?(p="LineString",m=m[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===m.length?"Point":"MultiPoint"),l.push($(u.id,p,m,u.tags))}}}return l.length?l:null}function nt(t,e,i,n,r){for(var o=0;o<t.length;o+=3){var a=t[o+r];a>=i&&a<=n&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function rt(t,e,i,n,r,o,a){for(var s,l,c=ot(t),u=0===r?lt:ct,h=t.start,p=0;p<t.length-3;p+=3){var d=t[p],f=t[p+1],m=t[p+2],g=t[p+3],y=t[p+4],_=0===r?d:f,v=0===r?g:y,b=!1;a&&(s=Math.sqrt(Math.pow(d-g,2)+Math.pow(f-y,2))),_<i?v>i&&(l=u(c,d,f,g,y,i),a&&(c.start=h+s*l)):_>n?v<n&&(l=u(c,d,f,g,y,n),a&&(c.start=h+s*l)):st(c,d,f,m),v<i&&_>=i&&(l=u(c,d,f,g,y,i),b=!0),v>n&&_<=n&&(l=u(c,d,f,g,y,n),b=!0),!o&&b&&(a&&(c.end=h+s*l),e.push(c),c=ot(t)),a&&(h+=s)}var x=t.length-3;d=t[x],f=t[x+1],m=t[x+2],(_=0===r?d:f)>=i&&_<=n&&st(c,d,f,m),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&st(c,c[0],c[1],c[2]),c.length&&e.push(c)}function ot(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function at(t,e,i,n,r,o){for(var a=0;a<t.length;a++)rt(t[a],e,i,n,r,o,!1)}function st(t,e,i,n){t.push(e),t.push(i),t.push(n)}function lt(t,e,i,n,r,o){var a=(o-e)/(n-e);return t.push(o),t.push(i+(r-i)*a),t.push(1),a}function ct(t,e,i,n,r,o){var a=(o-i)/(r-i);return t.push(e+(n-e)*a),t.push(o),t.push(1),a}function ut(t,e){for(var i=[],n=0;n<t.length;n++){var r,o=t[n],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)r=ht(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){r=[];for(var s=0;s<o.geometry.length;s++)r.push(ht(o.geometry[s],e))}else if("MultiPolygon"===a)for(r=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(ht(o.geometry[s][c],e));r.push(l)}i.push($(o.id,a,r,o.tags))}return i}function ht(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var n=0;n<t.length;n+=3)i.push(t[n]+e,t[n+1],t[n+2]);return i}function pt(t,e){if(t.transformed)return t;var i,n,r,o=1<<t.z,a=t.x,s=t.y;for(i=0;i<t.features.length;i++){var l=t.features[i],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(n=0;n<c.length;n+=2)l.geometry.push(dt(c[n],c[n+1],e,o,a,s));else for(n=0;n<c.length;n++){var h=[];for(r=0;r<c[n].length;r+=2)h.push(dt(c[n][r],c[n][r+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function dt(t,e,i,n,r,o){return[Math.round(i*(t*n-r)),Math.round(i*(e*n-o))]}function ft(t,e,i,n,r){for(var o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,mt(a,t[s],o,r);var l=t[s].minX,c=t[s].minY,u=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function mt(t,e,i,n){var r=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<r.length;s+=3)a.push(r[s]),a.push(r[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)gt(a,r,t,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<r.length;s++)gt(a,r[s],t,i,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<r.length;l++){var c=r[l];for(s=0;s<c.length;s++)gt(a,c[s],t,i,!0,0===s)}if(a.length){var u=e.tags||null;if("LineString"===o&&n.lineMetrics){for(var h in u={},e.tags)u[h]=e.tags[h];u.mapbox_clip_start=r.start/r.size,u.mapbox_clip_end=r.end/r.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==e.id&&(p.id=e.id),t.features.push(p)}}function gt(t,e,i,n,r,o){var a=n*n;if(n>0&&e.size<(r?a:n))i.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===n||e[l+2]>a)&&(i.numSimplified++,s.push(e[l]),s.push(e[l+1])),i.numPoints++;r&&function(t,e){for(var i=0,n=0,r=t.length,o=r-2;n<r;o=n,n+=2)i+=(t[n]-t[o])*(t[n+1]+t[o+1]);if(i>0===e)for(n=0,r=t.length;n<r/2;n+=2){var a=t[n],s=t[n+1];t[n]=t[r-2-n],t[n+1]=t[r-1-n],t[r-2-n]=a,t[r-1-n]=s}}(s,o),t.push(s)}}function yt(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)X(i,t.features[n],e,n);else X(i,"Feature"===t.type?t:{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=function(t,e){var i=e.buffer/e.extent,n=t,r=it(t,1,-1-i,i,0,-1,2,e),o=it(t,1,1-i,2+i,0,-1,2,e);return(r||o)&&(n=it(t,1,-i,1+i,0,-1,2,e)||[],r&&(n=ut(r,1).concat(n)),o&&(n=n.concat(ut(o,-1)))),n}(n,e)).length&&this.splitTile(n,0,0,0),i&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function _t(t,e,i){return 32*((1<<t)*i+e)+t}function vt(t,e){var i=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var n=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!n)return e(null,null);var r=new m(n.features),o=b(r);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:r,rawData:o.buffer})}B.prototype.load=function(t){var e=this.options,i=e.log,n=e.minZoom,r=e.maxZoom,o=e.nodeSize;i&&console.time("total time");var a="prepare "+t.length+" points";i&&console.time(a),this.points=t;for(var s=[],l=0;l<t.length;l++)t[l].geometry&&s.push(N(t[l],l));this.trees[r+1]=new D(s,H,G,o,Float32Array),i&&console.timeEnd(a);for(var c=r;c>=n;c--){var u=+Date.now();s=this._cluster(s,c),this.trees[c]=new D(s,H,G,o,Float32Array),i&&console.log("z%d: %d clusters in %dms",c,s.length,+Date.now()-u)}return i&&console.timeEnd("total time"),this},B.prototype.getClusters=function(t,e){var i=((t[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,t[1])),r=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)i=-180,r=180;else if(i>r){var a=this.getClusters([i,n,180,o],e),s=this.getClusters([-180,n,r,o],e);return a.concat(s)}for(var l=this.trees[this._limitZoom(e)],c=[],u=0,h=l.range(U(i),q(o),U(r),q(n));u<h.length;u+=1){var p=l.points[h[u]];c.push(p.numPoints?V(p):this.points[p.index])}return c},B.prototype.getChildren=function(t){var e=this._getOriginId(t),i=this._getOriginZoom(t),n="No cluster with the specified id.",r=this.trees[i];if(!r)throw new Error(n);var o=r.points[e];if(!o)throw new Error(n);for(var a=this.options.radius/(this.options.extent*Math.pow(2,i-1)),s=[],l=0,c=r.within(o.x,o.y,a);l<c.length;l+=1){var u=r.points[c[l]];u.parentId===t&&s.push(u.numPoints?V(u):this.points[u.index])}if(0===s.length)throw new Error(n);return s},B.prototype.getLeaves=function(t,e,i){var n=[];return this._appendLeaves(n,t,e=e||10,i=i||0,0),n},B.prototype.getTile=function(t,e,i){var n=this.trees[this._limitZoom(t)],r=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(i-a)/r,l=(i+1+a)/r,c={features:[]};return this._addTileFeatures(n.range((e-a)/r,s,(e+1+a)/r,l),n.points,e,i,r,c),0===e&&this._addTileFeatures(n.range(1-a/r,s,1,l),n.points,r,i,r,c),e===r-1&&this._addTileFeatures(n.range(0,s,a/r,l),n.points,-1,i,r,c),c.features.length?c:null},B.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e},B.prototype._appendLeaves=function(t,e,i,n,r){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],l=s.properties;if(l&&l.cluster?r+l.point_count<=n?r+=l.point_count:r=this._appendLeaves(t,l.cluster_id,i,n,r):r<n?r++:t.push(s),t.length===i)break}return r},B.prototype._addTileFeatures=function(t,e,i,n,r,o){for(var a=0,s=t;a<s.length;a+=1){var l=e[s[a]],c=l.numPoints,u={type:1,geometry:[[Math.round(this.options.extent*(l.x*r-i)),Math.round(this.options.extent*(l.y*r-n))]],tags:c?j(l):this.points[l.index].properties},h=void 0;c?h=l.id:this.options.generateId?h=l.index:this.points[l.index].id&&(h=this.points[l.index].id),void 0!==h&&(u.id=h),o.features.push(u)}},B.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},B.prototype._cluster=function(t,e){for(var i=[],n=this.options,r=n.reduce,o=n.minPoints,a=n.radius/(n.extent*Math.pow(2,e)),s=0;s<t.length;s++){var l=t[s];if(!(l.zoom<=e)){l.zoom=e;for(var c=this.trees[e+1],u=c.within(l.x,l.y,a),h=l.numPoints||1,p=h,d=0,f=u;d<f.length;d+=1){var m=c.points[f[d]];m.zoom>e&&(p+=m.numPoints||1)}if(p>=o){for(var g=l.x*h,y=l.y*h,_=r&&h>1?this._map(l,!0):null,v=(s<<5)+(e+1)+this.points.length,b=0,x=u;b<x.length;b+=1){var w=c.points[x[b]];if(!(w.zoom<=e)){w.zoom=e;var C=w.numPoints||1;g+=w.x*C,y+=w.y*C,w.parentId=v,r&&(_||(_=this._map(l,!0)),r(_,this._map(w)))}}l.parentId=v,i.push(F(g/p,y/p,v,p,_))}else if(i.push(l),p>1)for(var S=0,T=u;S<T.length;S+=1){var k=c.points[T[S]];k.zoom<=e||(k.zoom=e,i.push(k))}}}return i},B.prototype._getOriginId=function(t){return t-this.points.length>>5},B.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},B.prototype._map=function(t,e){if(t.numPoints)return e?Z({},t.properties):t.properties;var i=this.points[t.index].properties,n=this.options.map(i);return e&&n===i?Z({},n):n},yt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},yt.prototype.splitTile=function(t,e,i,n,r,o,a){for(var s=[t,e,i,n],l=this.options,c=l.debug;s.length;){n=s.pop(),i=s.pop(),e=s.pop(),t=s.pop();var u=1<<e,h=_t(e,i,n),p=this.tiles[h];if(!p&&(c>1&&console.time("creation"),p=this.tiles[h]=ft(t,e,i,n,l),this.tileCoords.push({z:e,x:i,y:n}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,n,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(p.source=t,r){if(e===l.maxZoom||e===r)continue;var f=1<<r-e;if(i!==Math.floor(o/f)||n!==Math.floor(a/f))continue}else if(e===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==t.length){c>1&&console.time("clipping");var m,g,y,_,v,b,x=.5*l.buffer/l.extent,w=.5-x,C=.5+x,S=1+x;m=g=y=_=null,v=it(t,u,i-x,i+C,0,p.minX,p.maxX,l),b=it(t,u,i+w,i+S,0,p.minX,p.maxX,l),t=null,v&&(m=it(v,u,n-x,n+C,1,p.minY,p.maxY,l),g=it(v,u,n+w,n+S,1,p.minY,p.maxY,l),v=null),b&&(y=it(b,u,n-x,n+C,1,p.minY,p.maxY,l),_=it(b,u,n+w,n+S,1,p.minY,p.maxY,l),b=null),c>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*i,2*n),s.push(g||[],e+1,2*i,2*n+1),s.push(y||[],e+1,2*i+1,2*n),s.push(_||[],e+1,2*i+1,2*n+1)}}},yt.prototype.getTile=function(t,e,i){var n=this.options,r=n.extent,o=n.debug;if(t<0||t>24)return null;var a=1<<t,s=_t(t,e=(e%a+a)%a,i);if(this.tiles[s])return pt(this.tiles[s],r);o>1&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var l,c=t,u=e,h=i;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[_t(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,t,e,i),o>1&&console.timeEnd("drilling down"),this.tiles[s]?pt(this.tiles[s],r):null):null};var bt=function(e){function i(t,i,n,r){e.call(this,t,i,n,vt),r&&(this.loadGeoJSON=r)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},i.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var i=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var r=!!(n&&n.request&&n.request.collectResourceTiming)&&new t.RequestPerformance(n.request);this.loadGeoJSON(n,(function(o,a){if(o||!a)return i(o);if("object"!=typeof a)return i(new Error("Input data given to '"+n.source+"' is not a valid GeoJSON object."));!function t(e,i){var n,r=e&&e.type;if("FeatureCollection"===r)for(n=0;n<e.features.length;n++)t(e.features[n],i);else if("GeometryCollection"===r)for(n=0;n<e.geometries.length;n++)t(e.geometries[n],i);else if("Feature"===r)t(e.geometry,i);else if("Polygon"===r)h(e.coordinates,i);else if("MultiPolygon"===r)for(n=0;n<e.coordinates.length;n++)h(e.coordinates[n],i);return e}(a,!0);try{if(n.filter){var s=t.createExpression(n.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(t){return t.key+": "+t.message})).join(", "));var l=a.features.filter((function(t){return s.value.evaluate({zoom:0},t)}));a={type:"FeatureCollection",features:l}}e._geoJSONIndex=n.cluster?new B(function(e){var i=e.superclusterOptions,n=e.clusterProperties;if(!n||!i)return i;for(var r={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(n),c=0,u=l;c<u.length;c+=1){var h=u[c],p=n[h],d=p[0],f=t.createExpression(p[1]),m=t.createExpression("string"==typeof d?[d,["accumulated"],["get",h]]:d);r[h]=f.value,o[h]=m.value}return i.map=function(t){s.properties=t;for(var e={},i=0,n=l;i<n.length;i+=1){var o=n[i];e[o]=r[o].evaluate(a,s)}return e},i.reduce=function(t,e){s.properties=e;for(var i=0,n=l;i<n.length;i+=1){var r=n[i];a.accumulated=t[r],t[r]=o[r].evaluate(a,s)}},i}(n)).load(a.features):function(t,e){return new yt(t,e)}(a,n.geojsonVtOptions)}catch(o){return i(o)}e.loaded={};var c={};if(r){var u=r.finish();u&&(c.resourceTiming={},c.resourceTiming[n.source]=JSON.parse(JSON.stringify(u)))}i(null,c)}))}},i.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},i.prototype.reloadTile=function(t,i){var n=this.loaded;return n&&n[t.uid]?e.prototype.reloadTile.call(this,t,i):this.loadTile(t,i)},i.prototype.loadGeoJSON=function(e,i){if(e.request)t.getJSON(e.request,i);else{if("string"!=typeof e.data)return i(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return i(null,JSON.parse(e.data))}catch(t){return i(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},i.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},i.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},i.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},i.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},i}(l),xt=function(e){var i=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:bt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(i.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');i.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return xt.prototype.setReferrer=function(t,e){this.referrer=e},xt.prototype.setImages=function(t,e,i){for(var n in this.availableImages[t]=e,this.workerSources[t]){var r=this.workerSources[t][n];for(var o in r)r[o].availableImages=e}i()},xt.prototype.setLayers=function(t,e,i){this.getLayerIndex(t).replace(e),i()},xt.prototype.updateLayers=function(t,e,i){this.getLayerIndex(t).update(e.layers,e.removedIds),i()},xt.prototype.loadTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).loadTile(e,i)},xt.prototype.loadDEMTile=function(t,e,i){this.getDEMWorkerSource(t,e.source).loadTile(e,i)},xt.prototype.reloadTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).reloadTile(e,i)},xt.prototype.abortTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).abortTile(e,i)},xt.prototype.removeTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).removeTile(e,i)},xt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},xt.prototype.removeSource=function(t,e,i){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var n=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==n.removeSource?n.removeSource(e,i):i()}},xt.prototype.loadWorkerSource=function(t,e,i){try{this.self.importScripts(e.url),i()}catch(t){i(t.toString())}},xt.prototype.syncRTLPluginState=function(e,i,n){try{t.plugin.setState(i);var r=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=r){this.self.importScripts(r);var o=t.plugin.isParsed();n(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+r),o)}}catch(t){n(t.toString())}},xt.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},xt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new n),e},xt.prototype.getWorkerSource=function(t,e,i){var n=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][i]||(this.workerSources[t][e][i]=new this.workerSourceTypes[e]({send:function(e,i,r){n.actor.send(e,i,r,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][i]},xt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new u),this.demWorkerSources[t][e]},xt.prototype.enforceCacheSizeLimit=function(e,i){t.enforceCacheSizeLimit(i)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new xt(self)),xt})),n(0,(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!i(t)}function i(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(i);try{e=new Worker(n),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(n),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var i=e.getImageData(0,0,1,1);return i&&i.width===t.width}()?(void 0===n[i=t&&t.failIfMajorPerformanceCaveat]&&(n[i]=function(t){var i=function(t){var i=document.createElement("canvas"),n=Object.create(e.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,i.probablySupportsContext?i.probablySupportsContext("webgl",n)||i.probablySupportsContext("experimental-webgl",n):i.supportsContext?i.supportsContext("webgl",n)||i.supportsContext("experimental-webgl",n):i.getContext("webgl",n)||i.getContext("experimental-webgl",n)}(t);if(!i)return!1;var n=i.createShader(i.VERTEX_SHADER);return!(!n||i.isContextLost())&&(i.shaderSource(n,"void main() {}"),i.compileShader(n),!0===i.getShaderParameter(n,i.COMPILE_STATUS))}(i)),n[i]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=i);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),i={create:function(e,i,n){var r=t.window.document.createElement(e);return void 0!==i&&(r.className=i),n&&n.appendChild(r),r},createNS:function(e,i){return t.window.document.createElementNS(e,i)}},n=t.window.document&&t.window.document.documentElement.style;function r(t){if(!n)return t[0];for(var e=0;e<t.length;e++)if(t[e]in n)return t[e];return t[0]}var o,a=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){n&&a&&(o=n[a],n[a]="none")},i.enableDrag=function(){n&&a&&(n[a]=o)};var s=r(["transform","WebkitTransform"]);i.setTransform=function(t,e){t.style[s]=e};var l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0}});t.window.addEventListener("test",c,c),t.window.removeEventListener("test",c,c)}catch(t){l=!1}i.addEventListener=function(t,e,i,n){void 0===n&&(n={}),t.addEventListener(e,i,"passive"in n&&l?n:n.capture)},i.removeEventListener=function(t,e,i,n){void 0===n&&(n={}),t.removeEventListener(e,i,"passive"in n&&l?n:n.capture)};var u=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",u,!0)};function h(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}i.suppressClick=function(){t.window.addEventListener("click",u,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",u,!0)}),0)},i.mousePos=function(e,i){var n=e.getBoundingClientRect();return new t.Point(i.clientX-n.left-e.clientLeft,i.clientY-n.top-e.clientTop)},i.touchPos=function(e,i){for(var n=e.getBoundingClientRect(),r=[],o=0;o<i.length;o++)r.push(new t.Point(i[o].clientX-n.left-e.clientLeft,i[o].clientY-n.top-e.clientTop));return r},i.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},i.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var p=function(e){function i(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.isLoaded=function(){return this.loaded},i.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,i=this.requestors;e<i.length;e+=1){var n=i[e];this._notify(n.ids,n.callback)}this.requestors=[]}},i.prototype.getImage=function(t){return this.images[t]},i.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},i.prototype._validate=function(e,i){var n=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),n=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),n=!1),this._validateContent(i.content,i)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),n=!1),n},i.prototype._validateStretch=function(t,e){if(!t)return!0;for(var i=0,n=0,r=t;n<r.length;n+=1){var o=r[n];if(o[0]<i||o[1]<o[0]||e<o[1])return!1;i=o[1]}return!0},i.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},i.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},i.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},i.prototype.listImages=function(){return Object.keys(this.images)},i.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var n=0,r=t;n<r.length;n+=1)this.images[r[n]]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})},i.prototype._notify=function(e,i){for(var n={},r=0,o=e;r<o.length;r+=1){var a=o[r];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?n[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}i(null,n)},i.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},i.prototype.getPattern=function(e){var i=this.patterns[e],n=this.getImage(e);if(!n)return null;if(i&&i.position.version===n.version)return i.position;if(i)i.position.version=n.version;else{var r={w:n.data.width+2,h:n.data.height+2,x:0,y:0},o=new t.ImagePosition(r,n);this.patterns[e]={bin:r,position:o}}return this._updatePatternAtlas(),this.patterns[e].position},i.prototype.bind=function(e){var i=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)},i.prototype._updatePatternAtlas=function(){var e=[];for(var i in this.patterns)e.push(this.patterns[i].bin);var n=t.potpack(e),r=n.w,o=n.h,a=this.atlasImage;for(var s in a.resize({width:r||1,height:o||1}),this.patterns){var l=this.patterns[s].bin,c=l.x+1,u=l.y+1,h=this.images[s].data,p=h.width,d=h.height;t.RGBAImage.copy(h,a,{x:0,y:0},{x:c,y:u},{width:p,height:d}),t.RGBAImage.copy(h,a,{x:0,y:d-1},{x:c,y:u-1},{width:p,height:1}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:c,y:u+d},{width:p,height:1}),t.RGBAImage.copy(h,a,{x:p-1,y:0},{x:c-1,y:u},{width:1,height:d}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:c+p,y:u},{width:1,height:d})}this.dirty=!0},i.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},i.prototype.dispatchRenderCallbacks=function(t){for(var e=0,i=t;e<i.length;e+=1){var n=i[e];if(!this.callbackDispatchedThisFrame[n]){this.callbackDispatchedThisFrame[n]=!0;var r=this.images[n];h(r)&&this.updateImage(n,r)}}},i}(t.Evented),d=g,f=g,m=1e20;function g(t,e,i,n,r,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=n||.25,this.fontFamily=r||"sans-serif",this.fontWeight=o||"normal",this.radius=i||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(t,e,i,n,r,o,a){for(var s=0;s<e;s++){for(var l=0;l<i;l++)n[l]=t[l*e+s];for(_(n,r,o,a,i),l=0;l<i;l++)t[l*e+s]=r[l]}for(l=0;l<i;l++){for(s=0;s<e;s++)n[s]=t[l*e+s];for(_(n,r,o,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(r[s])}}function _(t,e,i,n,r){i[0]=0,n[0]=-m,n[1]=+m;for(var o=1,a=0;o<r;o++){for(var s=(t[o]+o*o-(t[i[a]]+i[a]*i[a]))/(2*o-2*i[a]);s<=n[a];)a--,s=(t[o]+o*o-(t[i[a]]+i[a]*i[a]))/(2*o-2*i[a]);i[++a]=o,n[a]=s,n[a+1]=+m}for(o=0,a=0;o<r;o++){for(;n[a+1]<o;)a++;e[o]=(o-i[a])*(o-i[a])+t[i[a]]}}g.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),n=0;n<this.size*this.size;n++){var r=e.data[4*n+3]/255;this.gridOuter[n]=1===r?0:0===r?m:Math.pow(Math.max(0,.5-r),2),this.gridInner[n]=1===r?m:0===r?0:Math.pow(Math.max(0,r-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),n=0;n<this.size*this.size;n++)i[n]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[n]-this.gridInner[n])/this.radius+this.cutoff))));return i},d.default=f;var v=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};v.prototype.setURL=function(t){this.url=t},v.prototype.getGlyphs=function(e,i){var n=this,r=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1)r.push({stack:o,id:s[a]});t.asyncAll(r,(function(t,e){var i=t.stack,r=t.id,o=n.entries[i];o||(o=n.entries[i]={glyphs:{},requests:{},ranges:{}});var a=o.glyphs[r];if(void 0===a){if(a=n._tinySDF(o,i,r))return o.glyphs[r]=a,void e(null,{stack:i,id:r,glyph:a});var s=Math.floor(r/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(o.ranges[s])e(null,{stack:i,id:r,glyph:a});else{var l=o.requests[s];l||(l=o.requests[s]=[],v.loadGlyphRange(i,s,n.url,n.requestManager,(function(t,e){if(e){for(var i in e)n._doesCharSupportLocalGlyph(+i)||(o.glyphs[+i]=e[+i]);o.ranges[s]=!0}for(var r=0,a=l;r<a.length;r+=1)(0,a[r])(t,e);delete o.requests[s]}))),l.push((function(t,n){t?e(t):n&&e(null,{stack:i,id:r,glyph:n[r]||null})}))}}else e(null,{stack:i,id:r,glyph:a})}),(function(t,e){if(t)i(t);else if(e){for(var n={},r=0,o=e;r<o.length;r+=1){var a=o[r],s=a.stack,l=a.id,c=a.glyph;(n[s]||(n[s]={}))[l]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics}}i(null,n)}}))},v.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},v.prototype._tinySDF=function(e,i,n){var r=this.localIdeographFontFamily;if(r&&this._doesCharSupportLocalGlyph(n)){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(i)?a="900":/medium/i.test(i)?a="500":/light/i.test(i)&&(a="200"),o=e.tinySDF=new v.TinySDF(24,3,8,.25,r,a)}return{id:n,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},v.loadGlyphRange=function(e,i,n,r,o){var a=256*i,s=a+255,l=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,(function(e,i){if(e)o(e);else if(i){for(var n={},r=0,a=t.parseGlyphPBF(i);r<a.length;r+=1){var s=a[r];n[s.id]=s}o(null,n)}}))},v.TinySDF=d;var b=function(){this.specification=t.styleSpec.light.position};b.prototype.possiblyEvaluate=function(e,i){return t.sphericalToCartesian(e.expression.evaluate(i))},b.prototype.interpolate=function(e,i,n){return{x:t.number(e.x,i.x,n),y:t.number(e.y,i.y,n),z:t.number(e.z,i.z,n)}};var x=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new b,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),w=function(e){function i(i){e.call(this),this._transitionable=new t.Transitionable(x),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(e,i){if(void 0===i&&(i={}),!this._validate(t.validateLight,e,i))for(var n in e){var r=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),r):this._transitionable.setValue(n,r)}},i.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},i.prototype._validate=function(e,i,n){return(!n||!1!==n.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},i}(t.Evented),C=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};C.prototype.getDash=function(t,e){var i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]},C.prototype.getDashRanges=function(t,e,i){var n=[],r=t.length%2==1?-t[t.length-1]*i:0,o=t[0]*i,a=!0;n.push({left:r,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],l=1;l<t.length;l++){var c=t[l];n.push({left:r=s*i,right:o=(s+=c)*i,isDash:a=!a,zeroLength:0===c})}return n},C.prototype.addRoundDash=function(t,e,i){for(var n=e/2,r=-i;r<=i;r++)for(var o=this.width*(this.nextRow+i+r),a=0,s=t[a],l=0;l<this.width;l++){l/s.right>1&&(s=t[++a]);var c=Math.abs(l-s.left),u=Math.abs(l-s.right),h=Math.min(c,u),p=void 0,d=r/i*(n+1);if(s.isDash){var f=n-Math.abs(d);p=Math.sqrt(h*h+f*f)}else p=n-Math.sqrt(h*h+d*d);this.data[o+l]=Math.max(0,Math.min(255,p+128))}},C.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var i=t[e],n=t[e+1];i.zeroLength?t.splice(e,1):n&&n.isDash===i.isDash&&(n.left=i.left,t.splice(e,1))}var r=t[0],o=t[t.length-1];r.isDash===o.isDash&&(r.left=o.left-this.width,o.right=r.right+this.width);for(var a=this.width*this.nextRow,s=0,l=t[s],c=0;c<this.width;c++){c/l.right>1&&(l=t[++s]);var u=Math.abs(c-l.left),h=Math.abs(c-l.right),p=Math.min(u,h);this.data[a+c]=Math.max(0,Math.min(255,(l.isDash?p:-p)+128))}},C.prototype.addDash=function(e,i){var n=i?7:0,r=2*n+1;if(this.nextRow+r>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];if(0!==o){var s=this.width/o,l=this.getDashRanges(e,this.width,s);i?this.addRoundDash(l,s,n):this.addRegularDash(l)}var c={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:o};return this.nextRow+=r,this.dirty=!0,c},C.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var S=function e(i,n){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var r=this.workerPool.acquire(this.id),o=0;o<r.length;o++){var a=new e.Actor(r[o],n,this.id);a.name="Worker "+o,this.actors.push(a)}};function T(e,i,n){var r=function(r,o){if(r)return n(r);if(o){var a=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(t){return t.id}))),a.tiles=i.canonicalizeTileset(a,e.url),n(null,a)}};return e.url?t.getJSON(i.transformRequest(i.normalizeSourceURL(e.url),t.ResourceType.Source),r):t.browser.frame((function(){return r(null,e)}))}S.prototype.broadcast=function(e,i,n){t.asyncAll(this.actors,(function(t,n){t.send(e,i,n)}),n=n||function(){})},S.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},S.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},S.Actor=t.Actor;var k=function(e,i,n){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=n||24};k.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},k.prototype.contains=function(e){var i=Math.pow(2,e.z),n=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*i),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*i),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*i),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*i);return e.x>=n&&e.x<o&&e.y>=r&&e.y<a};var E=function(e){function i(i,n,r,o){if(e.call(this),this.id=i,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=T(this._options,this.map._requestManager,(function(i,n){e._tileJSONRequest=null,e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):n&&(t.extend(e,n),n.bounds&&(e.tileBounds=new k(n.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(n.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(n.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setSourceProperty=function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},i.prototype.setTiles=function(t){var e=this;return this.setSourceProperty((function(){e._options.tiles=t})),this},i.prototype.setUrl=function(t){var e=this;return this.setSourceProperty((function(){e.url=t,e._options.url=t})),this},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.loadTile=function(e,i){var n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(n,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(n,r){return delete e.request,e.aborted?i(null):n&&404!==n.status?i(n):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=i:e.request=e.actor.send("reloadTile",r,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",r,o.bind(this)))},i.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},i.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},i.prototype.hasTransition=function(){return!1},i}(t.Evented),P=function(e){function i(i,n,r,o){e.call(this),this.id=i,this.dispatcher=r,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=T(this._options,this.map._requestManager,(function(i,n){e._tileJSONRequest=null,e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):n&&(t.extend(e,n),n.bounds&&(e.tileBounds=new k(n.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(n.tiles),t.postMapLoadEvent(n.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.loadTile=function(e,i){var n=this,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),(function(r,o){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(r)e.state="errored",i(r);else if(o){n.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=n.map.painter.context,s=a.gl;e.texture=n.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(n.dispatcher),i(null)}}))},i.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},i.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},i.prototype.hasTransition=function(){return!1},i}(t.Evented),I=function(e){function i(i,n,r,o){e.call(this,i,n,r,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(e,i){var n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function r(t,n){t&&(e.state="errored",i(t)),n&&(e.dem=n,e.needsHillshadePrepare=!0,e.state="loaded",i(null))}e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),(function(n,o){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(n)e.state="errored",i(n);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?o:t.browser.getImageData(o,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,r.bind(this)))}}).bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},i.prototype._getNeighboringTiles=function(e){var i=e.canonical,n=Math.pow(2,i.z),r=(i.x-1+n)%n,o=0===i.x?e.wrap-1:e.wrap,a=(i.x+1+n)%n,s=i.x+1===n?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,i.z,r,i.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y).key]={backfilled:!1},i.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,i.z,r,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y-1).key]={backfilled:!1}),i.y+1<n&&(l[new t.OverscaledTileID(e.overscaledZ,o,i.z,r,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,a,i.y+1).key]={backfilled:!1}),l},i.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},i}(P),M=function(e){function i(i,n,r,o){e.call(this),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(o),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,this._resourceTiming=[],void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(n.clusterRadius||50)*a,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(i){if(i)e.fire(new t.ErrorEvent(i));else{var n={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(n.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",n))}}))},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setData=function(e){var i=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)i.fire(new t.ErrorEvent(e));else{var n={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&i._resourceTiming.length>0&&(n.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new t.Event("data",n))}})),this},i.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},i.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},i.prototype.getClusterLeaves=function(t,e,i,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},n),this},i.prototype._updateWorkerData=function(e){var i=this;this._loaded=!1;var n=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(n.request=this.map._requestManager.transformRequest(t.browser.resolveURL(r),t.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(r),this.actor.send(this.type+".loadData",n,(function(t,r){i._removed||r&&r.abandoned||(i._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[i.id]&&(i._resourceTiming=r.resourceTiming[i.id].slice(0)),i.actor.send(i.type+".coalesce",{source:n.source},null),e(t))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.loadTile=function(e,i){var n=this,r=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(r,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?i(null):t?i(t):(e.loadVectorData(o,n.map.painter,"reloadTile"===r),i(null))}))},i.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},i.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},i.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},i.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(t.Evented),A=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),z=function(e){function i(t,i,n,r){e.call(this),this.id=t,this.dispatcher=n,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=i}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(e,i){var n=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(r,o){n._loaded=!0,r?n.fire(new t.ErrorEvent(r)):o&&(n.image=o,e&&(n.coordinates=e),i&&i(),n._finishLoading())}))},i.prototype.loaded=function(){return this._loaded},i.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setCoordinates=function(e){var i=this;this.coordinates=e;var n=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var i=1/0,n=1/0,r=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var l=s[a];i=Math.min(i,l.x),n=Math.min(n,l.y),r=Math.max(r,l.x),o=Math.max(o,l.y)}var c=Math.max(r-i,o-n),u=Math.max(0,Math.floor(-Math.log(c)/Math.LN2)),h=Math.pow(2,u);return new t.CanonicalTileID(u,Math.floor((i+r)/2*h),Math.floor((n+o)/2*h))}(n),this.minzoom=this.maxzoom=this.tileID.z;var r=n.map((function(t){return i.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,i=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},i.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(t.Evented),O=function(e){function i(t,i,n,r){e.call(this,t,i,n,r),this.roundZoom=!0,this.type="video",this.options=i}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1;var i=this.options;this.urls=[];for(var n=0,r=i.urls;n<r.length;n+=1)this.urls.push(this.map._requestManager.transformRequest(r[n],t.ResourceType.Source).url);t.getVideo(this.urls,(function(i,n){e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):n&&(e.video=n,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},i.prototype.pause=function(){this.video&&this.video.pause()},i.prototype.play=function(){this.video&&this.video.play()},i.prototype.seek=function(e){if(this.video){var i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+i.start(0)+" and "+i.end(0)+"-second mark."))):this.video.currentTime=e}},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,i=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(z),L=function(e){function i(i,n,r,o){e.call(this,i,n,r,o),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,n=i.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(i,this.canvas,n.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[r];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||i<=0)return!0}return!1},i}(z),D={vector:E,raster:P,"raster-dem":I,geojson:M,video:O,image:z,canvas:L};function R(e,i){var n=t.identity([]);return t.translate(n,n,[1,1,0]),t.scale(n,n,[.5*e.width,.5*e.height,1]),t.multiply(n,n,e.calculatePosMatrix(i.toUnwrapped()))}function B(t,e,i,n,r,o){var a=function(t,e,i){if(t)for(var n=0,r=t;n<r.length;n+=1){var o=e[r[n]];if(o&&o.source===i&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(r&&r.layers,e,t.id),s=o.maxPitchScaleFactor(),l=t.tilesIn(n,s,a);l.sort(F);for(var c=[],u=0,h=l;u<h.length;u+=1){var p=h[u];c.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(e,i,t._state,p.queryGeometry,p.cameraQueryGeometry,p.scale,r,o,s,R(t.transform,p.tileID))})}var d=function(t){for(var e={},i={},n=0,r=t;n<r.length;n+=1){var o=r[n],a=o.queryResults,s=o.wrappedTileID,l=i[s]=i[s]||{};for(var c in a)for(var u=a[c],h=l[c]=l[c]||{},p=e[c]=e[c]||[],d=0,f=u;d<f.length;d+=1){var m=f[d];h[m.featureIndex]||(h[m.featureIndex]=!0,p.push(m))}}return e}(c);for(var f in d)d[f].forEach((function(e){var i=e.feature,n=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=n}));return d}function F(t,e){var i=t.tileID,n=e.tileID;return i.overscaledZ-n.overscaledZ||i.canonical.y-n.canonical.y||i.wrap-n.wrap||i.canonical.x-n.canonical.x}var N=function(t,e){this.max=t,this.onRemove=e,this.reset()};N.prototype.reset=function(){for(var t in this.data)for(var e=0,i=this.data[t];e<i.length;e+=1){var n=i[e];n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value)}return this.data={},this.order=[],this},N.prototype.add=function(t,e,i){var n=this,r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var o={value:e,timeout:void 0};if(void 0!==i&&(o.timeout=setTimeout((function(){n.remove(t,o)}),i)),this.data[r].push(o),this.order.push(r),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},N.prototype.has=function(t){return t.wrapped().key in this.data},N.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},N.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},N.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},N.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},N.prototype.remove=function(t,e){if(!this.has(t))return this;var i=t.wrapped().key,n=void 0===e?0:this.data[i].indexOf(e),r=this.data[i][n];return this.data[i].splice(n,1),r.timeout&&clearTimeout(r.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(r.value),this.order.splice(this.order.indexOf(i),1),this},N.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},N.prototype.filter=function(t){var e=[];for(var i in this.data)for(var n=0,r=this.data[i];n<r.length;n+=1){var o=r[n];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var l=s[a];this.remove(l.value.tileID,l)}};var V=function(t,e,i){this.context=t;var n=t.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};V.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},V.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},V.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var j={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},U=function(t,e,i,n){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=n,this.context=t;var r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};U.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},U.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},U.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var n=e.attributes[this.attributes[i].name];void 0!==n&&t.enableVertexAttribArray(n)}},U.prototype.setVertexAttribPointers=function(t,e,i){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],o=e.attributes[r.name];void 0!==o&&t.vertexAttribPointer(o,r.components,t[j[r.type]],!1,this.itemSize,r.offset+this.itemSize*(i||0))}},U.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var q=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};q.prototype.get=function(){return this.current},q.prototype.set=function(t){},q.prototype.getDefault=function(){return this.default},q.prototype.setDefault=function(){this.set(this.default)};var Z=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(q),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(q),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(q),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(q),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(q),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(q),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(q),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(q),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(q),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(q),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(q),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(q),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(q),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(q),rt=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(q),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(q),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(q),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(q),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(q),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(q),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(q),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(q),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(q),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(q),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(q),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(q),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(q),yt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(q),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(q),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(q),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(q),xt=function(t){function e(e,i){t.call(this,e),this.context=e,this.parent=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(q),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(xt),Ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(xt),St=function(t,e,i,n){this.context=t,this.width=e,this.height=i;var r=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new wt(t,r),n&&(this.depthAttachment=new Ct(t,r))};St.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var i=this.depthAttachment.get();i&&t.deleteRenderbuffer(i)}t.deleteFramebuffer(this.framebuffer)};var Tt=function(t,e,i){this.func=t,this.mask=e,this.range=i};Tt.ReadOnly=!1,Tt.ReadWrite=!0,Tt.disabled=new Tt(519,Tt.ReadOnly,[0,1]);var kt=function(t,e,i,n,r,o){this.test=t,this.ref=e,this.mask=i,this.fail=n,this.depthFail=r,this.pass=o};kt.disabled=new kt({func:519,mask:0},0,0,7680,7680,7680);var Et=function(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i};Et.disabled=new Et(Et.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Et.unblended=new Et(Et.Replace,t.Color.transparent,[!0,!0,!0,!0]),Et.alphaBlended=new Et([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Pt=function(t,e,i){this.enable=t,this.mode=e,this.frontFace=i};Pt.disabled=new Pt(!1,1029,2305),Pt.backCCW=new Pt(!0,1029,2305);var It=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Z(this),this.clearDepth=new H(this),this.clearStencil=new G(this),this.colorMask=new W(this),this.depthMask=new $(this),this.stencilMask=new K(this),this.stencilFunc=new X(this),this.stencilOp=new Q(this),this.stencilTest=new Y(this),this.depthRange=new J(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new it(this),this.blendFunc=new nt(this),this.blendColor=new rt(this),this.blendEquation=new ot(this),this.cullFace=new at(this),this.cullFaceSide=new st(this),this.frontFace=new lt(this),this.program=new ct(this),this.activeTexture=new ut(this),this.viewport=new ht(this),this.bindFramebuffer=new pt(this),this.bindRenderbuffer=new dt(this),this.bindTexture=new ft(this),this.bindVertexBuffer=new mt(this),this.bindElementBuffer=new gt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new yt(this),this.pixelStoreUnpack=new _t(this),this.pixelStoreUnpackPremultiplyAlpha=new vt(this),this.pixelStoreUnpackFlipY=new bt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)};It.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},It.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},It.prototype.createIndexBuffer=function(t,e){return new V(this,t,e)},It.prototype.createVertexBuffer=function(t,e,i){return new U(this,t,e,i)},It.prototype.createRenderbuffer=function(t,e,i){var n=this.gl,r=n.createRenderbuffer();return this.bindRenderbuffer.set(r),n.renderbufferStorage(n.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),r},It.prototype.createFramebuffer=function(t,e,i){return new St(this,t,e,i)},It.prototype.clear=function(t){var e=t.color,i=t.depth,n=this.gl,r=0;e&&(r|=n.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(r|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),n.clear(r)},It.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},It.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},It.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},It.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,Et.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},It.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Mt=function(e){function i(i,n,r){var o=this;e.call(this),this.id=i,this.dispatcher=r,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),this.on("error",(function(){o._sourceErrored=!0})),this._source=function(e,i,n,r){var o=new D[i.type](e,i,n,r);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(i,n,r,this),this._tiles={},this._cache=new N(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},i.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},i.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},i.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}},i.prototype.getIds=function(){return t.values(this._tiles).map((function(t){return t.tileID})).sort(At).map((function(t){return t.key}))},i.prototype.getRenderableIds=function(e){var i=this,n=[];for(var r in this._tiles)this._isIdRenderable(r,e)&&n.push(this._tiles[r]);return e?n.sort((function(e,n){var r=e.tileID,o=n.tileID,a=new t.Point(r.canonical.x,r.canonical.y)._rotate(i.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(i.transform.angle);return r.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})).map((function(t){return t.tileID.key})):n.map((function(t){return t.tileID})).sort(At).map((function(t){return t.key}))},i.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},i.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},i.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},i.prototype._tileLoaded=function(e,i,n,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new t.ErrorEvent(r,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},i.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),i=0;i<e.length;i++){var n=e[i];if(t.neighboringTiles&&t.neighboringTiles[n]){var r=this.getTileByID(n);o(t,r),o(r,t)}}function o(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,n=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===i&&0===n||Math.abs(n)>1||(Math.abs(i)>1&&(1===Math.abs(i+r)?i+=r:1===Math.abs(i-r)&&(i-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,n),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},i.prototype.getTile=function(t){return this.getTileByID(t.key)},i.prototype.getTileByID=function(t){return this._tiles[t]},i.prototype._retainLoadedChildren=function(t,e,i,n){for(var r in this._tiles){var o=this._tiles[r];if(!(n[r]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>i)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var l=a;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){n[a.key]=a;break}}}},i.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(var n=t.overscaledZ-1;n>=e;n--){var r=t.scaledTo(n),o=this._getLoadedTile(r);if(o)return o}},i.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},i.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,i=Math.ceil(t.height/this._source.tileSize)+1,n=Math.floor(e*i*5),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(r)},i.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var i={};for(var n in this._tiles){var r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),i[r.tileID.key]=r}for(var o in this._tiles=i,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},i.prototype.update=function(e){var n=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter((function(t){return n._source.hasTile(t)})))):r=[];var o=e.coveringZoomLevel(this._source),a=Math.max(o-i.maxOverzooming,this._source.minzoom),s=Math.max(o+i.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(r,o);if(zt(this._source.type)){for(var c={},u={},h=0,p=Object.keys(l);h<p.length;h+=1){var d=p[h],f=l[d],m=this._tiles[d];if(m&&!(m.fadeEndTime&&m.fadeEndTime<=t.browser.now())){var g=this.findLoadedParent(f,a);g&&(this._addTile(g.tileID),c[g.tileID.key]=g.tileID),u[d]=f}}for(var y in this._retainLoadedChildren(u,o,s,l),c)l[y]||(this._coveredTiles[y]=!0,l[y]=c[y])}for(var _ in l)this._tiles[_].clearFadeHold();for(var v=0,b=t.keysDifference(this._tiles,l);v<b.length;v+=1){var x=b[v],w=this._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},i.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},i.prototype._updateRetainedTiles=function(t,e){for(var n={},r={},o=Math.max(e-i.maxOverzooming,this._source.minzoom),a=Math.max(e+i.maxUnderzooming,this._source.minzoom),s={},l=0,c=t;l<c.length;l+=1){var u=c[l],h=this._addTile(u);n[u.key]=u,h.hasData()||e<this._source.maxzoom&&(s[u.key]=u)}this._retainLoadedChildren(s,e,a,n);for(var p=0,d=t;p<d.length;p+=1){var f=d[p],m=this._tiles[f.key];if(!m.hasData()){if(e+1>this._source.maxzoom){var g=f.children(this._source.maxzoom)[0],y=this.getTile(g);if(y&&y.hasData()){n[g.key]=g;continue}}else{var _=f.children(this._source.maxzoom);if(n[_[0].key]&&n[_[1].key]&&n[_[2].key]&&n[_[3].key])continue}for(var v=m.wasRequested(),b=f.overscaledZ-1;b>=o;--b){var x=f.scaledTo(b);if(r[x.key])break;if(r[x.key]=!0,!(m=this.getTile(x))&&v&&(m=this._addTile(x)),m&&(n[x.key]=x,v=m.wasRequested(),m.hasData()))break}}}return n},i.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],i=void 0,n=this._tiles[t].tileID;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){i=this._loadedParentTiles[n.key];break}e.push(n.key);var r=n.scaledTo(n.overscaledZ-1);if(i=this._getLoadedTile(r))break;n=r}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=i}},i.prototype._addTile=function(e){var i=this._tiles[e.key];if(i)return i;(i=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));var n=Boolean(i);return n||(i=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))),i?(i.uses++,this._tiles[e.key]=i,n||this._source.fire(new t.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null},i.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((function(){i._reloadTile(t,"expired"),delete i._timers[t]}),n))},i.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},i.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},i.prototype.tilesIn=function(e,i,n){var r=this,o=[],a=this.transform;if(!a)return o;for(var s=n?a.getCameraQueryGeometry(e):e,l=e.map((function(t){return a.pointCoordinate(t)})),c=s.map((function(t){return a.pointCoordinate(t)})),u=this.getIds(),h=1/0,p=1/0,d=-1/0,f=-1/0,m=0,g=c;m<g.length;m+=1){var y=g[m];h=Math.min(h,y.x),p=Math.min(p,y.y),d=Math.max(d,y.x),f=Math.max(f,y.y)}for(var _=function(e){var n=r._tiles[u[e]];if(!n.holdingForFade()){var s=n.tileID,m=Math.pow(2,a.zoom-n.tileID.overscaledZ),g=i*n.queryPadding*t.EXTENT/n.tileSize/m,y=[s.getTilePoint(new t.MercatorCoordinate(h,p)),s.getTilePoint(new t.MercatorCoordinate(d,f))];if(y[0].x-g<t.EXTENT&&y[0].y-g<t.EXTENT&&y[1].x+g>=0&&y[1].y+g>=0){var _=l.map((function(t){return s.getTilePoint(t)})),v=c.map((function(t){return s.getTilePoint(t)}));o.push({tile:n,tileID:s,queryGeometry:_,cameraQueryGeometry:v,scale:m})}}},v=0;v<u.length;v++)_(v);return o},i.prototype.getVisibleCoordinates=function(t){for(var e=this,i=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),n=0,r=i;n<r.length;n+=1){var o=r[n];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return i},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(zt(this._source.type))for(var e in this._tiles){var i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=t.browser.now())return!0}return!1},i.prototype.setFeatureState=function(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)},i.prototype.removeFeatureState=function(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)},i.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},i.prototype.setDependencies=function(t,e,i){var n=this._tiles[t];n&&n.setDependencies(e,i)},i.prototype.reloadTilesForDependencies=function(t,e){for(var i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(i,"reloading");this._cache.filter((function(i){return!i.hasDependency(t,e)}))},i}(t.Evented);function At(t,e){var i=Math.abs(2*t.wrap)-+(t.wrap<0),n=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||n-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function zt(t){return"raster"===t||"image"===t||"video"===t}function Ot(){return new t.window.Worker(Kr.workerUrl)}Mt.maxOverzooming=10,Mt.maxUnderzooming=3;var Lt="mapboxgl_preloaded_worker_pool",Dt=function(){this.active={}};Dt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Dt.workerCount;)this.workers.push(new Ot);return this.active[t]=!0,this.workers.slice()},Dt.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},Dt.prototype.isPreloaded=function(){return!!this.active[Lt]},Dt.prototype.numActive=function(){return Object.keys(this.active).length};var Rt,Bt=Math.floor(t.browser.hardwareConcurrency/2);function Ft(){return Rt||(Rt=new Dt),Rt}function Nt(e,i){var n={};for(var r in e)"ref"!==r&&(n[r]=e[r]);return t.refProperties.forEach((function(t){t in i&&(n[t]=i[t])})),n}function Vt(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=Nt(t[n],e[t[n].ref]));return t}Dt.workerCount=Math.max(Math.min(Bt,6),1);var jt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ut(t,e,i){i.push({command:jt.addSource,args:[t,e[t]]})}function qt(t,e,i){e.push({command:jt.removeSource,args:[t]}),i[t]=!0}function Zt(t,e,i,n){qt(t,i,n),Ut(t,e,i)}function Ht(e,i,n){var r;for(r in e[n])if(e[n].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[n][r],i[n][r]))return!1;for(r in i[n])if(i[n].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[n][r],i[n][r]))return!1;return!0}function Gt(e,i,n,r,o,a){var s;for(s in i=i||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],i[s])||n.push({command:a,args:[r,s,i[s],o]}));for(s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],i[s])||n.push({command:a,args:[r,s,i[s],o]}))}function Wt(t){return t.id}function $t(t,e){return t[e.id]=e,t}var Kt=function(t,e){this.reset(t,e)};Kt.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Kt.prototype.lerp=function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var i=1,n=this._distances[i],r=e*this.paddedLength+this.padding;n<r&&i<this._distances.length;)n=this._distances[++i];var o=i-1,a=this._distances[o],s=n-a,l=s>0?(r-a)/s:0;return this.points[o].mult(1-l).add(this.points[i].mult(l))};var Xt=function(t,e,i){var n=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(var o=0;o<this.xCellCount*this.yCellCount;o++)n.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Qt(e,i,n,r,o){var a=t.create();return i?(t.scale(a,a,[1/o,1/o,1]),n||t.rotateZ(a,a,r.angle)):t.multiply(a,r.labelPlaneMatrix,e),a}function Yt(e,i,n,r,o){if(i){var a=t.clone(e);return t.scale(a,a,[o,o,1]),n||t.rotateZ(a,a,-r.angle),a}return r.glCoordMatrix}function Jt(e,i){var n=[e.x,e.y,0,1];ue(n,n,i);var r=n[3];return{point:new t.Point(n[0]/r,n[1]/r),signedDistanceFromCamera:r}}function te(t,e){return.5+t/e*.5}function ee(t,e){var i=t[0]/t[3],n=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&n>=-e[1]&&n<=e[1]}function ie(e,i,n,r,o,a,s,l){var c=r?e.textSizeData:e.iconSizeData,u=t.evaluateSizeForZoom(c,n.transform.zoom),h=[256/n.width*2+1,256/n.height*2+1],p=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var d=e.lineVertexArray,f=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=n.transform.width/n.transform.height,g=!1,y=0;y<f.length;y++){var _=f.get(y);if(_.hidden||_.writingMode===t.WritingMode.vertical&&!g)ce(_.numGlyphs,p);else{g=!1;var v=[_.anchorX,_.anchorY,0,1];if(t.transformMat4(v,v,i),ee(v,h)){var b=te(n.transform.cameraToCenterDistance,v[3]),x=t.evaluateSizeForFeature(c,u,_),w=s?x/b:x*b,C=new t.Point(_.anchorX,_.anchorY),S=Jt(C,o).point,T={},k=oe(_,w,!1,l,i,o,a,e.glyphOffsetArray,d,p,S,C,T,m);g=k.useVertical,(k.notEnoughRoom||g||k.needsFlipping&&oe(_,w,!0,l,i,o,a,e.glyphOffsetArray,d,p,S,C,T,m).notEnoughRoom)&&ce(_.numGlyphs,p)}else ce(_.numGlyphs,p)}}r?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function ne(t,e,i,n,r,o,a,s,l,c,u){var h=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,f=e.getoffsetX(s.glyphStartIndex),m=e.getoffsetX(h-1),g=se(t*f,i,n,r,o,a,s.segment,p,d,l,c,u);if(!g)return null;var y=se(t*m,i,n,r,o,a,s.segment,p,d,l,c,u);return y?{first:g,last:y}:null}function re(e,i,n,r){return e===t.WritingMode.horizontal&&Math.abs(n.y-i.y)>Math.abs(n.x-i.x)*r?{useVertical:!0}:(e===t.WritingMode.vertical?i.y<n.y:i.x>n.x)?{needsFlipping:!0}:null}function oe(e,i,n,r,o,a,s,l,c,u,h,p,d,f){var m,g=i/24,y=e.lineOffsetX*g,_=e.lineOffsetY*g;if(e.numGlyphs>1){var v=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=ne(g,l,y,_,n,h,p,e,c,a,d);if(!w)return{notEnoughRoom:!0};var C=Jt(w.first.point,s).point,S=Jt(w.last.point,s).point;if(r&&!n){var T=re(e.writingMode,C,S,f);if(T)return T}m=[w.first];for(var k=e.glyphStartIndex+1;k<v-1;k++)m.push(se(g*l.getoffsetX(k),y,_,n,h,p,e.segment,b,x,c,a,d));m.push(w.last)}else{if(r&&!n){var E=Jt(p,o).point,P=e.lineStartIndex+e.segment+1,I=new t.Point(c.getx(P),c.gety(P)),M=Jt(I,o),A=M.signedDistanceFromCamera>0?M.point:ae(p,I,E,1,o),z=re(e.writingMode,E,A,f);if(z)return z}var O=se(g*l.getoffsetX(e.glyphStartIndex),y,_,n,h,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,a,d);if(!O)return{notEnoughRoom:!0};m=[O]}for(var L=0,D=m;L<D.length;L+=1){var R=D[L];t.addDynamicAttributes(u,R.point,R.angle)}return{}}function ae(t,e,i,n,r){var o=Jt(t.add(t.sub(e)._unit()),r).point,a=i.sub(o);return i.add(a._mult(n/a.mag()))}function se(e,i,n,r,o,a,s,l,c,u,h,p){var d=r?e-i:e+i,f=d>0?1:-1,m=0;r&&(f*=-1,m=Math.PI),f<0&&(m+=Math.PI);for(var g=f>0?l+s:l+s+1,y=o,_=o,v=0,b=0,x=Math.abs(d),w=[];v+b<=x;){if((g+=f)<l||g>=c)return null;if(_=y,w.push(y),void 0===(y=p[g])){var C=new t.Point(u.getx(g),u.gety(g)),S=Jt(C,h);if(S.signedDistanceFromCamera>0)y=p[g]=S.point;else{var T=g-f;y=ae(0===v?a:new t.Point(u.getx(T),u.gety(T)),C,_,x-v+1,h)}}v+=b,b=_.dist(y)}var k=(x-v)/b,E=y.sub(_),P=E.mult(k)._add(_);P._add(E._unit()._perp()._mult(n*f));var I=m+Math.atan2(y.y-_.y,y.x-_.x);return w.push(P),{point:P,angle:I,path:w}}Xt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Xt.prototype.insert=function(t,e,i,n,r){this._forEachCell(e,i,n,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)},Xt.prototype.insertCircle=function(t,e,i,n){this._forEachCell(e-n,i-n,e+n,i+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(n)},Xt.prototype._insertBoxCell=function(t,e,i,n,r,o){this.boxCells[r].push(o)},Xt.prototype._insertCircleCell=function(t,e,i,n,r,o){this.circleCells[r].push(o)},Xt.prototype._query=function(t,e,i,n,r,o){if(i<0||t>this.width||n<0||e>this.height)return!r&&[];var a=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=n){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var c=this.circles[3*l],u=this.circles[3*l+1],h=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:c-h,y1:u-h,x2:c+h,y2:u+h})}return o?a.filter(o):a}return this._forEachCell(t,e,i,n,this._queryCell,a,{hitTest:r,seenUids:{box:{},circle:{}}},o),r?a.length>0:a},Xt.prototype._queryCircle=function(t,e,i,n,r){var o=t-i,a=t+i,s=e-i,l=e+i;if(a<0||o>this.width||l<0||s>this.height)return!n&&[];var c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:n,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},r),n?c.length>0:c},Xt.prototype.query=function(t,e,i,n,r){return this._query(t,e,i,n,!1,r)},Xt.prototype.hitTest=function(t,e,i,n,r){return this._query(t,e,i,n,!0,r)},Xt.prototype.hitTestCircle=function(t,e,i,n){return this._queryCircle(t,e,i,!0,n)},Xt.prototype._queryCell=function(t,e,i,n,r,o,a,s){var l=a.seenUids,c=this.boxCells[r];if(null!==c)for(var u=this.bboxes,h=0,p=c;h<p.length;h+=1){var d=p[h];if(!l.box[d]){l.box[d]=!0;var f=4*d;if(t<=u[f+2]&&e<=u[f+3]&&i>=u[f+0]&&n>=u[f+1]&&(!s||s(this.boxKeys[d]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[d],x1:u[f],y1:u[f+1],x2:u[f+2],y2:u[f+3]})}}}var m=this.circleCells[r];if(null!==m)for(var g=this.circles,y=0,_=m;y<_.length;y+=1){var v=_[y];if(!l.circle[v]){l.circle[v]=!0;var b=3*v;if(this._circleAndRectCollide(g[b],g[b+1],g[b+2],t,e,i,n)&&(!s||s(this.circleKeys[v]))){if(a.hitTest)return o.push(!0),!0;var x=g[b],w=g[b+1],C=g[b+2];o.push({key:this.circleKeys[v],x1:x-C,y1:w-C,x2:x+C,y2:w+C})}}}},Xt.prototype._queryCellCircle=function(t,e,i,n,r,o,a,s){var l=a.circle,c=a.seenUids,u=this.boxCells[r];if(null!==u)for(var h=this.bboxes,p=0,d=u;p<d.length;p+=1){var f=d[p];if(!c.box[f]){c.box[f]=!0;var m=4*f;if(this._circleAndRectCollide(l.x,l.y,l.radius,h[m+0],h[m+1],h[m+2],h[m+3])&&(!s||s(this.boxKeys[f])))return o.push(!0),!0}}var g=this.circleCells[r];if(null!==g)for(var y=this.circles,_=0,v=g;_<v.length;_+=1){var b=v[_];if(!c.circle[b]){c.circle[b]=!0;var x=3*b;if(this._circlesCollide(y[x],y[x+1],y[x+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},Xt.prototype._forEachCell=function(t,e,i,n,r,o,a,s){for(var l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),h=this._convertToYCellCoord(n),p=l;p<=u;p++)for(var d=c;d<=h;d++)if(r.call(this,t,e,i,n,this.xCellCount*d+p,o,a,s))return},Xt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Xt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Xt.prototype._circlesCollide=function(t,e,i,n,r,o){var a=n-t,s=r-e,l=i+o;return l*l>a*a+s*s},Xt.prototype._circleAndRectCollide=function(t,e,i,n,r,o,a){var s=(o-n)/2,l=Math.abs(t-(n+s));if(l>s+i)return!1;var c=(a-r)/2,u=Math.abs(e-(r+c));if(u>c+i)return!1;if(l<=s||u<=c)return!0;var h=l-s,p=u-c;return h*h+p*p<=i*i};var le=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ce(t,e){for(var i=0;i<t;i++){var n=e.length;e.resize(n+4),e.float32.set(le,3*n)}}function ue(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t[3]=i[3]*n+i[7]*r+i[15],t}var he=function(t,e,i){void 0===e&&(e=new Xt(t.width+200,t.height+200,25)),void 0===i&&(i=new Xt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function pe(e,i,n){return i*(t.EXTENT/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}he.prototype.placeCollisionBox=function(t,e,i,n,r){var o=this.projectAndGetPerspectiveRatio(n,t.anchorPointX,t.anchorPointY),a=i*o.perspectiveRatio,s=t.x1*a+o.point.x,l=t.y1*a+o.point.y,c=t.x2*a+o.point.x,u=t.y2*a+o.point.y;return!this.isInsideGrid(s,l,c,u)||!e&&this.grid.hitTest(s,l,c,u,r)?{box:[],offscreen:!1}:{box:[s,l,c,u],offscreen:this.isOffscreen(s,l,c,u)}},he.prototype.placeCollisionCircles=function(e,i,n,r,o,a,s,l,c,u,h,p,d){var f=[],m=new t.Point(i.anchorX,i.anchorY),g=Jt(m,a),y=te(this.transform.cameraToCenterDistance,g.signedDistanceFromCamera),_=(u?o/y:o*y)/t.ONE_EM,v=Jt(m,s).point,b=ne(_,r,i.lineOffsetX*_,i.lineOffsetY*_,!1,v,m,i,n,s,{}),x=!1,w=!1,C=!0;if(b){for(var S=.5*p*y+d,T=new t.Point(-100,-100),k=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),E=new Kt,P=b.first,I=b.last,M=[],A=P.path.length-1;A>=1;A--)M.push(P.path[A]);for(var z=1;z<I.path.length;z++)M.push(I.path[z]);var O=2.5*S;if(l){var L=M.map((function(t){return Jt(t,l)}));M=L.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:L.map((function(t){return t.point}))}var D=[];if(M.length>0){for(var R=M[0].clone(),B=M[0].clone(),F=1;F<M.length;F++)R.x=Math.min(R.x,M[F].x),R.y=Math.min(R.y,M[F].y),B.x=Math.max(B.x,M[F].x),B.y=Math.max(B.y,M[F].y);D=R.x>=T.x&&B.x<=k.x&&R.y>=T.y&&B.y<=k.y?[M]:B.x<T.x||R.x>k.x||B.y<T.y||R.y>k.y?[]:t.clipLine([M],T.x,T.y,k.x,k.y)}for(var N=0,V=D;N<V.length;N+=1){var j;E.reset(V[N],.25*S),j=E.length<=.5*S?1:Math.ceil(E.paddedLength/O)+1;for(var U=0;U<j;U++){var q=U/Math.max(j-1,1),Z=E.lerp(q),H=Z.x+100,G=Z.y+100;f.push(H,G,S,0);var W=H-S,$=G-S,K=H+S,X=G+S;if(C=C&&this.isOffscreen(W,$,K,X),w=w||this.isInsideGrid(W,$,K,X),!e&&this.grid.hitTestCircle(H,G,S,h)&&(x=!0,!c))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!c&&x||!w?[]:f,offscreen:C,collisionDetected:x}},he.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],n=1/0,r=1/0,o=-1/0,a=-1/0,s=0,l=e;s<l.length;s+=1){var c=l[s],u=new t.Point(c.x+100,c.y+100);n=Math.min(n,u.x),r=Math.min(r,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y),i.push(u)}for(var h={},p={},d=0,f=this.grid.query(n,r,o,a).concat(this.ignoredGrid.query(n,r,o,a));d<f.length;d+=1){var m=f[d],g=m.key;if(void 0===h[g.bucketInstanceId]&&(h[g.bucketInstanceId]={}),!h[g.bucketInstanceId][g.featureIndex]){var y=[new t.Point(m.x1,m.y1),new t.Point(m.x2,m.y1),new t.Point(m.x2,m.y2),new t.Point(m.x1,m.y2)];t.polygonIntersectsPolygon(i,y)&&(h[g.bucketInstanceId][g.featureIndex]=!0,void 0===p[g.bucketInstanceId]&&(p[g.bucketInstanceId]=[]),p[g.bucketInstanceId].push(g.featureIndex))}}return p},he.prototype.insertCollisionBox=function(t,e,i,n,r){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:n,collisionGroupID:r},t[0],t[1],t[2],t[3])},he.prototype.insertCollisionCircles=function(t,e,i,n,r){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:i,featureIndex:n,collisionGroupID:r},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},he.prototype.projectAndGetPerspectiveRatio=function(e,i,n){var r=[i,n,0,1];return ue(r,r,e),{point:new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},he.prototype.isOffscreen=function(t,e,i,n){return i<100||t>=this.screenRightBoundary||n<100||e>this.screenBottomBoundary},he.prototype.isInsideGrid=function(t,e,i,n){return i>=0&&t<this.gridRightBoundary&&n>=0&&e<this.gridBottomBoundary},he.prototype.getViewportMatrix=function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e};var de=function(t,e,i,n){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):n&&i?1:0,this.placed=i};de.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var fe=function(t,e,i,n,r){this.text=new de(t?t.text:null,e,i,r),this.icon=new de(t?t.icon:null,e,n,r)};fe.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var me=function(t,e,i){this.text=t,this.icon=e,this.skipFade=i},ge=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},ye=function(t,e,i,n,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=n,this.tileID=r},_e=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function ve(e,i,n,r,o){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*i,l=-(a.verticalAlign-.5)*n,c=t.evaluateVariableOffset(e,r);return new t.Point(s+c[0]*o,l+c[1]*o)}function be(e,i,n,r,o,a){var s=e.x1,l=e.x2,c=e.y1,u=e.y2,h=e.anchorPointX,p=e.anchorPointY,d=new t.Point(i,n);return r&&d._rotate(o?a:-a),{x1:s+d.x,y1:c+d.y,x2:l+d.x,y2:u+d.y,anchorPointX:h,anchorPointY:p}}_e.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var xe=function(t,e,i,n){this.transform=t.clone(),this.collisionIndex=new he(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new _e(i),this.collisionCircleArrays={},this.prevPlacement=n,n&&(n.prevPlacement=void 0),this.placedOrientations={}};function we(t,e,i,n,r){t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0)}xe.prototype.getBucketParts=function(e,i,n,r){var o=n.getBucket(i),a=n.latestFeatureIndex;if(o&&a&&i.id===o.layerIds[0]){var s=n.collisionBoxArray,l=o.layers[0].layout,c=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),u=n.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),p="map"===l.get("text-pitch-alignment"),d="map"===l.get("text-rotation-alignment"),f=pe(n,1,this.transform.zoom),m=Qt(h,p,d,this.transform,f),g=null;if(p){var y=Yt(h,p,d,this.transform,f);g=t.multiply([],this.transform.labelPlaneMatrix,y)}this.retainedQueryData[o.bucketInstanceId]=new ye(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,n.tileID);var _={bucket:o,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:c,textPixelRatio:u,holdingForFade:n.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(r)for(var v=0,b=o.sortKeyRanges;v<b.length;v+=1){var x=b[v];e.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:_})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:_})}},xe.prototype.attemptAnchorPlacement=function(t,e,i,n,r,o,a,s,l,c,u,h,p,d,f){var m,g=[h.textOffset0,h.textOffset1],y=ve(t,i,n,g,r),_=this.collisionIndex.placeCollisionBox(be(e,y.x,y.y,o,a,this.transform.angle),u,s,l,c.predicate);if(!f||0!==this.collisionIndex.placeCollisionBox(be(f,y.x,y.y,o,a,this.transform.angle),u,s,l,c.predicate).box.length)return _.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(m=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:g,width:i,height:n,anchor:t,textBoxScale:r,prevAnchor:m},this.markUsedJustification(p,t,h,d),p.allowVerticalPlacement&&(this.markUsedOrientation(p,d,h),this.placedOrientations[h.crossTileID]=d),{shift:y,placedGlyphBoxes:_}):void 0},xe.prototype.placeLayerBucketPart=function(e,i,n){var r=this,o=e.parameters,a=o.bucket,s=o.layout,l=o.posMatrix,c=o.textLabelPlaneMatrix,u=o.labelToScreenMatrix,h=o.textPixelRatio,p=o.holdingForFade,d=o.collisionBoxArray,f=o.partiallyEvaluatedTextSize,m=o.collisionGroup,g=s.get("text-optional"),y=s.get("icon-optional"),_=s.get("text-allow-overlap"),v=s.get("icon-allow-overlap"),b="map"===s.get("text-rotation-alignment"),x="map"===s.get("text-pitch-alignment"),w="none"!==s.get("icon-text-fit"),C="viewport-y"===s.get("symbol-z-order"),S=_&&(v||!a.hasIconData()||y),T=v&&(_||!a.hasTextData()||g);!a.collisionArrays&&d&&a.deserializeCollisionBoxes(d);var k=function(e,o){if(!i[e.crossTileID])if(p)r.placements[e.crossTileID]=new me(!1,!1,!1);else{var d,C=!1,k=!1,E=!0,P=null,I={box:null,offscreen:null},M={box:null,offscreen:null},A=null,z=null,O=0,L=0,D=0;o.textFeatureIndex?O=o.textFeatureIndex:e.useRuntimeCollisionCircles&&(O=e.featureIndex),o.verticalTextFeatureIndex&&(L=o.verticalTextFeatureIndex);var R=o.textBox;if(R){var B=function(i){var n=t.WritingMode.horizontal;if(a.allowVerticalPlacement&&!i&&r.prevPlacement){var o=r.prevPlacement.placedOrientations[e.crossTileID];o&&(r.placedOrientations[e.crossTileID]=o,r.markUsedOrientation(a,n=o,e))}return n},F=function(i,n){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&o.verticalTextBox)for(var r=0,s=a.writingModes;r<s.length&&(s[r]===t.WritingMode.vertical?(I=n(),M=I):I=i(),!(I&&I.box&&I.box.length));r+=1);else I=i()};if(s.get("text-variable-anchor")){var N=s.get("text-variable-anchor");if(r.prevPlacement&&r.prevPlacement.variableOffsets[e.crossTileID]){var V=r.prevPlacement.variableOffsets[e.crossTileID];N.indexOf(V.anchor)>0&&(N=N.filter((function(t){return t!==V.anchor}))).unshift(V.anchor)}var j=function(t,i,n){for(var o=t.x2-t.x1,s=t.y2-t.y1,c=e.textBoxScale,u=w&&!v?i:null,p={box:[],offscreen:!1},d=_?2*N.length:N.length,f=0;f<d;++f){var g=r.attemptAnchorPlacement(N[f%N.length],t,o,s,c,b,x,h,l,m,f>=N.length,e,a,n,u);if(g&&(p=g.placedGlyphBoxes)&&p.box&&p.box.length){C=!0,P=g.shift;break}}return p};F((function(){return j(R,o.iconBox,t.WritingMode.horizontal)}),(function(){var i=o.verticalTextBox;return a.allowVerticalPlacement&&!(I&&I.box&&I.box.length)&&e.numVerticalGlyphVertices>0&&i?j(i,o.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),I&&(C=I.box,E=I.offscreen);var U=B(I&&I.box);if(!C&&r.prevPlacement){var q=r.prevPlacement.variableOffsets[e.crossTileID];q&&(r.variableOffsets[e.crossTileID]=q,r.markUsedJustification(a,q.anchor,e,U))}}else{var Z=function(t,i){var n=r.collisionIndex.placeCollisionBox(t,_,h,l,m.predicate);return n&&n.box&&n.box.length&&(r.markUsedOrientation(a,i,e),r.placedOrientations[e.crossTileID]=i),n};F((function(){return Z(R,t.WritingMode.horizontal)}),(function(){var i=o.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&i?Z(i,t.WritingMode.vertical):{box:null,offscreen:null}})),B(I&&I.box&&I.box.length)}}if(C=(d=I)&&d.box&&d.box.length>0,E=d&&d.offscreen,e.useRuntimeCollisionCircles){var H=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),G=t.evaluateSizeForFeature(a.textSizeData,f,H),W=s.get("text-padding");A=r.collisionIndex.placeCollisionCircles(_,H,a.lineVertexArray,a.glyphOffsetArray,G,l,c,u,n,x,m.predicate,e.collisionCircleDiameter,W),C=_||A.circles.length>0&&!A.collisionDetected,E=E&&A.offscreen}if(o.iconFeatureIndex&&(D=o.iconFeatureIndex),o.iconBox){var $=function(t){var e=w&&P?be(t,P.x,P.y,b,x,r.transform.angle):t;return r.collisionIndex.placeCollisionBox(e,v,h,l,m.predicate)};k=M&&M.box&&M.box.length&&o.verticalIconBox?(z=$(o.verticalIconBox)).box.length>0:(z=$(o.iconBox)).box.length>0,E=E&&z.offscreen}var K=g||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,X=y||0===e.numIconVertices;if(K||X?X?K||(k=k&&C):C=k&&C:k=C=k&&C,C&&d&&d.box&&r.collisionIndex.insertCollisionBox(d.box,s.get("text-ignore-placement"),a.bucketInstanceId,M&&M.box&&L?L:O,m.ID),k&&z&&r.collisionIndex.insertCollisionBox(z.box,s.get("icon-ignore-placement"),a.bucketInstanceId,D,m.ID),A&&(C&&r.collisionIndex.insertCollisionCircles(A.circles,s.get("text-ignore-placement"),a.bucketInstanceId,O,m.ID),n)){var Q=a.bucketInstanceId,Y=r.collisionCircleArrays[Q];void 0===Y&&(Y=r.collisionCircleArrays[Q]=new ge);for(var J=0;J<A.circles.length;J+=4)Y.circles.push(A.circles[J+0]),Y.circles.push(A.circles[J+1]),Y.circles.push(A.circles[J+2]),Y.circles.push(A.collisionDetected?1:0)}r.placements[e.crossTileID]=new me(C||S,k||T,E||a.justReloaded),i[e.crossTileID]=!0}};if(C)for(var E=a.getSortedSymbolIndexes(this.transform.angle),P=E.length-1;P>=0;--P){var I=E[P];k(a.symbolInstances.get(I),a.collisionArrays[I])}else for(var M=e.symbolInstanceStart;M<e.symbolInstanceEnd;M++)k(a.symbolInstances.get(M),a.collisionArrays[M]);if(n&&a.bucketInstanceId in this.collisionCircleArrays){var A=this.collisionCircleArrays[a.bucketInstanceId];t.invert(A.invProjMatrix,l),A.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1},xe.prototype.markUsedJustification=function(e,i,n,r){var o;o=r===t.WritingMode.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(i)];for(var a=0,s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];a<s.length;a+=1){var l=s[a];l>=0&&(e.text.placedSymbolArray.get(l).crossTileID=o>=0&&l!==o?0:n.crossTileID)}},xe.prototype.markUsedOrientation=function(e,i,n){for(var r=i===t.WritingMode.horizontal||i===t.WritingMode.horizontalOnly?i:0,o=i===t.WritingMode.vertical?i:0,a=0,s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];a<s.length;a+=1)e.text.placedSymbolArray.get(s[a]).placedOrientation=r;n.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=o)},xe.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var n=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],c=r[s];c?(this.opacities[s]=new fe(c,n,l.text,l.icon),i=i||l.text!==c.text.placed||l.icon!==c.icon.placed):(this.opacities[s]=new fe(null,n,l.text,l.icon,l.skipFade),i=i||l.text||l.icon)}for(var u in r){var h=r[u];if(!this.opacities[u]){var p=new fe(h,n,!1,!1);p.isHidden()||(this.opacities[u]=p,i=i||h.text.placed||h.icon.placed)}}for(var d in o)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=o[d]);for(var f in a)this.placedOrientations[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.placedOrientations[f]=a[f]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},xe.prototype.updateLayerOpacities=function(t,e){for(var i={},n=0,r=e;n<r.length;n+=1){var o=r[n],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,i,o.collisionBoxArray)}},xe.prototype.updateBucketOpacities=function(e,i,n){var r=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var o=e.layers[0].layout,a=new fe(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),l=o.get("icon-allow-overlap"),c=o.get("text-variable-anchor"),u="map"===o.get("text-rotation-alignment"),h="map"===o.get("text-pitch-alignment"),p="none"!==o.get("icon-text-fit"),d=new fe(null,0,s&&(l||!e.hasIconData()||o.get("icon-optional")),l&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(n);for(var f=function(t,e,i){for(var n=0;n<e/4;n++)t.opacityVertexArray.emplaceBack(i)},m=function(n){var o=e.symbolInstances.get(n),s=o.numHorizontalGlyphVertices,l=o.numVerticalGlyphVertices,m=o.crossTileID,g=r.opacities[m];i[m]?g=a:g||(r.opacities[m]=g=d),i[m]=!0;var y=o.numIconVertices>0,_=r.placedOrientations[o.crossTileID],v=_===t.WritingMode.vertical,b=_===t.WritingMode.horizontal||_===t.WritingMode.horizontalOnly;if(s>0||l>0){var x=Me(g.text);f(e.text,s,v?Ae:x),f(e.text,l,b?Ae:x);var w=g.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=w||v?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=w||b?1:0);var C=r.variableOffsets[o.crossTileID];C&&r.markUsedJustification(e,C.anchor,o,_);var S=r.placedOrientations[o.crossTileID];S&&(r.markUsedJustification(e,"left",o,S),r.markUsedOrientation(e,S,o))}if(y){var T=Me(g.icon),k=!(p&&o.verticalPlacedIconSymbolIndex&&v);o.placedIconSymbolIndex>=0&&(f(e.icon,o.numIconVertices,k?T:Ae),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=g.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(f(e.icon,o.numVerticalIconVertices,k?Ae:T),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=g.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var E=e.collisionArrays[n];if(E){var P=new t.Point(0,0);if(E.textBox||E.verticalTextBox){var I=!0;if(c){var M=r.variableOffsets[m];M?(P=ve(M.anchor,M.width,M.height,M.textOffset,M.textBoxScale),u&&P._rotate(h?r.transform.angle:-r.transform.angle)):I=!1}E.textBox&&we(e.textCollisionBox.collisionVertexArray,g.text.placed,!I||v,P.x,P.y),E.verticalTextBox&&we(e.textCollisionBox.collisionVertexArray,g.text.placed,!I||b,P.x,P.y)}var A=Boolean(!b&&E.verticalIconBox);E.iconBox&&we(e.iconCollisionBox.collisionVertexArray,g.icon.placed,A,p?P.x:0,p?P.y:0),E.verticalIconBox&&we(e.iconCollisionBox.collisionVertexArray,g.icon.placed,!A,p?P.x:0,p?P.y:0)}}},g=0;g<e.symbolInstances.length;g++)m(g);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var y=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=y.invProjMatrix,e.placementViewportMatrix=y.viewportMatrix,e.collisionCircleArray=y.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}},xe.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},xe.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},xe.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},xe.prototype.stillRecent=function(t,e){var i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t},xe.prototype.setStale=function(){this.stale=!0};var Ce=Math.pow(2,25),Se=Math.pow(2,24),Te=Math.pow(2,17),ke=Math.pow(2,16),Ee=Math.pow(2,9),Pe=Math.pow(2,8),Ie=Math.pow(2,1);function Me(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*Ce+e*Se+i*Te+e*ke+i*Ee+e*Pe+i*Ie+e}var Ae=0,ze=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ze.prototype.continuePlacement=function(t,e,i,n,r){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,n,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,r())return!0;return!1};var Oe=function(t,e,i,n,r,o,a){this.placement=new xe(t,r,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=n,this._done=!1};Oe.prototype.isDone=function(){return this._done},Oe.prototype.continuePlacement=function(e,i,n){for(var r=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!r._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=i[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new ze(s)),this._inProgressLayer.continuePlacement(n[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Oe.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Le=512/t.EXTENT/2,De=function(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var n=0;n<e.length;n++){var r=e.get(n),o=r.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}};De.prototype.getScaledCoordinates=function(e,i){var n=Le/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*t.EXTENT+e.anchorX)*n),y:Math.floor((i.canonical.y*t.EXTENT+e.anchorY)*n)}},De.prototype.findMatches=function(t,e,i){for(var n=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),r=0;r<t.length;r++){var o=t.get(r);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),l=0,c=a;l<c.length;l+=1){var u=c[l];if(Math.abs(u.coord.x-s.x)<=n&&Math.abs(u.coord.y-s.y)<=n&&!i[u.crossTileID]){i[u.crossTileID]=!0,o.crossTileID=u.crossTileID;break}}}}};var Re=function(){this.maxCrossTileID=0};Re.prototype.generate=function(){return++this.maxCrossTileID};var Be=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Be.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var i in this.indexes){var n=this.indexes[i],r={};for(var o in n){var a=n[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),r[a.tileID.key]=a}this.indexes[i]=r}this.lng=t},Be.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var n=0;n<e.symbolInstances.length;n++)e.symbolInstances.get(n).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var r=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var l=a[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,r)}else{var c=a[t.scaledTo(Number(o)).key];c&&c.findMatches(e.symbolInstances,t,r)}}for(var u=0;u<e.symbolInstances.length;u++){var h=e.symbolInstances.get(u);h.crossTileID||(h.crossTileID=i.generate(),r[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new De(t,e.symbolInstances,e.bucketInstanceId),!0},Be.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var n=0,r=e.indexedSymbolInstances[i];n<r.length;n+=1)delete this.usedCrossTileIDs[t][r[n].crossTileID]},Be.prototype.removeStaleBuckets=function(t){var e=!1;for(var i in this.indexes){var n=this.indexes[i];for(var r in n)t[n[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,n[r]),delete n[r],e=!0)}return e};var Fe=function(){this.layerIndexes={},this.crossTileIDs=new Re,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Fe.prototype.addLayer=function(t,e,i){var n=this.layerIndexes[t.id];void 0===n&&(n=this.layerIndexes[t.id]=new Be);var r=!1,o={};n.handleWrapJump(i);for(var a=0,s=e;a<s.length;a+=1){var l=s[a],c=l.getBucket(t);c&&t.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(l.tileID,c,this.crossTileIDs)&&(r=!0),o[c.bucketInstanceId]=!0)}return n.removeStaleBuckets(o)&&(r=!0),r},Fe.prototype.pruneUnusedLayers=function(t){var e={};for(var i in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[i]||delete this.layerIndexes[i]};var Ne=function(e,i){return t.emitValidationErrors(e,i&&i.filter((function(t){return"source.canvas"!==t.identifier})))},Ve=t.pick(jt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),je=t.pick(jt,["setCenter","setZoom","setBearing","setPitch"]),Ue=function(){var e={},i=t.styleSpec.$version;for(var n in t.styleSpec.$root){var r,o=t.styleSpec.$root[n];o.required&&null!=(r="version"===n?i:"array"===o.type?[]:{})&&(e[n]=r)}return e}(),qe=function(e){function i(n,r){var o=this;void 0===r&&(r={}),e.call(this),this.map=n,this.dispatcher=new S(Ft(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new v(n._requestManager,r.localIdeographFontFamily),this.lineAtlas=new C(256,512),this.crossTileSymbolIndex=new Fe,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=i.registerForPluginStateChange((function(e){a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,i){if(t.triggerPluginCompletionEvent(e),i&&i.every((function(t){return t})))for(var n in a.sourceCaches)a.sourceCaches[n].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var n in o._layers){var r=o._layers[n];r.source===i.id&&o._validateLayer(r)}}}}))}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.loadURL=function(e,i){var n=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof i.validate?i.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,i.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,(function(e,i){n._request=null,e?n.fire(new t.ErrorEvent(e)):i&&n._load(i,r)}))},i.prototype.loadJSON=function(e,i){var n=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){n._request=null,n._load(e,!1!==i.validate)}))},i.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ue,!1)},i.prototype._load=function(e,i){if(!i||!Ne(this,t.validateStyle(e))){for(var n in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(n,e.sources[n],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var r=Vt(this.stylesheet.layers);this._order=r.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var o=0,a=r;o<a.length;o+=1){var s=a[o];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},i.prototype._loadSprite=function(e){var i=this;this._spriteRequest=function(e,i,n){var r,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(i.transformRequest(i.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){l=null,a||(a=t,r=e,u())})),c=t.getImage(i.transformRequest(i.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){c=null,a||(a=t,o=e,u())}));function u(){if(a)n(a);else if(r&&o){var e=t.browser.getImageData(o),i={};for(var s in r){var l=r[s],c=l.width,u=l.height,h=l.x,p=l.y,d=l.sdf,f=l.pixelRatio,m=l.stretchX,g=l.stretchY,y=l.content,_=new t.RGBAImage({width:c,height:u});t.RGBAImage.copy(e,_,{x:h,y:p},{x:0,y:0},{width:c,height:u}),i[s]={data:_,pixelRatio:f,sdf:d,stretchX:m,stretchY:g,content:y}}n(null,i)}}return{cancel:function(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,(function(e,n){if(i._spriteRequest=null,e)i.fire(new t.ErrorEvent(e));else if(n)for(var r in n)i.imageManager.addImage(r,n[r]);i.imageManager.setLoaded(!0),i._availableImages=i.imageManager.listImages(),i.dispatcher.broadcast("setImages",i._availableImages),i.fire(new t.Event("data",{dataType:"style"}))}))},i.prototype._validateLayer=function(e){var i=this.sourceCaches[e.source];if(i){var n=e.sourceLayer;if(n){var r=i.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+n+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(t){for(var e=[],i=0,n=t;i<n.length;i+=1){var r=this._layers[n[i]];"custom"!==r.type&&e.push(r.serialize())}return e},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(e){if(this._loaded){var i=this._changed;if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var o in(n.length||r.length)&&this._updateWorkerLayers(n,r),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}var l={};for(var c in this.sourceCaches){var u=this.sourceCaches[c];l[c]=u.used,u.used=!1}for(var h=0,p=this._order;h<p.length;h+=1){var d=this._layers[p[h]];d.recalculate(e,this._availableImages),!d.isHidden(e.zoom)&&d.source&&(this.sourceCaches[d.source].used=!0)}for(var f in l){var m=this.sourceCaches[f];l[f]!==m.used&&m.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(e),this.z=e.zoom,i&&this.fire(new t.Event("data",{dataType:"style"}))}},i.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},i.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},i.prototype.setState=function(e){var i=this;if(this._checkLoaded(),Ne(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=Vt(e.layers);var n=function(e,i){if(!e)return[{command:jt.setStyle,args:[i]}];var n=[];try{if(!t.deepEqual(e.version,i.version))return[{command:jt.setStyle,args:[i]}];t.deepEqual(e.center,i.center)||n.push({command:jt.setCenter,args:[i.center]}),t.deepEqual(e.zoom,i.zoom)||n.push({command:jt.setZoom,args:[i.zoom]}),t.deepEqual(e.bearing,i.bearing)||n.push({command:jt.setBearing,args:[i.bearing]}),t.deepEqual(e.pitch,i.pitch)||n.push({command:jt.setPitch,args:[i.pitch]}),t.deepEqual(e.sprite,i.sprite)||n.push({command:jt.setSprite,args:[i.sprite]}),t.deepEqual(e.glyphs,i.glyphs)||n.push({command:jt.setGlyphs,args:[i.glyphs]}),t.deepEqual(e.transition,i.transition)||n.push({command:jt.setTransition,args:[i.transition]}),t.deepEqual(e.light,i.light)||n.push({command:jt.setLight,args:[i.light]});var r={},o=[];!function(e,i,n,r){var o;for(o in i=i||{},e=e||{})e.hasOwnProperty(o)&&(i.hasOwnProperty(o)||qt(o,n,r));for(o in i)i.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],i[o])||("geojson"===e[o].type&&"geojson"===i[o].type&&Ht(e,i,o)?n.push({command:jt.setGeoJSONSourceData,args:[o,i[o].data]}):Zt(o,i,n,r)):Ut(o,i,n))}(e.sources,i.sources,o,r);var a=[];e.layers&&e.layers.forEach((function(t){r[t.source]?n.push({command:jt.removeLayer,args:[t.id]}):a.push(t)})),n=n.concat(o),function(e,i,n){i=i||[];var r,o,a,s,l,c,u,h=(e=e||[]).map(Wt),p=i.map(Wt),d=e.reduce($t,{}),f=i.reduce($t,{}),m=h.slice(),g=Object.create(null);for(r=0,o=0;r<h.length;r++)f.hasOwnProperty(a=h[r])?o++:(n.push({command:jt.removeLayer,args:[a]}),m.splice(m.indexOf(a,o),1));for(r=0,o=0;r<p.length;r++)m[m.length-1-r]!==(a=p[p.length-1-r])&&(d.hasOwnProperty(a)?(n.push({command:jt.removeLayer,args:[a]}),m.splice(m.lastIndexOf(a,m.length-o),1)):o++,n.push({command:jt.addLayer,args:[f[a],c=m[m.length-r]]}),m.splice(m.length-r,0,a),g[a]=!0);for(r=0;r<p.length;r++)if(s=d[a=p[r]],l=f[a],!g[a]&&!t.deepEqual(s,l))if(t.deepEqual(s.source,l.source)&&t.deepEqual(s["source-layer"],l["source-layer"])&&t.deepEqual(s.type,l.type)){for(u in Gt(s.layout,l.layout,n,a,null,jt.setLayoutProperty),Gt(s.paint,l.paint,n,a,null,jt.setPaintProperty),t.deepEqual(s.filter,l.filter)||n.push({command:jt.setFilter,args:[a,l.filter]}),t.deepEqual(s.minzoom,l.minzoom)&&t.deepEqual(s.maxzoom,l.maxzoom)||n.push({command:jt.setLayerZoomRange,args:[a,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Gt(s[u],l[u],n,a,u.slice(6),jt.setPaintProperty):t.deepEqual(s[u],l[u])||n.push({command:jt.setLayerProperty,args:[a,u,l[u]]}));for(u in l)l.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Gt(s[u],l[u],n,a,u.slice(6),jt.setPaintProperty):t.deepEqual(s[u],l[u])||n.push({command:jt.setLayerProperty,args:[a,u,l[u]]}))}else n.push({command:jt.removeLayer,args:[a]}),c=m[m.lastIndexOf(a)+1],n.push({command:jt.addLayer,args:[l,c]})}(a,i.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:jt.setStyle,args:[i]}]}return n}(this.serialize(),e).filter((function(t){return!(t.command in je)}));if(0===n.length)return!1;var r=n.filter((function(t){return!(t.command in Ve)}));if(r.length>0)throw new Error("Unimplemented: "+r.map((function(t){return t.command})).join(", ")+".");return n.forEach((function(t){"setTransition"!==t.command&&i[t.command].apply(i,t.args)})),this.stylesheet=e,!0},i.prototype.addImage=function(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,i),this._afterImageUpdated(e)},i.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},i.prototype.getImage=function(t){return this.imageManager.getImage(t)},i.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)},i.prototype._afterImageUpdated=function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(e,i,n){var r=this;if(void 0===n&&(n={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!i.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(i).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,i,null,n))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Mt(e,i,this.dispatcher);o.style=this,o.setEventedParent(this,(function(){return{isSourceLoaded:r.loaded(),source:o.serialize(),sourceId:e}})),o.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+i+'" is using it.')));var n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.clearTiles(),n.onRemove&&n.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},i.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},i.prototype.addLayer=function(e,i,n){void 0===n&&(n={}),this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" already exists on this map')));else{var o;if("custom"===e.type){if(Ne(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$1(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,"layers."+r,e,{arrayIndex:-1},n))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[o.id]=o.serialize()}var a=i?this._order.indexOf(i):this._order.length;if(i&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=o,this._removedLayers[r]&&o.source&&"custom"!==o.type){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},i.prototype.moveLayer=function(e,i){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==i){var n=this._order.indexOf(e);this._order.splice(n,1);var r=i?this._order.indexOf(i):this._order.length;i&&-1===r?this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(e){this._checkLoaded();var i=this._layers[e];if(i){i.setEventedParent(null);var n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(t){return this._layers[t]},i.prototype.hasLayer=function(t){return t in this._layers},i.prototype.setLayerZoomRange=function(e,i,n){this._checkLoaded();var r=this.getLayer(e);r?r.minzoom===i&&r.maxzoom===n||(null!=i&&(r.minzoom=i),null!=n&&(r.maxzoom=n),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(e,i,n){void 0===n&&(n={}),this._checkLoaded();var r=this.getLayer(e);if(r){if(!t.deepEqual(r.filter,i))return null==i?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,"layers."+r.id+".filter",i,null,n)||(r.filter=t.clone$1(i),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},i.prototype.setLayoutProperty=function(e,i,n,r){void 0===r&&(r={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(i),n)||(o.setLayoutProperty(i,n,r),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(e,i){var n=this.getLayer(e);if(n)return n.getLayoutProperty(i);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(e,i,n,r){void 0===r&&(r={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(i),n)||(o.setPaintProperty(i,n,r)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},i.prototype.setFeatureState=function(e,i){this._checkLoaded();var n=e.source,r=e.sourceLayer,o=this.sourceCaches[n];if(void 0!==o){var a=o.getSource().type;"geojson"===a&&r?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||r?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(r,e.id,i)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(e,i){this._checkLoaded();var n=e.source,r=this.sourceCaches[n];if(void 0!==r){var o=r.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?i&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):r.removeFeatureState(a,e.id,i):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(e){this._checkLoaded();var i=e.source,n=e.sourceLayer,r=this.sourceCaches[i];if(void 0!==r){if("vector"!==r.getSource().type||n)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),r.getFeatureState(n,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},i.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,i=function(t){return"fill-extrusion"===e._layers[t].type},n={},r=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(i(a)){n[a]=o;for(var s=0,l=t;s<l.length;s+=1){var c=l[s][a];if(c)for(var u=0,h=c;u<h.length;u+=1)r.push(h[u])}}}r.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var p=[],d=this._order.length-1;d>=0;d--){var f=this._order[d];if(i(f))for(var m=r.length-1;m>=0;m--){var g=r[m].feature;if(n[g.layer.id]<d)break;p.push(g),r.pop()}else for(var y=0,_=t;y<_.length;y+=1){var v=_[y][f];if(v)for(var b=0,x=v;b<x.length;b+=1)p.push(x[b].feature)}}return p},i.prototype.queryRenderedFeatures=function(e,i,n){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);var r={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=i.layers;o<a.length;o+=1){var s=a[o],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];r[l.source]=!0}}var c=[];for(var u in i.availableImages=this._availableImages,this.sourceCaches)i.layers&&!r[u]||c.push(B(this.sourceCaches[u],this._layers,this._serializedLayers,e,i,n));return this.placement&&c.push(function(t,e,i,n,r,o,a){for(var s={},l=o.queryRenderedSymbols(n),c=[],u=0,h=Object.keys(l).map(Number);u<h.length;u+=1)c.push(a[h[u]]);c.sort(F);for(var p=function(){var i=f[d],n=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],e,i.bucketIndex,i.sourceLayerIndex,r.filter,r.layers,r.availableImages,t);for(var o in n){var a=s[o]=s[o]||[],c=n[o];c.sort((function(t,e){var n=i.featureSortOrder;if(n){var r=n.indexOf(t.featureIndex);return n.indexOf(e.featureIndex)-r}return e.featureIndex-t.featureIndex}));for(var u=0,h=c;u<h.length;u+=1)a.push(h[u])}},d=0,f=c;d<f.length;d+=1)p();var m=function(e){s[e].forEach((function(n){var r=n.feature,o=i[t[e].source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o}))};for(var g in s)m(g);return s}(this._layers,this._serializedLayers,this.sourceCaches,e,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)},i.prototype.querySourceFeatures=function(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);var n=this.sourceCaches[e];return n?function(t,e){for(var i=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),n=[],r={},o=0;o<i.length;o++){var a=i[o],s=a.tileID.canonical.key;r[s]||(r[s]=!0,a.querySourceFeatures(n,e))}return n}(n,i):[]},i.prototype.addSourceType=function(t,e,n){return i.getSourceType(t)?n(new Error('A source type called "'+t+'" already exists.')):(i.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(e,i){void 0===i&&(i={}),this._checkLoaded();var n=this.light.getLight(),r=!1;for(var o in e)if(!t.deepEqual(e[o],n[o])){r=!0;break}if(r){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(a)}},i.prototype._validate=function(e,i,n,r,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&Ne(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:n,styleSpec:t.styleSpec},r)))},i.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},i.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},i.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},i.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},i.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},i.prototype._updatePlacement=function(e,i,n,r,o){void 0===o&&(o=!1);for(var a=!1,s=!1,l={},c=0,u=this._order;c<u.length;c+=1){var h=this._layers[u[c]];if("symbol"===h.type){if(!l[h.source]){var p=this.sourceCaches[h.source];l[h.source]=p.getRenderableIds(!0).map((function(t){return p.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var d=this.crossTileSymbolIndex.addLayer(h,l[h.source],e.center.lng);a=a||d}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===n)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Oe(e,this._order,o,i,n,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(var f=0,m=this._order;f<m.length;f+=1){var g=this._layers[m[f]];"symbol"===g.type&&this.placement.updateLayerOpacities(g,l[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},i.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();var n=this.sourceCaches[e.source];n&&n.setDependencies(e.tileID.key,e.type,e.icons)},i.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},i.prototype.getResource=function(e,i,n){return t.makeRequest(i,n)},i}(t.Evented);qe.getSourceType=function(t){return D[t]},qe.setSourceType=function(t,e){D[t]=e},qe.registerForPluginStateChange=t.registerForPluginStateChange;var Ze=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),He=yi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Ge=yi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),We=yi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),$e=yi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Ke=yi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Xe=yi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Qe=yi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ye=yi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Je=yi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ti=yi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ei=yi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),ii=yi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ni=yi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ri=yi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),oi=yi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),ai=yi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),si=yi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),li=yi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ci=yi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ui=yi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),hi=yi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),pi=yi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),di=yi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),fi=yi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),mi=yi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),gi=yi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function yi(t,e){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=e.match(/attribute ([\w]+) ([\w]+)/g),r=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(r):r,s={};return{fragmentSource:t=t.replace(i,(function(t,e,i,n,r){return s[r]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nvarying "+i+" "+n+" "+r+";\n#else\nuniform "+i+" "+n+" u_"+r+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+r+"\n    "+i+" "+n+" "+r+" = u_"+r+";\n#endif\n"})),vertexSource:e=e.replace(i,(function(t,e,i,n,r){var o="float"===n?"vec2":"vec4",a=r.match(/color/)?"color":o;return s[r]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float u_"+r+"_t;\nattribute "+i+" "+o+" a_"+r+";\nvarying "+i+" "+n+" "+r+";\n#else\nuniform "+i+" "+n+" u_"+r+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+r+" = a_"+r+";\n#else\n    "+i+" "+n+" "+r+" = u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+r+" = unpack_mix_"+a+"(a_"+r+", u_"+r+"_t);\n#else\n    "+i+" "+n+" "+r+" = u_"+r+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float u_"+r+"_t;\nattribute "+i+" "+o+" a_"+r+";\n#else\nuniform "+i+" "+n+" u_"+r+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+i+" "+n+" "+r+" = a_"+r+";\n#else\n    "+i+" "+n+" "+r+" = u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+i+" "+n+" "+r+" = unpack_mix_"+a+"(a_"+r+", u_"+r+"_t);\n#else\n    "+i+" "+n+" "+r+" = u_"+r+";\n#endif\n"})),staticAttributes:n,staticUniforms:a}}var _i=Object.freeze({__proto__:null,prelude:He,background:Ge,backgroundPattern:We,circle:$e,clippingMask:Ke,heatmap:Xe,heatmapTexture:Qe,collisionBox:Ye,collisionCircle:Je,debug:ti,fill:ei,fillOutline:ii,fillOutlinePattern:ni,fillPattern:ri,fillExtrusion:oi,fillExtrusionPattern:ai,hillshadePrepare:si,hillshade:li,line:ci,lineGradient:ui,linePattern:hi,lineSDF:pi,raster:di,symbolIcon:fi,symbolSDF:mi,symbolTextAndIcon:gi}),vi=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function bi(t){for(var e=[],i=0;i<t.length;i++)if(null!==t[i]){var n=t[i].split(" ");e.push(n.pop())}return e}vi.prototype.bind=function(t,e,i,n,r,o,a,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==n.length,c=0;!l&&c<n.length;c++)this.boundPaintVertexBuffers[c]!==n[c]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===r&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind()):this.freshBind(e,i,n,r,o,a,s)},vi.prototype.freshBind=function(t,e,i,n,r,o,a){var s,l=t.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=n,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=c.currentNumAttributes||0;for(var h=l;h<s;h++)u.disableVertexAttribArray(h)}e.enableAttributes(u,t);for(var p=0,d=i;p<d.length;p+=1)d[p].enableAttributes(u,t);o&&o.enableAttributes(u,t),a&&a.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,r);for(var f=0,m=i;f<m.length;f+=1){var g=m[f];g.bind(),g.setVertexAttribPointers(u,t,r)}o&&(o.bind(),o.setVertexAttribPointers(u,t,r)),n&&n.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,t,r)),c.currentNumAttributes=l},vi.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var xi=function(t,e,i,n,r,o){var a=t.gl;this.program=a.createProgram();for(var s=bi(i.staticAttributes),l=n?n.getBinderAttributes():[],c=s.concat(l),u=i.staticUniforms?bi(i.staticUniforms):[],h=n?n.getBinderUniforms():[],p=[],d=0,f=u.concat(h);d<f.length;d+=1){var m=f[d];p.indexOf(m)<0&&p.push(m)}var g=n?n.defines():[];o&&g.push("#define OVERDRAW_INSPECTOR;");var y=g.concat(He.fragmentSource,i.fragmentSource).join("\n"),_=g.concat(He.vertexSource,i.vertexSource).join("\n"),v=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(v,y),a.compileShader(v),a.attachShader(this.program,v);var b=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(b,_),a.compileShader(b),a.attachShader(this.program,b),this.attributes={};var x={};this.numAttributes=c.length;for(var w=0;w<this.numAttributes;w++)c[w]&&(a.bindAttribLocation(this.program,w,c[w]),this.attributes[c[w]]=w);a.linkProgram(this.program),a.deleteShader(b),a.deleteShader(v);for(var C=0;C<p.length;C++){var S=p[C];if(S&&!x[S]){var T=a.getUniformLocation(this.program,S);T&&(x[S]=T)}}this.fixedUniforms=r(t,x),this.binderUniforms=n?n.getUniforms(t,x):[]}}};function wi(t,e,i){var n=1/pe(i,1,e.transform.tileZoom),r=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,e.transform.tileZoom)/r,a=o*(i.tileID.canonical.x+i.tileID.wrap*r),s=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[n,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}xi.prototype.draw=function(t,e,i,n,r,o,a,s,l,c,u,h,p,d,f,m){var g,y=t.gl;if(!this.failedToCreate){for(var _ in t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(n),t.setColorMode(r),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[_].set(a[_]);d&&d.setUniforms(t,this.binderUniforms,h,{zoom:p});for(var v=(g={},g[y.LINES]=2,g[y.TRIANGLES]=3,g[y.LINE_STRIP]=1,g)[e],b=0,x=u.get();b<x.length;b+=1){var w=x[b],C=w.vaos||(w.vaos={});(C[s]||(C[s]=new vi)).bind(t,this,l,d?d.getPaintVertexBuffers():[],c,w.vertexOffset,f,m),y.drawElements(e,w.primitiveLength*v,y.UNSIGNED_SHORT,w.primitiveOffset*v*2)}}};var Ci=function(e,i,n,r){var o=i.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(l,-i.transform.angle),t.transformMat3(s,s,l);var c=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+n,u_opacity:r}},Si=function(e,i,n,r,o,a,s){return t.extend(Ci(e,i,n,r),wi(a,i,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},Ti=function(t){return{u_matrix:t}},ki=function(e,i,n,r){return t.extend(Ti(e),wi(n,i,r))},Ei=function(t,e){return{u_matrix:t,u_world:e}},Pi=function(e,i,n,r,o){return t.extend(ki(e,i,n,r),{u_world:o})},Ii=function(e,i,n,r){var o,a,s=e.transform;if("map"===r.paint.get("circle-pitch-alignment")){var l=pe(n,1,s.zoom);o=!0,a=[l,l]}else o=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(i.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},Mi=function(t,e,i){var n=pe(i,1,e.zoom),r=Math.pow(2,e.zoom-i.tileID.overscaledZ),o=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:n,u_extrude_scale:[e.pixelsToGLUnits[0]/(n*r),e.pixelsToGLUnits[1]/(n*r)],u_overscale_factor:o}},Ai=function(t,e,i){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:i.cameraToCenterDistance,u_viewport_size:[i.width,i.height]}},zi=function(t,e,i){return void 0===i&&(i=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}},Oi=function(t){return{u_matrix:t}},Li=function(t,e,i,n){return{u_matrix:t,u_extrude_scale:pe(e,1,i),u_intensity:n}},Di=function(e,i,n){var r=e.transform;return{u_matrix:Vi(e,i,n),u_ratio:1/pe(i,1,r.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Ri=function(e,i,n,r){return t.extend(Di(e,i,n),{u_image:0,u_image_height:r})},Bi=function(e,i,n,r){var o=e.transform,a=Ni(i,o);return{u_matrix:Vi(e,i,n),u_texsize:i.imageAtlasTexture.size,u_ratio:1/pe(i,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[a,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Fi=function(e,i,n,r,o){var a=e.lineAtlas,s=Ni(i,e.transform),l="round"===n.layout.get("line-cap"),c=a.getDash(r.from,l),u=a.getDash(r.to,l),h=c.width*o.fromScale,p=u.width*o.toScale;return t.extend(Di(e,i,n),{u_patternscale_a:[s/h,-c.height/2],u_patternscale_b:[s/p,-u.height/2],u_sdfgamma:a.width/(256*Math.min(h,p)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:u.y,u_mix:o.t})};function Ni(t,e){return 1/pe(t,1,e.tileZoom)}function Vi(t,e,i){return t.translatePosMatrix(e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var ji=function(t,e,i,n,r){return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(a=r.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Ui(r.paint.get("raster-hue-rotate"))};var o,a};function Ui(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}var qi,Zi=function(t,e,i,n,r,o,a,s,l,c){var u=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+n,u_texsize:c,u_texture:0}},Hi=function(e,i,n,r,o,a,s,l,c,u,h){var p=o.transform;return t.extend(Zi(e,i,n,r,o,a,s,l,c,u),{u_gamma_scale:r?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+h})},Gi=function(e,i,n,r,o,a,s,l,c,u){return t.extend(Hi(e,i,n,r,o,a,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1})},Wi=function(t,e,i){return{u_matrix:t,u_opacity:e,u_color:i}},$i=function(e,i,n,r,o,a){return t.extend(function(t,e,i,n){var r=i.imageManager.getPattern(t.from.toString()),o=i.imageManager.getPattern(t.to.toString()),a=i.imageManager.getPixelSize(),s=a.width,l=a.height,c=Math.pow(2,n.tileID.overscaledZ),u=n.tileSize*Math.pow(2,i.transform.tileZoom)/c,h=u*(n.tileID.canonical.x+n.tileID.wrap*c),p=u*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/pe(n,1,i.transform.tileZoom),u_pixel_coord_upper:[h>>16,p>>16],u_pixel_coord_lower:[65535&h,65535&p]}}(r,a,n,o),{u_matrix:e,u_opacity:i})},Ki={fillExtrusion:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_opacity:new t.Uniform1f(e,i.u_opacity)}},fillExtrusionPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,i.u_height_factor),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade),u_opacity:new t.Uniform1f(e,i.u_opacity)}},fill:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},fillPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},fillOutline:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world)}},fillOutlinePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},circle:function(e,i){return{u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,i.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},collisionBox:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,i.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,i.u_overscale_factor)}},collisionCircle:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,i.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,i.u_viewport_size)}},debug:function(e,i){return{u_color:new t.UniformColor(e,i.u_color),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_overlay:new t.Uniform1i(e,i.u_overlay),u_overlay_scale:new t.Uniform1f(e,i.u_overlay_scale)}},clippingMask:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmap:function(e,i){return{u_extrude_scale:new t.Uniform1f(e,i.u_extrude_scale),u_intensity:new t.Uniform1f(e,i.u_intensity),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmapTexture:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_opacity:new t.Uniform1f(e,i.u_opacity)}},hillshade:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_latrange:new t.Uniform2f(e,i.u_latrange),u_light:new t.Uniform2f(e,i.u_light),u_shadow:new t.UniformColor(e,i.u_shadow),u_highlight:new t.UniformColor(e,i.u_highlight),u_accent:new t.UniformColor(e,i.u_accent)}},hillshadePrepare:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_dimension:new t.Uniform2f(e,i.u_dimension),u_zoom:new t.Uniform1f(e,i.u_zoom),u_unpack:new t.Uniform4f(e,i.u_unpack)}},line:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels)}},lineGradient:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_image:new t.Uniform1i(e,i.u_image),u_image_height:new t.Uniform1f(e,i.u_image_height)}},linePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texsize:new t.Uniform2f(e,i.u_texsize),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_image:new t.Uniform1i(e,i.u_image),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},lineSDF:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,i.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,i.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,i.u_sdfgamma),u_image:new t.Uniform1i(e,i.u_image),u_tex_y_a:new t.Uniform1f(e,i.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,i.u_tex_y_b),u_mix:new t.Uniform1f(e,i.u_mix)}},raster:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,i.u_buffer_scale),u_fade_t:new t.Uniform1f(e,i.u_fade_t),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image0:new t.Uniform1i(e,i.u_image0),u_image1:new t.Uniform1i(e,i.u_image1),u_brightness_low:new t.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,i.u_spin_weights)}},symbolIcon:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture)}},symbolSDF:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}},symbolTextAndIcon:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texsize_icon:new t.Uniform2f(e,i.u_texsize_icon),u_texture:new t.Uniform1i(e,i.u_texture),u_texture_icon:new t.Uniform1i(e,i.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}},background:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_color:new t.UniformColor(e,i.u_color)}},backgroundPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image:new t.Uniform1i(e,i.u_image),u_pattern_tl_a:new t.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,i.u_pattern_br_b),u_texsize:new t.Uniform2f(e,i.u_texsize),u_mix:new t.Uniform1f(e,i.u_mix),u_pattern_size_a:new t.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,i.u_scale_a),u_scale_b:new t.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,i.u_tile_units_to_pixels)}}};function Xi(e,i,n,r,o,a,s){for(var l=e.context,c=l.gl,u=e.useProgram("collisionBox"),h=[],p=0,d=0,f=0;f<r.length;f++){var m=r[f],g=i.getTile(m),y=g.getBucket(n);if(y){var _=m.posMatrix;0===o[0]&&0===o[1]||(_=e.translatePosMatrix(m.posMatrix,g,o,a));var v=s?y.textCollisionBox:y.iconCollisionBox,b=y.collisionCircleArray;if(b.length>0){var x=t.create(),w=_;t.mul(x,y.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(x,x,y.placementViewportMatrix),h.push({circleArray:b,circleOffset:d,transform:w,invTransform:x}),d=p+=b.length/4}v&&u.draw(l,c.LINES,Tt.disabled,kt.disabled,e.colorModeForRenderPass(),Pt.disabled,Mi(_,e.transform,g),n.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,e.transform.zoom,null,null,v.collisionVertexBuffer)}}if(s&&h.length){var C=e.useProgram("collisionCircle"),S=new t.StructArrayLayout2f1f2i16;S.resize(4*p),S._trim();for(var T=0,k=0,E=h;k<E.length;k+=1)for(var P=E[k],I=0;I<P.circleArray.length/4;I++){var M=4*I,A=P.circleArray[M+0],z=P.circleArray[M+1],O=P.circleArray[M+2],L=P.circleArray[M+3];S.emplace(T++,A,z,O,L,0),S.emplace(T++,A,z,O,L,1),S.emplace(T++,A,z,O,L,2),S.emplace(T++,A,z,O,L,3)}(!qi||qi.length<2*p)&&(qi=function(e){var i=2*e,n=new t.StructArrayLayout3ui6;n.resize(i),n._trim();for(var r=0;r<i;r++){var o=6*r;n.uint16[o+0]=4*r+0,n.uint16[o+1]=4*r+1,n.uint16[o+2]=4*r+2,n.uint16[o+3]=4*r+2,n.uint16[o+4]=4*r+3,n.uint16[o+5]=4*r+0}return n}(p));for(var D=l.createIndexBuffer(qi,!0),R=l.createVertexBuffer(S,t.collisionCircleLayout.members,!0),B=0,F=h;B<F.length;B+=1){var N=F[B],V=Ai(N.transform,N.invTransform,e.transform);C.draw(l,c.TRIANGLES,Tt.disabled,kt.disabled,e.colorModeForRenderPass(),Pt.disabled,V,n.id,R,D,t.SegmentVector.simpleSegment(0,2*N.circleOffset,N.circleArray.length,N.circleArray.length/2),null,e.transform.zoom,null,null,null)}R.destroy(),D.destroy()}}var Qi=t.identity(new Float32Array(16));function Yi(e,i,n,r,o,a){var s=t.getAnchorAlignment(e),l=-(s.horizontalAlign-.5)*i,c=-(s.verticalAlign-.5)*n,u=t.evaluateVariableOffset(e,r);return new t.Point((l/o+u[0])*a,(c/o+u[1])*a)}function Ji(e,i,n,r,o,a,s,l,c,u,h){var p=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,m={};d.clear();for(var g=0;g<p.length;g++){var y=p.get(g),_=y.hidden||!y.crossTileID||e.allowVerticalPlacement&&!y.placedOrientation?null:r[y.crossTileID];if(_){var v=new t.Point(y.anchorX,y.anchorY),b=Jt(v,n?l:s),x=te(a.cameraToCenterDistance,b.signedDistanceFromCamera),w=o.evaluateSizeForFeature(e.textSizeData,u,y)*x/t.ONE_EM;n&&(w*=e.tilePixelRatio/c);for(var C=Yi(_.anchor,_.width,_.height,_.textOffset,_.textBoxScale,w),S=n?Jt(v.add(C),s).point:b.point.add(i?C.rotate(-a.angle):C),T=e.allowVerticalPlacement&&y.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,k=0;k<y.numGlyphs;k++)t.addDynamicAttributes(d,S,T);h&&y.associatedIconIndex>=0&&(m[y.associatedIconIndex]={shiftedAnchor:S,angle:T})}else ce(y.numGlyphs,d)}if(h){f.clear();for(var E=e.icon.placedSymbolArray,P=0;P<E.length;P++){var I=E.get(P);if(I.hidden)ce(I.numGlyphs,f);else{var M=m[P];if(M)for(var A=0;A<I.numGlyphs;A++)t.addDynamicAttributes(f,M.shiftedAnchor,M.angle);else ce(I.numGlyphs,f)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function tn(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function en(e,i,n,r,o,a,s,l,c,u,h,p){for(var d=e.context,f=d.gl,m=e.transform,g="map"===l,y="map"===c,_=g&&"point"!==n.layout.get("symbol-placement"),v=g&&!y&&!_,b=void 0!==n.layout.get("symbol-sort-key").constantOr(1),x=!1,w=e.depthModeForSublayer(0,Tt.ReadOnly),C=n.layout.get("text-variable-anchor"),S=[],T=0,k=r;T<k.length;T+=1){var E=k[T],P=i.getTile(E),I=P.getBucket(n);if(I){var M=o?I.text:I.icon;if(M&&M.segments.get().length){var A=M.programConfigurations.get(n.id),z=o||I.sdfIcons,O=o?I.textSizeData:I.iconSizeData,L=y||0!==m.pitch,D=e.useProgram(tn(z,o,I),A),R=t.evaluateSizeForZoom(O,m.zoom),B=void 0,F=[0,0],N=void 0,V=void 0,j=null,U=void 0;if(o)N=P.glyphAtlasTexture,V=f.LINEAR,B=P.glyphAtlasTexture.size,I.iconsInText&&(F=P.imageAtlasTexture.size,j=P.imageAtlasTexture,U=L||e.options.rotating||e.options.zooming||"composite"===O.kind||"camera"===O.kind?f.LINEAR:f.NEAREST);else{var q=1!==n.layout.get("icon-size").constantOr(0)||I.iconsNeedLinear;N=P.imageAtlasTexture,V=z||e.options.rotating||e.options.zooming||q||L?f.LINEAR:f.NEAREST,B=P.imageAtlasTexture.size}var Z=pe(P,1,e.transform.zoom),H=Qt(E.posMatrix,y,g,e.transform,Z),G=Yt(E.posMatrix,y,g,e.transform,Z),W=C&&I.hasTextData(),$="none"!==n.layout.get("icon-text-fit")&&W&&I.hasIconData();_&&ie(I,E.posMatrix,e,o,H,G,y,u);var K=e.translatePosMatrix(E.posMatrix,P,a,s),X=_||o&&C||$?Qi:H,Q=e.translatePosMatrix(G,P,a,s,!0),Y=z&&0!==n.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),J={program:D,buffers:M,uniformValues:z?I.iconsInText?Gi(O.kind,R,v,y,e,K,X,Q,B,F):Hi(O.kind,R,v,y,e,K,X,Q,o,B,!0):Zi(O.kind,R,v,y,e,K,X,Q,o,B),atlasTexture:N,atlasTextureIcon:j,atlasInterpolation:V,atlasInterpolationIcon:U,isSDF:z,hasHalo:Y};if(b&&I.canOverlap){x=!0;for(var tt=0,et=M.segments.get();tt<et.length;tt+=1){var it=et[tt];S.push({segments:new t.SegmentVector([it]),sortKey:it.sortKey,state:J})}}else S.push({segments:M.segments,sortKey:0,state:J})}}}x&&S.sort((function(t,e){return t.sortKey-e.sortKey}));for(var nt=0,rt=S;nt<rt.length;nt+=1){var ot=rt[nt],at=ot.state;if(d.activeTexture.set(f.TEXTURE0),at.atlasTexture.bind(at.atlasInterpolation,f.CLAMP_TO_EDGE),at.atlasTextureIcon&&(d.activeTexture.set(f.TEXTURE1),at.atlasTextureIcon&&at.atlasTextureIcon.bind(at.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),at.isSDF){var st=at.uniformValues;at.hasHalo&&(st.u_is_halo=1,nn(at.buffers,ot.segments,n,e,at.program,w,h,p,st)),st.u_is_halo=0}nn(at.buffers,ot.segments,n,e,at.program,w,h,p,at.uniformValues)}}function nn(t,e,i,n,r,o,a,s,l){var c=n.context;r.draw(c,c.gl.TRIANGLES,o,a,s,Pt.disabled,l,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,n.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function rn(t,e,i,n,r,o,a){var s,l,c,u,h,p=t.context.gl,d=i.paint.get("fill-pattern"),f=d&&d.constantOr(1),m=i.getCrossfadeParameters();a?(l=f&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(l=f?"fillPattern":"fill",s=p.TRIANGLES);for(var g=0,y=n;g<y.length;g+=1){var _=y[g],v=e.getTile(_);if(!f||v.patternsLoaded()){var b=v.getBucket(i);if(b){var x=b.programConfigurations.get(i.id),w=t.useProgram(l,x);f&&(t.context.activeTexture.set(p.TEXTURE0),v.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),x.updatePaintBuffers(m));var C=d.constantOr(null);if(C&&v.imageAtlas){var S=v.imageAtlas,T=S.patternPositions[C.to.toString()],k=S.patternPositions[C.from.toString()];T&&k&&x.setConstantPatternPositions(T,k)}var E=t.translatePosMatrix(_.posMatrix,v,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(a){u=b.indexBuffer2,h=b.segments2;var P=[p.drawingBufferWidth,p.drawingBufferHeight];c="fillOutlinePattern"===l&&f?Pi(E,t,m,v,P):Ei(E,P)}else u=b.indexBuffer,h=b.segments,c=f?ki(E,t,m,v):Ti(E);w.draw(t.context,s,r,t.stencilModeForClipping(_),o,Pt.disabled,c,i.id,b.layoutVertexBuffer,u,h,i.paint,t.transform.zoom,x)}}}}function on(t,e,i,n,r,o,a){for(var s=t.context,l=s.gl,c=i.paint.get("fill-extrusion-pattern"),u=c.constantOr(1),h=i.getCrossfadeParameters(),p=i.paint.get("fill-extrusion-opacity"),d=0,f=n;d<f.length;d+=1){var m=f[d],g=e.getTile(m),y=g.getBucket(i);if(y){var _=y.programConfigurations.get(i.id),v=t.useProgram(u?"fillExtrusionPattern":"fillExtrusion",_);u&&(t.context.activeTexture.set(l.TEXTURE0),g.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),_.updatePaintBuffers(h));var b=c.constantOr(null);if(b&&g.imageAtlas){var x=g.imageAtlas,w=x.patternPositions[b.to.toString()],C=x.patternPositions[b.from.toString()];w&&C&&_.setConstantPatternPositions(w,C)}var S=t.translatePosMatrix(m.posMatrix,g,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),T=i.paint.get("fill-extrusion-vertical-gradient"),k=u?Si(S,t,T,p,m,h,g):Ci(S,t,T,p);v.draw(s,s.gl.TRIANGLES,r,o,a,Pt.backCCW,k,i.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,i.paint,t.transform.zoom,_)}}}function an(e,i,n,r,o,a){var s=e.context,l=s.gl,c=i.fbo;if(c){var u=e.useProgram("hillshade");s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get());var h=function(e,i,n){var r=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color"),s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var l,c,u,h=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(i.tileID.toUnwrapped(),h),u_image:0,u_latrange:(l=i.tileID,c=Math.pow(2,l.canonical.z),u=l.canonical.y,[new t.MercatorCoordinate(0,u/c).toLngLat().lat,new t.MercatorCoordinate(0,(u+1)/c).toLngLat().lat]),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:o,u_accent:a}}(e,i,n);u.draw(s,l.TRIANGLES,r,o,a,Pt.disabled,h,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function sn(e,i,n,r,o,a){var s=e.context,l=s.gl,c=i.dem;if(c&&c.data){var u=c.dim,h=c.stride,p=c.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(h),i.demTexture){var d=i.demTexture;d.update(p,{premultiply:!1}),d.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else i.demTexture=new t.Texture(s,p,l.RGBA,{premultiply:!1}),i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);var f=i.fbo;if(!f){var m=new t.Texture(s,{width:u,height:u,data:null},l.RGBA);m.bind(l.LINEAR,l.CLAMP_TO_EDGE),(f=i.fbo=s.createFramebuffer(u,u,!0)).colorAttachment.set(m.texture)}s.bindFramebuffer.set(f.framebuffer),s.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,r,o,a,Pt.disabled,function(e,i){var n=i.stride,r=t.create();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[n,n],u_zoom:e.overscaledZ,u_unpack:i.getUnpackVector()}}(i.tileID,c),n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function ln(e,i,n,r,o){var a=r.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),l=(s-e.timeAdded)/a,c=i?(s-i.timeAdded)/a:-1,u=n.getSource(),h=o.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),p=!i||Math.abs(i.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),d=p&&e.refreshedUponExpiration?1:t.clamp(p?l:1-c,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var cn=new t.Color(1,0,0,1),un=new t.Color(0,1,0,1),hn=new t.Color(0,0,1,1),pn=new t.Color(1,0,1,1),dn=new t.Color(0,1,1,1);function fn(t,e,i,n){gn(t,0,e+i/2,t.transform.width,i,n)}function mn(t,e,i,n){gn(t,e-i/2,0,i,t.transform.height,n)}function gn(e,i,n,r,o,a){var s=e.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*t.browser.devicePixelRatio,n*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio,o*t.browser.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}function yn(e,i,n){var r=e.context,o=r.gl,a=n.posMatrix,s=e.useProgram("debug"),l=Tt.disabled,c=kt.disabled,u=e.colorModeForRenderPass();r.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(r,o.LINE_STRIP,l,c,u,Pt.disabled,zi(a,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var h=i.getTileByID(n.key).latestRawTileData,p=Math.floor((h&&h.byteLength||0)/1024),d=i.getTile(n).tileSize,f=512/Math.min(d,512)*(n.overscaledZ/e.transform.zoom)*.5,m=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(m+=" => "+n.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var i=t.debugOverlayCanvas,n=t.context.gl,r=t.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,i.width,i.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(e,5,5),r.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(e,m+" "+p+"kb"),s.draw(r,o.TRIANGLES,l,c,Et.alphaBlended,Pt.disabled,zi(a,t.Color.transparent,f),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var _n={symbol:function(e,i,n,r,o){if("translucent"===e.renderPass){var a=kt.disabled,s=e.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(e,i,n,r,o,a,s){for(var l=i.transform,c="map"===o,u="map"===a,h=0,p=e;h<p.length;h+=1){var d=p[h],f=r.getTile(d),m=f.getBucket(n);if(m&&m.text&&m.text.segments.get().length){var g=t.evaluateSizeForZoom(m.textSizeData,l.zoom),y=pe(f,1,i.transform.zoom),_=Qt(d.posMatrix,u,c,i.transform,y),v="none"!==n.layout.get("icon-text-fit")&&m.hasIconData();if(g){var b=Math.pow(2,l.zoom-f.tileID.overscaledZ);Ji(m,c,u,s,t.symbolSize,l,_,d.posMatrix,b,g,v)}}}}(r,e,n,i,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),o),0!==n.paint.get("icon-opacity").constantOr(1)&&en(e,i,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),a,s),0!==n.paint.get("text-opacity").constantOr(1)&&en(e,i,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),a,s),i.map.showCollisionBoxes&&(Xi(e,i,n,r,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),Xi(e,i,n,r,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))}},circle:function(e,i,n,r){if("translucent"===e.renderPass){var o=n.paint.get("circle-opacity"),a=n.paint.get("circle-stroke-width"),s=n.paint.get("circle-stroke-opacity"),l=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var c=e.context,u=c.gl,h=e.depthModeForSublayer(0,Tt.ReadOnly),p=kt.disabled,d=e.colorModeForRenderPass(),f=[],m=0;m<r.length;m++){var g=r[m],y=i.getTile(g),_=y.getBucket(n);if(_){var v=_.programConfigurations.get(n.id),b={programConfiguration:v,program:e.useProgram("circle",v),layoutVertexBuffer:_.layoutVertexBuffer,indexBuffer:_.indexBuffer,uniformValues:Ii(e,g,y,n)};if(l)for(var x=0,w=_.segments.get();x<w.length;x+=1){var C=w[x];f.push({segments:new t.SegmentVector([C]),sortKey:C.sortKey,state:b})}else f.push({segments:_.segments,sortKey:0,state:b})}}l&&f.sort((function(t,e){return t.sortKey-e.sortKey}));for(var S=0,T=f;S<T.length;S+=1){var k=T[S],E=k.state;E.program.draw(c,u.TRIANGLES,h,p,d,Pt.disabled,E.uniformValues,n.id,E.layoutVertexBuffer,E.indexBuffer,k.segments,n.paint,e.transform.zoom,E.programConfiguration)}}}},heatmap:function(e,i,n,r){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=kt.disabled,l=new Et([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){var n=t.gl;t.activeTexture.set(n.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var r=i.heatmapFbo;if(r)n.bindTexture(n.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{var o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),r=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,i,n){var r=t.gl;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.width/4,e.height/4,0,r.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE,null),n.colorAttachment.set(i)}(t,e,o,r)}}(o,e,n),o.clear({color:t.Color.transparent});for(var c=0;c<r.length;c++){var u=r[c];if(!i.hasRenderableParent(u)){var h=i.getTile(u),p=h.getBucket(n);if(p){var d=p.programConfigurations.get(n.id);e.useProgram("heatmap",d).draw(o,a.TRIANGLES,Tt.disabled,s,l,Pt.disabled,Li(u.posMatrix,h,e.transform.zoom,n.paint.get("heatmap-intensity")),n.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,n.paint,e.transform.zoom,d)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){var n=e.context,r=n.gl,o=i.heatmapFbo;if(o){n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),n.activeTexture.set(r.TEXTURE1);var a=i.colorRampTexture;a||(a=i.colorRampTexture=new t.Texture(n,i.colorRamp,r.RGBA)),a.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,r.TRIANGLES,Tt.disabled,kt.disabled,e.colorModeForRenderPass(),Pt.disabled,function(e,i,n,r){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}}(e,i),i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom)}}(e,n))},line:function(e,i,n,r){if("translucent"===e.renderPass){var o=n.paint.get("line-opacity"),a=n.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=e.depthModeForSublayer(0,Tt.ReadOnly),l=e.colorModeForRenderPass(),c=n.paint.get("line-dasharray"),u=n.paint.get("line-pattern"),h=u.constantOr(1),p=n.paint.get("line-gradient"),d=n.getCrossfadeParameters(),f=h?"linePattern":c?"lineSDF":p?"lineGradient":"line",m=e.context,g=m.gl,y=!0,_=0,v=r;_<v.length;_+=1){var b=v[_],x=i.getTile(b);if(!h||x.patternsLoaded()){var w=x.getBucket(n);if(w){var C=w.programConfigurations.get(n.id),S=e.context.program.get(),T=e.useProgram(f,C),k=y||T.program!==S,E=u.constantOr(null);if(E&&x.imageAtlas){var P=x.imageAtlas,I=P.patternPositions[E.to.toString()],M=P.patternPositions[E.from.toString()];I&&M&&C.setConstantPatternPositions(I,M)}var A=h?Bi(e,x,n,d):c?Fi(e,x,n,c,d):p?Ri(e,x,n,w.lineClipsArray.length):Di(e,x,n);if(h)m.activeTexture.set(g.TEXTURE0),x.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),C.updatePaintBuffers(d);else if(c&&(k||e.lineAtlas.dirty))m.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(m);else if(p){var z=w.gradients[n.id],O=z.texture;if(n.gradientVersion!==z.version){var L=256;if(n.stepInterpolant){var D=i.getSource().maxzoom,R=b.canonical.z===D?Math.ceil(1<<e.transform.maxZoom-b.canonical.z):1;L=t.clamp(t.nextPowerOfTwo(w.maxLineLength/t.EXTENT*1024*R),256,m.maxTextureSize)}z.gradient=t.renderColorRamp({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:L,image:z.gradient||void 0,clips:w.lineClipsArray}),z.texture?z.texture.update(z.gradient):z.texture=new t.Texture(m,z.gradient,g.RGBA),z.version=n.gradientVersion,O=z.texture}m.activeTexture.set(g.TEXTURE0),O.bind(n.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}T.draw(m,g.TRIANGLES,s,e.stencilModeForClipping(b),l,Pt.disabled,A,n.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,n.paint,e.transform.zoom,C,w.layoutVertexBuffer2),y=!1}}}}},fill:function(e,i,n,r){var o=n.paint.get("fill-color"),a=n.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){var u=e.depthModeForSublayer(1,"opaque"===e.renderPass?Tt.ReadWrite:Tt.ReadOnly);rn(e,i,n,r,u,s,!1)}if("translucent"===e.renderPass&&n.paint.get("fill-antialias")){var h=e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Tt.ReadOnly);rn(e,i,n,r,h,s,!0)}}},"fill-extrusion":function(t,e,i,n){var r=i.paint.get("fill-extrusion-opacity");if(0!==r&&"translucent"===t.renderPass){var o=new Tt(t.context.gl.LEQUAL,Tt.ReadWrite,t.depthRangeFor3D);if(1!==r||i.paint.get("fill-extrusion-pattern").constantOr(1))on(t,e,i,n,o,kt.disabled,Et.disabled),on(t,e,i,n,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();on(t,e,i,n,o,kt.disabled,a)}}},hillshade:function(t,e,i,n){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var r=t.context,o=t.depthModeForSublayer(0,Tt.ReadOnly),a=t.colorModeForRenderPass(),s="translucent"===t.renderPass?t.stencilConfigForOverlap(n):[{},n],l=s[0],c=0,u=s[1];c<u.length;c+=1){var h=u[c],p=e.getTile(h);p.needsHillshadePrepare&&"offscreen"===t.renderPass?sn(t,p,i,o,kt.disabled,a):"translucent"===t.renderPass&&an(t,p,i,o,l[h.overscaledZ],a)}r.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,i,n){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity")&&n.length)for(var r=t.context,o=r.gl,a=e.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),c=a instanceof z?[{},n]:t.stencilConfigForOverlap(n),u=c[0],h=c[1],p=h[h.length-1].overscaledZ,d=!t.options.moving,f=0,m=h;f<m.length;f+=1){var g=m[f],y=t.depthModeForSublayer(g.overscaledZ-p,1===i.paint.get("raster-opacity")?Tt.ReadWrite:Tt.ReadOnly,o.LESS),_=e.getTile(g),v=t.transform.calculatePosMatrix(g.toUnwrapped(),d);_.registerFadeDuration(i.paint.get("raster-fade-duration"));var b=e.findLoadedParent(g,0),x=ln(_,b,e,i,t.transform),w=void 0,C=void 0,S="nearest"===i.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;r.activeTexture.set(o.TEXTURE0),_.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(o.TEXTURE1),b?(b.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,b.tileID.overscaledZ-_.tileID.overscaledZ),C=[_.tileID.canonical.x*w%1,_.tileID.canonical.y*w%1]):_.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var T=ji(v,C||[0,0],w||1,x,i);a instanceof z?s.draw(r,o.TRIANGLES,y,kt.disabled,l,Pt.disabled,T,i.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(r,o.TRIANGLES,y,u[g.overscaledZ],l,Pt.disabled,T,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i){var n=i.paint.get("background-color"),r=i.paint.get("background-opacity");if(0!==r){var o=t.context,a=o.gl,s=t.transform,l=s.tileSize,c=i.paint.get("background-pattern");if(!t.isPatternMissing(c)){var u=!c&&1===n.a&&1===r&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===u){var h=kt.disabled,p=t.depthModeForSublayer(0,"opaque"===u?Tt.ReadWrite:Tt.ReadOnly),d=t.colorModeForRenderPass(),f=t.useProgram(c?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:l});c&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var g=i.getCrossfadeParameters(),y=0,_=m;y<_.length;y+=1){var v=_[y],b=t.transform.calculatePosMatrix(v.toUnwrapped()),x=c?$i(b,r,t,c,{tileID:v,tileSize:l},g):Wi(b,r,n);f.draw(o,a.TRIANGLES,p,h,d,Pt.disabled,x,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,i){for(var n=0;n<i.length;n++)yn(t,e,i[n])},custom:function(t,e,i){var n=t.context,r=i.implementation;if("offscreen"===t.renderPass){var o=r.prerender;o&&(t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),o.call(r,n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),n.setStencilMode(kt.disabled);var a="3d"===r.renderingMode?new Tt(t.context.gl.LEQUAL,Tt.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Tt.ReadOnly);n.setDepthMode(a),r.render(n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState(),n.bindFramebuffer.set(null)}}},vn=function(t,e){this.context=new It(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Mt.maxUnderzooming+Mt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fe,this.gpuTimers={}};vn.prototype.resize=function(e,i){if(this.width=e*t.browser.devicePixelRatio,this.height=i*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var n=0,r=this.style._order;n<r.length;n+=1)this.style._layers[r[n]].resize()},vn.prototype.setup=function(){var e=this.context,i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(i,Ze.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(n,Ze.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,A.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Ze.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var l=this.context.gl;this.stencilClearMode=new kt({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},vn.prototype.clearStencil=function(){var e=this.context,i=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var n=t.create();t.ortho(n,0,this.width,this.height,0,0,1),t.scale(n,n,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,i.TRIANGLES,Tt.disabled,this.stencilClearMode,Et.disabled,Pt.disabled,Oi(n),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},vn.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var i=this.context,n=i.gl;this.nextStencilID+e.length>256&&this.clearStencil(),i.setColorMode(Et.disabled),i.setDepthMode(Tt.disabled);var r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;r.draw(i,n.TRIANGLES,Tt.disabled,new kt({func:n.ALWAYS,mask:0},l,255,n.KEEP,n.KEEP,n.REPLACE),Et.disabled,Pt.disabled,Oi(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},vn.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new kt({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},vn.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new kt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},vn.prototype.stencilConfigForOverlap=function(t){var e,i=this.context.gl,n=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),r=n[n.length-1].overscaledZ,o=n[0].overscaledZ-r+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+r]=new kt({func:i.GEQUAL,mask:255},s+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=o,[a,n]}return[(e={},e[r]=kt.disabled,e),n]},vn.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Et([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Et.unblended:Et.alphaBlended},vn.prototype.depthModeForSublayer=function(t,e,i){if(!this.opaquePassEnabledForLayer())return Tt.disabled;var n=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Tt(i||this.context.gl.LEQUAL,e,[n,n])},vn.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},vn.prototype.render=function(e,i){var n=this;this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var r=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var l,c,u={},h={},p={};for(var d in o){var f=o[d];u[d]=f.getVisibleCoordinates(),h[d]=u[d].slice().reverse(),p[d]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var m=0;m<r.length;m++)if(this.style._layers[r[m]].is3D()){this.opaquePassCutoff=m;break}this.renderPass="offscreen";for(var g=0,y=r;g<y.length;g+=1){var _=this.style._layers[y[g]];if(_.hasOffscreenPass()&&!_.isHidden(this.transform.zoom)){var v=h[_.source];("custom"===_.type||v.length)&&this.renderLayer(this,o[_.source],_,v)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var b=this.style._layers[r[this.currentLayer]],x=o[b.source],w=u[b.source];this._renderTileClippingMasks(b,w),this.renderLayer(this,x,b,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){var C=this.style._layers[r[this.currentLayer]],S=o[C.source],T=("symbol"===C.type?p:h)[C.source];this._renderTileClippingMasks(C,u[C.source]),this.renderLayer(this,S,C,T)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach((function(t){t.source&&!t.isHidden(n.transform.zoom)&&(t.source!==(c&&c.id)&&(c=n.style.sourceCaches[t.source]),(!l||l.getSource().maxzoom<c.getSource().maxzoom)&&(l=c))})),l&&_n.debug(this,l,l.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;fn(t,t.transform.height-(e.top||0),3,cn),fn(t,e.bottom||0,3,un),mn(t,e.left||0,3,hn),mn(t,t.transform.width-(e.right||0),3,pn);var i=t.transform.centerPoint;!function(t,e,i,n){gn(t,e-1,i-10,2,20,n),gn(t,e-10,i-1,20,2,n)}(t,i.x,t.transform.height-i.y,dn)}(this),this.context.setDefault()},vn.prototype.renderLayer=function(t,e,i,n){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||n.length)&&(this.id=i.id,this.gpuTimingStart(i),_n[i.type](t,e,i,n,this.style.placement.variableOffsets),this.gpuTimingEnd())},vn.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),i.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}},vn.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},vn.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},vn.prototype.queryGpuTimers=function(t){var e={};for(var i in t){var n=t[i],r=this.context.extTimerQuery,o=r.getQueryObjectEXT(n.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n.query),e[i]=o}return e},vn.prototype.translatePosMatrix=function(e,i,n,r,o){if(!n[0]&&!n[1])return e;var a=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){var s=Math.sin(a),l=Math.cos(a);n=[n[0]*l-n[1]*s,n[0]*s+n[1]*l]}var c=[o?n[0]:pe(i,n[0],this.transform.zoom),o?n[1]:pe(i,n[1],this.transform.zoom),0],u=new Float32Array(16);return t.translate(u,e,c),u},vn.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},vn.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},vn.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i},vn.prototype.useProgram=function(t,e){this.cache=this.cache||{};var i=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new xi(this.context,t,_i[t],e,Ki[t],this._showOverdrawInspector)),this.cache[i]},vn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},vn.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},vn.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},vn.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var bn=function(t,e){this.points=t,this.planes=e};bn.fromInvProjectionMatrix=function(e,i,n){var r=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(i){return t.transformMat4([],i,e)})).map((function(e){return t.scale$1([],e,1/e[3]/i*r)})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var i=t.sub([],o[e[0]],o[e[1]]),n=t.sub([],o[e[2]],o[e[1]]),r=t.normalize([],t.cross([],i,n)),a=-t.dot(r,o[e[1]]);return r.concat(a)}));return new bn(o,a)};var xn=function(e,i){this.min=e,this.max=i,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};xn.prototype.quadrant=function(e){for(var i=[e%2==0,e<2],n=t.clone$2(this.min),r=t.clone$2(this.max),o=0;o<i.length;o++)n[o]=i[o]?this.min[o]:this.center[o],r[o]=i[o]?this.center[o]:this.max[o];return r[2]=this.max[2],new xn(n,r)},xn.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},xn.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},xn.prototype.intersects=function(e){for(var i=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],n=!0,r=0;r<e.planes.length;r++){for(var o=e.planes[r],a=0,s=0;s<i.length;s++)a+=t.dot$1(o,i[s])>=0;if(0===a)return 0;a!==i.length&&(n=!1)}if(n)return 2;for(var l=0;l<3;l++){for(var c=Number.MAX_VALUE,u=-Number.MAX_VALUE,h=0;h<e.points.length;h++){var p=e.points[h][l]-this.min[l];c=Math.min(c,p),u=Math.max(u,p)}if(u<0||c>this.max[l]-this.min[l])return 0}return 1};var wn=function(t,e,i,n){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=n};wn.prototype.interpolate=function(e,i,n){return null!=i.top&&null!=e.top&&(this.top=t.number(e.top,i.top,n)),null!=i.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,i.bottom,n)),null!=i.left&&null!=e.left&&(this.left=t.number(e.left,i.left,n)),null!=i.right&&null!=e.right&&(this.right=t.number(e.right,i.right,n)),this},wn.prototype.getCenter=function(e,i){var n=t.clamp((this.left+e-this.right)/2,0,e),r=t.clamp((this.top+i-this.bottom)/2,0,i);return new t.Point(n,r)},wn.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},wn.prototype.clone=function(){return new wn(this.top,this.bottom,this.left,this.right)},wn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Cn=function(e,i,n,r,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=i||22,this._minPitch=null==n?0:n,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new wn,this._posMatrixCache={},this._alignedPosMatrixCache={}},Sn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Cn.prototype.clone=function(){var t=new Cn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},Sn.minZoom.get=function(){return this._minZoom},Sn.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Sn.maxZoom.get=function(){return this._maxZoom},Sn.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Sn.minPitch.get=function(){return this._minPitch},Sn.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},Sn.maxPitch.get=function(){return this._maxPitch},Sn.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},Sn.renderWorldCopies.get=function(){return this._renderWorldCopies},Sn.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Sn.worldSize.get=function(){return this.tileSize*this.scale},Sn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Sn.size.get=function(){return new t.Point(this.width,this.height)},Sn.bearing.get=function(){return-this.angle/Math.PI*180},Sn.bearing.set=function(e){var i=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Sn.pitch.get=function(){return this._pitch/Math.PI*180},Sn.pitch.set=function(e){var i=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())},Sn.fov.get=function(){return this._fov/Math.PI*180},Sn.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Sn.zoom.get=function(){return this._zoom},Sn.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Sn.center.get=function(){return this._center},Sn.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Sn.padding.get=function(){return this._edgeInsets.toJSON()},Sn.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},Sn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Cn.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},Cn.prototype.interpolatePadding=function(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()},Cn.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},Cn.prototype.getVisibleUnwrappedCoordinates=function(e){var i=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var n=this.pointCoordinate(new t.Point(0,0)),r=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(n.x,r.x,o.x,a.x)),l=Math.floor(Math.max(n.x,r.x,o.x,a.x)),c=s-1;c<=l+1;c++)0!==c&&i.push(new t.UnwrappedTileID(c,e));return i},Cn.prototype.coveringTiles=function(e){var i=this.coveringZoomLevel(e),n=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);var r=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,i),a=[o*r.x,o*r.y,0],s=bn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),l=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(l=i);var c=function(t){return{aabb:new xn([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},u=[],h=[],p=i,d=e.reparseOverscaled?n:i;if(this._renderWorldCopies)for(var f=1;f<=3;f++)u.push(c(-f)),u.push(c(f));for(u.push(c(0));u.length>0;){var m=u.pop(),g=m.x,y=m.y,_=m.fullyVisible;if(!_){var v=m.aabb.intersects(s);if(0===v)continue;_=2===v}var b=m.aabb.distanceX(a),x=m.aabb.distanceY(a),w=Math.max(Math.abs(b),Math.abs(x));if(m.zoom===p||w>3+(1<<p-m.zoom)-2&&m.zoom>=l)h.push({tileID:new t.OverscaledTileID(m.zoom===p?d:m.zoom,m.wrap,m.zoom,g,y),distanceSq:t.sqrLen([a[0]-.5-g,a[1]-.5-y])});else for(var C=0;C<4;C++){var S=(g<<1)+C%2,T=(y<<1)+(C>>1);u.push({aabb:m.aabb.quadrant(C),zoom:m.zoom+1,x:S,y:T,wrap:m.wrap,fullyVisible:_})}}return h.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},Cn.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Sn.unmodified.get=function(){return this._unmodified},Cn.prototype.zoomScale=function(t){return Math.pow(2,t)},Cn.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Cn.prototype.project=function(e){var i=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(i)*this.worldSize)},Cn.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},Sn.point.get=function(){return this.project(this.center)},Cn.prototype.setLocationAtPoint=function(e,i){var n=this.pointCoordinate(i),r=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(n.x-r.x),o.y-(n.y-r.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},Cn.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Cn.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Cn.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},Cn.prototype.coordinateLocation=function(t){return t.toLngLat()},Cn.prototype.pointCoordinate=function(e){var i=[e.x,e.y,0,1],n=[e.x,e.y,1,1];t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(n,n,this.pixelMatrixInverse);var r=i[3],o=n[3],a=i[1]/r,s=n[1]/o,l=i[2]/r,c=n[2]/o,u=l===c?0:(0-l)/(c-l);return new t.MercatorCoordinate(t.number(i[0]/r,n[0]/o,u)/this.worldSize,t.number(a,s,u)/this.worldSize)},Cn.prototype.coordinatePoint=function(e){var i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix),new t.Point(i[0]/i[3],i[1]/i[3])},Cn.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Cn.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Cn.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Cn.prototype.calculatePosMatrix=function(e,i){void 0===i&&(i=!1);var n=e.key,r=i?this._alignedPosMatrixCache:this._posMatrixCache;if(r[n])return r[n];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*a,o.y*a,0]),t.scale(l,l,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),r[n]=new Float32Array(l),r[n]},Cn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Cn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,i,n,r,o=-90,a=90,s=-180,l=180,c=this.size,u=this._unmodified;if(this.latRange){var h=this.latRange;o=t.mercatorYfromLat(h[1])*this.worldSize,e=(a=t.mercatorYfromLat(h[0])*this.worldSize)-o<c.y?c.y/(a-o):0}if(this.lngRange){var p=this.lngRange;s=t.mercatorXfromLng(p[0])*this.worldSize,i=(l=t.mercatorXfromLng(p[1])*this.worldSize)-s<c.x?c.x/(l-s):0}var d=this.point,f=Math.max(i||0,e||0);if(f)return this.center=this.unproject(new t.Point(i?(l+s)/2:d.x,e?(a+o)/2:d.y)),this.zoom+=this.scaleZoom(f),this._unmodified=u,void(this._constraining=!1);if(this.latRange){var m=d.y,g=c.y/2;m-g<o&&(r=o+g),m+g>a&&(r=a-g)}if(this.lngRange){var y=d.x,_=c.x/2;y-_<s&&(n=s+_),y+_>l&&(n=l-_)}void 0===n&&void 0===r||(this.center=this.unproject(new t.Point(void 0!==n?n:d.x,void 0!==r?r:d.y))),this._unmodified=u,this._constraining=!1}},Cn.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var i=Math.PI/2+this._pitch,n=this._fov*(.5+e.y/this.height),r=Math.sin(n)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-i-n,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,l=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),c=this.height/50,u=new Float64Array(16);t.perspective(u,this._fov,this.width/this.height,c,l),u[8]=2*-e.x/this.width,u[9]=2*e.y/this.height,t.scale(u,u,[1,-1,1]),t.translate(u,u,[0,0,-this.cameraToCenterDistance]),t.rotateX(u,u,this._pitch),t.rotateZ(u,u,this.angle),t.translate(u,u,[-a,-s,0]),this.mercatorMatrix=t.scale([],u,[this.worldSize,this.worldSize,this.worldSize]),t.scale(u,u,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=u,this.invProjMatrix=t.invert([],this.projMatrix);var h=this.width%2/2,p=this.height%2/2,d=Math.cos(this.angle),f=Math.sin(this.angle),m=a-Math.round(a)+d*h+f*p,g=s-Math.round(s)+d*p+f*h,y=new Float64Array(u);if(t.translate(y,y,[m>.5?m-1:m,g>.5?g-1:g,0]),this.alignedProjMatrix=y,u=t.create(),t.scale(u,u,[this.width/2,-this.height/2,1]),t.translate(u,u,[1,-1,0]),this.labelPlaneMatrix=u,u=t.create(),t.scale(u,u,[1,-1,1]),t.translate(u,u,[-1,-1,0]),t.scale(u,u,[2/this.width,2/this.height,1]),this.glCoordMatrix=u,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(u=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Cn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance},Cn.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},Cn.prototype.getCameraQueryGeometry=function(e){var i=this.getCameraPoint();if(1===e.length)return[e[0],i];for(var n=i.x,r=i.y,o=i.x,a=i.y,s=0,l=e;s<l.length;s+=1){var c=l[s];n=Math.min(n,c.x),r=Math.min(r,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}return[new t.Point(n,r),new t.Point(o,r),new t.Point(o,a),new t.Point(n,a),new t.Point(n,r)]},Object.defineProperties(Cn.prototype,Sn);var Tn=function(e){var i,n,r,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(i=this._updateHashUnthrottled.bind(this),n=!1,r=null,o=function(){r=null,n&&(i(),r=setTimeout(o,300),n=!1)},function(){return n=!0,r||o(),r})};Tn.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Tn.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Tn.prototype.getHashString=function(e){var i=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,r),a=Math.round(i.lng*o)/o,s=Math.round(i.lat*o)/o,l=this._map.getBearing(),c=this._map.getPitch(),u="";if(u+=e?"/"+a+"/"+s+"/"+n:n+"/"+s+"/"+a,(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+="/"+Math.round(c)),this._hashName){var h=this._hashName,p=!1,d=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===h?(p=!0,e+"="+u):t})).filter((function(t){return t}));return p||d.push(h+"="+u),"#"+d.join("&")}return"#"+u},Tn.prototype._getCurrentHash=function(){var e,i=this,n=t.window.location.hash.replace("#","");return this._hashName?(n.split("&").map((function(t){return t.split("=")})).forEach((function(t){t[0]===i._hashName&&(e=t)})),(e&&e[1]||"").split("/")):n.split("/")},Tn.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},Tn.prototype._updateHashUnthrottled=function(){var e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());try{t.window.history.replaceState(t.window.history.state,null,e)}catch(t){}};var kn={linearity:.3,easing:t.bezier(0,0,.3,1)},En=t.extend({deceleration:2500,maxSpeed:1400},kn),Pn=t.extend({deceleration:20,maxSpeed:1400},kn),In=t.extend({deceleration:1e3,maxSpeed:360},kn),Mn=t.extend({deceleration:1e3,maxSpeed:90},kn),An=function(t){this._map=t,this.clear()};function zn(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function On(e,i,n){var r=n.maxSpeed,o=n.linearity,a=n.deceleration,s=t.clamp(e*o/(i/1e3),-r,r),l=Math.abs(s)/(a*o);return{easing:n.easing,duration:1e3*l,amount:s*(l/2)}}An.prototype.clear=function(){this._inertiaBuffer=[]},An.prototype.record=function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})},An.prototype._drainInertiaBuffer=function(){for(var e=this._inertiaBuffer,i=t.browser.now();e.length>0&&i-e[0].time>160;)e.shift()},An.prototype._onMoveEnd=function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var i={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},n=0,r=this._inertiaBuffer;n<r.length;n+=1){var o=r[n].settings;i.zoom+=o.zoomDelta||0,i.bearing+=o.bearingDelta||0,i.pitch+=o.pitchDelta||0,o.panDelta&&i.pan._add(o.panDelta),o.around&&(i.around=o.around),o.pinchAround&&(i.pinchAround=o.pinchAround)}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(i.pan.mag()){var l=On(i.pan.mag(),a,t.extend({},En,e||{}));s.offset=i.pan.mult(l.amount/i.pan.mag()),s.center=this._map.transform.center,zn(s,l)}if(i.zoom){var c=On(i.zoom,a,Pn);s.zoom=this._map.transform.zoom+c.amount,zn(s,c)}if(i.bearing){var u=On(i.bearing,a,In);s.bearing=this._map.transform.bearing+t.clamp(u.amount,-179,179),zn(s,u)}if(i.pitch){var h=On(i.pitch,a,Mn);s.pitch=this._map.transform.pitch+h.amount,zn(s,h)}if(s.zoom||s.bearing){var p=void 0===i.pinchAround?i.around:i.pinchAround;s.around=p?this._map.unproject(p):this._map.getCenter()}return this.clear(),t.extend(s,{noMoveStart:!0})}};var Ln=function(e){function n(n,r,o,a){void 0===a&&(a={});var s=i.mousePos(r.getCanvasContainer(),o),l=r.unproject(s);e.call(this,n,t.extend({point:s,lngLat:l,originalEvent:o},a)),this._defaultPrevented=!1,this.target=r}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),Dn=function(e){function n(n,r,o){var a="touchend"===n?o.changedTouches:o.touches,s=i.touchPos(r.getCanvasContainer(),a),l=s.map((function(t){return r.unproject(t)})),c=s.reduce((function(t,e,i,n){return t.add(e.div(n.length))}),new t.Point(0,0)),u=r.unproject(c);e.call(this,n,{points:s,point:c,lngLats:l,lngLat:u,originalEvent:o}),this._defaultPrevented=!1}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),Rn=function(t){function e(e,i,n){t.call(this,e,{originalEvent:n}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(t.Event),Bn=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};Bn.prototype.reset=function(){delete this._mousedownPos},Bn.prototype.wheel=function(t){return this._firePreventable(new Rn(t.type,this._map,t))},Bn.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Ln(t.type,this._map,t))},Bn.prototype.mouseup=function(t){this._map.fire(new Ln(t.type,this._map,t))},Bn.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Ln(t.type,this._map,t))},Bn.prototype.dblclick=function(t){return this._firePreventable(new Ln(t.type,this._map,t))},Bn.prototype.mouseover=function(t){this._map.fire(new Ln(t.type,this._map,t))},Bn.prototype.mouseout=function(t){this._map.fire(new Ln(t.type,this._map,t))},Bn.prototype.touchstart=function(t){return this._firePreventable(new Dn(t.type,this._map,t))},Bn.prototype.touchmove=function(t){this._map.fire(new Dn(t.type,this._map,t))},Bn.prototype.touchend=function(t){this._map.fire(new Dn(t.type,this._map,t))},Bn.prototype.touchcancel=function(t){this._map.fire(new Dn(t.type,this._map,t))},Bn.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},Bn.prototype.isEnabled=function(){return!0},Bn.prototype.isActive=function(){return!1},Bn.prototype.enable=function(){},Bn.prototype.disable=function(){};var Fn=function(t){this._map=t};Fn.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Fn.prototype.mousemove=function(t){this._map.fire(new Ln(t.type,this._map,t))},Fn.prototype.mousedown=function(){this._delayContextMenu=!0},Fn.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ln("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Fn.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Ln(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},Fn.prototype.isEnabled=function(){return!0},Fn.prototype.isActive=function(){return!1},Fn.prototype.enable=function(){},Fn.prototype.disable=function(){};var Nn=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};function Vn(t,e){for(var i={},n=0;n<t.length;n++)i[t[n].identifier]=e[n];return i}Nn.prototype.isEnabled=function(){return!!this._enabled},Nn.prototype.isActive=function(){return!!this._active},Nn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Nn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Nn.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(i.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},Nn.prototype.mousemoveWindow=function(t,e){if(this._active){var n=e;if(!(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=n,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var o=Math.min(r.x,n.x),a=Math.max(r.x,n.x),s=Math.min(r.y,n.y),l=Math.max(r.y,n.y);i.setTransform(this._box,"translate("+o+"px,"+s+"px)"),this._box.style.width=a-o+"px",this._box.style.height=l-s+"px"}}},Nn.prototype.mouseupWindow=function(e,n){var r=this;if(this._active&&0===e.button){var o=this._startPos,a=n;if(this.reset(),i.suppressClick(),o.x!==a.x||o.y!==a.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(o,a,r._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}},Nn.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},Nn.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},Nn.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))};var jn=function(t){this.reset(),this.numTouches=t.numTouches};jn.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},jn.prototype.touchstart=function(e,i,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),n.length===this.numTouches&&(this.centroid=function(e){for(var i=new t.Point(0,0),n=0,r=e;n<r.length;n+=1)i._add(r[n]);return i.div(e.length)}(i),this.touches=Vn(n,i)))},jn.prototype.touchmove=function(t,e,i){if(!this.aborted&&this.centroid){var n=Vn(i,e);for(var r in this.touches){var o=n[r];(!o||o.dist(this.touches[r])>30)&&(this.aborted=!0)}}},jn.prototype.touchend=function(t,e,i){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){var n=!this.aborted&&this.centroid;if(this.reset(),n)return n}};var Un=function(t){this.singleTap=new jn(t),this.numTaps=t.numTaps,this.reset()};Un.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Un.prototype.touchstart=function(t,e,i){this.singleTap.touchstart(t,e,i)},Un.prototype.touchmove=function(t,e,i){this.singleTap.touchmove(t,e,i)},Un.prototype.touchend=function(t,e,i){var n=this.singleTap.touchend(t,e,i);if(n){var r=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(n)<30;if(r&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}};var qn=function(){this._zoomIn=new Un({numTouches:1,numTaps:2}),this._zoomOut=new Un({numTouches:2,numTaps:1}),this.reset()};qn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},qn.prototype.touchstart=function(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)},qn.prototype.touchmove=function(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)},qn.prototype.touchend=function(t,e,i){var n=this,r=this._zoomIn.touchend(t,e,i),o=this._zoomOut.touchend(t,e,i);return r?(this._active=!0,t.preventDefault(),setTimeout((function(){return n.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(r)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout((function(){return n.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0},qn.prototype.touchcancel=function(){this.reset()},qn.prototype.enable=function(){this._enabled=!0},qn.prototype.disable=function(){this._enabled=!1,this.reset()},qn.prototype.isEnabled=function(){return this._enabled},qn.prototype.isActive=function(){return this._active};var Zn={0:1,2:2},Hn=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};Hn.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Hn.prototype._correctButton=function(t,e){return!1},Hn.prototype._move=function(t,e){return{}},Hn.prototype.mousedown=function(t,e){if(!this._lastPoint){var n=i.mouseButton(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}},Hn.prototype.mousemoveWindow=function(t,e){var i=this._lastPoint;if(i)if(t.preventDefault(),function(t,e){var i=Zn[e];return void 0===t.buttons||(t.buttons&i)!==i}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(i,e)},Hn.prototype.mouseupWindow=function(t){this._lastPoint&&i.mouseButton(t)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},Hn.prototype.enable=function(){this._enabled=!0},Hn.prototype.disable=function(){this._enabled=!1,this.reset()},Hn.prototype.isEnabled=function(){return this._enabled},Hn.prototype.isActive=function(){return this._active};var Gn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,i){t.prototype.mousedown.call(this,e,i),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(Hn),Wn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var i=.8*(e.x-t.x);if(i)return this._active=!0,{bearingDelta:i}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Hn),$n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var i=-.5*(e.y-t.y);if(i)return this._active=!0,{pitchDelta:i}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Hn),Kn=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Kn.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Kn.prototype.touchstart=function(t,e,i){return this._calculateTransform(t,e,i)},Kn.prototype.touchmove=function(t,e,i){if(this._active&&!(i.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,i)},Kn.prototype.touchend=function(t,e,i){this._calculateTransform(t,e,i),this._active&&i.length<this._minTouches&&this.reset()},Kn.prototype.touchcancel=function(){this.reset()},Kn.prototype._calculateTransform=function(e,i,n){n.length>0&&(this._active=!0);var r=Vn(n,i),o=new t.Point(0,0),a=new t.Point(0,0),s=0;for(var l in r){var c=r[l],u=this._touches[l];u&&(o._add(c),a._add(c.sub(u)),s++,r[l]=c)}if(this._touches=r,!(s<this._minTouches)&&a.mag()){var h=a.div(s);if(this._sum._add(h),!(this._sum.mag()<this._clickTolerance))return{around:o.div(s),panDelta:h}}},Kn.prototype.enable=function(){this._enabled=!0},Kn.prototype.disable=function(){this._enabled=!1,this.reset()},Kn.prototype.isEnabled=function(){return this._enabled},Kn.prototype.isActive=function(){return this._active};var Xn=function(){this.reset()};function Qn(t,e,i){for(var n=0;n<t.length;n++)if(t[n].identifier===i)return e[n]}function Yn(t,e){return Math.log(t/e)/Math.LN2}Xn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Xn.prototype._start=function(t){},Xn.prototype._move=function(t,e,i){return{}},Xn.prototype.touchstart=function(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))},Xn.prototype.touchmove=function(t,e,i){if(this._firstTwoTouches){t.preventDefault();var n=this._firstTwoTouches,r=n[1],o=Qn(i,e,n[0]),a=Qn(i,e,r);if(o&&a){var s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}}},Xn.prototype.touchend=function(t,e,n){if(this._firstTwoTouches){var r=this._firstTwoTouches,o=r[1],a=Qn(n,e,r[0]),s=Qn(n,e,o);a&&s||(this._active&&i.suppressClick(),this.reset())}},Xn.prototype.touchcancel=function(){this.reset()},Xn.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},Xn.prototype.disable=function(){this._enabled=!1,this.reset()},Xn.prototype.isEnabled=function(){return this._enabled},Xn.prototype.isActive=function(){return this._active};var Jn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Yn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Yn(this._distance,i),pinchAround:e}},e}(Xn);function tr(t,e){return 180*t.angleWith(e)/Math.PI}var er=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:tr(this._vector,i),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,i=tr(t,this._startVector);return Math.abs(i)<e},e}(Xn);function ir(t){return Math.abs(t.y)>Math.abs(t.x)}var nr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,ir(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,i){var n=t[0].sub(this._lastPoints[0]),r=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(n,r,i.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(n.y+r.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,i){if(void 0!==this._valid)return this._valid;var n=t.mag()>=2,r=e.mag()>=2;if(n||r){if(!n||!r)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return ir(t)&&ir(e)&&o}},e}(Xn),rr={panStep:100,bearingStep:15,pitchStep:10},or=function(){var t=rr;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1};function ar(t){return t*(2-t)}or.prototype.reset=function(){this._active=!1},or.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=0,n=0,r=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:ar,zoom:i?Math.round(l)+i*(t.shiftKey?2:1):l,bearing:s.getBearing()+n*e._bearingStep,pitch:s.getPitch()+r*e._pitchStep,offset:[-o*e._panStep,-a*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},or.prototype.enable=function(){this._enabled=!0},or.prototype.disable=function(){this._enabled=!1,this.reset()},or.prototype.isEnabled=function(){return this._enabled},or.prototype.isActive=function(){return this._active},or.prototype.disableRotation=function(){this._rotationDisabled=!0},or.prototype.enableRotation=function(){this._rotationDisabled=!1};var sr=function(e,i){this._map=e,this._el=e.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};sr.prototype.setZoomRate=function(t){this._defaultZoomRate=t},sr.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},sr.prototype.isEnabled=function(){return!!this._enabled},sr.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},sr.prototype.isZooming=function(){return!!this._zooming},sr.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},sr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},sr.prototype.wheel=function(e){if(this.isEnabled()){var i=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,n=t.browser.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this._active||this._start(e)),e.preventDefault()}},sr.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},sr.prototype._start=function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var n=i.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},sr.prototype.renderFrame=function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var i=this._map.transform;if(0!==this._delta){var n="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,r=2/(1+Math.exp(-Math.abs(this._delta*n)));this._delta<0&&0!==r&&(r=1/r);var o="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(o*r))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a,s="number"==typeof this._targetZoom?this._targetZoom:i.zoom,l=this._startZoom,c=this._easing,u=!1;if("wheel"===this._type&&l&&c){var h=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),p=c(h);a=t.number(l,s,p),h<1?this._frameId||(this._frameId=!0):u=!0}else a=s,u=!0;return this._active=!0,u&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!u,zoomDelta:a-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},sr.prototype._smoothOutEasing=function(e){var i=t.ease;if(this._prevEase){var n=this._prevEase,r=(t.browser.now()-n.start)/n.duration,o=n.easing(r+.01)-n.easing(r),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);i=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:i},i},sr.prototype.reset=function(){this._active=!1};var lr=function(t,e){this._clickZoom=t,this._tapZoom=e};lr.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},lr.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},lr.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},lr.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var cr=function(){this.reset()};cr.prototype.reset=function(){this._active=!1},cr.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(t.shiftKey?-1:1),around:i.unproject(e)},{originalEvent:t})}}},cr.prototype.enable=function(){this._enabled=!0},cr.prototype.disable=function(){this._enabled=!1,this.reset()},cr.prototype.isEnabled=function(){return this._enabled},cr.prototype.isActive=function(){return this._active};var ur=function(){this._tap=new Un({numTouches:1,numTaps:1}),this.reset()};ur.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ur.prototype.touchstart=function(t,e,i){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=e[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(t,e,i))},ur.prototype.touchmove=function(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;var n=e[0],r=n.y-this._swipePoint.y;return this._swipePoint=n,t.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(t,e,i)},ur.prototype.touchend=function(t,e,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(t,e,i)&&(this._tapTime=t.timeStamp)},ur.prototype.touchcancel=function(){this.reset()},ur.prototype.enable=function(){this._enabled=!0},ur.prototype.disable=function(){this._enabled=!1,this.reset()},ur.prototype.isEnabled=function(){return this._enabled},ur.prototype.isActive=function(){return this._active};var hr=function(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i};hr.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},hr.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},hr.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},hr.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var pr=function(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i};pr.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},pr.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},pr.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},pr.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var dr=function(t,e,i,n){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0};dr.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},dr.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},dr.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},dr.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},dr.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},dr.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var fr=function(t){return t.zoom||t.drag||t.pitch||t.rotate},mr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(t.Event);function gr(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var yr=function(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new An(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);var r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[t.window,"blur",void 0]];for(var o=0,a=this._listeners;o<a.length;o+=1){var s=a[o],l=s[0];i.addEventListener(l,s[1],l===t.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};yr.prototype.destroy=function(){for(var e=0,n=this._listeners;e<n.length;e+=1){var r=n[e],o=r[0];i.removeEventListener(o,r[1],o===t.window.document?this.handleWindowEvent:this.handleEvent,r[2])}},yr.prototype._addDefaultHandlers=function(t){var e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new Bn(e,t));var n=e.boxZoom=new Nn(e,t);this._add("boxZoom",n);var r=new qn,o=new cr;e.doubleClickZoom=new lr(o,r),this._add("tapZoom",r),this._add("clickZoom",o);var a=new ur;this._add("tapDragZoom",a);var s=e.touchPitch=new nr;this._add("touchPitch",s);var l=new Wn(t),c=new $n(t);e.dragRotate=new pr(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);var u=new Gn(t),h=new Kn(t);e.dragPan=new hr(i,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);var p=new er,d=new Jn;e.touchZoomRotate=new dr(i,d,p,a),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]);var f=e.scrollZoom=new sr(e,this);this._add("scrollZoom",f,["mousePan"]);var m=e.keyboard=new or;this._add("keyboard",m),this._add("blockableMapEvent",new Fn(e));for(var g=0,y=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];g<y.length;g+=1){var _=y[g];t.interactive&&t[_]&&e[_].enable(t[_])}},yr.prototype._add=function(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e},yr.prototype.stop=function(t){if(!this._updatingCamera){for(var e=0,i=this._handlers;e<i.length;e+=1)i[e].handler.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}},yr.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},yr.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},yr.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},yr.prototype.isMoving=function(){return Boolean(fr(this._eventsInProgress))||this.isZooming()},yr.prototype._blockedByActive=function(t,e,i){for(var n in t)if(n!==i&&(!e||e.indexOf(n)<0))return!0;return!1},yr.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},yr.prototype._getMapTouches=function(t){for(var e=[],i=0,n=t;i<n.length;i+=1){var r=n[i];this._el.contains(r.target)&&e.push(r)}return e},yr.prototype.handleEvent=function(t,e){if("blur"!==t.type){this._updatingCamera=!0;for(var n="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},o={},a={},s=t.touches?this._getMapTouches(t.touches):void 0,l=s?i.touchPos(this._el,s):i.mousePos(this._el,t),c=0,u=this._handlers;c<u.length;c+=1){var h=u[c],p=h.handlerName,d=h.handler,f=h.allowed;if(d.isEnabled()){var m=void 0;this._blockedByActive(a,f,p)?d.reset():d[e||t.type]&&(m=d[e||t.type](t,l,s),this.mergeHandlerResult(r,o,m,p,n),m&&m.needsRenderFrame&&this._triggerRenderFrame()),(m||d.isActive())&&(a[p]=d)}}var g={};for(var y in this._previousActiveHandlers)a[y]||(g[y]=n);this._previousActiveHandlers=a,(Object.keys(g).length||gr(r))&&(this._changes.push([r,o,g]),this._triggerRenderFrame()),(Object.keys(a).length||gr(r))&&this._map._stop(!0),this._updatingCamera=!1;var _=r.cameraAnimation;_&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_(this._map))}else this.stop(!0)},yr.prototype.mergeHandlerResult=function(e,i,n,r,o){if(n){t.extend(e,n);var a={handlerName:r,originalEvent:n.originalEvent||o};void 0!==n.zoomDelta&&(i.zoom=a),void 0!==n.panDelta&&(i.drag=a),void 0!==n.pitchDelta&&(i.pitch=a),void 0!==n.bearingDelta&&(i.rotate=a)}},yr.prototype._applyChanges=function(){for(var e={},i={},n={},r=0,o=this._changes;r<o.length;r+=1){var a=o[r],s=a[0],l=a[1],c=a[2];s.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(e.around=s.around),void 0!==s.pinchAround&&(e.pinchAround=s.pinchAround),s.noInertia&&(e.noInertia=s.noInertia),t.extend(i,l),t.extend(n,c)}this._updateMapTransform(e,i,n),this._changes=[]},yr.prototype._updateMapTransform=function(t,e,i){var n=this._map,r=n.transform;if(!gr(t))return this._fireEvents(e,i,!0);var o=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,l=t.pitchDelta,c=t.around,u=t.pinchAround;void 0!==u&&(c=u),n._stop(!0),c=c||n.transform.centerPoint;var h=r.pointLocation(o?c.sub(o):c);s&&(r.bearing+=s),l&&(r.pitch+=l),a&&(r.zoom+=a),r.setLocationAtPoint(h,c),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,i,!0)},yr.prototype._fireEvents=function(e,i,n){var r=this,o=fr(this._eventsInProgress),a=fr(e),s={};for(var l in e)this._eventsInProgress[l]||(s[l+"start"]=e[l].originalEvent),this._eventsInProgress[l]=e[l];for(var c in!o&&a&&this._fireEvent("movestart",a.originalEvent),s)this._fireEvent(c,s[c]);for(var u in a&&this._fireEvent("move",a.originalEvent),e)this._fireEvent(u,e[u].originalEvent);var h,p={};for(var d in this._eventsInProgress){var f=this._eventsInProgress[d],m=f.handlerName,g=f.originalEvent;this._handlersById[m].isActive()||(delete this._eventsInProgress[d],p[d+"end"]=h=i[m]||g)}for(var y in p)this._fireEvent(y,p[y]);var _=fr(this._eventsInProgress);if(n&&(o||a)&&!_){this._updatingCamera=!0;var v=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),b=function(t){return 0!==t&&-r._bearingSnap<t&&t<r._bearingSnap};v?(b(v.bearing||this._map.getBearing())&&(v.bearing=0),this._map.easeTo(v,{originalEvent:h})):(this._map.fire(new t.Event("moveend",{originalEvent:h})),b(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},yr.prototype._fireEvent=function(e,i){this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))},yr.prototype._requestFrame=function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){delete t._frameId,t.handleEvent(new mr("renderFrame",{timeStamp:e})),t._applyChanges()}))},yr.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var _r=function(e){function i(i,n){e.call(this),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},i.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},i.prototype.panBy=function(e,i,n){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),n)},i.prototype.panTo=function(e,i,n){return this.easeTo(t.extend({center:e},i),n)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},i.prototype.zoomTo=function(e,i,n){return this.easeTo(t.extend({zoom:e},i),n)},i.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},i.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},i.prototype.getPadding=function(){return this.transform.padding},i.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},i.prototype.rotateTo=function(e,i,n){return this.easeTo(t.extend({bearing:e},i),n)},i.prototype.resetNorth=function(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this},i.prototype.resetNorthPitch=function(e,i){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),i),this},i.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},i.prototype.cameraForBounds=function(e,i){e=t.LngLatBounds.convert(e);var n=i&&i.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),n,i)},i.prototype._cameraForBoxAndBearing=function(e,i,n,r){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(r=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var a=r.padding;r.padding={top:a,bottom:a,right:a,left:a}}r.padding=t.extend(o,r.padding);var s=this.transform,l=s.padding,c=s.project(t.LngLat.convert(e)),u=s.project(t.LngLat.convert(i)),h=c.rotate(-n*Math.PI/180),p=u.rotate(-n*Math.PI/180),d=new t.Point(Math.max(h.x,p.x),Math.max(h.y,p.y)),f=new t.Point(Math.min(h.x,p.x),Math.min(h.y,p.y)),m=d.sub(f),g=(s.width-(l.left+l.right+r.padding.left+r.padding.right))/m.x,y=(s.height-(l.top+l.bottom+r.padding.top+r.padding.bottom))/m.y;if(!(y<0||g<0)){var _=Math.min(s.scaleZoom(s.scale*Math.min(g,y)),r.maxZoom),v="number"==typeof r.offset.x?new t.Point(r.offset.x,r.offset.y):t.Point.convert(r.offset),b=new t.Point((r.padding.left-r.padding.right)/2,(r.padding.top-r.padding.bottom)/2).rotate(n*Math.PI/180),x=v.add(b).mult(s.scale/s.zoomScale(_));return{center:s.unproject(c.add(u).div(2).sub(x)),zoom:_,bearing:n}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},i.prototype.fitBounds=function(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)},i.prototype.fitScreenCoordinates=function(e,i,n,r,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(i)),n,r),r,o)},i.prototype._fitInternal=function(e,i,n){return e?(delete(i=t.extend(e,i)).padding,i.linear?this.easeTo(i,n):this.flyTo(i,n)):this},i.prototype.jumpTo=function(e,i){this.stop();var n=this.transform,r=!1,o=!1,a=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=t.LngLat.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(o=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(a=!0,n.pitch=+e.pitch),null==e.padding||n.isPaddingEqual(e.padding)||(n.padding=e.padding),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),r&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),o&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),a&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))},i.prototype.easeTo=function(e,i){var n=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var r=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l=this.getPadding(),c="zoom"in e?+e.zoom:o,u="bearing"in e?this._normalizeBearing(e.bearing,a):a,h="pitch"in e?+e.pitch:s,p="padding"in e?e.padding:r.padding,d=t.Point.convert(e.offset),f=r.centerPoint.add(d),m=r.pointLocation(f),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);var y,_,v=r.project(m),b=r.project(g).sub(v),x=r.zoomScale(c-o);e.around&&(y=t.LngLat.convert(e.around),_=r.locationPoint(y));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||c!==o,this._rotating=this._rotating||a!==u,this._pitching=this._pitching||h!==s,this._padding=!r.isPaddingEqual(p),this._easeId=e.easeId,this._prepareEase(i,e.noMoveStart,w),this._ease((function(e){if(n._zooming&&(r.zoom=t.number(o,c,e)),n._rotating&&(r.bearing=t.number(a,u,e)),n._pitching&&(r.pitch=t.number(s,h,e)),n._padding&&(r.interpolatePadding(l,p,e),f=r.centerPoint.add(d)),y)r.setLocationAtPoint(y,_);else{var m=r.zoomScale(r.zoom-o),g=c>o?Math.min(2,x):Math.max(.5,x),w=Math.pow(g,1-e),C=r.unproject(v.add(b.mult(e*w)).mult(m));r.setLocationAtPoint(r.renderWorldCopies?C.wrap():C,f)}n._fireMoveEvents(i)}),(function(t){n._afterEase(i,t)}),e),this},i.prototype._prepareEase=function(e,i,n){void 0===n&&(n={}),this._moving=!0,i||n.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!n.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!n.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!n.pitching&&this.fire(new t.Event("pitchstart",e))},i.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},i.prototype._afterEase=function(e,i){if(!this._easeId||!i||this._easeId!==i){delete this._easeId;var n=this._zooming,r=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}},i.prototype.flyTo=function(e,i){var n=this;if(!e.essential&&t.browser.prefersReducedMotion){var r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,i)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),c=this.getPadding(),u="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):a,h="bearing"in e?this._normalizeBearing(e.bearing,s):s,p="pitch"in e?+e.pitch:l,d="padding"in e?e.padding:o.padding,f=o.zoomScale(u-a),m=t.Point.convert(e.offset),g=o.centerPoint.add(m),y=o.pointLocation(g),_=t.LngLat.convert(e.center||y);this._normalizeCenter(_);var v=o.project(y),b=o.project(_).sub(v),x=e.curve,w=Math.max(o.width,o.height),C=w/f,S=b.mag();if("minZoom"in e){var T=t.clamp(Math.min(e.minZoom,a,u),o.minZoom,o.maxZoom),k=w/o.zoomScale(T-a);x=Math.sqrt(k/S*2)}var E=x*x;function P(t){var e=(C*C-w*w+(t?-1:1)*E*E*S*S)/(2*(t?C:w)*E*S);return Math.log(Math.sqrt(e*e+1)-e)}function I(t){return(Math.exp(t)-Math.exp(-t))/2}function M(t){return(Math.exp(t)+Math.exp(-t))/2}var A=P(0),z=function(t){return M(A)/M(A+x*t)},O=function(t){return w*((M(A)*(I(e=A+x*t)/M(e))-I(A))/E)/S;var e},L=(P(1)-A)/x;if(Math.abs(S)<1e-6||!isFinite(L)){if(Math.abs(w-C)<1e-6)return this.easeTo(e,i);var D=C<w?-1:1;L=Math.abs(Math.log(C/w))/x,O=function(){return 0},z=function(t){return Math.exp(D*x*t)}}return e.duration="duration"in e?+e.duration:1e3*L/("screenSpeed"in e?+e.screenSpeed/x:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==h,this._pitching=p!==l,this._padding=!o.isPaddingEqual(d),this._prepareEase(i,!1),this._ease((function(e){var r=e*L,f=1/z(r);o.zoom=1===e?u:a+o.scaleZoom(f),n._rotating&&(o.bearing=t.number(s,h,e)),n._pitching&&(o.pitch=t.number(l,p,e)),n._padding&&(o.interpolatePadding(c,d,e),g=o.centerPoint.add(m));var y=1===e?_:o.unproject(v.add(b.mult(O(r))).mult(f));o.setLocationAtPoint(o.renderWorldCopies?y.wrap():y,g),n._fireMoveEvents(i)}),(function(){return n._afterEase(i)}),e),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){return this._stop()},i.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,e)}if(!t){var n=this.handlers;n&&n.stop(!1)}return this},i.prototype._ease=function(e,i,n){!1===n.animate||0===n.duration?(e(1),i()):(this._easeStart=t.browser.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(e,i){e=t.wrap(e,-180,180);var n=Math.abs(e-i);return Math.abs(e-360-i)<n&&(e-=360),Math.abs(e+360-i)<n&&(e+=360),e},i.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}},i}(t.Evented),vr=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};vr.prototype.getDefaultPosition=function(){return"bottom-right"},vr.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=i.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},vr.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},vr.prototype._setElementTitle=function(t,e){var i=this._map._getUIString("AttributionControl."+e);t.title=i,t.setAttribute("aria-label",i)},vr.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},vr.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var n=i.reduce((function(t,e,n){return e.value&&(t+=e.key+"="+e.value+(n<i.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+n+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}},vr.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},vr.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var i=this._map.style.sourceCaches;for(var n in i){var r=i[n];if(r.used){var o=r.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort((function(t,e){return t.length-e.length}));var a=(t=t.filter((function(e,i){for(var n=i+1;n<t.length;n++)if(t[n].indexOf(e)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},vr.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var br=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};br.prototype.onAdd=function(t){this._map=t,this._container=i.create("div","mapboxgl-ctrl");var e=i.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},br.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},br.prototype.getDefaultPosition=function(){return"bottom-left"},br.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},br.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},br.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var xr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};xr.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},xr.prototype.remove=function(t){for(var e=this._currentlyRunning,i=0,n=e?this._queue.concat(e):this._queue;i<n.length;i+=1){var r=n[i];if(r.id===t)return void(r.cancelled=!0)}},xr.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var i=0,n=e;i<n.length;i+=1){var r=n[i];if(!r.cancelled&&(r.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},xr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var wr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Cr=t.window.HTMLImageElement,Sr=t.window.HTMLElement,Tr=t.window.ImageBitmap,kr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Er=function(n){function r(e){var i=this;if(null!=(e=t.extend({},kr,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var r=new Cn(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(n.call(this,r,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new xr,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},wr,e.locale),this._clickTolerance=e.clickTolerance,this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Sr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return i._update(!1)})),this.on("moveend",(function(){return i._update(!1)})),this.on("zoom",(function(){return i._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new yr(this,e),this._hash=e.hash&&new Tn("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new vr({customAttribution:e.customAttribution})),this.addControl(new br,e.logoPosition),this.on("style.load",(function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)})),this.on("data",(function(e){i._update("style"===e.dataType),i.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){i.fire(new t.Event(e.dataType+"dataloading",e))}))}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return r.prototype._getMapId=function(){return this._mapId},r.prototype.addControl=function(e,i){if(void 0===i&&(i=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var n=e.onAdd(this);this._controls.push(e);var r=this._controlPositions[i];return-1!==i.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},r.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this},r.prototype.hasControl=function(t){return this._controls.indexOf(t)>-1},r.prototype.resize=function(e){var i=this._containerDimensions(),n=i[0],r=i[1];this._resizeCanvas(n,r),this.transform.resize(n,r),this.painter.resize(n,r);var o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this},r.prototype.getBounds=function(){return this.transform.getBounds()},r.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},r.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},r.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},r.prototype.getMinZoom=function(){return this.transform.minZoom},r.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},r.prototype.getMaxZoom=function(){return this.transform.maxZoom},r.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},r.prototype.getMinPitch=function(){return this.transform.minPitch},r.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},r.prototype.getMaxPitch=function(){return this.transform.maxPitch},r.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},r.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},r.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},r.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},r.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},r.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},r.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},r.prototype._createDelegatedListener=function(t,e,i){var n,r=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:i,delegates:{mousemove:function(n){var a=r.getLayer(e)?r.queryRenderedFeatures(n.point,{layers:[e]}):[];a.length?o||(o=!0,i.call(r,new Ln(t,r,n.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:i,delegates:{mousemove:function(n){(r.getLayer(e)?r.queryRenderedFeatures(n.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,i.call(r,new Ln(t,r,n.originalEvent)))},mouseout:function(e){a&&(a=!1,i.call(r,new Ln(t,r,e.originalEvent)))}}}}return{layer:e,listener:i,delegates:(n={},n[t]=function(t){var n=r.getLayer(e)?r.queryRenderedFeatures(t.point,{layers:[e]}):[];n.length&&(t.features=n,i.call(r,t),delete t.features)},n)}},r.prototype.on=function(t,e,i){if(void 0===i)return n.prototype.on.call(this,t,e);var r=this._createDelegatedListener(t,e,i);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r),r.delegates)this.on(o,r.delegates[o]);return this},r.prototype.once=function(t,e,i){if(void 0===i)return n.prototype.once.call(this,t,e);var r=this._createDelegatedListener(t,e,i);for(var o in r.delegates)this.once(o,r.delegates[o]);return this},r.prototype.off=function(t,e,i){var r=this;return void 0===i?n.prototype.off.call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(n){for(var o=n[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===e&&s.listener===i){for(var l in s.delegates)r.off(l,s.delegates[l]);return o.splice(a,1),r}}}(this._delegatedListeners),this)},r.prototype.queryRenderedFeatures=function(e,i){if(!this.style)return[];var n;if(void 0!==i||void 0===e||e instanceof t.Point||Array.isArray(e)||(i=e,e=void 0),i=i||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])n=[t.Point.convert(e)];else{var r=t.Point.convert(e[0]),o=t.Point.convert(e[1]);n=[r,new t.Point(o.x,r.y),o,new t.Point(r.x,o.y),r]}return this.style.queryRenderedFeatures(n,i,this.transform)},r.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},r.prototype.setStyle=function(e,i){return!1!==(i=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(e,i))},r.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},r.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new qe(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},r.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qe(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},r.prototype._diffStyle=function(e,i){var n=this;if("string"==typeof e){var r=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(r,t.ResourceType.Style);t.getJSON(o,(function(e,r){e?n.fire(new t.ErrorEvent(e)):r&&n._updateDiff(r,i)}))}else"object"==typeof e&&this._updateDiff(e,i)},r.prototype._updateDiff=function(e,i){try{this.style.setState(e)&&this._update(!0)}catch(n){t.warnOnce("Unable to perform style diff: "+(n.message||n.error||n)+".  Rebuilding the style from scratch."),this._updateStyle(e,i)}},r.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},r.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},r.prototype.isSourceLoaded=function(e){var i=this.style&&this.style.sourceCaches[e];if(void 0!==i)return i.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},r.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e]._tiles;for(var n in i){var r=i[n];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},r.prototype.addSourceType=function(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)},r.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},r.prototype.getSource=function(t){return this.style.getSource(t)},r.prototype.addImage=function(e,i,n){void 0===n&&(n={});var r=n.pixelRatio;void 0===r&&(r=1);var o=n.sdf;void 0===o&&(o=!1);var a=n.stretchX,s=n.stretchY,l=n.content;if(this._lazyInitEmptyStyle(),i instanceof Cr||Tr&&i instanceof Tr){var c=t.browser.getImageData(i);this.style.addImage(e,{data:new t.RGBAImage({width:c.width,height:c.height},c.data),pixelRatio:r,stretchX:a,stretchY:s,content:l,sdf:o,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var u=i;this.style.addImage(e,{data:new t.RGBAImage({width:i.width,height:i.height},new Uint8Array(i.data)),pixelRatio:r,stretchX:a,stretchY:s,content:l,sdf:o,version:0,userImage:u}),u.onAdd&&u.onAdd(this,e)}},r.prototype.updateImage=function(e,i){var n=this.style.getImage(e);if(!n)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var r=i instanceof Cr||Tr&&i instanceof Tr?t.browser.getImageData(i):i,o=r.width,a=r.height,s=r.data;return void 0===o||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==n.data.width||a!==n.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(n.data.replace(s,!(i instanceof Cr||Tr&&i instanceof Tr)),void this.style.updateImage(e,n))},r.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},r.prototype.removeImage=function(t){this.style.removeImage(t)},r.prototype.loadImage=function(e,i){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),i)},r.prototype.listImages=function(){return this.style.listImages()},r.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},r.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},r.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},r.prototype.getLayer=function(t){return this.style.getLayer(t)},r.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)},r.prototype.setFilter=function(t,e,i){return void 0===i&&(i={}),this.style.setFilter(t,e,i),this._update(!0)},r.prototype.getFilter=function(t){return this.style.getFilter(t)},r.prototype.setPaintProperty=function(t,e,i,n){return void 0===n&&(n={}),this.style.setPaintProperty(t,e,i,n),this._update(!0)},r.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},r.prototype.setLayoutProperty=function(t,e,i,n){return void 0===n&&(n={}),this.style.setLayoutProperty(t,e,i,n),this._update(!0)},r.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},r.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},r.prototype.getLight=function(){return this.style.getLight()},r.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},r.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},r.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},r.prototype.getContainer=function(){return this._container},r.prototype.getCanvasContainer=function(){return this._canvasContainer},r.prototype.getCanvas=function(){return this._canvas},r.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},r.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},r.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=i.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=i.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){o[t]=i.create("div","mapboxgl-ctrl-"+t,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)},r.prototype._resizeCanvas=function(e,i){var n=t.browser.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*i,this._canvas.style.width=e+"px",this._canvas.style.height=i+"px"},r.prototype._setupPainter=function(){var i=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);n?(this.painter=new vn(n,this.transform),t.webpSupported.testSupport(n)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},r.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},r.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},r.prototype._onMapScroll=function(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},r.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},r.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},r.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},r.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},r.prototype._render=function(e){var i,n=this,r=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,i),r=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,l=t.browser.now();this.style.zoomHistory.update(s,l);var c=new t.EvaluationParameters(s,{now:l,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),u=c.crossFadingFactor();1===u&&u===this._crossFadingFactor||(a=!0,this._crossFadingFactor=u),this.style.update(c)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var h=t.browser.now()-r;o.endQueryEXT(o.TIME_ELAPSED_EXT,i),setTimeout((function(){var e=o.getQueryObjectEXT(i,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(i),n.fire(new t.Event("gpu-timing-frame",{cpuTime:h,gpuTime:e}))}),50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout((function(){var e=n.painter.queryGpuTimers(p);n.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}var d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0),this}},r.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,i=this._controls;e<i.length;e+=1)i[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),Pr(this._canvasContainer),Pr(this._controlContainer),Pr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},r.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(t){e._frame=null,e._render(t)})))},r.prototype._onWindowOnline=function(){this._update()},r.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},r.prototype._setCacheLimits=function(e,i){t.setCacheLimits(e,i)},o.version.get=function(){return t.version},Object.defineProperties(r.prototype,o),r}(_r);function Pr(t){t.parentNode&&t.parentNode.removeChild(t)}var Ir={showCompass:!0,showZoom:!0,visualizePitch:!1},Mr=function(e){var n=this;this.options=t.extend({},Ir,e),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return n._map.zoomIn({},{originalEvent:t})})),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return n._map.zoomOut({},{originalEvent:t})})),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){n.options.visualizePitch?n._map.resetNorthPitch({},{originalEvent:t}):n._map.resetNorth({},{originalEvent:t})})),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Mr.prototype._updateZoomButtons=function(){var t=this._map.getZoom(),e=t===this._map.getMaxZoom(),i=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())},Mr.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Mr.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ar(this._map,this._compass,this.options.visualizePitch)),this._container},Mr.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Mr.prototype._createButton=function(t,e){var n=i.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n},Mr.prototype._setButtonTitle=function(t,e){var i=this._map._getUIString("NavigationControl."+e);t.title=i,t.setAttribute("aria-label",i)};var Ar=function(e,n,r){void 0===r&&(r=!1),this._clickTolerance=10,this.element=n,this.mouseRotate=new Wn({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new $n({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(n,"mousedown",this.mousedown),i.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(n,"touchmove",this.touchmove),i.addEventListener(n,"touchend",this.touchend),i.addEventListener(n,"touchcancel",this.reset)};function zr(e,i,n){if(e=new t.LngLat(e.lng,e.lat),i){var r=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=n.locationPoint(e).distSqr(i);n.locationPoint(r).distSqr(i)<a?e=r:n.locationPoint(o).distSqr(i)<a&&(e=o)}for(;Math.abs(e.lng-n.center.lng)>180;){var s=n.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}Ar.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),i.disableDrag()},Ar.prototype.move=function(t,e){var i=this.map,n=this.mouseRotate.mousemoveWindow(t,e);if(n&&n.bearingDelta&&i.setBearing(i.getBearing()+n.bearingDelta),this.mousePitch){var r=this.mousePitch.mousemoveWindow(t,e);r&&r.pitchDelta&&i.setPitch(i.getPitch()+r.pitchDelta)}},Ar.prototype.off=function(){var t=this.element;i.removeEventListener(t,"mousedown",this.mousedown),i.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(t,"touchmove",this.touchmove),i.removeEventListener(t,"touchend",this.touchend),i.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},Ar.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(t.window,"mousemove",this.mousemove),i.removeEventListener(t.window,"mouseup",this.mouseup)},Ar.prototype.mousedown=function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),i.mousePos(this.element,e)),i.addEventListener(t.window,"mousemove",this.mousemove),i.addEventListener(t.window,"mouseup",this.mouseup)},Ar.prototype.mousemove=function(t){this.move(t,i.mousePos(this.element,t))},Ar.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},Ar.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},Ar.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},Ar.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ar.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Or={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Lr(t,e,i){var n=t.classList;for(var r in Or)n.remove("mapboxgl-"+i+"-anchor-"+r);n.add("mapboxgl-"+i+"-anchor-"+e)}var Dr,Rr=function(e){function n(n,r){if(e.call(this),(n instanceof t.window.HTMLElement||r)&&(n=t.extend({element:n},r)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&"auto"!==n.pitchAlignment?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=t.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var o=i.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var a=i.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");var s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var c=0,u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<u.length;c+=1){var h=u[c],p=i.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",h.rx),p.setAttributeNS(null,"ry",h.ry),l.appendChild(p)}var d=i.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill",this._color);var f=i.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),d.appendChild(f);var m=i.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");var g=i.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(g);var y=i.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var _=i.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(8.0, 8.0)");var v=i.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#000000"),v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962");var b=i.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#FFFFFF"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962"),_.appendChild(v),_.appendChild(b),s.appendChild(l),s.appendChild(d),s.appendChild(m),s.appendChild(y),s.appendChild(_),o.appendChild(s),o.setAttributeNS(null,"height",41*this._scale+"px"),o.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(o),this._offset=t.Point.convert(n&&n.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),Lr(this._element,this._anchor,"marker"),this._popup=null}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},n.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},n.prototype.getElement=function(){return this._element},n.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},n.prototype._onKeyPress=function(t){var e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()},n.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},n.prototype.getPopup=function(){return this._popup},n.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},n.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=zr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),i.setTransform(this._element,Or[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+n+" "+e)}},n.prototype.getOffset=function(){return this._offset},n.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},n.prototype._onMove=function(e){if(!this._isDragging){var i=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=i}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))},n.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},n.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},n.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},n.prototype.isDraggable=function(){return this._draggable},n.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},n.prototype.getRotation=function(){return this._rotation},n.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},n.prototype.getRotationAlignment=function(){return this._rotationAlignment},n.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},n.prototype.getPitchAlignment=function(){return this._pitchAlignment},n}(t.Evented),Br={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Fr=0,Nr=!1,Vr=function(e){function n(i){e.call(this),this.options=t.extend({},Br,i),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(e){var n;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==Dr?n(Dr):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){n(Dr="denied"!==t.state)})):n(Dr=!!t.window.navigator.geolocation),this._container},n.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fr=0,Nr=!1},n.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())},n.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},n.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},n.prototype._updateCamera=function(e){var i=new t.LngLat(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,r=this._map.getBearing(),o=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(n),o,{geolocateSource:!0})},n.prototype._updateMarker=function(e){if(e){var i=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},n.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),i=this._map.unproject([1,t]),n=e.distanceTo(i),r=Math.ceil(2*this._accuracy/n);this._circleElement.style.width=r+"px",this._circleElement.style.height=r+"px"},n.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},n.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Nr)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},n.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},n.prototype._setupUI=function(e){var n=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Rr(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Rr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))}))},n.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fr--,Nr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Fr>1?(e={maximumAge:6e5,timeout:0},Nr=!0):(e=this.options.positionOptions,Nr=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},n.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},n}(t.Evented),jr={maxWidth:100,unit:"metric"},Ur=function(e){this.options=t.extend({},jr,e),t.bindAll(["_onMove","setUnit"],this)};function qr(t,e,i){var n=i&&i.maxWidth||100,r=t._container.clientHeight/2,o=t.unproject([0,r]),a=t.unproject([n,r]),s=o.distanceTo(a);if(i&&"imperial"===i.unit){var l=3.2808*s;l>5280?Zr(e,n,l/5280,t._getUIString("ScaleControl.Miles")):Zr(e,n,l,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?Zr(e,n,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Zr(e,n,s/1e3,t._getUIString("ScaleControl.Kilometers")):Zr(e,n,s,t._getUIString("ScaleControl.Meters"))}function Zr(t,e,i,n){var r,o,a,s=(r=i,(o=Math.pow(10,(""+Math.floor(r)).length-1))*(a=(a=r/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a)));t.style.width=e*(s/i)+"px",t.innerHTML=s+"&nbsp;"+n}Ur.prototype.getDefaultPosition=function(){return"bottom-left"},Ur.prototype._onMove=function(){qr(this._map,this._container,this.options)},Ur.prototype.onAdd=function(t){return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ur.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ur.prototype.setUnit=function(t){this.options.unit=t,qr(this._map,this._container,this.options)};var Hr=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Hr.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Hr.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Hr.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Hr.prototype._setupUI=function(){var e=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Hr.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Hr.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Hr.prototype._isFullscreen=function(){return this._fullscreen},Hr.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Hr.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Gr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Wr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),$r=function(e){function n(i){e.call(this),this.options=t.extend(Object.create(Gr),i),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.addTo=function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},n.prototype.isOpen=function(){return!!this._map},n.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},n.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},n.prototype.getElement=function(){return this._container},n.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},n.prototype.setHTML=function(e){var i,n=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");for(r.innerHTML=e;i=r.firstChild;)n.appendChild(i);return this.setDOMContent(n)},n.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},n.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},n.prototype.setDOMContent=function(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=i.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this},n.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},n.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},n.prototype.setOffset=function(t){return this.options.offset=t,this._update(),this},n.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},n.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},n.prototype._onMouseUp=function(t){this._update(t.point)},n.prototype._onMouseMove=function(t){this._update(t.point)},n.prototype._onDrag=function(t){this._update(t.point)},n.prototype._update=function(e){var n=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return n._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=zr(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var r=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),o=this.options.anchor,a=function e(i){if(i){if("number"==typeof i){var n=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new t.Point(0,0),top:new t.Point(0,i),"top-left":new t.Point(n,n),"top-right":new t.Point(-n,n),bottom:new t.Point(0,-i),"bottom-left":new t.Point(n,-n),"bottom-right":new t.Point(-n,-n),left:new t.Point(i,0),right:new t.Point(-i,0)}}if(i instanceof t.Point||Array.isArray(i)){var r=t.Point.convert(i);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.Point.convert(i.center||[0,0]),top:t.Point.convert(i.top||[0,0]),"top-left":t.Point.convert(i["top-left"]||[0,0]),"top-right":t.Point.convert(i["top-right"]||[0,0]),bottom:t.Point.convert(i.bottom||[0,0]),"bottom-left":t.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(i["bottom-right"]||[0,0]),left:t.Point.convert(i.left||[0,0]),right:t.Point.convert(i.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!o){var s,l=this._container.offsetWidth,c=this._container.offsetHeight;s=r.y+a.bottom.y<c?["top"]:r.y>this._map.transform.height-c?["bottom"]:[],r.x<l/2?s.push("left"):r.x>this._map.transform.width-l/2&&s.push("right"),o=0===s.length?"bottom":s.join("-")}var u=r.add(a[o]).round();i.setTransform(this._container,Or[o]+" translate("+u.x+"px,"+u.y+"px)"),Lr(this._container,o,"popup")}},n.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var t=this._container.querySelector(Wr);t&&t.focus()}},n.prototype._onClose=function(){this.remove()},n}(t.Evented),Kr={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Er,NavigationControl:Mr,GeolocateControl:Vr,AttributionControl:vr,ScaleControl:Ur,FullscreenControl:Hr,Popup:$r,Marker:Rr,Style:qe,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){Ft().acquire(Lt)},clearPrewarmedResources:function(){var t=Rt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Lt),Rt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Dt.workerCount},set workerCount(t){Dt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Kr})),i}()},A1Ew:function(t,e,i){var n,r,o;r=[i("4R65"),i("4ZJM")],void 0===(o="function"==typeof(n=function(t,e){t.MapboxGL=t.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(i){t.setOptions(this,i),i.accessToken&&(e.accessToken=i.accessToken),this._throttledUpdate=t.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(e){this._container||this._initContainer();var i=this.getPaneName();e.getPane(i).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),e.options.zoomAnimation&&t.DomEvent.on(e._proxy,t.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(e){this._map._proxy&&this._map.options.zoomAnimation&&t.DomEvent.off(this._map._proxy,t.DomUtil.TRANSITION_END,this._transitionEnd,this);var i=this.getPaneName();e.getPane(i).removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMapboxMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+2*this.options.padding)},getBounds:function(){var e=this.getSize().multiplyBy(.5),i=this._map.latLngToContainerPoint(this._map.getCenter());return t.latLngBounds(this._map.containerPointToLatLng(i.subtract(e)),this._map.containerPointToLatLng(i.add(e)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_initContainer:function(){var e=this._container=t.DomUtil.create("div","leaflet-gl-layer"),i=this.getSize(),n=this._map.getSize().multiplyBy(this.options.padding);e.style.width=i.x+"px",e.style.height=i.y+"px";var r=this._map.containerPointToLayerPoint([0,0]).subtract(n);t.DomUtil.setPosition(e,r)},_initGL:function(){var i=this._map.getCenter(),n=t.extend({},this.options,{container:this._container,center:[i.lng,i.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new e.Map(n),this._glMap.transform.latRange=null,this._transformGL(this._glMap),this._glMap._actualCanvas=this._glMap._canvas.canvas?this._glMap._canvas.canvas:this._glMap._canvas;var r=this._glMap._actualCanvas;t.DomUtil.addClass(r,"leaflet-image-layer"),t.DomUtil.addClass(r,"leaflet-zoom-animated"),this.options.interactive&&t.DomUtil.addClass(r,"leaflet-interactive"),this.options.className&&t.DomUtil.addClass(r,this.options.className)},_update:function(e){if(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming){var i=this.getSize(),n=this._container,r=this._glMap,o=this._map.getSize().multiplyBy(this.options.padding),a=this._map.containerPointToLayerPoint([0,0]).subtract(o);t.DomUtil.setPosition(n,a),this._transformGL(r),r.transform.width!==i.x||r.transform.height!==i.y?(n.style.width=i.x+"px",n.style.height=i.y+"px",null!=r._resize?r._resize():r.resize()):null!=r._update?r._update():r.update()}},_transformGL:function(t){var i=this._map.getCenter(),n=t.transform;n.center=e.LngLat.convert([i.lng,i.lat]),n.zoom=this._map.getZoom()-1},_pinchZoom:function(t){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(e){var i=this._map.getZoomScale(e.zoom),n=this._map.getSize().multiplyBy(this.options.padding*i),r=this.getSize()._divideBy(2),o=this._map.project(e.center,e.zoom)._subtract(r)._add(this._map._getMapPanePos().add(n))._round(),a=this._map.project(this._map.getBounds().getNorthWest(),e.zoom)._subtract(o);t.DomUtil.setTransform(this._glMap._actualCanvas,a.subtract(this._offset),i)},_zoomStart:function(t){this._zooming=!0},_zoomEnd:function(){var e=this._map.getZoomScale(this._map.getZoom());t.DomUtil.setTransform(this._glMap._actualCanvas,null,e),this._zooming=!1,this._update()},_transitionEnd:function(e){t.Util.requestAnimFrame((function(){var e=this._map.getZoom(),i=this._map.getCenter(),n=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());t.DomUtil.setTransform(this._glMap._actualCanvas,n,1),this._glMap.once("moveend",t.Util.bind((function(){this._zoomEnd()}),this)),this._glMap.jumpTo({center:i,zoom:e-1})}),this)},_resize:function(t){this._transitionEnd(t)}}),t.mapboxGL=function(e){return new t.MapboxGL(e)}})?n.apply(e,r):n)||(t.exports=o)},T7iU:function(t,e,i){"object"==typeof navigator&&(t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){h(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var f={addCSS:!0,thumbWidth:15,watch:!0};function m(t,e){return(function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(t,e)}var g,y,_,v=function(t){return null!=t?t.constructor:null},b=function(t,e){return!!(t&&e&&t instanceof e)},x=function(t){return v(t)===String},w=function(t){return Array.isArray(t)},C=function(t){return b(t,NodeList)},S=x,T=w,k=C,E=function(t){return b(t,Element)},P=function(t){return b(t,Event)},I=function(t){return function(t){return null==t}(t)||(x(t)||w(t)||C(t))&&!t.length||function(t){return v(t)===Object}(t)&&!Object.keys(t).length},M=function(){function t(e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),E(e)?this.element=e:S(e)&&(this.element=document.querySelector(e)),E(this.element)&&I(this.element.rangeTouch)&&(this.config=d({},f,{},i),this.init())}return function(t,e,i){e&&u(t.prototype,e),i&&u(t,i)}(t,[{key:"init",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(t){var e=this,i=t?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(t){e.element[i](t,(function(t){return e.set(t)}),!1)}))}},{key:"get",value:function(e){if(!t.enabled||!P(e))return null;var i,n=e.target,r=e.changedTouches[0],o=parseFloat(n.getAttribute("min"))||0,a=parseFloat(n.getAttribute("max"))||100,s=parseFloat(n.getAttribute("step"))||1,l=n.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(i=100/l.width*(r.clientX-l.left))?i=0:100<i&&(i=100),50>i?i-=(100-2*i)*c:50<i&&(i+=2*(i-50)*c),o+function(t,e){if(1>e){var i=function(t){var e="".concat(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}(e);return parseFloat(t.toFixed(i))}return Math.round(t/e)*e}(i/100*(a-o),s)}},{key:"set",value:function(e){t.enabled&&P(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),function(t,e){if(t&&e){var i=new Event(e,{bubbles:!0});t.dispatchEvent(i)}}(e.target,"touchend"===e.type?"change":"input"))}}],[{key:"setup",value:function(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=null;if(I(e)||S(e)?n=Array.from(document.querySelectorAll(S(e)?e:'input[type="range"]')):E(e)?n=[e]:k(e)?n=Array.from(e):T(e)&&(n=e.filter(E)),I(n))return null;var r=d({},f,{},i);return S(e)&&r.watch&&new MutationObserver((function(i){Array.from(i).forEach((function(i){Array.from(i.addedNodes).forEach((function(i){E(i)&&m(i,e)&&new t(i,r)}))}))})).observe(document.body,{childList:!0,subtree:!0}),n.map((function(e){return new t(e,i)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),t}(),A=function(t){return null!=t?t.constructor:null},z=function(t,e){return Boolean(t&&e&&t instanceof e)},O=function(t){return null==t},L=function(t){return A(t)===Object},D=function(t){return A(t)===String},R=function(t){return A(t)===Function},B=function(t){return Array.isArray(t)},F=function(t){return z(t,NodeList)},N=function(t){return O(t)||(D(t)||B(t)||F(t))&&!t.length||L(t)&&!Object.keys(t).length},V=O,j=L,U=function(t){return A(t)===Number&&!Number.isNaN(t)},q=D,Z=function(t){return A(t)===Boolean},H=R,G=B,W=F,$=function(t){return z(t,Element)},K=function(t){return z(t,Event)},X=function(t){return z(t,KeyboardEvent)},Q=function(t){return z(t,TextTrack)||!O(t)&&D(t.kind)},Y=function(t){if(z(t,window.URL))return!0;if(!D(t))return!1;var e=t;t.startsWith("http://")&&t.startsWith("https://")||(e="http://".concat(t));try{return!N(new URL(e).hostname)}catch(t){return!1}},J=N,tt=(g=document.createElement("span"),y={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},_=Object.keys(y).find((function(t){return void 0!==g.style[t]})),!!q(_)&&y[_]);function et(t,e){setTimeout((function(){try{t.hidden=!0,t.hidden=!1}catch(t){}}),e)}var it={isIE:!!document.documentMode,isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)};function nt(t,e){return e.split(".").reduce((function(t,e){return t&&t[e]}),t)}function rt(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];if(!i.length)return t;var o=i.shift();return j(o)?(Object.keys(o).forEach((function(e){j(o[e])?(Object.keys(t).includes(e)||Object.assign(t,n({},e,{})),rt(t[e],o[e])):Object.assign(t,n({},e,o[e]))})),rt.apply(void 0,[t].concat(i))):t}function ot(t,e){Array.from(t.length?t:[t]).reverse().forEach((function(t,i){var n=i>0?e.cloneNode(!0):e,r=t.parentNode,o=t.nextSibling;n.appendChild(t),o?r.insertBefore(n,o):r.appendChild(n)}))}function at(t,e){$(t)&&!J(e)&&Object.entries(e).filter((function(t){var e=a(t,2)[1];return!V(e)})).forEach((function(e){var i=a(e,2);return t.setAttribute(i[0],i[1])}))}function st(t,e,i){var n=document.createElement(t);return j(e)&&at(n,e),q(i)&&(n.innerText=i),n}function lt(t,e,i,n){$(e)&&e.appendChild(st(t,i,n))}function ct(t){W(t)||G(t)?Array.from(t).forEach(ct):$(t)&&$(t.parentNode)&&t.parentNode.removeChild(t)}function ut(t){if($(t))for(var e=t.childNodes.length;e>0;)t.removeChild(t.lastChild),e-=1}function ht(t,e){return $(e)&&$(e.parentNode)&&$(t)?(e.parentNode.replaceChild(t,e),t):null}function pt(t,e){if(!q(t)||J(t))return{};var i={},n=rt({},e);return t.split(",").forEach((function(t){var e=t.trim(),r=e.replace(".",""),o=e.replace(/[[\]]/g,"").split("="),s=a(o,1)[0],l=o.length>1?o[1].replace(/["']/g,""):"";switch(e.charAt(0)){case".":i.class=q(n.class)?"".concat(n.class," ").concat(r):r;break;case"#":i.id=e.replace("#","");break;case"[":i[s]=l}})),rt(n,i)}function dt(t,e){if($(t)){var i=e;Z(i)||(i=!t.hidden),t.hidden=i}}function ft(t,e,i){if(W(t))return Array.from(t).map((function(t){return ft(t,e,i)}));if($(t)){var n="toggle";return void 0!==i&&(n=i?"add":"remove"),t.classList[n](e),t.classList.contains(e)}return!1}function mt(t,e){return $(t)&&t.classList.contains(e)}function gt(t,e){var i=Element.prototype;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(t,e)}function yt(t){return this.elements.container.querySelectorAll(t)}function _t(t){return this.elements.container.querySelector(t)}function vt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];$(t)&&(t.focus({preventScroll:!0}),e&&ft(t,this.config.classNames.tabFocus))}var bt,xt={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},wt={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(t,e,i){var n=wt[t]||"html5"!==e;return{api:n,ui:n&&wt.rangeInput&&("video"!==t||!it.isIPhone||it.isIPhone&&i&&wt.playsinline)}},pip:!(it.isIPhone||!H(st("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||st("video").disablePictureInPicture)),airplay:H(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(t){if(J(t))return!1;var e=a(t.split("/"),1)[0],i=t;if(!this.isHTML5||e!==this.type)return!1;Object.keys(xt).includes(i)&&(i+='; codecs="'.concat(xt[t],'"'));try{return Boolean(i&&this.media.canPlayType(i).replace(/no/,""))}catch(t){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(bt=document.createElement("input"),bt.type="range","range"===bt.type),touch:"ontouchstart"in document.documentElement,transitions:!1!==tt,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},Ct=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){return t=!0,null}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function St(t,e,i){var n=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t&&"addEventListener"in t&&!J(e)&&H(i)){var s=e.split(" "),l=a;Ct&&(l={passive:o,capture:a}),s.forEach((function(e){n&&n.eventListeners&&r&&n.eventListeners.push({element:t,type:e,callback:i,options:l}),t[r?"addEventListener":"removeEventListener"](e,i,l)}))}}function Tt(t){St.call(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2?arguments[2]:void 0,!0,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4])}function kt(t){St.call(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2?arguments[2]:void 0,!1,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4])}function Et(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];St.call(this,t,i,(function a(){kt(t,i,a,r,o);for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];n.apply(e,l)}),!0,r,o)}function Pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if($(t)&&!J(e)){var r=new CustomEvent(e,{bubbles:i,detail:o(o({},n),{},{plyr:this})});t.dispatchEvent(r)}}function It(){this&&this.eventListeners&&(this.eventListeners.forEach((function(t){t.element.removeEventListener(t.type,t.callback,t.options)})),this.eventListeners=[])}function Mt(){var t=this;return new Promise((function(e){return t.ready?setTimeout(e,0):Tt.call(t,t.elements.container,"ready",e)})).then((function(){}))}function At(t){(function(t){return z(t,Promise)&&R(t.then)})(t)&&t.then(null,(function(){}))}function zt(t){return!!(G(t)||q(t)&&t.includes(":"))&&(G(t)?t:t.split(":")).map(Number).every(U)}function Ot(t){if(!G(t)||!t.every(U))return null;var e=a(t,2),i=e[0],n=e[1],r=function t(e,i){return 0===i?e:t(i,e%i)}(i,n);return[i/r,n/r]}function Lt(t){var e=function(t){return zt(t)?t.split(":").map(Number):null},i=e(t);if(null===i&&(i=e(this.config.ratio)),null===i&&!J(this.embed)&&G(this.embed.ratio)&&(i=this.embed.ratio),null===i&&this.isHTML5){var n=this.media;i=Ot([n.videoWidth,n.videoHeight])}return i}function Dt(t){if(!this.isVideo)return{};var e=this.elements.wrapper,i=Lt.call(this,t),n=a(G(i)?i:[0,0],2),r=100/n[0]*n[1];if(e.style.paddingBottom="".concat(r,"%"),this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){var o=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),s=(o-r)/(o/50);this.fullscreen.active?e.style.paddingBottom=null:this.media.style.transform="translateY(-".concat(s,"%)")}else this.isHTML5&&e.classList.toggle(this.config.classNames.videoFixedRatio,null!==i);return{padding:r,ratio:i}}var Rt={getSources:function(){var t=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((function(e){var i=e.getAttribute("type");return!!J(i)||wt.mime.call(t,i)})):[]},getQualityOptions:function(){return this.config.quality.forced?this.config.quality.options:Rt.getSources.call(this).map((function(t){return Number(t.getAttribute("size"))})).filter(Boolean)},setup:function(){if(this.isHTML5){var t=this;t.options.speed=t.config.speed.options,J(this.config.ratio)||Dt.call(t),Object.defineProperty(t.media,"quality",{get:function(){var e=Rt.getSources.call(t).find((function(e){return e.getAttribute("src")===t.source}));return e&&Number(e.getAttribute("size"))},set:function(e){if(t.quality!==e){if(t.config.quality.forced&&H(t.config.quality.onChange))t.config.quality.onChange(e);else{var i=Rt.getSources.call(t).find((function(t){return Number(t.getAttribute("size"))===e}));if(!i)return;var n=t.media,r=n.currentTime,o=n.paused,a=n.preload,s=n.readyState,l=n.playbackRate;t.media.src=i.getAttribute("src"),("none"!==a||s)&&(t.once("loadedmetadata",(function(){t.speed=l,t.currentTime=r,o||At(t.play())})),t.media.load())}Pt.call(t,t.media,"qualitychange",!1,{quality:e})}}})}},cancelRequests:function(){this.isHTML5&&(ct(Rt.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Bt(t){return G(t)?t.filter((function(e,i){return t.indexOf(e)===i})):t}function Ft(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return J(t)?t:t.toString().replace(/{(\d+)}/g,(function(t,e){return i[e].toString()}))}var Nt=function(){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(new RegExp((arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),t.toString())},Vt=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString().replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}))};function jt(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return t=Nt(t,"-"," "),t=Nt(t,"_"," "),t=Vt(t),Nt(t," ","")}function Ut(t){var e=document.createElement("div");return e.appendChild(t),e.innerHTML}var qt={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Zt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(J(t)||J(e))return"";var i=nt(e.i18n,t);return J(i)?Object.keys(qt).includes(t)?qt[t]:"":(Object.entries({"{seektime}":e.seekTime,"{title}":e.title}).forEach((function(t){var e=a(t,2);i=Nt(i,e[0],e[1])})),i)},Ht=function(){function e(i){t(this,e),this.enabled=i.config.storage.enabled,this.key=i.config.storage.key}return i(e,[{key:"get",value:function(t){if(!e.supported||!this.enabled)return null;var i=window.localStorage.getItem(this.key);if(J(i))return null;var n=JSON.parse(i);return q(t)&&t.length?n[t]:n}},{key:"set",value:function(t){if(e.supported&&this.enabled&&j(t)){var i=this.get();J(i)&&(i={}),rt(i,t),window.localStorage.setItem(this.key,JSON.stringify(i))}}}],[{key:"supported",get:function(){try{if(!("localStorage"in window))return!1;var t="___test";return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}}}]),e}();function Gt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return new Promise((function(i,n){try{var r=new XMLHttpRequest;if(!("withCredentials"in r))return;r.addEventListener("load",(function(){if("text"===e)try{i(JSON.parse(r.responseText))}catch(t){i(r.responseText)}else i(r.response)})),r.addEventListener("error",(function(){throw new Error(r.status)})),r.open("GET",t,!0),r.responseType=e,r.send()}catch(t){n(t)}}))}function Wt(t,e){if(q(t)){var i="cache",n=q(e),r=function(){return null!==document.getElementById(e)},o=function(t,e){t.innerHTML=e,n&&r()||document.body.insertAdjacentElement("afterbegin",t)};if(!n||!r()){var a=Ht.supported,s=document.createElement("div");if(s.setAttribute("hidden",""),n&&s.setAttribute("id",e),a){var l=window.localStorage.getItem("".concat(i,"-").concat(e));if(null!==l){var c=JSON.parse(l);o(s,c.content)}}Gt(t).then((function(t){J(t)||(a&&window.localStorage.setItem("".concat(i,"-").concat(e),JSON.stringify({content:t})),o(s,t))})).catch((function(){}))}}}var $t=function(t){return Math.trunc(t/60/60%60,10)},Kt=function(t){return Math.trunc(t/60%60,10)},Xt=function(t){return Math.trunc(t%60,10)};function Qt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!U(t))return Qt(void 0,e,i);var n=function(t){return"0".concat(t).slice(-2)},r=$t(t),o=Kt(t),a=Xt(t);return r=e||r>0?"".concat(r,":"):"","".concat(i&&t>0?"-":"").concat(r).concat(n(o),":").concat(n(a))}var Yt={getIconUrl:function(){var t=new URL(this.config.iconUrl,window.location).host!==window.location.host||it.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:t}},findElements:function(){try{return this.elements.controls=_t.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:yt.call(this,this.config.selectors.buttons.play),pause:_t.call(this,this.config.selectors.buttons.pause),restart:_t.call(this,this.config.selectors.buttons.restart),rewind:_t.call(this,this.config.selectors.buttons.rewind),fastForward:_t.call(this,this.config.selectors.buttons.fastForward),mute:_t.call(this,this.config.selectors.buttons.mute),pip:_t.call(this,this.config.selectors.buttons.pip),airplay:_t.call(this,this.config.selectors.buttons.airplay),settings:_t.call(this,this.config.selectors.buttons.settings),captions:_t.call(this,this.config.selectors.buttons.captions),fullscreen:_t.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=_t.call(this,this.config.selectors.progress),this.elements.inputs={seek:_t.call(this,this.config.selectors.inputs.seek),volume:_t.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:_t.call(this,this.config.selectors.display.buffer),currentTime:_t.call(this,this.config.selectors.display.currentTime),duration:_t.call(this,this.config.selectors.display.duration)},$(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(t){return this.debug.warn("It looks like there is a problem with your custom controls HTML",t),this.toggleNativeControls(!0),!1}},createIcon:function(t,e){var i="http://www.w3.org/2000/svg",n=Yt.getIconUrl.call(this),r="".concat(n.cors?"":n.url,"#").concat(this.config.iconPrefix),o=document.createElementNS(i,"svg");at(o,rt(e,{"aria-hidden":"true",focusable:"false"}));var a=document.createElementNS(i,"use"),s="".concat(r,"-").concat(t);return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",s),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s),o.appendChild(a),o},createLabel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Zt(t,this.config);return st("span",o(o({},e),{},{class:[e.class,this.config.classNames.hidden].filter(Boolean).join(" ")}),i)},createBadge:function(t){if(J(t))return null;var e=st("span",{class:this.config.classNames.menu.value});return e.appendChild(st("span",{class:this.config.classNames.menu.badge},t)),e},createButton:function(t,e){var i=this,n=rt({},e),r=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return(t=jt(t)).charAt(0).toLowerCase()+t.slice(1)}(t),o={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((function(t){Object.keys(n).includes(t)&&(o[t]=n[t],delete n[t])})),"button"!==o.element||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.split(" ").some((function(t){return t===i.config.classNames.control}))||rt(n,{class:"".concat(n.class," ").concat(this.config.classNames.control)}):n.class=this.config.classNames.control,t){case"play":o.toggle=!0,o.label="play",o.labelPressed="pause",o.icon="play",o.iconPressed="pause";break;case"mute":o.toggle=!0,o.label="mute",o.labelPressed="unmute",o.icon="volume",o.iconPressed="muted";break;case"captions":o.toggle=!0,o.label="enableCaptions",o.labelPressed="disableCaptions",o.icon="captions-off",o.iconPressed="captions-on";break;case"fullscreen":o.toggle=!0,o.label="enterFullscreen",o.labelPressed="exitFullscreen",o.icon="enter-fullscreen",o.iconPressed="exit-fullscreen";break;case"play-large":n.class+=" ".concat(this.config.classNames.control,"--overlaid"),r="play",o.label="play",o.icon="play";break;default:J(o.label)&&(o.label=r),J(o.icon)&&(o.icon=t)}var a=st(o.element);return o.toggle?(a.appendChild(Yt.createIcon.call(this,o.iconPressed,{class:"icon--pressed"})),a.appendChild(Yt.createIcon.call(this,o.icon,{class:"icon--not-pressed"})),a.appendChild(Yt.createLabel.call(this,o.labelPressed,{class:"label--pressed"})),a.appendChild(Yt.createLabel.call(this,o.label,{class:"label--not-pressed"}))):(a.appendChild(Yt.createIcon.call(this,o.icon)),a.appendChild(Yt.createLabel.call(this,o.label))),rt(n,pt(this.config.selectors.buttons[r],n)),at(a,n),"play"===r?(G(this.elements.buttons[r])||(this.elements.buttons[r]=[]),this.elements.buttons[r].push(a)):this.elements.buttons[r]=a,a},createRange:function(t,e){var i=st("input",rt(pt(this.config.selectors.inputs[t]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Zt(t,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},e));return this.elements.inputs[t]=i,Yt.updateRangeFill.call(this,i),M.setup(i),i},createProgress:function(t,e){var i=st("progress",rt(pt(this.config.selectors.display[t]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},e));if("volume"!==t){i.appendChild(st("span",null,"0"));var n={played:"played",buffer:"buffered"}[t],r=n?Zt(n,this.config):"";i.innerText="% ".concat(r.toLowerCase())}return this.elements.display[t]=i,i},createTime:function(t,e){var i=pt(this.config.selectors.display[t],e),n=st("div",rt(i,{class:"".concat(i.class?i.class:""," ").concat(this.config.classNames.display.time," ").trim(),"aria-label":Zt(t,this.config)}),"00:00");return this.elements.display[t]=n,n},bindMenuItemShortcuts:function(t,e){var i=this;Tt.call(this,t,"keydown keyup",(function(n){if([32,38,39,40].includes(n.which)&&(n.preventDefault(),n.stopPropagation(),"keydown"!==n.type)){var r,o=gt(t,'[role="menuitemradio"]');!o&&[32,39].includes(n.which)?Yt.showMenuPanel.call(i,e,!0):32!==n.which&&(40===n.which||o&&39===n.which?$(r=t.nextElementSibling)||(r=t.parentNode.firstElementChild):$(r=t.previousElementSibling)||(r=t.parentNode.lastElementChild),vt.call(i,r,!0))}}),!1),Tt.call(this,t,"keyup",(function(t){13===t.which&&Yt.focusFirstMenuItem.call(i,null,!0)}))},createMenuItem:function(t){var e=this,i=t.value,n=t.list,r=t.type,o=t.title,a=t.badge,s=void 0===a?null:a,l=t.checked,c=void 0!==l&&l,u=pt(this.config.selectors.inputs[r]),h=st("button",rt(u,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(u.class?u.class:"").trim(),"aria-checked":c,value:i})),p=st("span");p.innerHTML=o,$(s)&&p.appendChild(s),h.appendChild(p),Object.defineProperty(h,"checked",{enumerable:!0,get:function(){return"true"===h.getAttribute("aria-checked")},set:function(t){t&&Array.from(h.parentNode.children).filter((function(t){return gt(t,'[role="menuitemradio"]')})).forEach((function(t){return t.setAttribute("aria-checked","false")})),h.setAttribute("aria-checked",t?"true":"false")}}),this.listeners.bind(h,"click keyup",(function(t){if(!X(t)||32===t.which){switch(t.preventDefault(),t.stopPropagation(),h.checked=!0,r){case"language":e.currentTrack=Number(i);break;case"quality":e.quality=i;break;case"speed":e.speed=parseFloat(i)}Yt.showMenuPanel.call(e,"home",X(t))}}),r,!1),Yt.bindMenuItemShortcuts.call(this,h,r),n.appendChild(h)},formatTime:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return U(t)?Qt(t,$t(this.duration)>0,e):t},updateTimeDisplay:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];$(t)&&U(e)&&(t.innerText=Yt.formatTime(e,i))},updateVolume:function(){this.supported.ui&&($(this.elements.inputs.volume)&&Yt.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),$(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;$(t)&&(t.value=e,Yt.updateRangeFill.call(this,t))},updateProgress:function(t){var e=this;if(this.supported.ui&&K(t)){var i,n,r=0;if(t)switch(t.type){case"timeupdate":case"seeking":case"seeked":n=this.duration,r=0===(i=this.currentTime)||0===n||Number.isNaN(i)||Number.isNaN(n)?0:(i/n*100).toFixed(2),"timeupdate"===t.type&&Yt.setRange.call(this,this.elements.inputs.seek,r);break;case"playing":case"progress":!function(t,i){var n=U(i)?i:0,r=$(t)?t:e.elements.display.buffer;if($(r)){r.value=n;var o=r.getElementsByTagName("span")[0];$(o)&&(o.childNodes[0].nodeValue=n)}}(this.elements.display.buffer,100*this.buffered)}}},updateRangeFill:function(t){var e=K(t)?t.target:t;if($(e)&&"range"===e.getAttribute("type")){if(gt(e,this.config.selectors.inputs.seek)){e.setAttribute("aria-valuenow",this.currentTime);var i=Yt.formatTime(this.currentTime),n=Yt.formatTime(this.duration),r=Zt("seekLabel",this.config);e.setAttribute("aria-valuetext",r.replace("{currentTime}",i).replace("{duration}",n))}else if(gt(e,this.config.selectors.inputs.volume)){var o=100*e.value;e.setAttribute("aria-valuenow",o),e.setAttribute("aria-valuetext","".concat(o.toFixed(1),"%"))}else e.setAttribute("aria-valuenow",e.value);it.isWebkit&&e.style.setProperty("--value","".concat(e.value/e.max*100,"%"))}},updateSeekTooltip:function(t){var e=this;if(this.config.tooltips.seek&&$(this.elements.inputs.seek)&&$(this.elements.display.seekTooltip)&&0!==this.duration){var i="".concat(this.config.classNames.tooltip,"--visible"),n=function(t){return ft(e.elements.display.seekTooltip,i,t)};if(this.touch)n(!1);else{var r=0,o=this.elements.progress.getBoundingClientRect();if(K(t))r=100/o.width*(t.pageX-o.left);else{if(!mt(this.elements.display.seekTooltip,i))return;r=parseFloat(this.elements.display.seekTooltip.style.left,10)}r<0?r=0:r>100&&(r=100),Yt.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*r),this.elements.display.seekTooltip.style.left="".concat(r,"%"),K(t)&&["mouseenter","mouseleave"].includes(t.type)&&n("mouseenter"===t.type)}}},timeUpdate:function(t){var e=!$(this.elements.display.duration)&&this.config.invertTime;Yt.updateTimeDisplay.call(this,this.elements.display.currentTime,e?this.duration-this.currentTime:this.currentTime,e),t&&"timeupdate"===t.type&&this.media.seeking||Yt.updateProgress.call(this,t)},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return dt(this.elements.display.currentTime,!0),void dt(this.elements.progress,!0);$(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var t=$(this.elements.display.duration);!t&&this.config.displayDuration&&this.paused&&Yt.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),t&&Yt.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),Yt.updateSeekTooltip.call(this)}},toggleMenuButton:function(t,e){dt(this.elements.settings.buttons[t],!e)},updateSetting:function(t,e,i){var n=this.elements.settings.panels[t],r=null,o=e;if("captions"===t)r=this.currentTrack;else{if(r=J(i)?this[t]:i,J(r)&&(r=this.config[t].default),!J(this.options[t])&&!this.options[t].includes(r))return void this.debug.warn("Unsupported value of '".concat(r,"' for ").concat(t));if(!this.config[t].options.includes(r))return void this.debug.warn("Disabled value of '".concat(r,"' for ").concat(t))}if($(o)||(o=n&&n.querySelector('[role="menu"]')),$(o)){this.elements.settings.buttons[t].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=Yt.getLabel.call(this,t,r);var a=o&&o.querySelector('[value="'.concat(r,'"]'));$(a)&&(a.checked=!0)}},getLabel:function(t,e){switch(t){case"speed":return 1===e?Zt("normal",this.config):"".concat(e,"&times;");case"quality":if(U(e)){var i=Zt("qualityLabel.".concat(e),this.config);return i.length?i:"".concat(e,"p")}return Vt(e);case"captions":return ee.getLabel.call(this);default:return null}},setQualityMenu:function(t){var e=this;if($(this.elements.settings.panels.quality)){var i="quality",n=this.elements.settings.panels.quality.querySelector('[role="menu"]');G(t)&&(this.options.quality=Bt(t).filter((function(t){return e.config.quality.options.includes(t)})));var r=!J(this.options.quality)&&this.options.quality.length>1;if(Yt.toggleMenuButton.call(this,i,r),ut(n),Yt.checkMenu.call(this),r){var o=function(t){var i=Zt("qualityBadge.".concat(t),e.config);return i.length?Yt.createBadge.call(e,i):null};this.options.quality.sort((function(t,i){var n=e.config.quality.options;return n.indexOf(t)>n.indexOf(i)?1:-1})).forEach((function(t){Yt.createMenuItem.call(e,{value:t,list:n,type:i,title:Yt.getLabel.call(e,"quality",t),badge:o(t)})})),Yt.updateSetting.call(this,i,n)}}},setCaptionsMenu:function(){var t=this;if($(this.elements.settings.panels.captions)){var e="captions",i=this.elements.settings.panels.captions.querySelector('[role="menu"]'),n=ee.getTracks.call(this),r=Boolean(n.length);if(Yt.toggleMenuButton.call(this,e,r),ut(i),Yt.checkMenu.call(this),r){var o=n.map((function(e,n){return{value:n,checked:t.captions.toggled&&t.currentTrack===n,title:ee.getLabel.call(t,e),badge:e.language&&Yt.createBadge.call(t,e.language.toUpperCase()),list:i,type:"language"}}));o.unshift({value:-1,checked:!this.captions.toggled,title:Zt("disabled",this.config),list:i,type:"language"}),o.forEach(Yt.createMenuItem.bind(this)),Yt.updateSetting.call(this,e,i)}}},setSpeedMenu:function(){var t=this;if($(this.elements.settings.panels.speed)){var e="speed",i=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((function(e){return e>=t.minimumSpeed&&e<=t.maximumSpeed}));var n=!J(this.options.speed)&&this.options.speed.length>1;Yt.toggleMenuButton.call(this,e,n),ut(i),Yt.checkMenu.call(this),n&&(this.options.speed.forEach((function(n){Yt.createMenuItem.call(t,{value:n,list:i,type:e,title:Yt.getLabel.call(t,"speed",n)})})),Yt.updateSetting.call(this,e,i))}},checkMenu:function(){var t=this.elements.settings.buttons,e=!J(t)&&Object.values(t).some((function(t){return!t.hidden}));dt(this.elements.settings.menu,!e)},focusFirstMenuItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.elements.settings.popup.hidden){var i=t;$(i)||(i=Object.values(this.elements.settings.panels).find((function(t){return!t.hidden})));var n=i.querySelector('[role^="menuitem"]');vt.call(this,n,e)}},toggleMenu:function(t){var e=this.elements.settings.popup,i=this.elements.buttons.settings;if($(e)&&$(i)){var n=e.hidden,r=n;if(Z(t))r=t;else if(X(t)&&27===t.which)r=!1;else if(K(t)){var o=H(t.composedPath)?t.composedPath()[0]:t.target,a=e.contains(o);if(a||!a&&t.target!==i&&r)return}i.setAttribute("aria-expanded",r),dt(e,!r),ft(this.elements.container,this.config.classNames.menu.open,r),r&&X(t)?Yt.focusFirstMenuItem.call(this,null,!0):r||n||vt.call(this,i,X(t))}},getMenuSize:function(t){var e=t.cloneNode(!0);e.style.position="absolute",e.style.opacity=0,e.removeAttribute("hidden"),t.parentNode.appendChild(e);var i=e.scrollWidth,n=e.scrollHeight;return ct(e),{width:i,height:n}},showMenuPanel:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(e));if($(n)){var r=n.parentNode,o=Array.from(r.children).find((function(t){return!t.hidden}));if(wt.transitions&&!wt.reducedMotion){r.style.width="".concat(o.scrollWidth,"px"),r.style.height="".concat(o.scrollHeight,"px");var a=Yt.getMenuSize.call(this,n),s=function e(i){i.target===r&&["width","height"].includes(i.propertyName)&&(r.style.width="",r.style.height="",kt.call(t,r,tt,e))};Tt.call(this,r,tt,s),r.style.width="".concat(a.width,"px"),r.style.height="".concat(a.height,"px")}dt(o,!0),dt(n,!1),Yt.focusFirstMenuItem.call(this,n,i)}},setDownloadUrl:function(){var t=this.elements.buttons.download;$(t)&&t.setAttribute("href",this.download)},create:function(t){var e=this,i=Yt.bindMenuItemShortcuts,n=Yt.createButton,r=Yt.createProgress,o=Yt.createRange,a=Yt.createTime,s=Yt.setQualityMenu,l=Yt.setSpeedMenu,c=Yt.showMenuPanel;this.elements.controls=null,G(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(n.call(this,"play-large"));var u=st("div",pt(this.config.selectors.controls.wrapper));this.elements.controls=u;var h={class:"plyr__controls__item"};return Bt(G(this.config.controls)?this.config.controls:[]).forEach((function(s){if("restart"===s&&u.appendChild(n.call(e,"restart",h)),"rewind"===s&&u.appendChild(n.call(e,"rewind",h)),"play"===s&&u.appendChild(n.call(e,"play",h)),"fast-forward"===s&&u.appendChild(n.call(e,"fast-forward",h)),"progress"===s){var l=st("div",{class:"".concat(h.class," plyr__progress__container")}),p=st("div",pt(e.config.selectors.progress));if(p.appendChild(o.call(e,"seek",{id:"plyr-seek-".concat(t.id)})),p.appendChild(r.call(e,"buffer")),e.config.tooltips.seek){var d=st("span",{class:e.config.classNames.tooltip},"00:00");p.appendChild(d),e.elements.display.seekTooltip=d}e.elements.progress=p,l.appendChild(e.elements.progress),u.appendChild(l)}if("current-time"===s&&u.appendChild(a.call(e,"currentTime",h)),"duration"===s&&u.appendChild(a.call(e,"duration",h)),"mute"===s||"volume"===s){var f=e.elements.volume;$(f)&&u.contains(f)||(f=st("div",rt({},h,{class:"".concat(h.class," plyr__volume").trim()})),e.elements.volume=f,u.appendChild(f)),"mute"===s&&f.appendChild(n.call(e,"mute")),"volume"!==s||it.isIos||f.appendChild(o.call(e,"volume",rt({max:1,step:.05,value:e.config.volume},{id:"plyr-volume-".concat(t.id)})))}if("captions"===s&&u.appendChild(n.call(e,"captions",h)),"settings"===s&&!J(e.config.settings)){var m=st("div",rt({},h,{class:"".concat(h.class," plyr__menu").trim(),hidden:""}));m.appendChild(n.call(e,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(t.id),"aria-expanded":!1}));var g=st("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(t.id),hidden:""}),y=st("div"),_=st("div",{id:"plyr-settings-".concat(t.id,"-home")}),v=st("div",{role:"menu"});_.appendChild(v),y.appendChild(_),e.elements.settings.panels.home=_,e.config.settings.forEach((function(n){var r=st("button",rt(pt(e.config.selectors.buttons.settings),{type:"button",class:"".concat(e.config.classNames.control," ").concat(e.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));i.call(e,r,n),Tt.call(e,r,"click",(function(){c.call(e,n,!1)}));var o=st("span",null,Zt(n,e.config)),a=st("span",{class:e.config.classNames.menu.value});a.innerHTML=t[n],o.appendChild(a),r.appendChild(o),v.appendChild(r);var s=st("div",{id:"plyr-settings-".concat(t.id,"-").concat(n),hidden:""}),l=st("button",{type:"button",class:"".concat(e.config.classNames.control," ").concat(e.config.classNames.control,"--back")});l.appendChild(st("span",{"aria-hidden":!0},Zt(n,e.config))),l.appendChild(st("span",{class:e.config.classNames.hidden},Zt("menuBack",e.config))),Tt.call(e,s,"keydown",(function(t){37===t.which&&(t.preventDefault(),t.stopPropagation(),c.call(e,"home",!0))}),!1),Tt.call(e,l,"click",(function(){c.call(e,"home",!1)})),s.appendChild(l),s.appendChild(st("div",{role:"menu"})),y.appendChild(s),e.elements.settings.buttons[n]=r,e.elements.settings.panels[n]=s})),g.appendChild(y),m.appendChild(g),u.appendChild(m),e.elements.settings.popup=g,e.elements.settings.menu=m}if("pip"===s&&wt.pip&&u.appendChild(n.call(e,"pip",h)),"airplay"===s&&wt.airplay&&u.appendChild(n.call(e,"airplay",h)),"download"===s){var b=rt({},h,{element:"a",href:e.download,target:"_blank"});e.isHTML5&&(b.download=""),!Y(e.config.urls.download)&&e.isEmbed&&rt(b,{icon:"logo-".concat(e.provider),label:e.provider}),u.appendChild(n.call(e,"download",b))}"fullscreen"===s&&u.appendChild(n.call(e,"fullscreen",h))})),this.isHTML5&&s.call(this,Rt.getQualityOptions.call(this)),l.call(this),u},inject:function(){var t=this;if(this.config.loadSprite){var e=Yt.getIconUrl.call(this);e.cors&&Wt(e.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());var i=null;this.elements.controls=null;var n,r,o={id:this.id,seektime:this.config.seekTime,title:this.config.title},s=!0;if(H(this.config.controls)&&(this.config.controls=this.config.controls.call(this,o)),this.config.controls||(this.config.controls=[]),$(this.config.controls)||q(this.config.controls)?i=this.config.controls:(i=Yt.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:ee.getLabel.call(this)}),s=!1),s&&q(this.config.controls)&&(n=i,Object.entries(o).forEach((function(t){var e=a(t,2),i=e[1];n=Nt(n,"{".concat(e[0],"}"),i)})),i=n),q(this.config.selectors.controls.container)&&(r=document.querySelector(this.config.selectors.controls.container)),$(r)||(r=this.elements.container),r[$(i)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",i),$(this.elements.controls)||Yt.findElements.call(this),!J(this.elements.buttons)){var l=function(e){var i=t.config.classNames.controlPressed;Object.defineProperty(e,"pressed",{enumerable:!0,get:function(){return mt(e,i)},set:function(){ft(e,i,arguments.length>0&&void 0!==arguments[0]&&arguments[0])}})};Object.values(this.elements.buttons).filter(Boolean).forEach((function(t){G(t)||W(t)?Array.from(t).filter(Boolean).forEach(l):l(t)}))}if(it.isEdge&&et(r),this.config.tooltips.controls){var c=this.config,u=c.classNames,h=c.selectors,p="".concat(h.controls.wrapper," ").concat(h.labels," .").concat(u.hidden),d=yt.call(this,p);Array.from(d).forEach((function(e){ft(e,t.config.classNames.hidden,!1),ft(e,t.config.classNames.tooltip,!0)}))}}};function Jt(t){var e=t;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){var i=document.createElement("a");i.href=e,e=i.href}try{return new URL(e)}catch(t){return null}}function te(t){var e=new URLSearchParams;return j(t)&&Object.entries(t).forEach((function(t){var i=a(t,2);e.set(i[0],i[1])})),e}var ee={setup:function(){if(this.supported.ui)if(!this.isVideo||this.isYouTube||this.isHTML5&&!wt.textTracks)G(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Yt.setCaptionsMenu.call(this);else{if($(this.elements.captions)||(this.elements.captions=st("div",pt(this.config.selectors.captions)),function(t,e){$(t)&&$(e)&&e.parentNode.insertBefore(t,e.nextSibling)}(this.elements.captions,this.elements.wrapper)),it.isIE&&window.URL){var t=this.media.querySelectorAll("track");Array.from(t).forEach((function(t){var e=t.getAttribute("src"),i=Jt(e);null!==i&&i.hostname!==window.location.href.hostname&&["http:","https:"].includes(i.protocol)&&Gt(e,"blob").then((function(e){t.setAttribute("src",window.URL.createObjectURL(e))})).catch((function(){ct(t)}))}))}var e=Bt((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((function(t){return t.split("-")[0]}))),i=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===i&&(i=a(e,1)[0]);var n=this.storage.get("captions");Z(n)||(n=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:n,language:i,languages:e}),this.isHTML5&&Tt.call(this,this.media.textTracks,this.config.captions.update?"addtrack removetrack":"removetrack",ee.update.bind(this)),setTimeout(ee.update.bind(this),0)}},update:function(){var t=this,e=ee.getTracks.call(this,!0),i=this.captions,n=i.active,r=i.language,o=i.meta,a=i.currentTrackNode,s=Boolean(e.find((function(t){return t.language===r})));this.isHTML5&&this.isVideo&&e.filter((function(t){return!o.get(t)})).forEach((function(e){t.debug.log("Track added",e),o.set(e,{default:"showing"===e.mode}),"showing"===e.mode&&(e.mode="hidden"),Tt.call(t,e,"cuechange",(function(){return ee.updateCues.call(t)}))})),(s&&this.language!==r||!e.includes(a))&&(ee.setLanguage.call(this,r),ee.toggle.call(this,n&&s)),ft(this.elements.container,this.config.classNames.captions.enabled,!J(e)),G(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Yt.setCaptionsMenu.call(this)},toggle:function(t){var e=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.supported.ui){var n=this.captions.toggled,r=this.config.classNames.captions.active,o=V(t)?!n:t;if(o!==n){if(i||(this.captions.active=o,this.storage.set({captions:o})),!this.language&&o&&!i){var a=ee.getTracks.call(this),l=ee.findTrack.call(this,[this.captions.language].concat(s(this.captions.languages)),!0);return this.captions.language=l.language,void ee.set.call(this,a.indexOf(l))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=o),ft(this.elements.container,r,o),this.captions.toggled=o,Yt.updateSetting.call(this,"captions"),Pt.call(this,this.media,o?"captionsenabled":"captionsdisabled")}setTimeout((function(){o&&e.captions.toggled&&(e.captions.currentTrackNode.mode="hidden")}))}},set:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=ee.getTracks.call(this);if(-1!==t)if(U(t))if(t in i){if(this.captions.currentTrack!==t){this.captions.currentTrack=t;var n=i[t],r=(n||{}).language;this.captions.currentTrackNode=n,Yt.updateSetting.call(this,"captions"),e||(this.captions.language=r,this.storage.set({language:r})),this.isVimeo&&this.embed.enableTextTrack(r),Pt.call(this,this.media,"languagechange")}ee.toggle.call(this,!0,e),this.isHTML5&&this.isVideo&&ee.updateCues.call(this)}else this.debug.warn("Track not found",t);else this.debug.warn("Invalid caption argument",t);else ee.toggle.call(this,!1,e)},setLanguage:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(q(t)){var i=t.toLowerCase();this.captions.language=i;var n=ee.getTracks.call(this),r=ee.findTrack.call(this,[i]);ee.set.call(this,n.indexOf(r),e)}else this.debug.warn("Invalid language argument",t)},getTracks:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Array.from((this.media||{}).textTracks||[]).filter((function(i){return!t.isHTML5||e||t.captions.meta.has(i)})).filter((function(t){return["captions","subtitles"].includes(t.kind)}))},findTrack:function(t){var e,i=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=ee.getTracks.call(this),o=function(t){return Number((i.captions.meta.get(t)||{}).default)},a=Array.from(r).sort((function(t,e){return o(e)-o(t)}));return t.every((function(t){return!(e=a.find((function(e){return e.language===t})))})),e||(n?a[0]:void 0)},getCurrentTrack:function(){return ee.getTracks.call(this)[this.currentTrack]},getLabel:function(t){var e=t;return!Q(e)&&wt.textTracks&&this.captions.toggled&&(e=ee.getCurrentTrack.call(this)),Q(e)?J(e.label)?J(e.language)?Zt("enabled",this.config):t.language.toUpperCase():e.label:Zt("disabled",this.config)},updateCues:function(t){if(this.supported.ui)if($(this.elements.captions))if(V(t)||Array.isArray(t)){var e=t;if(!e){var i=ee.getCurrentTrack.call(this);e=Array.from((i||{}).activeCues||[]).map((function(t){return t.getCueAsHTML()})).map(Ut)}var n=e.map((function(t){return t.trim()})).join("\n");if(n!==this.elements.captions.innerHTML){ut(this.elements.captions);var r=st("span",pt(this.config.selectors.caption));r.innerHTML=n,this.elements.captions.appendChild(r),Pt.call(this,this.media,"cuechange")}}else this.debug.warn("updateCues: Invalid input",t);else this.debug.warn("No captions element to render to")}},ie={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.6.3/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1}},ne="picture-in-picture",re={html5:"html5",youtube:"youtube",vimeo:"vimeo"},oe="video",ae=function(){},se=function(){function e(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t(this,e),this.enabled=window.console&&i,this.enabled&&this.log("Debugging enabled")}return i(e,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):ae}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):ae}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):ae}}]),e}(),le=function(){function e(i){var n=this;t(this,e),this.player=i,this.prefix=e.prefix,this.property=e.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===i.config.fullscreen.fallback,this.player.elements.fullscreen=i.config.fullscreen.container&&function(t,e){return(Element.prototype.closest||function(){var t=this;do{if(gt.matches(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}).call(t,e)}(this.player.elements.container,i.config.fullscreen.container),Tt.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),(function(){n.onChange()})),Tt.call(this.player,this.player.elements.container,"dblclick",(function(t){$(n.player.elements.controls)&&n.player.elements.controls.contains(t.target)||n.player.listeners.proxy(t,n.toggle,"fullscreen")})),Tt.call(this,this.player.elements.container,"keydown",(function(t){return n.trapFocus(t)})),this.update()}return i(e,[{key:"onChange",value:function(){if(this.enabled){var t=this.player.elements.buttons.fullscreen;$(t)&&(t.pressed=this.active),Pt.call(this.player,this.target===this.player.media?this.target:this.player.elements.container,this.active?"enterfullscreen":"exitfullscreen",!0)}}},{key:"toggleFallback",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=t?"hidden":"",ft(this.target,this.player.config.classNames.fullscreen.fallback,t),it.isIos){var e=document.head.querySelector('meta[name="viewport"]'),i="viewport-fit=cover";e||(e=document.createElement("meta")).setAttribute("name","viewport");var n=q(e.content)&&e.content.includes(i);t?(this.cleanupViewport=!n,n||(e.content+=",".concat(i))):this.cleanupViewport&&(e.content=e.content.split(",").filter((function(t){return t.trim()!==i})).join(","))}this.onChange()}},{key:"trapFocus",value:function(t){if(!it.isIos&&this.active&&"Tab"===t.key&&9===t.keyCode){var e=document.activeElement,i=yt.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),n=a(i,1)[0],r=i[i.length-1];e!==r||t.shiftKey?e===n&&t.shiftKey&&(r.focus(),t.preventDefault()):(n.focus(),t.preventDefault())}}},{key:"update",value:function(){this.player.debug.log(this.enabled?"".concat(this.forceFallback?"Fallback (forced)":e.native?"Native":"Fallback"," fullscreen enabled"):"Fullscreen not supported and fallback disabled"),ft(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}},{key:"enter",value:function(){this.enabled&&(it.isIos&&this.player.config.fullscreen.iosNative?this.target.webkitEnterFullscreen():!e.native||this.forceFallback?this.toggleFallback(!0):this.prefix?J(this.prefix)||this.target["".concat(this.prefix,"Request").concat(this.property)]():this.target.requestFullscreen({navigationUI:"hide"}))}},{key:"exit",value:function(){if(this.enabled)if(it.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),At(this.player.play());else if(!e.native||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!J(this.prefix)){var t="moz"===this.prefix?"Cancel":"Exit";document["".concat(this.prefix).concat(t).concat(this.property)]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}},{key:"toggle",value:function(){this.active?this.exit():this.enter()}},{key:"usingNative",get:function(){return e.native&&!this.forceFallback}},{key:"enabled",get:function(){return(e.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}},{key:"active",get:function(){if(!this.enabled)return!1;if(!e.native||this.forceFallback)return mt(this.target,this.player.config.classNames.fullscreen.fallback);var t=this.prefix?document["".concat(this.prefix).concat(this.property,"Element")]:document.fullscreenElement;return t&&t.shadowRoot?t===this.target.getRootNode().host:t===this.target}},{key:"target",get:function(){return it.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}],[{key:"native",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(H(document.exitFullscreen))return"";var t="";return["webkit","moz","ms"].some((function(e){return!(!H(document["".concat(e,"ExitFullscreen")])&&!H(document["".concat(e,"CancelFullScreen")])||(t=e,0))})),t}},{key:"property",get:function(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}}]),e}();function ce(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(i,n){var r=new Image,o=function(){delete r.onload,delete r.onerror,(r.naturalWidth>=e?i:n)(r)};Object.assign(r,{onload:o,onerror:o,src:t})}))}var ue={addStyleHook:function(){ft(this.elements.container,this.config.selectors.container.replace(".",""),!0),ft(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var t=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void ue.toggleNativeControls.call(this,!0);$(this.elements.controls)||(Yt.inject.call(this),this.listeners.controls()),ue.toggleNativeControls.call(this),this.isHTML5&&ee.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Yt.updateVolume.call(this),Yt.timeUpdate.call(this),ue.checkPlaying.call(this),ft(this.elements.container,this.config.classNames.pip.supported,wt.pip&&this.isHTML5&&this.isVideo),ft(this.elements.container,this.config.classNames.airplay.supported,wt.airplay&&this.isHTML5),ft(this.elements.container,this.config.classNames.isIos,it.isIos),ft(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((function(){Pt.call(t,t.media,"ready")}),0),ue.setTitle.call(this),this.poster&&ue.setPoster.call(this,this.poster,!1).catch((function(){})),this.config.duration&&Yt.durationUpdate.call(this)},setTitle:function(){var t=Zt("play",this.config);if(q(this.config.title)&&!J(this.config.title)&&(t+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach((function(e){e.setAttribute("aria-label",t)})),this.isEmbed){var e=_t.call(this,"iframe");if(!$(e))return;var i=J(this.config.title)?"video":this.config.title,n=Zt("frameTitle",this.config);e.setAttribute("title",n.replace("{title}",i))}},togglePoster:function(t){ft(this.elements.container,this.config.classNames.posterEnabled,t)},setPoster:function(t){var e=this;return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]||!this.poster?(this.media.setAttribute("data-poster",t),this.elements.poster.removeAttribute("hidden"),Mt.call(this).then((function(){return ce(t)})).catch((function(i){throw t===e.poster&&ue.togglePoster.call(e,!1),i})).then((function(){if(t!==e.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((function(){return Object.assign(e.elements.poster.style,{backgroundImage:"url('".concat(t,"')"),backgroundSize:""}),ue.togglePoster.call(e,!0),t}))):Promise.reject(new Error("Poster already set"))},checkPlaying:function(t){var e=this;ft(this.elements.container,this.config.classNames.playing,this.playing),ft(this.elements.container,this.config.classNames.paused,this.paused),ft(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((function(t){Object.assign(t,{pressed:e.playing}),t.setAttribute("aria-label",Zt(e.playing?"pause":"play",e.config))})),K(t)&&"timeupdate"===t.type||ue.toggleControls.call(this)},checkLoading:function(t){var e=this;this.loading=["stalled","waiting"].includes(t.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((function(){ft(e.elements.container,e.config.classNames.loading,e.loading),ue.toggleControls.call(e)}),this.loading?250:0)},toggleControls:function(t){var e=this.elements.controls;if(e&&this.config.hideControls){var i=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(t||this.loading||this.paused||e.pressed||e.hover||i))}},migrateStyles:function(){var t=this;Object.values(o({},this.media.style)).filter((function(t){return!J(t)&&q(t)&&t.startsWith("--plyr")})).forEach((function(e){t.elements.container.style.setProperty(e,t.media.style.getPropertyValue(e)),t.media.style.removeProperty(e)})),J(this.media.style)&&this.media.removeAttribute("style")}},he=function(){function e(i){t(this,e),this.player=i,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}return i(e,[{key:"handleKey",value:function(t){var e=this.player,i=e.elements,n=t.keyCode?t.keyCode:t.which,r="keydown"===t.type,o=r&&n===this.lastKey;if(!(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)&&U(n))if(r){var a=document.activeElement;if($(a)){if(a!==i.inputs.seek&&gt(a,e.config.selectors.editable))return;if(32===t.which&&gt(a,'button, [role^="menuitem"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(n)&&(t.preventDefault(),t.stopPropagation()),n){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:o||(e.currentTime=e.duration/10*(n-48));break;case 32:case 75:o||At(e.togglePlay());break;case 38:e.increaseVolume(.1);break;case 40:e.decreaseVolume(.1);break;case 77:o||(e.muted=!e.muted);break;case 39:e.forward();break;case 37:e.rewind();break;case 70:e.fullscreen.toggle();break;case 67:o||e.toggleCaptions();break;case 76:e.loop=!e.loop}27===n&&!e.fullscreen.usingNative&&e.fullscreen.active&&e.fullscreen.toggle(),this.lastKey=n}else this.lastKey=null}},{key:"toggleMenu",value:function(t){Yt.toggleMenu.call(this.player,t)}},{key:"firstTouch",value:function(){var t=this.player,e=t.elements;t.touch=!0,ft(e.container,t.config.classNames.isTouch,!0)}},{key:"setTabFocus",value:function(t){var e,i=this.player,n=i.elements;clearTimeout(this.focusTimer),("keydown"!==t.type||9===t.which)&&("keydown"===t.type&&(this.lastKeyDown=t.timeStamp),("focus"!==t.type||t.timeStamp-this.lastKeyDown<=20)&&(ft(yt.call(i,".".concat(e=i.config.classNames.tabFocus)),e,!1),"focusout"!==t.type&&(this.focusTimer=setTimeout((function(){var t=document.activeElement;n.container.contains(t)&&ft(document.activeElement,i.config.classNames.tabFocus,!0)}),10))))}},{key:"global",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.player;e.config.keyboard.global&&St.call(e,window,"keydown keyup",this.handleKey,t,!1),St.call(e,document.body,"click",this.toggleMenu,t),Et.call(e,document.body,"touchstart",this.firstTouch),St.call(e,document.body,"keydown focus blur focusout",this.setTabFocus,t,!1,!0)}},{key:"container",value:function(){var t=this.player,e=t.config,i=t.elements,n=t.timers;!e.keyboard.global&&e.keyboard.focused&&Tt.call(t,i.container,"keydown keyup",this.handleKey,!1),Tt.call(t,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(function(e){var r=i.controls;r&&"enterfullscreen"===e.type&&(r.pressed=!1,r.hover=!1);var o=0;["touchstart","touchmove","mousemove"].includes(e.type)&&(ue.toggleControls.call(t,!0),o=t.touch?3e3:2e3),clearTimeout(n.controls),n.controls=setTimeout((function(){return ue.toggleControls.call(t,!1)}),o)}));var r=function(e){if(!e)return Dt.call(t);var n=i.container.getBoundingClientRect(),r=n.height;return Dt.call(t,"".concat(n.width,":").concat(r))},o=function(){clearTimeout(n.resized),n.resized=setTimeout(r,50)};Tt.call(t,i.container,"enterfullscreen exitfullscreen",(function(e){var n=t.fullscreen,s=n.usingNative;if(n.target===i.container&&(t.isEmbed||!J(t.config.ratio))){var l="enterfullscreen"===e.type;!function(e,i,n){if(t.isVimeo&&!t.config.vimeo.premium){var r=t.elements.wrapper.firstChild,o=a(e,2)[1],s=a(Lt.call(t),2);r.style.maxWidth=n?"".concat(o/s[1]*s[0],"px"):null,r.style.margin=n?"0 auto":null}}(r(l).ratio,0,l),l&&setTimeout((function(){return et(i.container)}),100),s||(l?Tt.call(t,window,"resize",o):kt.call(t,window,"resize",o))}}))}},{key:"media",value:function(){var t=this,e=this.player,i=e.elements;if(Tt.call(e,e.media,"timeupdate seeking seeked",(function(t){return Yt.timeUpdate.call(e,t)})),Tt.call(e,e.media,"durationchange loadeddata loadedmetadata",(function(t){return Yt.durationUpdate.call(e,t)})),Tt.call(e,e.media,"ended",(function(){e.isHTML5&&e.isVideo&&e.config.resetOnEnd&&(e.restart(),e.pause())})),Tt.call(e,e.media,"progress playing seeking seeked",(function(t){return Yt.updateProgress.call(e,t)})),Tt.call(e,e.media,"volumechange",(function(t){return Yt.updateVolume.call(e,t)})),Tt.call(e,e.media,"playing play pause ended emptied timeupdate",(function(t){return ue.checkPlaying.call(e,t)})),Tt.call(e,e.media,"waiting canplay seeked playing",(function(t){return ue.checkLoading.call(e,t)})),e.supported.ui&&e.config.clickToPlay&&!e.isAudio){var n=_t.call(e,".".concat(e.config.classNames.video));if(!$(n))return;Tt.call(e,i.container,"click",(function(r){([i.container,n].includes(r.target)||n.contains(r.target))&&(e.touch&&e.config.hideControls||(e.ended?(t.proxy(r,e.restart,"restart"),t.proxy(r,(function(){At(e.play())}),"play")):t.proxy(r,(function(){At(e.togglePlay())}),"play")))}))}e.supported.ui&&e.config.disableContextMenu&&Tt.call(e,i.wrapper,"contextmenu",(function(t){t.preventDefault()}),!1),Tt.call(e,e.media,"volumechange",(function(){e.storage.set({volume:e.volume,muted:e.muted})})),Tt.call(e,e.media,"ratechange",(function(){Yt.updateSetting.call(e,"speed"),e.storage.set({speed:e.speed})})),Tt.call(e,e.media,"qualitychange",(function(t){Yt.updateSetting.call(e,"quality",null,t.detail.quality)})),Tt.call(e,e.media,"ready qualitychange",(function(){Yt.setDownloadUrl.call(e)}));var r=e.config.events.concat(["keyup","keydown"]).join(" ");Tt.call(e,e.media,r,(function(t){var n=t.detail,r=void 0===n?{}:n;"error"===t.type&&(r=e.media.error),Pt.call(e,i.container,t.type,!0,r)}))}},{key:"proxy",value:function(t,e,i){var n=this.player,r=n.config.listeners[i],o=!0;H(r)&&(o=r.call(n,t)),!1!==o&&H(e)&&e.call(n,t)}},{key:"bind",value:function(t,e,i,n){var r=this,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.player,s=H(a.config.listeners[n]);Tt.call(a,t,e,(function(t){return r.proxy(t,i,n)}),o&&!s)}},{key:"controls",value:function(){var t=this,e=this.player,i=e.elements,n=it.isIE?"change":"input";if(i.buttons.play&&Array.from(i.buttons.play).forEach((function(i){t.bind(i,"click",(function(){At(e.togglePlay())}),"play")})),this.bind(i.buttons.restart,"click",e.restart,"restart"),this.bind(i.buttons.rewind,"click",(function(){e.lastSeekTime=Date.now(),e.rewind()}),"rewind"),this.bind(i.buttons.fastForward,"click",(function(){e.lastSeekTime=Date.now(),e.forward()}),"fastForward"),this.bind(i.buttons.mute,"click",(function(){e.muted=!e.muted}),"mute"),this.bind(i.buttons.captions,"click",(function(){return e.toggleCaptions()})),this.bind(i.buttons.download,"click",(function(){Pt.call(e,e.media,"download")}),"download"),this.bind(i.buttons.fullscreen,"click",(function(){e.fullscreen.toggle()}),"fullscreen"),this.bind(i.buttons.pip,"click",(function(){e.pip="toggle"}),"pip"),this.bind(i.buttons.airplay,"click",e.airplay,"airplay"),this.bind(i.buttons.settings,"click",(function(t){t.stopPropagation(),t.preventDefault(),Yt.toggleMenu.call(e,t)}),null,!1),this.bind(i.buttons.settings,"keyup",(function(t){var i=t.which;[13,32].includes(i)&&(13!==i?(t.preventDefault(),t.stopPropagation(),Yt.toggleMenu.call(e,t)):Yt.focusFirstMenuItem.call(e,null,!0))}),null,!1),this.bind(i.settings.menu,"keydown",(function(t){27===t.which&&Yt.toggleMenu.call(e,t)})),this.bind(i.inputs.seek,"mousedown mousemove",(function(t){var e=i.progress.getBoundingClientRect();t.currentTarget.setAttribute("seek-value",100/e.width*(t.pageX-e.left))})),this.bind(i.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(function(t){var i=t.currentTarget,n=t.keyCode?t.keyCode:t.which,r="play-on-seeked";if(!X(t)||39===n||37===n){e.lastSeekTime=Date.now();var o=i.hasAttribute(r),a=["mouseup","touchend","keyup"].includes(t.type);o&&a?(i.removeAttribute(r),At(e.play())):!a&&e.playing&&(i.setAttribute(r,""),e.pause())}})),it.isIos){var r=yt.call(e,'input[type="range"]');Array.from(r).forEach((function(e){return t.bind(e,n,(function(t){return et(t.target)}))}))}this.bind(i.inputs.seek,n,(function(t){var i=t.currentTarget,n=i.getAttribute("seek-value");J(n)&&(n=i.value),i.removeAttribute("seek-value"),e.currentTime=n/i.max*e.duration}),"seek"),this.bind(i.progress,"mouseenter mouseleave mousemove",(function(t){return Yt.updateSeekTooltip.call(e,t)})),this.bind(i.progress,"mousemove touchmove",(function(t){var i=e.previewThumbnails;i&&i.loaded&&i.startMove(t)})),this.bind(i.progress,"mouseleave touchend click",(function(){var t=e.previewThumbnails;t&&t.loaded&&t.endMove(!1,!0)})),this.bind(i.progress,"mousedown touchstart",(function(t){var i=e.previewThumbnails;i&&i.loaded&&i.startScrubbing(t)})),this.bind(i.progress,"mouseup touchend",(function(t){var i=e.previewThumbnails;i&&i.loaded&&i.endScrubbing(t)})),it.isWebkit&&Array.from(yt.call(e,'input[type="range"]')).forEach((function(i){t.bind(i,"input",(function(t){return Yt.updateRangeFill.call(e,t.target)}))})),e.config.toggleInvert&&!$(i.display.duration)&&this.bind(i.display.currentTime,"click",(function(){0!==e.currentTime&&(e.config.invertTime=!e.config.invertTime,Yt.timeUpdate.call(e))})),this.bind(i.inputs.volume,n,(function(t){e.volume=t.target.value}),"volume"),this.bind(i.controls,"mouseenter mouseleave",(function(t){i.controls.hover=!e.touch&&"mouseenter"===t.type})),i.fullscreen&&Array.from(i.fullscreen.children).filter((function(t){return!t.contains(i.container)})).forEach((function(n){t.bind(n,"mouseenter mouseleave",(function(t){i.controls.hover=!e.touch&&"mouseenter"===t.type}))})),this.bind(i.controls,"mousedown mouseup touchstart touchend touchcancel",(function(t){i.controls.pressed=["mousedown","touchstart"].includes(t.type)})),this.bind(i.controls,"focusin",(function(){var n=e.config,r=e.timers;ft(i.controls,n.classNames.noTransition,!0),ue.toggleControls.call(e,!0),setTimeout((function(){ft(i.controls,n.classNames.noTransition,!1)}),0);var o=t.touch?3e3:4e3;clearTimeout(r.controls),r.controls=setTimeout((function(){return ue.toggleControls.call(e,!1)}),o)})),this.bind(i.inputs.volume,"wheel",(function(t){var i=t.webkitDirectionInvertedFromDevice,n=a([t.deltaX,-t.deltaY].map((function(t){return i?-t:t})),2),r=n[0],o=n[1],s=Math.sign(Math.abs(r)>Math.abs(o)?r:o);e.increaseVolume(s/50);var l=e.media.volume;(1===s&&l<1||-1===s&&l>0)&&t.preventDefault()}),"volume",!1)}}]),e}();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var pe=function(t,e){return function(t,e){t.exports=function(){var t=function(){},e={},i={},n={};function r(t,e){if(t){var r=n[t];if(i[t]=e,r)for(;r.length;)r[0](t,e),r.splice(0,1)}}function o(e,i){e.call&&(e={success:e}),i.length?(e.error||t)(i):(e.success||t)(e)}function a(e,i,n,r){var o,s,l=document,c=n.async,u=(n.numRetries||0)+1,h=n.before||t,p=e.replace(/[\?|#].*$/,""),d=e.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(p)?((s=l.createElement("link")).rel="stylesheet",s.href=d,(o="hideFocus"in s)&&s.relList&&(o=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(p)?(s=l.createElement("img")).src=d:((s=l.createElement("script")).src=e,s.async=void 0===c||c),s.onload=s.onerror=s.onbeforeload=function(t){var l=t.type[0];if(o)try{s.sheet.cssText.length||(l="e")}catch(t){18!=t.code&&(l="e")}if("e"==l){if((r+=1)<u)return a(e,i,n,r)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";i(e,l,t.defaultPrevented)},!1!==h(e,s)&&l.head.appendChild(s)}function s(t,e,i){var n,r,o=(t=t.push?t:[t]).length,s=o,l=[];for(n=function(t,i,n){if("e"==i&&l.push(t),"b"==i){if(!n)return;l.push(t)}--o||e(l)},r=0;r<s;r++)a(t[r],n,i)}function l(t,i,n){var a,l;if(i&&i.trim&&(a=i),l=(a?n:i)||{},a){if(a in e)throw"LoadJS";e[a]=!0}function c(e,i){s(t,(function(t){o(l,t),e&&o({success:e,error:i},t),r(a,t)}),l)}if(l.returnPromise)return new Promise(c);c()}return l.ready=function(t,e){return function(t,e){var r,o,a,s=[],l=(t=t.push?t:[t]).length,c=l;for(r=function(t,i){i.length&&s.push(t),--c||e(s)};l--;)(a=i[o=t[l]])?r(o,a):(n[o]=n[o]||[]).push(r)}(t,(function(t){o(e,t)})),l},l.done=function(t){r(t,[])},l.reset=function(){e={},i={},n={}},l.isDefined=function(t){return t in e},l}()}(e={exports:{}}),e.exports}();function de(t){return new Promise((function(e,i){pe(t,{success:e,error:i})}))}function fe(t){t&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===t&&(this.media.paused=!t,Pt.call(this,this.media,t?"play":"pause"))}var me={setup:function(){var t=this;ft(t.elements.wrapper,t.config.classNames.embed,!0),t.options.speed=t.config.speed.options,Dt.call(t),j(window.Vimeo)?me.ready.call(t):de(t.config.urls.vimeo.sdk).then((function(){me.ready.call(t)})).catch((function(e){t.debug.warn("Vimeo SDK (player.js) failed to load",e)}))},ready:function(){var t=this,e=this,i=e.config.vimeo,n=i.premium,r=i.referrerPolicy,s=function(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)e.indexOf(i=o[n])>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)e.indexOf(i=o[n])>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}(i,["premium","referrerPolicy"]);n&&Object.assign(s,{controls:!1,sidedock:!1});var l=te(o({loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative},s)),c=e.media.getAttribute("src");J(c)&&(c=e.media.getAttribute(e.config.attributes.embed.id));var u,h=J(u=c)?null:U(Number(u))?u:u.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:u,p=st("iframe"),d=Ft(e.config.urls.vimeo.iframe,h,l);if(p.setAttribute("src",d),p.setAttribute("allowfullscreen",""),p.setAttribute("allow","autoplay,fullscreen,picture-in-picture"),J(r)||p.setAttribute("referrerPolicy",r),n||!i.customControls)p.setAttribute("data-poster",e.poster),e.media=ht(p,e.media);else{var f=st("div",{class:e.config.classNames.embedContainer,"data-poster":e.poster});f.appendChild(p),e.media=ht(f,e.media)}i.customControls||Gt(Ft(e.config.urls.vimeo.api,d)).then((function(t){!J(t)&&t.thumbnail_url&&ue.setPoster.call(e,t.thumbnail_url).catch((function(){}))})),e.embed=new window.Vimeo.Player(p,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=function(){return fe.call(e,!0),e.embed.play()},e.media.pause=function(){return fe.call(e,!1),e.embed.pause()},e.media.stop=function(){e.pause(),e.currentTime=0};var m=e.media.currentTime;Object.defineProperty(e.media,"currentTime",{get:function(){return m},set:function(t){var i=e.embed,n=e.media,r=e.volume,o=e.paused&&!i.hasPlayed;n.seeking=!0,Pt.call(e,n,"seeking"),Promise.resolve(o&&i.setVolume(0)).then((function(){return i.setCurrentTime(t)})).then((function(){return o&&i.pause()})).then((function(){return o&&i.setVolume(r)})).catch((function(){}))}});var g=e.config.speed.selected;Object.defineProperty(e.media,"playbackRate",{get:function(){return g},set:function(t){e.embed.setPlaybackRate(t).then((function(){g=t,Pt.call(e,e.media,"ratechange")})).catch((function(){e.options.speed=[1]}))}});var y=e.config.volume;Object.defineProperty(e.media,"volume",{get:function(){return y},set:function(t){e.embed.setVolume(t).then((function(){y=t,Pt.call(e,e.media,"volumechange")}))}});var _=e.config.muted;Object.defineProperty(e.media,"muted",{get:function(){return _},set:function(t){var i=!!Z(t)&&t;e.embed.setVolume(i?0:e.config.volume).then((function(){_=i,Pt.call(e,e.media,"volumechange")}))}});var v,b=e.config.loop;Object.defineProperty(e.media,"loop",{get:function(){return b},set:function(t){var i=Z(t)?t:e.config.loop.active;e.embed.setLoop(i).then((function(){b=i}))}}),e.embed.getVideoUrl().then((function(t){v=t,Yt.setDownloadUrl.call(e)})).catch((function(e){t.debug.warn(e)})),Object.defineProperty(e.media,"currentSrc",{get:function(){return v}}),Object.defineProperty(e.media,"ended",{get:function(){return e.currentTime===e.duration}}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then((function(i){var n=a(i,2);e.embed.ratio=[n[0],n[1]],Dt.call(t)})),e.embed.setAutopause(e.config.autopause).then((function(t){e.config.autopause=t})),e.embed.getVideoTitle().then((function(i){e.config.title=i,ue.setTitle.call(t)})),e.embed.getCurrentTime().then((function(t){m=t,Pt.call(e,e.media,"timeupdate")})),e.embed.getDuration().then((function(t){e.media.duration=t,Pt.call(e,e.media,"durationchange")})),e.embed.getTextTracks().then((function(t){e.media.textTracks=t,ee.setup.call(e)})),e.embed.on("cuechange",(function(t){var i=t.cues,n=(void 0===i?[]:i).map((function(t){return function(t){var e=document.createDocumentFragment(),i=document.createElement("div");return e.appendChild(i),i.innerHTML=t,e.firstChild.innerText}(t.text)}));ee.updateCues.call(e,n)})),e.embed.on("loaded",(function(){e.embed.getPaused().then((function(t){fe.call(e,!t),t||Pt.call(e,e.media,"playing")})),$(e.embed.element)&&e.supported.ui&&e.embed.element.setAttribute("tabindex",-1)})),e.embed.on("bufferstart",(function(){Pt.call(e,e.media,"waiting")})),e.embed.on("bufferend",(function(){Pt.call(e,e.media,"playing")})),e.embed.on("play",(function(){fe.call(e,!0),Pt.call(e,e.media,"playing")})),e.embed.on("pause",(function(){fe.call(e,!1)})),e.embed.on("timeupdate",(function(t){e.media.seeking=!1,m=t.seconds,Pt.call(e,e.media,"timeupdate")})),e.embed.on("progress",(function(t){e.media.buffered=t.percent,Pt.call(e,e.media,"progress"),1===parseInt(t.percent,10)&&Pt.call(e,e.media,"canplaythrough"),e.embed.getDuration().then((function(t){t!==e.media.duration&&(e.media.duration=t,Pt.call(e,e.media,"durationchange"))}))})),e.embed.on("seeked",(function(){e.media.seeking=!1,Pt.call(e,e.media,"seeked")})),e.embed.on("ended",(function(){e.media.paused=!0,Pt.call(e,e.media,"ended")})),e.embed.on("error",(function(t){e.media.error=t,Pt.call(e,e.media,"error")})),i.customControls&&setTimeout((function(){return ue.build.call(e)}),0)}};function ge(t){t&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===t&&(this.media.paused=!t,Pt.call(this,this.media,t?"play":"pause"))}function ye(t){return t.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}var _e={setup:function(){var t=this;if(ft(this.elements.wrapper,this.config.classNames.embed,!0),j(window.YT)&&H(window.YT.Player))_e.ready.call(this);else{var e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){H(e)&&e(),_e.ready.call(t)},de(this.config.urls.youtube.sdk).catch((function(e){t.debug.warn("YouTube API failed to load",e)}))}},getTitle:function(t){var e=this;Gt(Ft(this.config.urls.youtube.api,t)).then((function(t){if(j(t)){var i=t.height,n=t.width;e.config.title=t.title,ue.setTitle.call(e),e.embed.ratio=[n,i]}Dt.call(e)})).catch((function(){Dt.call(e)}))},ready:function(){var t=this,e=t.config.youtube,i=t.media&&t.media.getAttribute("id");if(J(i)||!i.startsWith("youtube-")){var n=t.media.getAttribute("src");J(n)&&(n=t.media.getAttribute(this.config.attributes.embed.id));var r,o,a=J(r=n)?null:r.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:r,s=st("div",{id:(o=t.provider,"".concat(o,"-").concat(Math.floor(1e4*Math.random()))),"data-poster":e.customControls?t.poster:void 0});if(t.media=ht(s,t.media),e.customControls){var l=function(t){return"https://i.ytimg.com/vi/".concat(a,"/").concat(t,"default.jpg")};ce(l("maxres"),121).catch((function(){return ce(l("sd"),121)})).catch((function(){return ce(l("hq"))})).then((function(e){return ue.setPoster.call(t,e.src)})).then((function(e){e.includes("maxres")||(t.elements.poster.style.backgroundSize="cover")})).catch((function(){}))}t.embed=new window.YT.Player(t.media,{videoId:a,host:ye(e),playerVars:rt({},{autoplay:t.config.autoplay?1:0,hl:t.config.hl,controls:t.supported.ui&&e.customControls?0:1,disablekb:1,playsinline:t.config.fullscreen.iosNative?0:1,cc_load_policy:t.captions.active?1:0,cc_lang_pref:t.config.captions.language,widget_referrer:window?window.location.href:null},e),events:{onError:function(e){if(!t.media.error){var i=e.data;t.media.error={code:i,message:{2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[i]||"An unknown error occured"},Pt.call(t,t.media,"error")}},onPlaybackRateChange:function(e){t.media.playbackRate=e.target.getPlaybackRate(),Pt.call(t,t.media,"ratechange")},onReady:function(i){if(!H(t.media.play)){var n=i.target;_e.getTitle.call(t,a),t.media.play=function(){ge.call(t,!0),n.playVideo()},t.media.pause=function(){ge.call(t,!1),n.pauseVideo()},t.media.stop=function(){n.stopVideo()},t.media.duration=n.getDuration(),t.media.paused=!0,t.media.currentTime=0,Object.defineProperty(t.media,"currentTime",{get:function(){return Number(n.getCurrentTime())},set:function(e){t.paused&&!t.embed.hasPlayed&&t.embed.mute(),t.media.seeking=!0,Pt.call(t,t.media,"seeking"),n.seekTo(e)}}),Object.defineProperty(t.media,"playbackRate",{get:function(){return n.getPlaybackRate()},set:function(t){n.setPlaybackRate(t)}});var r=t.config.volume;Object.defineProperty(t.media,"volume",{get:function(){return r},set:function(e){n.setVolume(100*(r=e)),Pt.call(t,t.media,"volumechange")}});var o=t.config.muted;Object.defineProperty(t.media,"muted",{get:function(){return o},set:function(e){var i=Z(e)?e:o;o=i,n[i?"mute":"unMute"](),n.setVolume(100*r),Pt.call(t,t.media,"volumechange")}}),Object.defineProperty(t.media,"currentSrc",{get:function(){return n.getVideoUrl()}}),Object.defineProperty(t.media,"ended",{get:function(){return t.currentTime===t.duration}});var s=n.getAvailablePlaybackRates();t.options.speed=s.filter((function(e){return t.config.speed.options.includes(e)})),t.supported.ui&&e.customControls&&t.media.setAttribute("tabindex",-1),Pt.call(t,t.media,"timeupdate"),Pt.call(t,t.media,"durationchange"),clearInterval(t.timers.buffering),t.timers.buffering=setInterval((function(){t.media.buffered=n.getVideoLoadedFraction(),(null===t.media.lastBuffered||t.media.lastBuffered<t.media.buffered)&&Pt.call(t,t.media,"progress"),t.media.lastBuffered=t.media.buffered,1===t.media.buffered&&(clearInterval(t.timers.buffering),Pt.call(t,t.media,"canplaythrough"))}),200),e.customControls&&setTimeout((function(){return ue.build.call(t)}),50)}},onStateChange:function(i){var n=i.target;switch(clearInterval(t.timers.playing),t.media.seeking&&[1,2].includes(i.data)&&(t.media.seeking=!1,Pt.call(t,t.media,"seeked")),i.data){case-1:Pt.call(t,t.media,"timeupdate"),t.media.buffered=n.getVideoLoadedFraction(),Pt.call(t,t.media,"progress");break;case 0:ge.call(t,!1),t.media.loop?(n.stopVideo(),n.playVideo()):Pt.call(t,t.media,"ended");break;case 1:e.customControls&&!t.config.autoplay&&t.media.paused&&!t.embed.hasPlayed?t.media.pause():(ge.call(t,!0),Pt.call(t,t.media,"playing"),t.timers.playing=setInterval((function(){Pt.call(t,t.media,"timeupdate")}),50),t.media.duration!==n.getDuration()&&(t.media.duration=n.getDuration(),Pt.call(t,t.media,"durationchange")));break;case 2:t.muted||t.embed.unMute(),ge.call(t,!1);break;case 3:Pt.call(t,t.media,"waiting")}Pt.call(t,t.elements.container,"statechange",!1,{code:i.data})}}})}}},ve={setup:function(){this.media?(ft(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),ft(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&ft(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=st("div",{class:this.config.classNames.video}),ot(this.media,this.elements.wrapper),this.elements.poster=st("div",{class:this.config.classNames.poster,hidden:""}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Rt.setup.call(this):this.isYouTube?_e.setup.call(this):this.isVimeo&&me.setup.call(this)):this.debug.warn("No media element found!")}},be=function(){function e(i){var n=this;t(this,e),this.player=i,this.config=i.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((function(t,e){n.on("loaded",t),n.on("error",e)})),this.load()}return i(e,[{key:"load",value:function(){var t=this;this.enabled&&(j(window.google)&&j(window.google.ima)?this.ready():de(this.player.config.urls.googleIMA.sdk).then((function(){t.ready()})).catch((function(){t.trigger("error",new Error("Google IMA SDK failed to load"))})))}},{key:"ready",value:function(){var t,e=this;this.enabled||((t=this).manager&&t.manager.destroy(),t.elements.displayContainer&&t.elements.displayContainer.destroy(),t.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then((function(){e.clearSafetyTimer("onAdsManagerLoaded()")})),this.listeners(),this.setupIMA()}},{key:"setupIMA",value:function(){var t=this;this.elements.container=st("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){return t.onAdsManagerLoaded(e)}),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return t.onAdError(e)}),!1),this.requestAds()}},{key:"requestAds",value:function(){var t=this.player.elements.container;try{var e=new google.ima.AdsRequest;e.adTagUrl=this.tagUrl,e.linearAdSlotWidth=t.offsetWidth,e.linearAdSlotHeight=t.offsetHeight,e.nonLinearAdSlotWidth=t.offsetWidth,e.nonLinearAdSlotHeight=t.offsetHeight,e.forceNonLinearFullSlot=!1,e.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(e)}catch(t){this.onAdError(t)}}},{key:"pollCountdown",value:function(){var t=this;if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0]))return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval((function(){var e=Qt(Math.max(t.manager.getRemainingTime(),0)),i="".concat(Zt("advertisement",t.player.config)," - ").concat(e);t.elements.container.setAttribute("data-badge-text",i)}),100)}},{key:"onAdsManagerLoaded",value:function(t){var e=this;if(this.enabled){var i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.enablePreloading=!0,this.manager=t.getAdsManager(this.player,i),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){return e.onAdError(t)})),Object.keys(google.ima.AdEvent.Type).forEach((function(t){e.manager.addEventListener(google.ima.AdEvent.Type[t],(function(t){return e.onAdEvent(t)}))})),this.trigger("loaded")}}},{key:"addCuePoints",value:function(){var t=this;J(this.cuePoints)||this.cuePoints.forEach((function(e){if(0!==e&&-1!==e&&e<t.player.duration){var i=t.player.elements.progress;if($(i)){var n=100/t.player.duration*e,r=st("span",{class:t.player.config.classNames.cues});r.style.left="".concat(n.toString(),"%"),i.appendChild(r)}}}))}},{key:"onAdEvent",value:function(t){var e=this,i=this.player.elements.container,n=t.getAd(),r=t.getAdData();switch(function(t){Pt.call(e.player,e.player.media,"ads".concat(t.replace(/_/g,"").toLowerCase()))}(t.type),t.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),n.isLinear()||(n.width=i.offsetWidth,n.height=i.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:r.adError&&this.player.debug.warn("Non-fatal ad error: ".concat(r.adError.getMessage()))}}},{key:"onAdError",value:function(t){this.cancel(),this.player.debug.warn("Ads error",t)}},{key:"listeners",value:function(){var t,e=this,i=this.player.elements.container;this.player.on("canplay",(function(){e.addCuePoints()})),this.player.on("ended",(function(){e.loader.contentComplete()})),this.player.on("timeupdate",(function(){t=e.player.currentTime})),this.player.on("seeked",(function(){var i=e.player.currentTime;J(e.cuePoints)||e.cuePoints.forEach((function(n,r){t<n&&n<i&&(e.manager.discardAdBreak(),e.cuePoints.splice(r,1))}))})),window.addEventListener("resize",(function(){e.manager&&e.manager.resize(i.offsetWidth,i.offsetHeight,google.ima.ViewMode.NORMAL)}))}},{key:"play",value:function(){var t=this,e=this.player.elements.container;this.managerPromise||this.resumeContent(),this.managerPromise.then((function(){t.manager.setVolume(t.player.volume),t.elements.displayContainer.initialize();try{t.initialized||(t.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),t.manager.start()),t.initialized=!0}catch(e){t.onAdError(e)}})).catch((function(){}))}},{key:"resumeContent",value:function(){this.elements.container.style.zIndex="",this.playing=!1,At(this.player.media.play())}},{key:"pauseContent",value:function(){this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}},{key:"cancel",value:function(){this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}},{key:"loadAds",value:function(){var t=this;this.managerPromise.then((function(){t.manager&&t.manager.destroy(),t.managerPromise=new Promise((function(e){t.on("loaded",e),t.player.debug.log(t.manager)})),t.initialized=!1,t.requestAds()})).catch((function(){}))}},{key:"trigger",value:function(t){for(var e=this,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var o=this.events[t];G(o)&&o.forEach((function(t){H(t)&&t.apply(e,n)}))}},{key:"on",value:function(t,e){return G(this.events[t])||(this.events[t]=[]),this.events[t].push(e),this}},{key:"startSafetyTimer",value:function(t,e){var i=this;this.player.debug.log("Safety timer invoked from: ".concat(e)),this.safetyTimer=setTimeout((function(){i.cancel(),i.clearSafetyTimer("startSafetyTimer()")}),t)}},{key:"clearSafetyTimer",value:function(t){V(this.safetyTimer)||(this.player.debug.log("Safety timer cleared from: ".concat(t)),clearTimeout(this.safetyTimer),this.safetyTimer=null)}},{key:"enabled",get:function(){var t=this.config;return this.player.isHTML5&&this.player.isVideo&&t.enabled&&(!J(t.publisherId)||Y(t.tagUrl))}},{key:"tagUrl",get:function(){var t=this.config;if(Y(t.tagUrl))return t.tagUrl;var e={AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:t.publisherId};return"".concat("https://go.aniview.com/api/adserver6/vast/","?").concat(te(e))}}]),e}(),xe=function(t,e){var i={};return t>e.width/e.height?(i.width=e.width,i.height=1/t*e.width):(i.height=e.height,i.width=t*e.height),i},we=function(){function e(i){t(this,e),this.player=i,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}return i(e,[{key:"load",value:function(){var t=this;this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then((function(){t.enabled&&(t.render(),t.determineContainerAutoSizing(),t.loaded=!0)}))}},{key:"getThumbnails",value:function(){var t=this;return new Promise((function(e){var i=t.player.config.previewThumbnails.src;if(J(i))throw new Error("Missing previewThumbnails.src config attribute");var n=function(){t.thumbnails.sort((function(t,e){return t.height-e.height})),t.player.debug.log("Preview thumbnails",t.thumbnails),e()};if(H(i))i((function(e){t.thumbnails=e,n()}));else{var r=(q(i)?[i]:i).map((function(e){return t.getThumbnail(e)}));Promise.all(r).then(n)}}))}},{key:"getThumbnail",value:function(t){var e=this;return new Promise((function(i){Gt(t).then((function(n){var r,o,s={frames:(r=n,o=[],r.split(/\r\n\r\n|\n\n|\r\r/).forEach((function(t){var e={};t.split(/\r\n|\n|\r/).forEach((function(t){if(U(e.startTime)){if(!J(t.trim())&&J(e.text)){var i=t.trim().split("#xywh="),n=a(i,1);if(e.text=n[0],i[1]){var r=a(i[1].split(","),4);e.x=r[0],e.y=r[1],e.w=r[2],e.h=r[3]}}}else{var o=t.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);o&&(e.startTime=60*Number(o[1]||0)*60+60*Number(o[2])+Number(o[3])+Number("0.".concat(o[4])),e.endTime=60*Number(o[6]||0)*60+60*Number(o[7])+Number(o[8])+Number("0.".concat(o[9])))}})),e.text&&o.push(e)})),o),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=t.substring(0,t.lastIndexOf("/")+1));var l=new Image;l.onload=function(){s.height=l.naturalHeight,s.width=l.naturalWidth,e.thumbnails.push(s),i()},l.src=s.urlPrefix+s.frames[0].text}))}))}},{key:"startMove",value:function(t){if(this.loaded&&K(t)&&["touchmove","mousemove"].includes(t.type)&&this.player.media.duration){if("touchmove"===t.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var e=this.player.elements.progress.getBoundingClientRect();this.seekTime=this.player.media.duration*(100/e.width*(t.pageX-e.left)/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=t.pageX,this.elements.thumb.time.innerText=Qt(this.seekTime)}this.showImageAtCurrentTime()}}},{key:"endMove",value:function(){this.toggleThumbContainer(!1,!0)}},{key:"startScrubbing",value:function(t){(V(t.button)||!1===t.button||0===t.button)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}},{key:"endScrubbing",value:function(){var t=this;this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Et.call(this.player,this.player.media,"timeupdate",(function(){t.mouseDown||t.toggleScrubbingContainer(!1)}))}},{key:"listeners",value:function(){var t=this;this.player.on("play",(function(){t.toggleThumbContainer(!1,!0)})),this.player.on("seeked",(function(){t.toggleThumbContainer(!1)})),this.player.on("timeupdate",(function(){t.lastTime=t.player.media.currentTime}))}},{key:"render",value:function(){this.elements.thumb.container=st("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=st("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);var t=st("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=st("span",{},"00:00"),t.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(t),$(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=st("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}},{key:"destroy",value:function(){this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}},{key:"showImageAtCurrentTime",value:function(){var t=this;this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();var e=this.thumbnails[0].frames.findIndex((function(e){return t.seekTime>=e.startTime&&t.seekTime<=e.endTime})),i=e>=0,n=0;this.mouseDown||this.toggleThumbContainer(i),i&&(this.thumbnails.forEach((function(i,r){t.loadedImages.includes(i.frames[e].text)&&(n=r)})),e!==this.showingThumb&&(this.showingThumb=e,this.loadImage(n)))}},{key:"loadImage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=this.showingThumb,n=this.thumbnails[e],r=n.frames[i],o=n.frames[i].text,a=n.urlPrefix+o;if(this.currentImageElement&&this.currentImageElement.dataset.filename===o)this.showImage(this.currentImageElement,r,e,i,o,!1),this.currentImageElement.dataset.index=i,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);var s=new Image;s.src=a,s.dataset.index=i,s.dataset.filename=o,this.showingThumbFilename=o,this.player.debug.log("Loading image: ".concat(a)),s.onload=function(){return t.showImage(s,r,e,i,o,!0)},this.loadingImage=s,this.removeOldImages(s)}}},{key:"showImage",value:function(t,e,i,n,r){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.player.debug.log("Showing thumb: ".concat(r,". num: ").concat(n,". qual: ").concat(i,". newimg: ").concat(o)),this.setImageSizeAndOffset(t,e),o&&(this.currentImageContainer.appendChild(t),this.currentImageElement=t,this.loadedImages.includes(r)||this.loadedImages.push(r)),this.preloadNearby(n,!0).then(this.preloadNearby(n,!1)).then(this.getHigherQuality(i,t,e,r))}},{key:"removeOldImages",value:function(t){var e=this;Array.from(this.currentImageContainer.children).forEach((function(i){if("img"===i.tagName.toLowerCase()){var n=e.usingSprites?500:1e3;if(i.dataset.index!==t.dataset.index&&!i.dataset.deleting){i.dataset.deleting=!0;var r=e.currentImageContainer;setTimeout((function(){r.removeChild(i),e.player.debug.log("Removing thumb: ".concat(i.dataset.filename))}),n)}}}))}},{key:"preloadNearby",value:function(t){var e=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(n){setTimeout((function(){var r=e.thumbnails[0].frames[t].text;if(e.showingThumbFilename===r){var o;o=i?e.thumbnails[0].frames.slice(t):e.thumbnails[0].frames.slice(0,t).reverse();var a=!1;o.forEach((function(t){var i=t.text;if(i!==r&&!e.loadedImages.includes(i)){a=!0,e.player.debug.log("Preloading thumb filename: ".concat(i));var o=e.thumbnails[0].urlPrefix+i,s=new Image;s.src=o,s.onload=function(){e.player.debug.log("Preloaded thumb filename: ".concat(i)),e.loadedImages.includes(i)||e.loadedImages.push(i),n()}}})),a||n()}}),300)}))}},{key:"getHigherQuality",value:function(t,e,i,n){var r=this;if(t<this.thumbnails.length-1){var o=e.naturalHeight;this.usingSprites&&(o=i.h),o<this.thumbContainerHeight&&setTimeout((function(){r.showingThumbFilename===n&&(r.player.debug.log("Showing higher quality thumb for: ".concat(n)),r.loadImage(t+1))}),300)}}},{key:"toggleThumbContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.elements.thumb.container.classList.toggle(this.player.config.classNames.previewThumbnails.thumbContainerShown,t),!t&&e&&(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"toggleScrubbingContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.elements.scrubbing.container.classList.toggle(this.player.config.classNames.previewThumbnails.scrubbingContainerShown,t),t||(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"determineContainerAutoSizing",value:function(){(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}},{key:"setThumbContainerSizeAndPos",value:function(){if(this.sizeSpecifiedInCSS){if(this.elements.thumb.imageContainer.clientHeight>20&&this.elements.thumb.imageContainer.clientWidth<20){var t=Math.floor(this.elements.thumb.imageContainer.clientHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.width="".concat(t,"px")}else if(this.elements.thumb.imageContainer.clientHeight<20&&this.elements.thumb.imageContainer.clientWidth>20){var e=Math.floor(this.elements.thumb.imageContainer.clientWidth/this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(e,"px")}}else{var i=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(this.thumbContainerHeight,"px"),this.elements.thumb.imageContainer.style.width="".concat(i,"px")}this.setThumbContainerPos()}},{key:"setThumbContainerPos",value:function(){var t=this.player.elements.progress.getBoundingClientRect(),e=this.player.elements.container.getBoundingClientRect(),i=this.elements.thumb.container,n=e.left-t.left+10,r=e.right-t.left-i.clientWidth-10,o=this.mousePosX-t.left-i.clientWidth/2;o<n&&(o=n),o>r&&(o=r),i.style.left="".concat(o,"px")}},{key:"setScrubbingContainerSize",value:function(){var t=xe(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}),e=t.height;this.elements.scrubbing.container.style.width="".concat(t.width,"px"),this.elements.scrubbing.container.style.height="".concat(e,"px")}},{key:"setImageSizeAndOffset",value:function(t,e){if(this.usingSprites){var i=this.thumbContainerHeight/e.h;t.style.height="".concat(t.naturalHeight*i,"px"),t.style.width="".concat(t.naturalWidth*i,"px"),t.style.left="-".concat(e.x*i,"px"),t.style.top="-".concat(e.y*i,"px")}}},{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?xe(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}).height:this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(t){this.mouseDown?this.currentScrubbingImageElement=t:this.currentThumbnailImageElement=t}}]),e}(),Ce={insertElements:function(t,e){var i=this;q(e)?lt(t,this.media,{src:e}):G(e)&&e.forEach((function(e){lt(t,i.media,e)}))},change:function(t){var e=this;nt(t,"sources.length")?(Rt.cancelRequests.call(this),this.destroy.call(this,(function(){e.options.quality=[],ct(e.media),e.media=null,$(e.elements.container)&&e.elements.container.removeAttribute("class");var i=t.sources,n=t.type,r=a(i,1)[0],o=r.provider,s=void 0===o?re.html5:o,l="html5"===s?n:"div",c="html5"===s?{}:{src:r.src};Object.assign(e,{provider:s,type:n,supported:wt.check(n,s,e.config.playsinline),media:st(l,c)}),e.elements.container.appendChild(e.media),Z(t.autoplay)&&(e.config.autoplay=t.autoplay),e.isHTML5&&(e.config.crossorigin&&e.media.setAttribute("crossorigin",""),e.config.autoplay&&e.media.setAttribute("autoplay",""),J(t.poster)||(e.poster=t.poster),e.config.loop.active&&e.media.setAttribute("loop",""),e.config.muted&&e.media.setAttribute("muted",""),e.config.playsinline&&e.media.setAttribute("playsinline","")),ue.addStyleHook.call(e),e.isHTML5&&Ce.insertElements.call(e,"source",i),e.config.title=t.title,ve.setup.call(e),e.isHTML5&&Object.keys(t).includes("tracks")&&Ce.insertElements.call(e,"track",t.tracks),(e.isHTML5||e.isEmbed&&!e.supported.ui)&&ue.build.call(e),e.isHTML5&&e.media.load(),J(t.previewThumbnails)||(Object.assign(e.config.previewThumbnails,t.previewThumbnails),e.previewThumbnails&&e.previewThumbnails.loaded&&(e.previewThumbnails.destroy(),e.previewThumbnails=null),e.config.previewThumbnails.enabled&&(e.previewThumbnails=new we(e))),e.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}},Se=function(){function e(i,n){var r=this;if(t(this,e),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=wt.touch,this.media=i,q(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||W(this.media)||G(this.media))&&(this.media=this.media[0]),this.config=rt({},ie,e.defaults,n||{},function(){try{return JSON.parse(r.media.getAttribute("data-plyr-config"))}catch(t){return{}}}()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new se(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",wt),!V(this.media)&&$(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(wt.check().api){var o=this.media.cloneNode(!0);o.autoplay=!1,this.elements.original=o;var a=this.media.tagName.toLowerCase(),s=null,l=null;switch(a){case"div":if(s=this.media.querySelector("iframe"),$(s)){if(l=Jt(s.getAttribute("src")),this.provider=function(t){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(t)?re.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(t)?re.vimeo:null}(l.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",l.search.length){var c=["1","true"];c.includes(l.searchParams.get("autoplay"))&&(this.config.autoplay=!0),c.includes(l.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=c.includes(l.searchParams.get("playsinline")),this.config.youtube.hl=l.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(J(this.provider)||!Object.keys(re).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=oe;break;case"video":case"audio":this.type=a,this.provider=re.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=wt.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new he(this),this.storage=new Ht(this),this.media.plyr=this,$(this.elements.container)||(this.elements.container=st("div",{tabindex:0}),ot(this.media,this.elements.container)),ue.migrateStyles.call(this),ue.addStyleHook.call(this),ve.setup.call(this),this.config.debug&&Tt.call(this,this.elements.container,this.config.events.join(" "),(function(t){r.debug.log("event: ".concat(t.type))})),this.fullscreen=new le(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&ue.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new be(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",(function(){return At(r.play())})),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new we(this))):this.debug.error("Setup failed: no support")}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed")}return i(e,[{key:"play",value:function(){var t=this;return H(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then((function(){return t.ads.play()})).catch((function(){return At(t.media.play())})),this.media.play()):null}},{key:"pause",value:function(){return this.playing&&H(this.media.pause)?this.media.pause():null}},{key:"togglePlay",value:function(t){return(Z(t)?t:!this.playing)?this.play():this.pause()}},{key:"stop",value:function(){this.isHTML5?(this.pause(),this.restart()):H(this.media.stop)&&this.media.stop()}},{key:"restart",value:function(){this.currentTime=0}},{key:"rewind",value:function(t){this.currentTime-=U(t)?t:this.config.seekTime}},{key:"forward",value:function(t){this.currentTime+=U(t)?t:this.config.seekTime}},{key:"increaseVolume",value:function(t){this.volume=(this.media.muted?0:this.volume)+(U(t)?t:0)}},{key:"decreaseVolume",value:function(t){this.increaseVolume(-t)}},{key:"toggleCaptions",value:function(t){ee.toggle.call(this,t,!1)}},{key:"airplay",value:function(){wt.airplay&&this.media.webkitShowPlaybackTargetPicker()}},{key:"toggleControls",value:function(t){if(this.supported.ui&&!this.isAudio){var e=mt(this.elements.container,this.config.classNames.hideControls),i=ft(this.elements.container,this.config.classNames.hideControls,void 0===t?void 0:!t);return i&&G(this.config.controls)&&this.config.controls.includes("settings")&&!J(this.config.settings)&&Yt.toggleMenu.call(this,!1),i!==e&&Pt.call(this,this.media,i?"controlshidden":"controlsshown"),!i}return!1}},{key:"on",value:function(t,e){Tt.call(this,this.elements.container,t,e)}},{key:"once",value:function(t,e){Et.call(this,this.elements.container,t,e)}},{key:"off",value:function(t,e){kt(this.elements.container,t,e)}},{key:"destroy",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ready){var n=function(){document.body.style.overflow="",e.embed=null,i?(Object.keys(e.elements).length&&(ct(e.elements.buttons.play),ct(e.elements.captions),ct(e.elements.controls),ct(e.elements.wrapper),e.elements.buttons.play=null,e.elements.captions=null,e.elements.controls=null,e.elements.wrapper=null),H(t)&&t()):(It.call(e),Rt.cancelRequests.call(e),ht(e.elements.original,e.elements.container),Pt.call(e,e.elements.original,"destroyed",!0),H(t)&&t.call(e.elements.original),e.ready=!1,setTimeout((function(){e.elements=null,e.media=null}),200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(ue.toggleNativeControls.call(this,!0),n()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&H(this.embed.destroy)&&this.embed.destroy(),n()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(n),setTimeout(n,200))}}},{key:"supports",value:function(t){return wt.mime.call(this,t)}},{key:"isHTML5",get:function(){return this.provider===re.html5}},{key:"isEmbed",get:function(){return this.isYouTube||this.isVimeo}},{key:"isYouTube",get:function(){return this.provider===re.youtube}},{key:"isVimeo",get:function(){return this.provider===re.vimeo}},{key:"isVideo",get:function(){return this.type===oe}},{key:"isAudio",get:function(){return"audio"===this.type}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",set:function(t){if(this.duration){var e=U(t)&&t>0;this.media.currentTime=e?Math.min(t,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"))}},get:function(){return Number(this.media.currentTime)}},{key:"buffered",get:function(){var t=this.media.buffered;return U(t)?t:t&&t.length&&this.duration>0?t.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var t=parseFloat(this.config.duration),e=(this.media||{}).duration,i=U(e)&&e!==1/0?e:0;return t||i}},{key:"volume",set:function(t){var e=t;q(e)&&(e=Number(e)),U(e)||(e=this.storage.get("volume")),U(e)||(e=this.config.volume),e>1&&(e=1),e<0&&(e=0),this.config.volume=e,this.media.volume=e,!J(t)&&this.muted&&e>0&&(this.muted=!1)},get:function(){return Number(this.media.volume)}},{key:"muted",set:function(t){var e=t;Z(e)||(e=this.storage.get("muted")),Z(e)||(e=this.config.muted),this.config.muted=e,this.media.muted=e},get:function(){return Boolean(this.media.muted)}},{key:"hasAudio",get:function(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}},{key:"speed",set:function(t){var e=this,i=null;U(t)&&(i=t),U(i)||(i=this.storage.get("speed")),U(i)||(i=this.config.speed.selected),i=function(){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255;return Math.min(Math.max(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),t)}(i,this.minimumSpeed,this.maximumSpeed),this.config.speed.selected=i,setTimeout((function(){e.media.playbackRate=i}),0)},get:function(){return Number(this.media.playbackRate)}},{key:"minimumSpeed",get:function(){return this.isYouTube?Math.min.apply(Math,s(this.options.speed)):this.isVimeo?.5:.0625}},{key:"maximumSpeed",get:function(){return this.isYouTube?Math.max.apply(Math,s(this.options.speed)):this.isVimeo?2:16}},{key:"quality",set:function(t){var e=this.config.quality,i=this.options.quality;if(i.length){var n=[!J(t)&&Number(t),this.storage.get("quality"),e.selected,e.default].find(U),r=!0;if(!i.includes(n)){var o=function(t,e){return G(t)&&t.length?t.reduce((function(t,i){return Math.abs(i-e)<Math.abs(t-e)?i:t})):null}(i,n);this.debug.warn("Unsupported quality option: ".concat(n,", using ").concat(o," instead")),n=o,r=!1}e.selected=n,this.media.quality=n,r&&this.storage.set({quality:n})}},get:function(){return this.media.quality}},{key:"loop",set:function(t){var e=Z(t)?t:this.config.loop.active;this.config.loop.active=e,this.media.loop=e},get:function(){return Boolean(this.media.loop)}},{key:"source",set:function(t){Ce.change.call(this,t)},get:function(){return this.media.currentSrc}},{key:"download",get:function(){var t=this.config.urls.download;return Y(t)?t:this.source},set:function(t){Y(t)&&(this.config.urls.download=t,Yt.setDownloadUrl.call(this))}},{key:"poster",set:function(t){this.isVideo?ue.setPoster.call(this,t,!1).catch((function(){})):this.debug.warn("Poster can only be set for video")},get:function(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}},{key:"ratio",get:function(){if(!this.isVideo)return null;var t=Ot(Lt.call(this));return G(t)?t.join(":"):t},set:function(t){this.isVideo?q(t)&&zt(t)?(this.config.ratio=t,Dt.call(this)):this.debug.error("Invalid aspect ratio specified (".concat(t,")")):this.debug.warn("Aspect ratio can only be set for video")}},{key:"autoplay",set:function(t){var e=Z(t)?t:this.config.autoplay;this.config.autoplay=e},get:function(){return Boolean(this.config.autoplay)}},{key:"currentTrack",set:function(t){ee.set.call(this,t,!1)},get:function(){var t=this.captions;return t.toggled?t.currentTrack:-1}},{key:"language",set:function(t){ee.setLanguage.call(this,t,!1)},get:function(){return(ee.getCurrentTrack.call(this)||{}).language}},{key:"pip",set:function(t){if(wt.pip){var e=Z(t)?t:!this.pip;H(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(e?ne:"inline"),H(this.media.requestPictureInPicture)&&(!this.pip&&e?this.media.requestPictureInPicture():this.pip&&!e&&document.exitPictureInPicture())}},get:function(){return wt.pip?J(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===ne:null}}],[{key:"supported",value:function(t,e,i){return wt.check(t,e,i)}},{key:"loadSprite",value:function(t,e){return Wt(t,e)}},{key:"setup",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null;return q(t)?n=Array.from(document.querySelectorAll(t)):W(t)?n=Array.from(t):G(t)&&(n=t.filter($)),J(n)?null:n.map((function(t){return new e(t,i)}))}}]),e}();return Se.defaults=JSON.parse(JSON.stringify(ie)),Se}())},zUnb:function(t,e,i){"use strict";function n(t){return"function"==typeof t}i.r(e);let r=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}};function a(t){setTimeout(()=>{throw t},0)}const s={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;a(t)},complete(){}},l=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function c(t){return null!==t&&"object"==typeof t}const u=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:i,_ctorUnsubscribe:r,_unsubscribe:o,_subscriptions:a}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof t)i.remove(this);else if(null!==i)for(let t=0;t<i.length;++t)i[t].remove(this);if(n(o)){r&&(this._unsubscribe=void 0);try{o.call(this)}catch(s){e=s instanceof u?p(s.errors):[s]}}if(l(a)){let t=-1,i=a.length;for(;++t<i;){const i=a[t];if(c(i))try{i.unsubscribe()}catch(s){e=e||[],s instanceof u?e=e.concat(p(s.errors)):e.push(s)}}}if(e)throw new u(e)}add(e){let i=e;if(!e)return t.EMPTY;switch(typeof e){case"function":i=new t(e);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof t)){const e=i;i=new t,i._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=i;if(null===n)i._parentOrParents=this;else if(n instanceof t){if(n===this)return i;i._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return i;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[i]:r.push(i),i}remove(t){const e=this._subscriptions;if(e){const i=e.indexOf(t);-1!==i&&e.splice(i,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function p(t){return t.reduce((t,e)=>t.concat(e instanceof u?e.errors:e),[])}const d=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends h{constructor(t,e,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s;break;case 1:if(!t){this.destination=s;break}if("object"==typeof t){t instanceof f?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,t,e,i)}}[d](){return this}static create(t,e,i){const n=new f(t,e,i);return n.syncErrorThrowable=!1,n}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class m extends f{constructor(t,e,i,r){let o;super(),this._parentSubscriber=t;let a=this;n(e)?o=e:e&&(o=e.next,i=e.error,r=e.complete,e!==s&&(a=Object.create(e),n(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=i,this._complete=r}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:i}=o;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=t,e.syncErrorThrown=!0):a(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;a(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(i){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw i;a(i)}}__tryOrSetError(t,e,i){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(n){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0,!0):(a(n),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const g=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(t){return t}function _(...t){return v(t)}function v(t){return 0===t.length?y:1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}}let b=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(t,e,i){const{operator:n}=this,r=function(t,e,i){if(t){if(t instanceof f)return t;if(t[d])return t[d]()}return t||e||i?new f(t,e,i):new f(s)}(t,e,i);if(r.add(n?n.call(r,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),o.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:i,isStopped:n}=t;if(e||n)return!1;t=i&&i instanceof f?i:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=x(e))((e,i)=>{let n;n=this.subscribe(e=>{try{t(e)}catch(r){i(r),n&&n.unsubscribe()}},i,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[g](){return this}pipe(...t){return 0===t.length?this:v(t)(this)}toPromise(t){return new(t=x(t))((t,e)=>{let i;this.subscribe(t=>i=t,t=>e(t),()=>t(i))})}}return t.create=e=>new t(e),t})();function x(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const w=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class C extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}class S extends f{constructor(t){super(t),this.destination=t}}let T=(()=>{class t extends b{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[d](){return new S(this)}lift(t){const e=new k(this,this);return e.operator=t,e}next(t){if(this.closed)throw new w;if(!this.isStopped){const{observers:e}=this,i=e.length,n=e.slice();for(let r=0;r<i;r++)n[r].next(t)}}error(t){if(this.closed)throw new w;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,i=e.length,n=e.slice();for(let r=0;r<i;r++)n[r].error(t);this.observers.length=0}complete(){if(this.closed)throw new w;this.isStopped=!0;const{observers:t}=this,e=t.length,i=t.slice();for(let n=0;n<e;n++)i[n].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new w;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new w;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new C(this,t))}asObservable(){const t=new b;return t.source=this,t}}return t.create=(t,e)=>new k(t,e),t})();class k extends T{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function E(t){return t&&"function"==typeof t.schedule}function P(t,e){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new I(t,e))}}class I{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new M(t,this.project,this.thisArg))}}class M extends f{constructor(t,e,i){super(t),this.project=e,this.count=0,this.thisArg=i||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}const A=t=>e=>{for(let i=0,n=t.length;i<n&&!e.closed;i++)e.next(t[i]);e.complete()};function z(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const O=z(),L=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function D(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const R=t=>{if(t&&"function"==typeof t[g])return n=t,t=>{const e=n[g]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(L(t))return A(t);if(D(t))return i=t,t=>(i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,a),t);if(t&&"function"==typeof t[O])return e=t,t=>{const i=e[O]();for(;;){let e;try{e=i.next()}catch(n){return t.error(n),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof i.return&&t.add(()=>{i.return&&i.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,i,n};function B(t,e){return new b(i=>{const n=new h;let r=0;return n.add(e.schedule((function(){r!==t.length?(i.next(t[r++]),i.closed||n.add(this.schedule())):i.complete()}))),n})}function F(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[g]}(t))return function(t,e){return new b(i=>{const n=new h;return n.add(e.schedule(()=>{const r=t[g]();n.add(r.subscribe({next(t){n.add(e.schedule(()=>i.next(t)))},error(t){n.add(e.schedule(()=>i.error(t)))},complete(){n.add(e.schedule(()=>i.complete()))}}))})),n})}(t,e);if(D(t))return function(t,e){return new b(i=>{const n=new h;return n.add(e.schedule(()=>t.then(t=>{n.add(e.schedule(()=>{i.next(t),n.add(e.schedule(()=>i.complete()))}))},t=>{n.add(e.schedule(()=>i.error(t)))}))),n})}(t,e);if(L(t))return B(t,e);if(function(t){return t&&"function"==typeof t[O]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new b(i=>{const n=new h;let r;return n.add(()=>{r&&"function"==typeof r.return&&r.return()}),n.add(e.schedule(()=>{r=t[O](),n.add(e.schedule((function(){if(i.closed)return;let t,e;try{const i=r.next();t=i.value,e=i.done}catch(n){return void i.error(n)}e?i.complete():(i.next(t),this.schedule())})))})),n})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof b?t:new b(R(t))}class N extends f{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class V extends f{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function j(t,e){if(!e.closed)return t instanceof b?t.subscribe(e):R(t)(e)}function U(t,e,i=Number.POSITIVE_INFINITY){return"function"==typeof e?n=>n.pipe(U((i,n)=>F(t(i,n)).pipe(P((t,r)=>e(i,t,n,r))),i)):("number"==typeof e&&(i=e),e=>e.lift(new q(t,i)))}class q{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new Z(t,this.project,this.concurrent))}}class Z extends V{constructor(t,e,i=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const i=this.index++;try{e=this.project(t,i)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(e)}_innerSub(t){const e=new N(this),i=this.destination;i.add(e);const n=j(t,e);n!==e&&i.add(n)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}const H=U;function G(t=Number.POSITIVE_INFINITY){return U(y,t)}function W(t,e){return e?B(t,e):new b(A(t))}function $(...t){let e=Number.POSITIVE_INFINITY,i=null,n=t[t.length-1];return E(n)?(i=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof n&&(e=t.pop()),null===i&&1===t.length&&t[0]instanceof b?t[0]:G(e)(W(t,i))}function K(){return function(t){return t.lift(new X(t))}}class X{constructor(t){this.connectable=t}call(t,e){const{connectable:i}=this;i._refCount++;const n=new Q(t,i),r=e.subscribe(n);return n.closed||(n.connection=i.connect()),r}}class Q extends f{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:i}=this,n=t._connection;this.connection=null,!n||i&&n!==i||n.unsubscribe()}}class Y extends b{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new tt(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return K()(this)}}const J=(()=>{const t=Y.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class tt extends S{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function et(t,e){return function(i){let n;if(n="function"==typeof t?t:function(){return t},"function"==typeof e)return i.lift(new it(n,e));const r=Object.create(i,J);return r.source=i,r.subjectFactory=n,r}}class it{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:i}=this,n=this.subjectFactory(),r=i(n).subscribe(t);return r.add(e.subscribe(n)),r}}function nt(){return new T}function rt(){return t=>K()(et(nt)(t))}function ot(t){return{toString:t}.toString()}const at="__parameters__";function st(t,e,i){return ot(()=>{const n=function(t){return function(...e){if(t){const i=t(...e);for(const t in i)this[t]=i[t]}}}(e);function r(...t){if(this instanceof r)return n.apply(this,t),this;const e=new r(...t);return i.annotation=e,i;function i(t,i,n){const r=t.hasOwnProperty(at)?t[at]:Object.defineProperty(t,at,{value:[]})[at];for(;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(e),t}}return i&&(r.prototype=Object.create(i.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}const lt=st("Inject",t=>({token:t})),ct=st("Optional"),ut=st("Self"),ht=st("SkipSelf");var pt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function dt(t){for(let e in t)if(t[e]===dt)return e;throw Error("Could not find renamed property on target object.")}function ft(t,e){for(const i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=e[i])}function mt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function gt(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function yt(t){return _t(t,t[bt])||_t(t,t[Ct])}function _t(t,e){return e&&e.token===t?e:null}function vt(t){return t&&(t.hasOwnProperty(xt)||t.hasOwnProperty(St))?t[xt]:null}const bt=dt({"\u0275prov":dt}),xt=dt({"\u0275inj":dt}),wt=dt({"\u0275provFallback":dt}),Ct=dt({ngInjectableDef:dt}),St=dt({ngInjectorDef:dt});function Tt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Tt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const i=e.indexOf("\n");return-1===i?e:e.substring(0,i)}function kt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Et=dt({__forward_ref__:dt});function Pt(t){return t.__forward_ref__=Pt,t.toString=function(){return Tt(this())},t}function It(t){return Mt(t)?t():t}function Mt(t){return"function"==typeof t&&t.hasOwnProperty(Et)&&t.__forward_ref__===Pt}const At="undefined"!=typeof globalThis&&globalThis,zt="undefined"!=typeof window&&window,Ot="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Lt="undefined"!=typeof global&&global,Dt=At||Lt||zt||Ot,Rt=dt({"\u0275cmp":dt}),Bt=dt({"\u0275dir":dt}),Ft=dt({"\u0275pipe":dt}),Nt=dt({"\u0275mod":dt}),Vt=dt({"\u0275loc":dt}),jt=dt({"\u0275fac":dt}),Ut=dt({__NG_ELEMENT_ID__:dt});class qt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=mt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const Zt=new qt("INJECTOR",-1),Ht={},Gt=/\n/gm,Wt="__source",$t=dt({provide:String,useValue:dt});let Kt,Xt=void 0;function Qt(t){const e=Xt;return Xt=t,e}function Yt(t){const e=Kt;return Kt=t,e}function Jt(t,e=pt.Default){if(void 0===Xt)throw new Error("inject() must be called from an injection context");return null===Xt?ie(t,void 0,e):Xt.get(t,e&pt.Optional?null:void 0,e)}function te(t,e=pt.Default){return(Kt||Jt)(It(t),e)}const ee=te;function ie(t,e,i){const n=yt(t);if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(i&pt.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${Tt(t)}]`)}function ne(t){const e=[];for(let i=0;i<t.length;i++){const n=It(t[i]);if(Array.isArray(n)){if(0===n.length)throw new Error("Arguments array must have arguments.");let t=void 0,i=pt.Default;for(let e=0;e<n.length;e++){const r=n[e];r instanceof ct||"Optional"===r.ngMetadataName||r===ct?i|=pt.Optional:r instanceof ht||"SkipSelf"===r.ngMetadataName||r===ht?i|=pt.SkipSelf:r instanceof ut||"Self"===r.ngMetadataName||r===ut?i|=pt.Self:t=r instanceof lt||r===lt?r.token:r}e.push(te(t,i))}else e.push(te(n))}return e}class re{get(t,e=Ht){if(e===Ht){const e=new Error(`NullInjectorError: No provider for ${Tt(t)}!`);throw e.name="NullInjectorError",e}return e}}class oe{}class ae{}function se(t,e){t.forEach(t=>Array.isArray(t)?se(t,e):e(t))}function le(t,e,i){e>=t.length?t.push(i):t.splice(e,0,i)}function ce(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ue(t,e){const i=[];for(let n=0;n<t;n++)i.push(e);return i}function he(t,e,i){let n=de(t,e);return n>=0?t[1|n]=i:(n=~n,function(t,e,i,n){let r=t.length;if(r==e)t.push(i,n);else if(1===r)t.push(n,t[0]),t[0]=i;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=i,t[e+1]=n}}(t,n,e,i)),n}function pe(t,e){const i=de(t,e);if(i>=0)return t[1|i]}function de(t,e){return function(t,e,i){let n=0,r=t.length>>1;for(;r!==n;){const i=n+(r-n>>1),o=t[i<<1];if(e===o)return i<<1;o>e?r=i:n=i+1}return~(r<<1)}(t,e)}var fe=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),me=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const ge={},ye=[];let _e=0;function ve(t){return ot(()=>{const e={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===fe.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||ye,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||me.Emulated,id:"c",styles:t.styles||ye,_:null,setInput:null,schemas:t.schemas||null,tView:null},n=t.directives,r=t.features,o=t.pipes;return i.id+=_e++,i.inputs=Se(t.inputs,e),i.outputs=Se(t.outputs),r&&r.forEach(t=>t(i)),i.directiveDefs=n?()=>("function"==typeof n?n():n).map(be):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(xe):null,i})}function be(t){return Ee(t)||function(t){return t[Bt]||null}(t)}function xe(t){return function(t){return t[Ft]||null}(t)}const we={};function Ce(t){const e={type:t.type,bootstrap:t.bootstrap||ye,declarations:t.declarations||ye,imports:t.imports||ye,exports:t.exports||ye,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&ot(()=>{we[t.id]=t.type}),e}function Se(t,e){if(null==t)return ge;const i={};for(const n in t)if(t.hasOwnProperty(n)){let r=t[n],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),i[r]=n,e&&(e[r]=o)}return i}const Te=ve;function ke(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ee(t){return t[Rt]||null}function Pe(t,e){return t.hasOwnProperty(jt)?t[jt]:null}function Ie(t,e){const i=t[Nt]||null;if(!i&&!0===e)throw new Error(`Type ${Tt(t)} does not have '\u0275mod' property.`);return i}const Me=20,Ae=10;function ze(t){return Array.isArray(t)&&"object"==typeof t[1]}function Oe(t){return Array.isArray(t)&&!0===t[1]}function Le(t){return 0!=(8&t.flags)}function De(t){return 2==(2&t.flags)}function Re(t){return 1==(1&t.flags)}function Be(t){return null!==t.template}function Fe(t){return 0!=(512&t[2])}class Ne{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function Ve(){return je}function je(t){return t.type.prototype.ngOnChanges&&(t.setInput=qe),Ue}function Ue(){const t=Ze(this),e=null==t?void 0:t.current;if(e){const i=t.previous;if(i===ge)t.previous=e;else for(let t in e)i[t]=e[t];t.current=null,this.ngOnChanges(e)}}function qe(t,e,i,n){const r=Ze(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:ge,current:null}),o=r.current||(r.current={}),a=r.previous,s=this.declaredInputs[i],l=a[s];o[s]=new Ne(l&&l.currentValue,e,a===ge),t[n]=e}function Ze(t){return t.__ngSimpleChanges__||null}Ve.ngInherit=!0;let He=void 0;function Ge(t){return!!t.listen}const We={createRenderer:(t,e)=>void 0!==He?He:"undefined"!=typeof document?document:void 0};function $e(t){for(;Array.isArray(t);)t=t[0];return t}function Ke(t,e){return $e(e[t+Me])}function Xe(t,e){return $e(e[t.index])}function Qe(t,e){return t.data[e+Me]}function Ye(t,e){return t[e+Me]}function Je(t,e){const i=e[t];return ze(i)?i:i[0]}function ti(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ei(t){return 4==(4&t[2])}function ii(t){return 128==(128&t[2])}function ni(t,e){return null===t||null==e?null:t[e]}function ri(t){t[18]=0}function oi(t,e){t[5]+=e;let i=t,n=t[3];for(;null!==n&&(1===e&&1===i[5]||-1===e&&0===i[5]);)n[5]+=e,i=n,n=n[3]}const ai={lFrame:Pi(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function si(){return ai.bindingsEnabled}function li(){return ai.lFrame.lView}function ci(){return ai.lFrame.tView}function ui(t){ai.lFrame.contextLView=t}function hi(){return ai.lFrame.currentTNode}function pi(t,e){ai.lFrame.currentTNode=t,ai.lFrame.isParent=e}function di(){return ai.lFrame.isParent}function fi(){ai.lFrame.isParent=!1}function mi(){return ai.isInCheckNoChangesMode}function gi(t){ai.isInCheckNoChangesMode=t}function yi(){const t=ai.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function _i(){return ai.lFrame.bindingIndex++}function vi(t){const e=ai.lFrame,i=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,i}function bi(t,e){const i=ai.lFrame;i.bindingIndex=i.bindingRootIndex=t,xi(e)}function xi(t){ai.lFrame.currentDirectiveIndex=t}function wi(t){const e=ai.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function Ci(){return ai.lFrame.currentQueryIndex}function Si(t){ai.lFrame.currentQueryIndex=t}function Ti(t,e){const i=Ei();ai.lFrame=i,i.currentTNode=e,i.lView=t}function ki(t){const e=Ei(),i=t[1];ai.lFrame=e,e.currentTNode=i.firstChild,e.lView=t,e.tView=i,e.contextLView=t,e.bindingIndex=i.bindingStartIndex}function Ei(){const t=ai.lFrame,e=null===t?null:t.child;return null===e?Pi(t):e}function Pi(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function Ii(){const t=ai.lFrame;return ai.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Mi=Ii;function Ai(){const t=Ii();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function zi(){return ai.lFrame.selectedIndex}function Oi(t){ai.lFrame.selectedIndex=t}function Li(){const t=ai.lFrame;return Qe(t.tView,t.selectedIndex)}function Di(t,e){for(let i=e.directiveStart,n=e.directiveEnd;i<n;i++){const e=t.data[i].type.prototype,{ngAfterContentInit:n,ngAfterContentChecked:r,ngAfterViewInit:o,ngAfterViewChecked:a,ngOnDestroy:s}=e;n&&(t.contentHooks||(t.contentHooks=[])).push(-i,n),r&&((t.contentHooks||(t.contentHooks=[])).push(i,r),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(i,r)),o&&(t.viewHooks||(t.viewHooks=[])).push(-i,o),a&&((t.viewHooks||(t.viewHooks=[])).push(i,a),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(i,a)),null!=s&&(t.destroyHooks||(t.destroyHooks=[])).push(i,s)}}function Ri(t,e,i){Ni(t,e,3,i)}function Bi(t,e,i,n){(3&t[2])===i&&Ni(t,e,i,n)}function Fi(t,e){let i=t[2];(3&i)===e&&(i&=2047,i+=1,t[2]=i)}function Ni(t,e,i,n){const r=null!=n?n:-1;let o=0;for(let a=void 0!==n?65535&t[18]:0;a<e.length;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=n&&o>=n)break}else e[a]<0&&(t[18]+=65536),(o<r||-1==r)&&(Vi(t,i,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Vi(t,e,i,n){const r=i[n]<0,o=i[n+1],a=t[r?-i[n]:i[n]];r?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(a)):o.call(a)}const ji=-1;class Ui{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function qi(t,e,i){const n=Ge(t);let r=0;for(;r<i.length;){const o=i[r];if("number"==typeof o){if(0!==o)break;r++;const a=i[r++],s=i[r++],l=i[r++];n?t.setAttribute(e,s,l,a):e.setAttributeNS(a,s,l)}else{const a=o,s=i[++r];Hi(a)?n&&t.setProperty(e,a,s):n?t.setAttribute(e,a,s):e.setAttribute(a,s),r++}}return r}function Zi(t){return 3===t||4===t||6===t}function Hi(t){return 64===t.charCodeAt(0)}function Gi(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let i=-1;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r?i=r:0===i||Wi(t,i,r,null,-1===i||2===i?e[++n]:null)}}return t}function Wi(t,e,i,n,r){let o=0,a=t.length;if(-1===e)a=-1;else for(;o<t.length;){const i=t[o++];if("number"==typeof i){if(i===e){a=-1;break}if(i>e){a=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===i){if(null===n)return void(null!==r&&(t[o+1]=r));if(n===t[o+1])return void(t[o+2]=r)}o++,null!==n&&o++,null!==r&&o++}-1!==a&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,i),null!==n&&t.splice(o++,0,n),null!==r&&t.splice(o++,0,r)}function $i(t){return t!==ji}function Ki(t){return 32767&t}function Xi(t,e){let i=t>>16,n=e;for(;i>0;)n=n[15],i--;return n}function Qi(t){return"string"==typeof t?t:null==t?"":""+t}function Yi(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Qi(t)}const Ji=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Dt))();function tn(t){return t instanceof Function?t():t}let en=!0;function nn(t){const e=en;return en=t,e}let rn=0;function on(t,e){const i=sn(t,e);if(-1!==i)return i;const n=e[1];n.firstCreatePass&&(t.injectorIndex=e.length,an(n.data,t),an(e,null),an(n.blueprint,null));const r=ln(t,e),o=t.injectorIndex;if($i(r)){const t=Ki(r),i=Xi(r,e),n=i[1].data;for(let r=0;r<8;r++)e[o+r]=i[t+r]|n[t+r]}return e[o+8]=r,o}function an(t,e){t.push(0,0,0,0,0,0,0,0,e)}function sn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function ln(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,n=null,r=e;for(;null!==r;){const t=r[1],e=t.type;if(n=2===e?t.declTNode:1===e?r[6]:null,null===n)return ji;if(i++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|i<<16}return ji}function cn(t,e,i){!function(t,e,i){let n;"string"==typeof i?n=i.charCodeAt(0)||0:i.hasOwnProperty(Ut)&&(n=i[Ut]),null==n&&(n=i[Ut]=rn++);const r=255&n,o=1<<r,a=64&r,s=32&r,l=e.data;128&r?a?s?l[t+7]|=o:l[t+6]|=o:s?l[t+5]|=o:l[t+4]|=o:a?s?l[t+3]|=o:l[t+2]|=o:s?l[t+1]|=o:l[t]|=o}(t,e,i)}function un(t,e,i,n=pt.Default,r){if(null!==t){const r=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ut)?t[Ut]:void 0;return"number"==typeof e&&e>0?255&e:e}(i);if("function"==typeof r){Ti(e,t);try{const t=r();if(null!=t||n&pt.Optional)return t;throw new Error(`No provider for ${Yi(i)}!`)}finally{Mi()}}else if("number"==typeof r){if(-1===r)return new yn(t,e);let o=null,a=sn(t,e),s=ji,l=n&pt.Host?e[16][6]:null;for((-1===a||n&pt.SkipSelf)&&(s=-1===a?ln(t,e):e[a+8],s!==ji&&gn(n,!1)?(o=e[1],a=Ki(s),e=Xi(s,e)):a=-1);-1!==a;){const t=e[1];if(mn(r,a,t.data)){const t=pn(a,e,i,o,n,l);if(t!==hn)return t}s=e[a+8],s!==ji&&gn(n,e[1].data[a+8]===l)&&mn(r,a,e)?(o=t,a=Ki(s),e=Xi(s,e)):a=-1}}}if(n&pt.Optional&&void 0===r&&(r=null),0==(n&(pt.Self|pt.Host))){const t=e[9],o=Yt(void 0);try{return t?t.get(i,r,n&pt.Optional):ie(i,r,n&pt.Optional)}finally{Yt(o)}}if(n&pt.Optional)return r;throw new Error(`NodeInjector: NOT_FOUND [${Yi(i)}]`)}const hn={};function pn(t,e,i,n,r,o){const a=e[1],s=a.data[t+8],l=dn(s,a,i,null==n?De(s)&&en:n!=a&&2===s.type,r&pt.Host&&o===s);return null!==l?fn(e,a,l,s):hn}function dn(t,e,i,n,r){const o=t.providerIndexes,a=e.data,s=1048575&o,l=t.directiveStart,c=o>>20,u=r?s+c:t.directiveEnd;for(let h=n?s:s+c;h<u;h++){const t=a[h];if(h<l&&i===t||h>=l&&t.type===i)return h}if(r){const t=a[l];if(t&&Be(t)&&t.type===i)return l}return null}function fn(t,e,i,n){let r=t[i];const o=e.data;if(r instanceof Ui){const a=r;if(a.resolving)throw new Error("Circular dep for "+Yi(o[i]));const s=nn(a.canSeeViewProviders);a.resolving=!0;const l=a.injectImpl?Yt(a.injectImpl):null;Ti(t,n);try{r=t[i]=a.factory(void 0,o,t,n),e.firstCreatePass&&i>=n.directiveStart&&function(t,e,i){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(n){const n=je(e);(i.preOrderHooks||(i.preOrderHooks=[])).push(t,n),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,n)}r&&(i.preOrderHooks||(i.preOrderHooks=[])).push(0-t,r),o&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t,o),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,o))}(i,o[i],e)}finally{null!==l&&Yt(l),nn(s),a.resolving=!1,Mi()}}return r}function mn(t,e,i){const n=64&t,r=32&t;let o;return o=128&t?n?r?i[e+7]:i[e+6]:r?i[e+5]:i[e+4]:n?r?i[e+3]:i[e+2]:r?i[e+1]:i[e],!!(o&1<<t)}function gn(t,e){return!(t&pt.Self||t&pt.Host&&e)}class yn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return un(this._tNode,this._lView,t,void 0,e)}}function _n(t){const e=t;if(Mt(t))return()=>{const t=_n(It(e));return t?t():null};let i=Pe(e);if(null===i){const t=vt(e);i=t&&t.factory}return i||null}function vn(t){return ot(()=>{const e=t.prototype.constructor,i=e[jt]||_n(e),n=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==n;){const t=r[jt]||_n(r);if(t&&t!==i)return t;r=Object.getPrototypeOf(r)}return t=>new t})}function bn(t){return t.ngDebugContext}function xn(t){return t.ngOriginalError}function wn(t,...e){t.error(...e)}class Cn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),i=this._findContext(t),n=function(t){return t.ngErrorLogger||wn}(t);n(this._console,"ERROR",t),e&&n(this._console,"ORIGINAL ERROR",e),i&&n(this._console,"ERROR CONTEXT",i)}_findContext(t){return t?bn(t)?bn(t):this._findContext(xn(t)):null}_findOriginalError(t){let e=xn(t);for(;e&&xn(e);)e=xn(e);return e}}class Sn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class Tn extends Sn{getTypeName(){return"HTML"}}class kn extends Sn{getTypeName(){return"Style"}}class En extends Sn{getTypeName(){return"Script"}}class Pn extends Sn{getTypeName(){return"URL"}}class In extends Sn{getTypeName(){return"ResourceURL"}}function Mn(t){return t instanceof Sn?t.changingThisBreaksApplicationSecurity:t}function An(t,e){const i=zn(t);if(null!=i&&i!==e){if("ResourceURL"===i&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${i} (see http://g.co/ng/security#xss)`)}return i===e}function zn(t){return t instanceof Sn&&t.getTypeName()||null}let On=!0,Ln=!1;function Dn(){return Ln=!0,On}class Rn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Bn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const i=this.inertDocument.createElement("body");return i.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(t){const e=t.attributes;for(let n=e.length-1;0<n;n--){const i=e.item(n).name;"xmlns:ns1"!==i&&0!==i.indexOf("ns1:")||t.removeAttribute(i)}let i=t.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const Fn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Nn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Vn(t){return(t=String(t)).match(Fn)||t.match(Nn)?t:(Dn()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function jn(t){const e={};for(const i of t.split(","))e[i]=!0;return e}function Un(...t){const e={};for(const i of t)for(const t in i)i.hasOwnProperty(t)&&(e[t]=!0);return e}const qn=jn("area,br,col,hr,img,wbr"),Zn=jn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Hn=jn("rp,rt"),Gn=Un(Hn,Zn),Wn=Un(qn,Un(Zn,jn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Un(Hn,jn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Gn),$n=jn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Kn=jn("srcset"),Xn=Un($n,Kn,jn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),jn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Qn=jn("script,style,template");class Yn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Wn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Qn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=t.attributes;for(let r=0;r<i.length;r++){const t=i.item(r),e=t.name,o=e.toLowerCase();if(!Xn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let a=t.value;$n[o]&&(a=Vn(a)),Kn[o]&&(n=a,a=(n=String(n)).split(",").map(t=>Vn(t.trim())).join(", ")),this.buf.push(" ",e,'="',er(a),'"')}var n;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Wn.hasOwnProperty(e)&&!qn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(er(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const Jn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tr=/([^\#-~ |!])/g;function er(t){return t.replace(/&/g,"&amp;").replace(Jn,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(tr,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ir;function nr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var rr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function or(t){const e=function(){const t=li();return t&&t[12]}();return e?e.sanitize(rr.URL,t)||"":An(t,"URL")?Mn(t):Vn(Qi(t))}function ar(t,e){t.__ngContext__=e}function sr(t,e,i){let n=t.length;for(;;){const r=t.indexOf(e,i);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const i=e.length;if(r+i===n||t.charCodeAt(r+i)<=32)return r}i=r+1}}const lr="ng-template";function cr(t,e,i){let n=0;for(;n<t.length;){let r=t[n++];if(i&&"class"===r){if(r=t[n],-1!==sr(r.toLowerCase(),e,0))return!0}else if(1===r){for(;n<t.length&&"string"==typeof(r=t[n++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function ur(t){return 0===t.type&&t.tagName!==lr}function hr(t,e,i){return e===(0!==t.type||i?t.tagName:lr)}function pr(t,e,i){let n=4;const r=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Zi(t[e]))return e;return t.length}(r);let a=!1;for(let s=0;s<e.length;s++){const l=e[s];if("number"!=typeof l){if(!a)if(4&n){if(n=2|1&n,""!==l&&!hr(t,l,i)||""===l&&1===e.length){if(dr(n))return!1;a=!0}}else{const c=8&n?l:e[++s];if(8&n&&null!==t.attrs){if(!cr(t.attrs,c,i)){if(dr(n))return!1;a=!0}continue}const u=fr(8&n?"class":l,r,ur(t),i);if(-1===u){if(dr(n))return!1;a=!0;continue}if(""!==c){let t;t=u>o?"":r[u+1].toLowerCase();const e=8&n?t:null;if(e&&-1!==sr(e,c,0)||2&n&&c!==t){if(dr(n))return!1;a=!0}}}}else{if(!a&&!dr(n)&&!dr(l))return!1;if(a&&dr(l))continue;a=!1,n=l|1&n}}return dr(n)||a}function dr(t){return 0==(1&t)}function fr(t,e,i,n){if(null===e)return-1;let r=0;if(n||!i){let i=!1;for(;r<e.length;){const n=e[r];if(n===t)return r;if(3===n||6===n)i=!0;else{if(1===n||2===n){let t=e[++r];for(;"string"==typeof t;)t=e[++r];continue}if(4===n)break;if(0===n){r+=4;continue}}r+=i?1:2}return-1}return function(t,e){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const n=t[i];if("number"==typeof n)return-1;if(n===e)return i;i++}return-1}(e,t)}function mr(t,e,i=!1){for(let n=0;n<e.length;n++)if(pr(t,e[n],i))return!0;return!1}function gr(t,e){t:for(let i=0;i<e.length;i++){const n=e[i];if(t.length===n.length){for(let e=0;e<t.length;e++)if(t[e]!==n[e])continue t;return!0}}return!1}function yr(t,e){return t?":not("+e.trim()+")":e}function _r(t){let e=t[0],i=1,n=2,r="",o=!1;for(;i<t.length;){let a=t[i];if("string"==typeof a)if(2&n){const e=t[++i];r+="["+a+(e.length>0?'="'+e+'"':"")+"]"}else 8&n?r+="."+a:4&n&&(r+=" "+a);else""===r||dr(a)||(e+=yr(o,r),r=""),n=a,o=o||!dr(n);i++}return""!==r&&(e+=yr(o,r)),e}const vr={};function br(t){const e=t[3];return Oe(e)?e[3]:e}function xr(t){return Cr(t[13])}function wr(t){return Cr(t[4])}function Cr(t){for(;null!==t&&!Oe(t);)t=t[4];return t}function Sr(t){Tr(ci(),li(),zi()+t,mi())}function Tr(t,e,i,n){if(!n)if(3==(3&e[2])){const n=t.preOrderCheckHooks;null!==n&&Ri(e,n,i)}else{const n=t.preOrderHooks;null!==n&&Bi(e,n,0,i)}Oi(i)}function kr(t,e){return t<<17|e<<2}function Er(t){return t>>17&32767}function Pr(t){return 2|t}function Ir(t){return(131068&t)>>2}function Mr(t,e){return-131069&t|e<<2}function Ar(t){return 1|t}function zr(t,e){const i=t.contentQueries;if(null!==i)for(let n=0;n<i.length;n+=2){const r=i[n],o=i[n+1];if(-1!==o){const i=t.data[o];Si(r),i.contentQueries(2,e[o],o)}}}function Or(t,e,i){return Ge(e)?e.createElement(t,i):null===i?e.createElement(t):e.createElementNS(i,t)}function Lr(t,e,i,n,r,o,a,s,l,c){const u=e.blueprint.slice();return u[0]=r,u[2]=140|n,ri(u),u[3]=u[15]=t,u[8]=i,u[10]=a||t&&t[10],u[11]=s||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=o,u[16]=2==e.type?t[16]:u,u}function Dr(t,e,i,n,r){const o=e+Me,a=t.data[o]||function(t,e,i,n,r){const o=hi(),a=di(),s=t.data[e]=function(t,e,i,n,r,o){return{type:i,index:n,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,i,e,n,r);return null===t.firstChild&&(t.firstChild=s),null!==o&&(a&&null==o.child&&null!==s.parent?o.child=s:a||(o.next=s)),s}(t,o,i,n,r);return pi(a,!0),a}function Rr(t,e,i){ki(e);try{const n=t.viewQuery;null!==n&&po(1,n,i);const r=t.template;null!==r&&Nr(t,e,r,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&zr(t,e),t.staticViewQueries&&po(2,t.viewQuery,i);const o=t.components;null!==o&&function(t,e){for(let i=0;i<e.length;i++)so(t,e[i])}(e,o)}catch(n){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),n}finally{e[2]&=-5,Ai()}}function Br(t,e,i,n){const r=e[2];if(256==(256&r))return;ki(e);const o=mi();try{ri(e),ai.lFrame.bindingIndex=t.bindingStartIndex,null!==i&&Nr(t,e,i,2,n);const a=3==(3&r);if(!o)if(a){const i=t.preOrderCheckHooks;null!==i&&Ri(e,i,null)}else{const i=t.preOrderHooks;null!==i&&Bi(e,i,0,null),Fi(e,0)}if(function(t){for(let e=xr(t);null!==e;e=wr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const i=t[e],n=i[3];0==(1024&i[2])&&oi(n,1),i[2]|=1024}}}(e),function(t){for(let e=xr(t);null!==e;e=wr(e))for(let t=Ae;t<e.length;t++){const i=e[t],n=i[1];ii(i)&&Br(n,i,n.template,i[8])}}(e),null!==t.contentQueries&&zr(t,e),!o)if(a){const i=t.contentCheckHooks;null!==i&&Ri(e,i)}else{const i=t.contentHooks;null!==i&&Bi(e,i,1),Fi(e,1)}!function(t,e){try{const i=t.expandoInstructions;if(null!==i){let n=t.expandoStartIndex,r=-1,o=-1;for(let t=0;t<i.length;t++){const a=i[t];"number"==typeof a?a<=0?(o=0-a,Oi(o),n+=9+i[++t],r=n):n+=a:(null!==a&&(bi(n,r),a(2,e[r])),r++)}}}finally{Oi(-1)}}(t,e);const s=t.components;null!==s&&function(t,e){for(let i=0;i<e.length;i++)ao(t,e[i])}(e,s);const l=t.viewQuery;if(null!==l&&po(2,l,n),!o)if(a){const i=t.viewCheckHooks;null!==i&&Ri(e,i)}else{const i=t.viewHooks;null!==i&&Bi(e,i,2),Fi(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,oi(e[3],-1))}finally{Ai()}}function Fr(t,e,i,n){const r=e[10],o=!mi(),a=ei(e);try{o&&!a&&r.begin&&r.begin(),a&&Rr(t,e,n),Br(t,e,i,n)}finally{o&&!a&&r.end&&r.end()}}function Nr(t,e,i,n,r){const o=zi();try{Oi(-1),2&n&&e.length>Me&&Tr(t,e,0,mi()),i(n,r)}finally{Oi(o)}}function Vr(t,e,i){si()&&(function(t,e,i,n){const r=i.directiveStart,o=i.directiveEnd;t.firstCreatePass||on(i,e),ar(n,e);const a=i.initialInputs;for(let s=r;s<o;s++){const n=t.data[s],o=Be(n);o&&io(e,i,n);const l=fn(e,t,s,i);ar(l,e),null!==a&&no(0,s-r,l,n,0,a),o&&(Je(i.index,e)[8]=l)}}(t,e,i,Xe(i,e)),128==(128&i.flags)&&function(t,e,i){const n=i.directiveStart,r=i.directiveEnd,o=t.expandoInstructions,a=t.firstCreatePass,s=i.index-Me,l=ai.lFrame.currentDirectiveIndex;try{Oi(s);for(let i=n;i<r;i++){const n=t.data[i],r=e[i];xi(i),null!==n.hostBindings||0!==n.hostVars||null!==n.hostAttrs?Xr(n,r):a&&o.push(null)}}finally{Oi(-1),xi(l)}}(t,e,i))}function jr(t,e,i=Xe){const n=e.localNames;if(null!==n){let r=e.index+1;for(let o=0;o<n.length;o+=2){const a=n[o+1],s=-1===a?i(e,t):t[a];t[r++]=s}}}function Ur(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=qr(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function qr(t,e,i,n,r,o,a,s,l,c){const u=Me+n,h=u+r,p=function(t,e){const i=[];for(let n=0;n<e;n++)i.push(n<t?null:vr);return i}(u,h),d="function"==typeof c?c():c;return p[1]={type:t,blueprint:p,template:i,queries:null,viewQuery:s,declTNode:e,data:p.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:l,consts:d,incompleteFirstPass:!1}}function Zr(t,e,i,n){const r=mo(e);r.push(i),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(n,r.length-1)}function Hr(t,e,i){for(let n in t)if(t.hasOwnProperty(n)){const r=t[n];(i=null===i?{}:i).hasOwnProperty(n)?i[n].push(e,r):i[n]=[e,r]}return i}function Gr(t,e,i,n,r,o,a,s){const l=Xe(e,i);let c,u=e.inputs;var h;!s&&null!=u&&(c=u[n])?(_o(t,i,c,n,r),De(e)&&function(t,e){const i=Je(e,t);16&i[2]||(i[2]|=64)}(i,e.index)):2===e.type&&(n="class"===(h=n)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,r=null!=a?a(r,e.tagName||"",n):r,Ge(o)?o.setProperty(l,n,r):Hi(n)||(l.setProperty?l.setProperty(n,r):l[n]=r))}function Wr(t,e,i,n){let r=!1;if(si()){const o=function(t,e,i){const n=t.directiveRegistry;let r=null;if(n)for(let o=0;o<n.length;o++){const a=n[o];mr(i,a.selectors,!1)&&(r||(r=[]),cn(on(i,e),t,a.type),Be(a)?(Yr(t,i),r.unshift(a)):r.push(a))}return r}(t,e,i),a=null===n?null:{"":-1};if(null!==o){let n=0;r=!0,to(i,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}Qr(t,i,o.length);let s=!1,l=!1;for(let r=0;r<o.length;r++){const c=o[r];i.mergedAttrs=Gi(i.mergedAttrs,c.hostAttrs),eo(t,e,c),Jr(t.data.length-1,c,a),null!==c.contentQueries&&(i.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(i.flags|=128);const u=c.type.prototype;!s&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i.index-Me),s=!0),l||!u.ngOnChanges&&!u.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i.index-Me),l=!0),$r(t,c),n+=c.hostVars}!function(t,e){const i=e.directiveEnd,n=t.data,r=e.attrs,o=[];let a=null,s=null;for(let l=e.directiveStart;l<i;l++){const t=n[l],i=t.inputs,c=null===r||ur(e)?null:ro(i,r);o.push(c),a=Hr(i,l,a),s=Hr(t.outputs,l,s)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=s}(t,i),Kr(t,e,n)}a&&function(t,e,i){if(e){const n=t.localNames=[];for(let t=0;t<e.length;t+=2){const r=i[e[t+1]];if(null==r)throw new Error(`Export of name '${e[t+1]}' not found!`);n.push(e[t],r)}}}(i,n,a)}return i.mergedAttrs=Gi(i.mergedAttrs,i.attrs),r}function $r(t,e){const i=t.expandoInstructions;i.push(e.hostBindings),0!==e.hostVars&&i.push(e.hostVars)}function Kr(t,e,i){for(let n=0;n<i;n++)e.push(vr),t.blueprint.push(vr),t.data.push(null)}function Xr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Qr(t,e,i){const n=Me-e.index,r=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(n,r,i)}function Yr(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Jr(t,e,i){if(i){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)i[e.exportAs[n]]=t;Be(e)&&(i[""]=t)}}function to(t,e,i){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+i,t.providerIndexes=e}function eo(t,e,i){t.data.push(i);const n=i.factory||(i.factory=Pe(i.type)),r=new Ui(n,Be(i),null);t.blueprint.push(r),e.push(r)}function io(t,e,i){const n=Xe(e,t),r=Ur(i),o=t[10],a=lo(t,Lr(t,r,null,i.onPush?64:16,n,e,o,o.createRenderer(n,i),null,null));t[e.index]=a}function no(t,e,i,n,r,o){const a=o[e];if(null!==a){const t=n.setInput;for(let e=0;e<a.length;){const r=a[e++],o=a[e++],s=a[e++];null!==t?n.setInput(i,s,r,o):i[o]=s}}}function ro(t,e){let i=null,n=0;for(;n<e.length;){const r=e[n];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===i&&(i=[]),i.push(r,t[r],e[n+1])),n+=2}else n+=2;else n+=4}return i}function oo(t,e,i,n){return new Array(t,!0,!1,e,null,0,n,i,null,null)}function ao(t,e){const i=Je(e,t);if(ii(i)){const t=i[1];80&i[2]?Br(t,i,t.template,i[8]):i[5]>0&&function t(e){for(let n=xr(e);null!==n;n=wr(n))for(let e=Ae;e<n.length;e++){const i=n[e];if(1024&i[2]){const t=i[1];Br(t,i,t.template,i[8])}else i[5]>0&&t(i)}const i=e[1].components;if(null!==i)for(let n=0;n<i.length;n++){const r=Je(i[n],e);ii(r)&&r[5]>0&&t(r)}}(i)}}function so(t,e){const i=Je(e,t),n=i[1];!function(t,e){for(let i=e.length;i<t.blueprint.length;i++)e.push(t.blueprint[i])}(n,i),Rr(n,i,i[8])}function lo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function co(t){for(;t;){t[2]|=64;const e=br(t);if(Fe(t)&&!e)return t;t=e}return null}function uo(t,e,i){const n=e[10];n.begin&&n.begin();try{Br(t,e,t.template,i)}catch(r){throw yo(e,r),r}finally{n.end&&n.end()}}function ho(t){!function(t){for(let e=0;e<t.components.length;e++){const i=t.components[e],n=ti(i),r=n[1];Fr(r,n,r.template,i)}}(t[8])}function po(t,e,i){Si(0),e(t,i)}const fo=(()=>Promise.resolve(null))();function mo(t){return t[7]||(t[7]=[])}function go(t,e,i){return(null===t||Be(t))&&(i=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(i[e.index])),i[11]}function yo(t,e){const i=t[9],n=i?i.get(Cn,null):null;n&&n.handleError(e)}function _o(t,e,i,n,r){for(let o=0;o<i.length;){const a=i[o++],s=i[o++],l=e[a],c=t.data[a];null!==c.setInput?c.setInput(l,r,n,s):l[s]=r}}function vo(t,e,i,n,r){if(null!=n){let o,a=!1;Oe(n)?o=n:ze(n)&&(a=!0,n=n[0]);const s=$e(n);0===t&&null!==i?null==r?ko(e,i,s):To(e,i,s,r||null):1===t&&null!==i?To(e,i,s,r||null):2===t?function(t,e,i){const n=Po(t,e);n&&function(t,e,i,n){Ge(t)?t.removeChild(e,i,n):e.removeChild(i)}(t,n,e,i)}(e,s,a):3===t&&e.destroyNode(s),null!=o&&function(t,e,i,n,r){const o=i[7];o!==$e(i)&&vo(e,t,n,o,r);for(let a=Ae;a<i.length;a++){const r=i[a];zo(r[1],r,t,e,n,o)}}(e,t,o,i,r)}}function bo(t,e){const i=t[9],n=i.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,oi(r,-1)),i.splice(n,1)}function xo(t,e){if(t.length<=Ae)return;const i=Ae+e,n=t[i];if(n){const o=n[17];null!==o&&o!==t&&bo(o,n),e>0&&(t[i-1][4]=n[4]);const a=ce(t,Ae+e);zo(n[1],r=n,r[11],2,null,null),r[0]=null,r[6]=null;const s=a[19];null!==s&&s.detachView(a[1]),n[3]=null,n[4]=null,n[2]&=-129}var r;return n}function wo(t,e){if(!(256&e[2])){const i=e[11];Ge(i)&&i.destroyNode&&zo(t,e,i,3,null,null),function(t){let e=t[13];if(!e)return Co(t[1],t);for(;e;){let i=null;if(ze(e))i=e[13];else{const t=e[10];t&&(i=t)}if(!i){for(;e&&!e[4]&&e!==t;)ze(e)&&Co(e[1],e),e=e[3];null===e&&(e=t),ze(e)&&Co(e[1],e),i=e&&e[4]}e=i}}(e)}}function Co(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let n=0;n<i.length;n+=2){const t=e[i[n]];if(!(t instanceof Ui)){const e=i[n+1];if(Array.isArray(e))for(let i=0;i<e.length;i+=2)e[i+1].call(t[e[i]]);else e.call(t)}}}(t,e),function(t,e){const i=t.cleanup;if(null!==i){const t=e[7];for(let n=0;n<i.length-1;n+=2)if("string"==typeof i[n]){const r=i[n+1],o="function"==typeof r?r(e):$e(e[r]),a=t[i[n+2]],s=i[n+3];"boolean"==typeof s?o.removeEventListener(i[n],a,s):s>=0?t[s]():t[-s].unsubscribe(),n+=2}else i[n].call(t[i[n+1]]);e[7]=null}}(t,e),1===e[1].type&&Ge(e[11])&&e[11].destroy();const i=e[17];if(null!==i&&Oe(e[3])){i!==e[3]&&bo(i,e);const n=e[19];null!==n&&n.detachView(t)}}}function So(t,e,i){let n=e.parent;for(;null!=n&&(3===n.type||4===n.type);)n=(e=n).parent;if(null===n)return i[0];if(e&&4===e.type&&4&e.flags)return Xe(e,i).parentNode;if(2&n.flags){const e=t.data,i=e[e[n.index].directiveStart].encapsulation;if(i!==me.ShadowDom&&i!==me.Native)return null}return Xe(n,i)}function To(t,e,i,n){Ge(t)?t.insertBefore(e,i,n):e.insertBefore(i,n,!0)}function ko(t,e,i){Ge(t)?t.appendChild(e,i):e.appendChild(i)}function Eo(t,e,i,n){null!==n?To(t,e,i,n):ko(t,e,i)}function Po(t,e){return Ge(t)?t.parentNode(e):e.parentNode}function Io(t,e){return 3===t.type||4===t.type?Xe(t,e):null}function Mo(t,e,i,n){const r=So(t,n,e);if(null!=r){const t=e[11],o=Io(n.parent||e[6],e);if(Array.isArray(i))for(let e=0;e<i.length;e++)Eo(t,r,i[e],o);else Eo(t,r,i,o)}}function Ao(t,e,i,n,r,o,a){for(;null!=i;){const s=n[i.index],l=i.type;a&&0===e&&(s&&ar($e(s),n),i.flags|=4),64!=(64&i.flags)&&(3===l||4===l?(Ao(t,e,i.child,n,r,o,!1),vo(e,t,r,s,o)):1===l?Oo(t,e,n,i,r,o):vo(e,t,r,s,o)),i=a?i.projectionNext:i.next}}function zo(t,e,i,n,r,o){Ao(i,n,t.firstChild,e,r,o,!1)}function Oo(t,e,i,n,r,o){const a=i[16],s=a[6].projection[n.projection];if(Array.isArray(s))for(let l=0;l<s.length;l++)vo(e,t,r,s[l],o);else Ao(t,e,s,a[3],r,o,!0)}function Lo(t,e,i){Ge(t)?t.setAttribute(e,"style",i):e.style.cssText=i}function Do(t,e,i){Ge(t)?""===i?t.removeAttribute(e,"class"):t.setAttribute(e,"class",i):e.className=i}class Ro{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return function t(e,i,n,r,o=!1){for(;null!==n;){const a=i[n.index];if(null!==a&&r.push($e(a)),Oe(a))for(let e=Ae;e<a.length;e++){const i=a[e],n=i[1].firstChild;null!==n&&t(i[1],i,n,r)}const s=n.type;if(3===s||4===s)t(e,i,n.child,r);else if(1===s){const e=i[16],o=e[6].projection[n.projection];if(Array.isArray(o))r.push(...o);else{const i=br(e);t(i[1],i,o,r,!0)}}n=o?n.projectionNext:n.next}return r}(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}wo(this._lView[1],this._lView)}onDestroy(t){Zr(this._lView[1],this._lView,null,t)}markForCheck(){co(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){uo(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,i){gi(!0);try{uo(t,e,i)}finally{gi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,zo(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Bo extends Ro{constructor(t){super(t),this._view=t}detectChanges(){ho(this._view)}checkNoChanges(){!function(t){gi(!0);try{ho(t)}finally{gi(!1)}}(this._view)}get context(){return null}}let Fo,No,Vo;function jo(t,e,i){return Fo||(Fo=class extends t{}),new Fo(Xe(e,i))}function Uo(t,e,i,n){return No||(No=class extends t{constructor(t,e,i){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(t){const e=this._declarationTContainer.tViews,i=Lr(this._declarationView,e,t,16,null,e.declTNode,null,null,null,null);i[17]=this._declarationView[this._declarationTContainer.index];const n=this._declarationView[19];return null!==n&&(i[19]=n.createEmbeddedView(e)),Rr(e,i,t),new Ro(i)}}),0===i.type?new No(n,i,jo(e,i,n)):null}function qo(t,e,i,n){let r;Vo||(Vo=class extends t{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostView=i}get element(){return jo(e,this._hostTNode,this._hostView)}get injector(){return new yn(this._hostTNode,this._hostView)}get parentInjector(){const t=ln(this._hostTNode,this._hostView);if($i(t)){const e=Xi(t,this._hostView),i=Ki(t);return new yn(e[1].data[i+8],e)}return new yn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-Ae}createEmbeddedView(t,e,i){const n=t.createEmbeddedView(e||{});return this.insert(n,i),n}createComponent(t,e,i,n,r){const o=i||this.parentInjector;if(!r&&null==t.ngModule&&o){const t=o.get(oe,null);t&&(r=t)}const a=t.create(o,n,void 0,r);return this.insert(a.hostView,e),a}insert(t,e){const i=t._lView,n=i[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Oe(i[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=i[3],n=new Vo(e,e[6],e[3]);n.detach(n.indexOf(t))}}const r=this._adjustIndex(e),o=this._lContainer;!function(t,e,i,n){const r=Ae+n,o=i.length;n>0&&(i[r-1][4]=e),n<o-Ae?(e[4]=i[r],le(i,Ae+n,e)):(i.push(e),e[4]=null),e[3]=i;const a=e[17];null!==a&&i!==a&&function(t,e){const i=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===i?t[9]=[e]:i.push(e)}(a,e);const s=e[19];null!==s&&s.insertView(t),e[2]|=128}(n,i,o,r);const a=function t(e,i){const n=Ae+e+1;if(n<i.length){const e=i[n],r=e[1].firstChild;if(null!==r)return function e(i,n){if(null!==n){const r=n.type;if(2===r)return Xe(n,i);if(0===r)return t(-1,i[n.index]);if(3===r||4===r){const r=n.child;if(null!==r)return e(i,r);{const e=i[n.index];return Oe(e)?t(-1,e):$e(e)}}{const t=i[16],r=t[6],o=br(t),a=r.projection[n.projection];return null!=a?e(o,a):e(i,n.next)}}return null}(e,r)}return i[7]}(r,o),s=i[11],l=Po(s,o[7]);return null!==l&&function(t,e,i,n,r,o){n[0]=r,n[6]=e,zo(t,n,i,1,r,o)}(n,o[6],s,i,l,a),t.attachToViewContainerRef(this),le(o[8],r,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),i=xo(this._lContainer,e);i&&(ce(this._lContainer[8],e),wo(i[1],i))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),i=xo(this._lContainer,e);return i&&null!=ce(this._lContainer[8],e)?new Ro(i):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=n[i.index];if(Oe(o))r=o;else{let t;if(3===i.type)t=$e(o);else if(t=n[11].createComment(""),Fe(n)){const e=n[11],r=Xe(i,n);To(e,Po(e,r),t,function(t,e){return Ge(t)?t.nextSibling(e):e.nextSibling}(e,r))}else Mo(n[1],n,t,i);n[i.index]=r=oo(o,n,t,i),lo(n,r)}return new Vo(r,i,n)}function Zo(t=!1){return function(t,e,i){if(!i&&De(t)){const i=Je(t.index,e);return new Ro(i,i)}return 2===t.type||0===t.type||3===t.type||4===t.type?new Ro(e[16],e):null}(hi(),li(),t)}let Ho=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Go(),t})();const Go=Zo,Wo=Function,$o=new qt("Set Injector scope."),Ko={},Xo={},Qo=[];let Yo=void 0;function Jo(){return void 0===Yo&&(Yo=new re),Yo}function ta(t,e=null,i=null,n){return new ea(t,i,e||Jo(),n)}class ea{constructor(t,e,i,n=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];e&&se(e,i=>this.processProvider(i,t,e)),se([t],t=>this.processInjectorType(t,[],r)),this.records.set(Zt,ra(void 0,this));const o=this.records.get($o);this.scope=null!=o?o.value:null,this.source=n||("object"==typeof t?null:Tt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Ht,i=pt.Default){this.assertNotDestroyed();const n=Qt(this);try{if(!(i&pt.SkipSelf)){let e=this.records.get(t);if(void 0===e){const i=("function"==typeof(r=t)||"object"==typeof r&&r instanceof qt)&&yt(t);e=i&&this.injectableDefInScope(i)?ra(ia(t),Ko):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(i&pt.Self?Jo():this.parent).get(t,e=i&pt.Optional&&e===Ht?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(Tt(t)),n)throw o;return function(t,e,i,n){const r=t.ngTempTokenPath;throw e[Wt]&&r.unshift(e[Wt]),t.message=function(t,e,i,n=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=Tt(e);if(Array.isArray(e))r=e.map(Tt).join(" -> ");else if("object"==typeof e){let t=[];for(let i in e)if(e.hasOwnProperty(i)){let n=e[i];t.push(i+":"+("string"==typeof n?JSON.stringify(n):Tt(n)))}r=`{${t.join(", ")}}`}return`${i}${n?"("+n+")":""}[${r}]: ${t.replace(Gt,"\n  ")}`}("\n"+t.message,r,i,n),t.ngTokenPath=r,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Qt(n)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,i)=>t.push(Tt(i))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,i){if(!(t=It(t)))return!1;let n=vt(t);const r=null==n&&t.ngModule||void 0,o=void 0===r?t:r,a=-1!==i.indexOf(o);if(void 0!==r&&(n=vt(r)),null==n)return!1;if(null!=n.imports&&!a){let t;i.push(o);try{se(n.imports,n=>{this.processInjectorType(n,e,i)&&(void 0===t&&(t=[]),t.push(n))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:i,providers:n}=t[e];se(n,t=>this.processProvider(t,i,n||Qo))}}this.injectorDefTypes.add(o),this.records.set(o,ra(n.factory,Ko));const s=n.providers;if(null!=s&&!a){const e=t;se(s,t=>this.processProvider(t,e,s))}return void 0!==r&&void 0!==t.providers}processProvider(t,e,i){let n=aa(t=It(t))?t:It(t&&t.provide);const r=function(t,e,i){return oa(t)?ra(void 0,t.useValue):ra(na(t),Ko)}(t);if(aa(t)||!0!==t.multi)this.records.get(n);else{let e=this.records.get(n);e||(e=ra(void 0,Ko,!0),e.factory=()=>ne(e.multi),this.records.set(n,e)),n=t,e.multi.push(t)}this.records.set(n,r)}hydrate(t,e){var i;return e.value===Ko&&(e.value=Xo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(i=e.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function ia(t){const e=yt(t),i=null!==e?e.factory:Pe(t);if(null!==i)return i;const n=vt(t);if(null!==n)return n.factory;if(t instanceof qt)throw new Error(`Token ${Tt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const i=ue(e,"?");throw new Error(`Can't resolve all parameters for ${Tt(t)}: (${i.join(", ")}).`)}const i=function(t){const e=t&&(t[bt]||t[Ct]||t[wt]&&t[wt]());if(e){const i=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${i}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${i}" class.`),e}return null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Error("unreachable")}function na(t,e,i){let n=void 0;if(aa(t)){const e=It(t);return Pe(e)||ia(e)}if(oa(t))n=()=>It(t.useValue);else if((r=t)&&r.useFactory)n=()=>t.useFactory(...ne(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))n=()=>te(It(t.useExisting));else{const e=It(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Pe(e)||ia(e);n=()=>new e(...ne(t.deps))}var r;return n}function ra(t,e,i=!1){return{factory:t,value:e,multi:i?[]:void 0}}function oa(t){return null!==t&&"object"==typeof t&&$t in t}function aa(t){return"function"==typeof t}const sa=function(t,e,i){return function(t,e=null,i=null,n){const r=ta(t,e,i,n);return r._resolveInjectorDefTypes(),r}({name:i},e,t,i)};let la=(()=>{class t{static create(t,e){return Array.isArray(t)?sa(t,e,""):sa(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Ht,t.NULL=new re,t.\u0275prov=mt({token:t,providedIn:"any",factory:()=>te(Zt)}),t.__NG_ELEMENT_ID__=-1,t})();const ca=new qt("AnalyzeForEntryComponents");function ua(t,e,i){let n=i?t.styles:null,r=i?t.classes:null,o=0;if(null!==e)for(let a=0;a<e.length;a++){const t=e[a];"number"==typeof t?o=t:1==o?r=kt(r,t):2==o&&(n=kt(n,t+": "+e[++a]+";"))}i?t.styles=n:t.stylesWithoutHost=n,i?t.classes=r:t.classesWithoutHost=r}function ha(t,e){const i=ti(t)[1],n=i.data.length-1;Di(i,{directiveStart:n,directiveEnd:n+1})}function pa(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,i=!0;const n=[t];for(;e;){let r=void 0;if(Be(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(i){n.push(r);const e=t;e.inputs=da(t.inputs),e.declaredInputs=da(t.declaredInputs),e.outputs=da(t.outputs);const i=r.hostBindings;i&&ga(t,i);const o=r.viewQuery,a=r.contentQueries;if(o&&fa(t,o),a&&ma(t,a),ft(t.inputs,r.inputs),ft(t.declaredInputs,r.declaredInputs),ft(t.outputs,r.outputs),Be(r)&&r.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(r.data.animation)}}const e=r.features;if(e)for(let n=0;n<e.length;n++){const r=e[n];r&&r.ngInherit&&r(t),r===pa&&(i=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,i=null;for(let n=t.length-1;n>=0;n--){const r=t[n];r.hostVars=e+=r.hostVars,r.hostAttrs=Gi(r.hostAttrs,i=Gi(i,r.hostAttrs))}}(n)}function da(t){return t===ge?{}:t===ye?[]:t}function fa(t,e){const i=t.viewQuery;t.viewQuery=i?(t,n)=>{e(t,n),i(t,n)}:e}function ma(t,e){const i=t.contentQueries;t.contentQueries=i?(t,n,r)=>{e(t,n,r),i(t,n,r)}:e}function ga(t,e){const i=t.hostBindings;t.hostBindings=i?(t,n)=>{e(t,n),i(t,n)}:e}let ya=null;function _a(){if(!ya){const t=Dt.Symbol;if(t&&t.iterator)ya=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const i=t[e];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(ya=i)}}}return ya}class va{constructor(t){this.wrapped=t}static wrap(t){return new va(t)}static unwrap(t){return va.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof va}}function ba(t){return!!xa(t)&&(Array.isArray(t)||!(t instanceof Map)&&_a()in t)}function xa(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function wa(t,e,i){return t[e]=i}function Ca(t,e,i){return!Object.is(t[e],i)&&(t[e]=i,!0)}function Sa(t,e,i,n){const r=Ca(t,e,i);return Ca(t,e+1,n)||r}function Ta(t,e,i,n){const r=li();return Ca(r,_i(),e)&&(ci(),function(t,e,i,n,r,o){const a=Xe(t,e),s=e[11];if(null==n)Ge(s)?s.removeAttribute(a,i,o):a.removeAttribute(i);else{const e=null==r?Qi(n):r(n,t.tagName||"",i);Ge(s)?s.setAttribute(a,i,e,o):o?a.setAttributeNS(o,i,e):a.setAttribute(i,e)}}(Li(),r,t,e,i,n)),Ta}function ka(t,e,i,n){return Ca(t,_i(),i)?e+Qi(i)+n:vr}function Ea(t,e,i,n,r,o,a,s){const l=li(),c=ci(),u=t+Me,h=c.firstCreatePass?function(t,e,i,n,r,o,a,s,l){const c=e.consts,u=Dr(e,t,0,a||null,ni(c,s));Wr(e,i,u,ni(c,l)),Di(e,u);const h=u.tViews=qr(2,u,n,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(t,c,l,e,i,n,r,o,a):c.data[u];pi(h,!1);const p=l[11].createComment("");Mo(c,l,p,h),ar(p,l),lo(l,l[u]=oo(p,l,p,h)),Re(h)&&Vr(c,l,h),null!=a&&jr(l,h,s)}function Pa(t){return Ye(ai.lFrame.contextLView,t)}function Ia(t,e=pt.Default){const i=li();return null===i?te(t,e):un(hi(),i,It(t),e)}function Ma(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const i=t.attrs;if(i){const t=i.length;let n=0;for(;n<t;){const r=i[n];if(Zi(r))break;if(0===r)n+=2;else if("number"==typeof r)for(n++;n<t&&"string"==typeof i[n];)n++;else{if(r===e)return i[n+1];n+=2}}}return null}(hi(),t)}function Aa(t,e,i){const n=li();return Ca(n,_i(),e)&&Gr(ci(),Li(),n,t,e,n[11],i,!1),Aa}function za(t,e,i,n,r){const o=r?"class":"style";_o(t,i,e.inputs[o],o,n)}function Oa(t,e,i,n){const r=li(),o=ci(),a=Me+t,s=r[11],l=r[a]=Or(e,s,ai.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,i,n,r,o,a){const s=e.consts,l=Dr(e,t,2,r,ni(s,o));return Wr(e,i,l,ni(s,a)),null!==l.attrs&&ua(l,l.attrs,!1),null!==l.mergedAttrs&&ua(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(t,o,r,0,e,i,n):o.data[a];pi(c,!0);const u=c.mergedAttrs;null!==u&&qi(s,l,u);const h=c.classes;null!==h&&Do(s,l,h);const p=c.styles;null!==p&&Lo(s,l,p),Mo(o,r,l,c),0===ai.lFrame.elementDepthCount&&ar(l,r),ai.lFrame.elementDepthCount++,Re(c)&&(Vr(o,r,c),function(t,e,i){if(Le(e)){const n=e.directiveEnd;for(let r=e.directiveStart;r<n;r++){const e=t.data[r];e.contentQueries&&e.contentQueries(1,i[r],r)}}}(o,c,r)),null!==n&&jr(r,c)}function La(){let t=hi();di()?fi():(t=t.parent,pi(t,!1));const e=t;ai.lFrame.elementDepthCount--;const i=ci();i.firstCreatePass&&(Di(i,t),Le(t)&&i.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&za(i,e,li(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&za(i,e,li(),e.stylesWithoutHost,!1)}function Da(t,e,i,n){Oa(t,e,i,n),La()}function Ra(){return li()}function Ba(t){return!!t&&"function"==typeof t.then}function Fa(t){return!!t&&"function"==typeof t.subscribe}function Na(t,e,i=!1,n){const r=li(),o=ci(),a=hi();return ja(o,r,r[11],a,t,e,i,n),Na}function Va(t,e,i=!1,n){const r=hi(),o=li(),a=ci();return ja(a,o,go(wi(a.data),r,o),r,t,e,i,n),Va}function ja(t,e,i,n,r,o,a=!1,s){const l=Re(n),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),u=mo(e);let h=!0;if(2===n.type){const p=Xe(n,e),d=s?s(p):ge,f=d.target||p,m=u.length,g=s?t=>s($e(t[n.index])).target:n.index;if(Ge(i)){let a=null;if(!s&&l&&(a=function(t,e,i,n){const r=t.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const t=r[o];if(t===i&&r[o+1]===n){const t=e[7],i=r[o+2];return t.length>i?t[i]:null}"string"==typeof t&&(o+=2)}return null}(t,e,r,n.index)),null!==a)(a.__ngLastListenerFn__||a).__ngNextListenerFn__=o,a.__ngLastListenerFn__=o,h=!1;else{o=qa(n,e,o,!1);const t=i.listen(d.name||f,r,o);u.push(o,t),c&&c.push(r,g,m,m+1)}}else o=qa(n,e,o,!0),f.addEventListener(r,o,a),u.push(o),c&&c.push(r,g,m,a)}const p=n.outputs;let d;if(h&&null!==p&&(d=p[r])){const t=d.length;if(t)for(let i=0;i<t;i+=2){const t=e[d[i]][d[i+1]].subscribe(o),a=u.length;u.push(o,t),c&&c.push(r,n.index,a,-(a+1))}}}function Ua(t,e,i){try{return!1!==e(i)}catch(n){return yo(t,n),!1}}function qa(t,e,i,n){return function r(o){if(o===Function)return i;const a=2&t.flags?Je(t.index,e):e;0==(32&e[2])&&co(a);let s=Ua(e,i,o),l=r.__ngNextListenerFn__;for(;l;)s=Ua(e,l,o)&&s,l=l.__ngNextListenerFn__;return n&&!1===s&&(o.preventDefault(),o.returnValue=!1),s}}function Za(t=1){return function(t){return(ai.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,ai.lFrame.contextLView))[8]}(t)}function Ha(t,e){let i=null;const n=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===n?mr(t,o,!0):gr(n,o))return r}else i=r}return i}function Ga(t){const e=li()[16][6];if(!e.projection){const i=e.projection=ue(t?t.length:1,null),n=i.slice();let r=e.child;for(;null!==r;){const e=t?Ha(r,t):0;null!==e&&(n[e]?n[e].projectionNext=r:i[e]=r,n[e]=r),r=r.next}}}function Wa(t,e=0,i){const n=li(),r=ci(),o=Dr(r,t,1,null,i||null);null===o.projection&&(o.projection=e),fi(),function(t,e,i){Oo(e[11],0,e,i,So(t,i,e),Io(i.parent||e[6],e))}(r,n,o)}function $a(t,e,i,n,r){const o=li(),a=ka(o,e,i,n);return a!==vr&&Gr(ci(),Li(),o,t,a,o[11],r,!1),$a}const Ka=[];function Xa(t,e,i,n,r){const o=t[i+1],a=null===e;let s=n?Er(o):Ir(o),l=!1;for(;0!==s&&(!1===l||a);){const i=t[s+1];Qa(t[s],e)&&(l=!0,t[s+1]=n?Ar(i):Pr(i)),s=n?Er(i):Ir(i)}l&&(t[i+1]=n?Pr(o):Ar(o))}function Qa(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&de(t,e)>=0}const Ya={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ja(t){return t.substring(Ya.key,Ya.keyEnd)}function ts(t,e){const i=Ya.textEnd;return i===e?-1:(e=Ya.keyEnd=function(t,e,i){for(;e<i&&t.charCodeAt(e)>32;)e++;return e}(t,Ya.key=e,i),es(t,e,i))}function es(t,e,i){for(;e<i&&t.charCodeAt(e)<=32;)e++;return e}function is(t,e,i){return as(t,e,i,!1),is}function ns(t,e){return as(t,e,null,!0),ns}function rs(t){!function(t,e,i,n){const r=ci(),o=vi(2);r.firstUpdatePass&&ls(r,null,o,n);const a=li();if(i!==vr&&Ca(a,o,i)){const s=r.data[zi()+Me];if(fs(s,n)&&!ss(r,o)){let t=s.classesWithoutHost;null!==t&&(i=kt(t,i||"")),za(r,s,a,i,n)}else!function(t,e,i,n,r,o,a,s){r===vr&&(r=Ka);let l=0,c=0,u=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;null!==u||null!==h;){const a=l<r.length?r[l+1]:void 0,p=c<o.length?o[c+1]:void 0;let d=null,f=void 0;u===h?(l+=2,c+=2,a!==p&&(d=h,f=p)):null===h||null!==u&&u<h?(l+=2,d=u):(c+=2,d=h,f=p),null!==d&&hs(t,e,i,n,d,f,true,s),u=l<r.length?r[l]:null,h=c<o.length?o[c]:null}}(r,s,a,a[11],a[o+1],a[o+1]=function(t,e,i){if(null==i||""===i)return Ka;const n=[],r=Mn(i);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(n,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&t(n,o,r[o]);else"string"==typeof r&&e(n,r);return n}(t,e,i),0,o)}}(he,os,t,!0)}function os(t,e){for(let i=function(t){return function(t){Ya.key=0,Ya.keyEnd=0,Ya.value=0,Ya.valueEnd=0,Ya.textEnd=t.length}(t),ts(t,es(t,0,Ya.textEnd))}(e);i>=0;i=ts(e,i))he(t,Ja(e),!0)}function as(t,e,i,n){const r=li(),o=ci(),a=vi(2);o.firstUpdatePass&&ls(o,t,a,n),e!==vr&&Ca(r,a,e)&&hs(o,o.data[zi()+Me],r,r[11],t,r[a+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Tt(Mn(t)))),t}(e,i),n,a)}function ss(t,e){return e>=t.expandoStartIndex}function ls(t,e,i,n){const r=t.data;if(null===r[i+1]){const o=r[zi()+Me],a=ss(t,i);fs(o,n)&&null===e&&!a&&(e=!1),e=function(t,e,i,n){const r=wi(t);let o=n?e.residualClasses:e.residualStyles;if(null===r)0===(n?e.classBindings:e.styleBindings)&&(i=us(i=cs(null,t,e,i,n),e.attrs,n),o=null);else{const a=e.directiveStylingLast;if(-1===a||t[a]!==r)if(i=cs(r,t,e,i,n),null===o){let i=function(t,e,i){const n=i?e.classBindings:e.styleBindings;if(0!==Ir(n))return t[Er(n)]}(t,e,n);void 0!==i&&Array.isArray(i)&&(i=cs(null,t,e,i[1],n),i=us(i,e.attrs,n),function(t,e,i,n){t[Er(i?e.classBindings:e.styleBindings)]=n}(t,e,n,i))}else o=function(t,e,i){let n=void 0;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)n=us(n,t[o].hostAttrs,i);return us(n,e.attrs,i)}(t,e,n)}return void 0!==o&&(n?e.residualClasses=o:e.residualStyles=o),i}(r,o,e,n),function(t,e,i,n,r,o){let a=o?e.classBindings:e.styleBindings,s=Er(a),l=Ir(a);t[n]=i;let c,u=!1;if(Array.isArray(i)){const t=i;c=t[1],(null===c||de(t,c)>0)&&(u=!0)}else c=i;if(r)if(0!==l){const e=Er(t[s+1]);t[n+1]=kr(e,s),0!==e&&(t[e+1]=Mr(t[e+1],n)),t[s+1]=131071&t[s+1]|n<<17}else t[n+1]=kr(s,0),0!==s&&(t[s+1]=Mr(t[s+1],n)),s=n;else t[n+1]=kr(l,0),0===s?s=n:t[l+1]=Mr(t[l+1],n),l=n;u&&(t[n+1]=Pr(t[n+1])),Xa(t,c,n,!0),Xa(t,c,n,!1),function(t,e,i,n,r){const o=r?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&de(o,e)>=0&&(i[n+1]=Ar(i[n+1]))}(e,c,t,n,o),a=kr(s,l),o?e.classBindings=a:e.styleBindings=a}(r,o,e,i,a,n)}}function cs(t,e,i,n,r){let o=null;const a=i.directiveEnd;let s=i.directiveStylingLast;for(-1===s?s=i.directiveStart:s++;s<a&&(o=e[s],n=us(n,o.hostAttrs,r),o!==t);)s++;return null!==t&&(i.directiveStylingLast=s),n}function us(t,e,i){const n=i?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?r=a:r===n&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),he(t,a,!!i||e[++o]))}return void 0===t?null:t}function hs(t,e,i,n,r,o,a,s){if(2!==e.type)return;const l=t.data,c=l[s+1];ds(1==(1&c)?ps(l,e,i,r,Ir(c),a):void 0)||(ds(o)||2==(2&c)&&(o=ps(l,null,i,r,s,a)),function(t,e,i,n,r){const o=Ge(t);if(e)r?o?t.addClass(i,n):i.classList.add(n):o?t.removeClass(i,n):i.classList.remove(n);else{const e=-1==n.indexOf("-")?void 0:2;null==r?o?t.removeStyle(i,n,e):i.style.removeProperty(n):o?t.setStyle(i,n,r,e):i.style.setProperty(n,r)}}(n,a,Ke(zi(),i),r,o))}function ps(t,e,i,n,r,o){const a=null===e;let s=void 0;for(;r>0;){const e=t[r],o=Array.isArray(e),l=o?e[1]:e,c=null===l;let u=i[r+1];u===vr&&(u=c?Ka:void 0);let h=c?pe(u,n):l===n?u:void 0;if(o&&!ds(h)&&(h=pe(e,n)),ds(h)&&(s=h,a))return s;const p=t[r+1];r=a?Er(p):Ir(p)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(s=pe(t,n))}return s}function ds(t){return void 0!==t}function fs(t,e){return 0!=(t.flags&(e?16:32))}function ms(t,e=""){const i=li(),n=ci(),r=t+Me,o=n.firstCreatePass?Dr(n,t,2,null,null):n.data[r],a=i[r]=function(t,e){return Ge(e)?e.createText(t):e.createTextNode(t)}(e,i[11]);Mo(n,i,a,o),pi(o,!1)}function gs(t){return ys("",t,""),gs}function ys(t,e,i){const n=li(),r=ka(n,t,e,i);return r!==vr&&function(t,e,i){const n=Ke(e,t),r=t[11];Ge(r)?r.setValue(n,i):n.textContent=i}(n,zi(),r),ys}function _s(t,e,i){const n=li();return Ca(n,_i(),e)&&Gr(ci(),Li(),n,t,e,n[11],i,!0),_s}function vs(t,e,i){const n=li();if(Ca(n,_i(),e)){const r=ci(),o=Li();Gr(r,o,n,t,e,go(wi(r.data),o,n),i,!0)}return vs}const bs=void 0;var xs=["en",[["a","p"],["AM","PM"],bs],[["AM","PM"],bs,bs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bs,"{1} 'at' {0}",bs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let ws={};function Cs(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=Ss(e);if(i)return i;const n=e.split("-")[0];if(i=Ss(n),i)return i;if("en"===n)return xs;throw new Error(`Missing locale data for the locale "${t}".`)}function Ss(t){return t in ws||(ws[t]=Dt.ng&&Dt.ng.common&&Dt.ng.common.locales&&Dt.ng.common.locales[t]),ws[t]}var Ts=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ks="en-US";let Es=ks;function Ps(t){var e,i;i="Expected localeId to be defined",null==(e=t)&&function(t,e,i,n){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(i,e),"string"==typeof t&&(Es=t.toLowerCase().replace(/_/g,"-"))}function Is(t,e,i,n,r){if(t=It(t),Array.isArray(t))for(let o=0;o<t.length;o++)Is(t[o],e,i,n,r);else{const o=ci(),a=li();let s=aa(t)?t:It(t.provide),l=na(t);const c=hi(),u=1048575&c.providerIndexes,h=c.directiveStart,p=c.providerIndexes>>20;if(aa(t)||!t.multi){const n=new Ui(l,r,Ia),d=zs(s,e,r?u:u+p,h);-1===d?(cn(on(c,a),o,s),Ms(o,t,e.length),e.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),i.push(n),a.push(n)):(i[d]=n,a[d]=n)}else{const d=zs(s,e,u+p,h),f=zs(s,e,u,u+p),m=d>=0&&i[d],g=f>=0&&i[f];if(r&&!g||!r&&!m){cn(on(c,a),o,s);const u=function(t,e,i,n,r){const o=new Ui(t,i,Ia);return o.multi=[],o.index=e,o.componentProviders=0,As(o,r,n&&!i),o}(r?Ls:Os,i.length,r,n,l);!r&&g&&(i[f].providerFactory=u),Ms(o,t,e.length,0),e.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),i.push(u),a.push(u)}else Ms(o,t,d>-1?d:f,As(i[r?f:d],l,!r&&n));!r&&n&&g&&i[f].componentProviders++}}}function Ms(t,e,i,n){const r=aa(e);if(r||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const a=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const t=a.indexOf(i);-1===t?a.push(i,[n,o]):a[t+1].push(n,o)}else a.push(i,o)}}}function As(t,e,i){return i&&t.componentProviders++,t.multi.push(e)-1}function zs(t,e,i,n){for(let r=i;r<n;r++)if(e[r]===t)return r;return-1}function Os(t,e,i,n){return Ds(this.multi,[])}function Ls(t,e,i,n){const r=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=fn(i,i[1],this.providerFactory.index,n);o=e.slice(0,t),Ds(r,o);for(let i=t;i<e.length;i++)o.push(e[i])}else o=[],Ds(r,o);return o}function Ds(t,e){for(let i=0;i<t.length;i++)e.push((0,t[i])());return e}function Rs(t,e=[]){return i=>{i.providersResolver=(i,n)=>function(t,e,i){const n=ci();if(n.firstCreatePass){const r=Be(t);Is(i,n.data,n.blueprint,r,!0),Is(e,n.data,n.blueprint,r,!1)}}(i,n?n(t):t,e)}}class Bs{}class Fs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${Tt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ns=(()=>{class t{}return t.NULL=new Fs,t})(),Vs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>js(t),t})();const js=function(t){return jo(t,hi(),li())};class Us{}var qs=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Zs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Hs(),t})();const Hs=function(){const t=li(),e=Je(hi().index,t);return function(t){const e=t[11];if(Ge(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(ze(e)?e:t)};let Gs=(()=>{class t{}return t.\u0275prov=mt({token:t,providedIn:"root",factory:()=>null}),t})();class Ws{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const $s=new Ws("10.2.0");class Ks{constructor(){}supports(t){return ba(t)}create(t){return new Qs(t)}}const Xs=(t,e)=>e;class Qs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Xs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,n=0,r=null;for(;e||i;){const o=!i||e&&e.currentIndex<el(i,n,r)?e:i,a=el(o,n,r),s=o.currentIndex;if(o===i)n--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)n++;else{r||(r=[]);const t=a-n,e=s-n;if(t!=e){for(let i=0;i<t;i++){const n=i<r.length?r[i]:r[i]=0,o=n+i;e<=o&&o<t&&(r[i]=n+1)}r[o.previousIndex]=e-t}}a!==s&&t(o,a,s)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!ba(t))throw new Error(`Error trying to diff '${Tt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,i,n,r=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)i=t[e],n=this._trackByFn(e,i),null!==r&&Object.is(r.trackById,n)?(o&&(r=this._verifyReinsertion(r,i,n,e)),Object.is(r.item,i)||this._addIdentityChange(r,i)):(r=this._mismatch(r,i,n,e),o=!0),r=r._next}else e=0,function(t,e){if(Array.isArray(t))for(let i=0;i<t.length;i++)e(t[i]);else{const i=t[_a()]();let n;for(;!(n=i.next()).done;)e(n.value)}}(t,t=>{n=this._trackByFn(e,t),null!==r&&Object.is(r.trackById,n)?(o&&(r=this._verifyReinsertion(r,t,n,e)),Object.is(r.item,t)||this._addIdentityChange(r,t)):(r=this._mismatch(r,t,n,e),o=!0),r=r._next,e++}),this.length=e;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,n){let r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,n))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,n)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,n)):t=this._addAfter(new Ys(e,i),r,n),t}_verifyReinsertion(t,e,i,n){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==r?t=this._reinsertAfter(r,t._prev,n):t.currentIndex!=n&&(t.currentIndex=n,this._addToMoves(t,n)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const n=t._prevRemoved,r=t._nextRemoved;return null===n?this._removalsHead=r:n._nextRemoved=r,null===r?this._removalsTail=n:r._prevRemoved=n,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){const n=null===e?this._itHead:e._next;return t._next=n,t._prev=e,null===n?this._itTail=t:n._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new tl),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,i=t._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tl),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ys{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Js{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const e=t._prevDup,i=t._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class tl{constructor(){this.map=new Map}put(t){const e=t.trackById;let i=this.map.get(e);i||(i=new Js,this.map.set(e,i)),i.add(t)}get(t,e){const i=this.map.get(t);return i?i.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function el(t,e,i){const n=t.previousIndex;if(null===n)return n;let r=0;return i&&n<i.length&&(r=i[n]),n+e+r}class il{constructor(){}supports(t){return t instanceof Map||xa(t)}create(){return new nl}}class nl{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||xa(t)))throw new Error(`Error trying to diff '${Tt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const n=this._getOrCreateRecordForKey(i,t);e=this._insertBeforeOrAppend(e,n)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const i=this._records.get(t);this._maybeAddToChanges(i,e);const n=i._prev,r=i._next;return n&&(n._next=r),r&&(r._prev=n),i._next=null,i._prev=null,i}const i=new rl(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}}class rl{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let ol=(()=>{class t{constructor(t){this.factories=t}static create(e,i){if(null!=i){const t=i.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>{if(!i)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,i)},deps:[[t,new ht,new ct]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${i=t,i.name||typeof i}'`);var i}}return t.\u0275prov=mt({token:t,providedIn:"root",factory:()=>new t([new Ks])}),t})(),al=(()=>{class t{constructor(t){this.factories=t}static create(e,i){if(i){const t=i.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>{if(!i)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,i)},deps:[[t,new ht,new ct]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=mt({token:t,providedIn:"root",factory:()=>new t([new il])}),t})();const sl=[new il],ll=new ol([new Ks]),cl=new al(sl);let ul=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>hl(t,Vs),t})();const hl=function(t,e){return Uo(t,e,hi(),li())};let pl=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>dl(t,Vs),t})();const dl=function(t,e){return qo(t,e,hi(),li())},fl={};class ml extends Ns{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ee(t);return new _l(e,this.ngModule)}}function gl(t){const e=[];for(let i in t)t.hasOwnProperty(i)&&e.push({propName:t[i],templateName:i});return e}const yl=new qt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ji});class _l extends Bs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(_r).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return gl(this.componentDef.inputs)}get outputs(){return gl(this.componentDef.outputs)}create(t,e,i,n){const r=(n=n||this.ngModule)?function(t,e){return{get:(i,n,r)=>{const o=t.get(i,fl,r);return o!==fl||n===fl?o:e.get(i,n,r)}}}(t,n.injector):t,o=r.get(Us,We),a=r.get(Gs,null),s=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=i?function(t,e,i){if(Ge(t))return t.selectRootElement(e,i===me.ShadowDom);let n="string"==typeof e?t.querySelector(e):e;return n.textContent="",n}(s,i,this.componentDef.encapsulation):Or(l,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),u=this.componentDef.onPush?576:528,h={components:[],scheduler:Ji,clean:fo,playerHandler:null,flags:0},p=qr(0,null,null,1,0,null,null,null,null,null),d=Lr(null,p,h,u,null,null,o,s,a,r);let f,m;ki(d);try{const t=function(t,e,i,n,r,o){const a=i[1];i[20]=t;const s=Dr(a,0,2,null,null),l=s.mergedAttrs=e.hostAttrs;null!==l&&(ua(s,l,!0),null!==t&&(qi(r,t,l),null!==s.classes&&Do(r,t,s.classes),null!==s.styles&&Lo(r,t,s.styles)));const c=n.createRenderer(t,e),u=Lr(i,Ur(e),null,e.onPush?64:16,i[20],s,n,c,null,null);return a.firstCreatePass&&(cn(on(s,i),a,e.type),Yr(a,s),to(s,i.length,1)),lo(i,u),i[20]=u}(c,this.componentDef,d,o,s);if(c)if(i)qi(s,c,["ng-version",$s.full]);else{const{attrs:t,classes:e}=function(t){const e=[],i=[];let n=1,r=2;for(;n<t.length;){let o=t[n];if("string"==typeof o)2===r?""!==o&&e.push(o,t[++n]):8===r&&i.push(o);else{if(!dr(r))break;r=o}n++}return{attrs:e,classes:i}}(this.componentDef.selectors[0]);t&&qi(s,c,t),e&&e.length>0&&Do(s,c,e.join(" "))}if(m=Qe(p,0),void 0!==e){const t=m.projection=[];for(let i=0;i<this.ngContentSelectors.length;i++){const n=e[i];t.push(null!=n?Array.from(n):null)}}f=function(t,e,i,n,r){const o=i[1],a=function(t,e,i){const n=hi();t.firstCreatePass&&(i.providersResolver&&i.providersResolver(i),Qr(t,n,1),eo(t,e,i));const r=fn(e,t,e.length-1,n);ar(r,e);const o=Xe(n,e);return o&&ar(o,e),r}(o,i,e);n.components.push(a),t[8]=a,r&&r.forEach(t=>t(a,e)),e.contentQueries&&e.contentQueries(1,a,i.length-1);const s=hi();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Oi(s.index-Me);const t=i[1];$r(t,e),Kr(t,i,e.hostVars),Xr(e,a)}return a}(t,this.componentDef,d,h,[ha]),Rr(p,d,null)}finally{Ai()}return new vl(this.componentType,f,jo(Vs,m,d),d,m)}}class vl extends class{}{constructor(t,e,i,n,r){super(),this.location=i,this._rootLView=n,this._tNode=r,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Bo(n),this.componentType=t}get injector(){return new yn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const bl=new Map;class xl extends oe{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ml(this);const i=Ie(t),n=t[Vt]||null;n&&Ps(n),this._bootstrapComponents=tn(i.bootstrap),this._r3Injector=ta(t,e,[{provide:oe,useValue:this},{provide:Ns,useValue:this.componentFactoryResolver}],Tt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=la.THROW_IF_NOT_FOUND,i=pt.Default){return t===la||t===oe||t===Zt?this:this._r3Injector.get(t,e,i)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class wl extends ae{constructor(t){super(),this.moduleType=t,null!==Ie(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,i){if(e&&e!==i)throw new Error(`Duplicate module registered for ${t} - ${Tt(e)} vs ${Tt(e.name)}`)})(t,bl.get(t),e),bl.set(t,e)}let i=e.\u0275mod.imports;i instanceof Function&&(i=i()),i&&i.forEach(e=>t(e))}(t)}create(t){return new xl(this.moduleType,t)}}function Cl(t,e){const i=t[e];return i===vr?void 0:i}function Sl(t,e,i,n,r,o){const a=e+i;return Ca(t,a,r)?wa(t,a+1,o?n.call(o,r):n(r)):Cl(t,a+1)}function Tl(t,e){const i=ci();let n;const r=t+Me;i.firstCreatePass?(n=function(t,e){if(e)for(let i=e.length-1;i>=0;i--){const n=e[i];if(t===n.name)return n}throw new Error(`The pipe '${t}' could not be found!`)}(e,i.pipeRegistry),i.data[r]=n,n.onDestroy&&(i.destroyHooks||(i.destroyHooks=[])).push(r,n.onDestroy)):n=i.data[r];const o=n.factory||(n.factory=Pe(n.type)),a=Yt(Ia);try{const e=nn(!1),n=o();return nn(e),function(t,e,i,n){const r=i+Me;r>=t.data.length&&(t.data[r]=null,t.blueprint[r]=null),e[r]=n}(i,li(),t,n),n}finally{Yt(a)}}function kl(t,e,i){const n=li(),r=Ye(n,t);return Pl(n,El(n,t)?Sl(n,yi(),e,r.transform,i,r):r.transform(i))}function El(t,e){return t[1].data[e+Me].pure}function Pl(t,e){return va.isWrapped(e)&&(e=va.unwrap(e),t[ai.lFrame.bindingIndex]=vr),e}const Il=class extends T{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,i){let n,r=t=>null,o=()=>null;t&&"object"==typeof t?(n=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(r=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(n=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),i&&(o=this.__isAsync?()=>{setTimeout(()=>i())}:()=>{i()}));const a=super.subscribe(n,r,o);return t instanceof h&&t.add(a),a}};function Ml(){return this._results[_a()]()}class Al{constructor(){this.dirty=!0,this._results=[],this.changes=new Il,this.length=0;const t=_a(),e=Al.prototype;e[t]||(e[t]=Ml)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,i){void 0===i&&(i=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(i===e&&(i=e.slice(0,n)),t(r,i)):i!==e&&i.push(r)}return i}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class zl{constructor(t){this.queryList=t,this.matches=null}clone(){return new zl(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ol{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const i=null!==t.contentQueries?t.contentQueries[0]:e.length,n=[];for(let t=0;t<i;t++){const i=e.getByIndex(t);n.push(this.queries[i.indexInDeclarationView].clone())}return new Ol(n)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==$l(t,e).matches&&this.queries[e].setDirty()}}class Ll{constructor(t,e,i,n=null){this.predicate=t,this.descendants=e,this.isStatic=i,this.read=n}}class Dl{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){const n=null!==e?e.length:0,r=this.getByIndex(i).embeddedTView(t,n);r&&(r.indexInDeclarationView=i,null!==e?e.push(r):e=[r])}return null!==e?new Dl(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Rl{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Rl(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&3===i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let n=0;n<i.length;n++){const r=i[n];this.matchTNodeWithReadOption(t,e,Bl(e,r)),this.matchTNodeWithReadOption(t,e,dn(e,t,r,!1,!1))}else i===ul?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,dn(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(null!==i){const n=this.metadata.read;if(null!==n)if(n===Vs||n===pl||n===ul&&0===e.type)this.addMatch(e.index,-2);else{const i=dn(e,t,n,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,i)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Bl(t,e){const i=t.localNames;if(null!==i)for(let n=0;n<i.length;n+=2)if(i[n]===e)return i[n+1];return null}function Fl(t,e,i,n){return-1===i?function(t,e){return 2===t.type||3===t.type?jo(Vs,t,e):0===t.type?Uo(ul,Vs,t,e):null}(e,t):-2===i?function(t,e,i){return i===Vs?jo(Vs,e,t):i===ul?Uo(ul,Vs,e,t):i===pl?qo(pl,Vs,e,t):void 0}(t,e,n):fn(t,t[1],i,e)}function Nl(t,e,i,n){const r=e[19].queries[n];if(null===r.matches){const n=t.data,o=i.matches,a=[];for(let t=0;t<o.length;t+=2){const r=o[t];a.push(r<0?null:Fl(e,n[r],o[t+1],i.metadata.read))}r.matches=a}return r.matches}function Vl(t){const e=li(),i=ci(),n=Ci();Si(n+1);const r=$l(i,n);if(t.dirty&&ei(e)===r.metadata.isStatic){if(null===r.matches)t.reset([]);else{const o=r.crossesNgTemplate?function t(e,i,n,r){const o=e.queries.getByIndex(n),a=o.matches;if(null!==a){const s=Nl(e,i,o,n);for(let e=0;e<a.length;e+=2){const n=a[e];if(n>0)r.push(s[e/2]);else{const o=a[e+1],s=i[-n];for(let e=Ae;e<s.length;e++){const i=s[e];i[17]===i[3]&&t(i[1],i,o,r)}if(null!==s[9]){const e=s[9];for(let i=0;i<e.length;i++){const n=e[i];t(n[1],n,o,r)}}}}}return r}(i,e,n,[]):Nl(i,e,r,n);t.reset(o),t.notifyOnChanges()}return!0}return!1}function jl(t,e,i){ql(ci(),li(),t,e,i,!0)}function Ul(t,e,i){ql(ci(),li(),t,e,i,!1)}function ql(t,e,i,n,r,o){t.firstCreatePass&&(Wl(t,new Ll(i,n,o,r),-1),o&&(t.staticViewQueries=!0)),Gl(t,e)}function Zl(t,e,i,n){!function(t,e,i,n,r,o,a,s){t.firstCreatePass&&(Wl(t,new Ll(i,n,false,r),a.index),function(t,e){const i=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,e)}(t,s)),Gl(t,e)}(ci(),li(),e,i,n,0,hi(),t)}function Hl(){return t=li(),e=Ci(),t[19].queries[e].queryList;var t,e}function Gl(t,e){const i=new Al;Zr(t,e,i,i.destroy),null===e[19]&&(e[19]=new Ol),e[19].queries.push(new zl(i))}function Wl(t,e,i){null===t.queries&&(t.queries=new Dl),t.queries.track(new Rl(e,i))}function $l(t,e){return t.queries.getByIndex(e)}const Kl=new qt("Application Initializer");let Xl=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const e=this.appInits[i]();Ba(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(te(Kl,8))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();const Ql=new qt("AppId"),Yl={provide:Ql,useFactory:function(){return`${Jl()}${Jl()}${Jl()}`},deps:[]};function Jl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const tc=new qt("Platform Initializer"),ec=new qt("Platform ID"),ic=new qt("appBootstrapListener");let nc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();const rc=new qt("LocaleId"),oc=new qt("DefaultCurrencyCode");class ac{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const sc=function(t){return new wl(t)},lc=sc,cc=function(t){return Promise.resolve(sc(t))},uc=function(t){const e=sc(t),i=tn(Ie(t).declarations).reduce((t,e)=>{const i=Ee(e);return i&&t.push(new _l(i)),t},[]);return new ac(e,i)},hc=uc,pc=function(t){return Promise.resolve(uc(t))};let dc=(()=>{class t{constructor(){this.compileModuleSync=lc,this.compileModuleAsync=cc,this.compileModuleAndAllComponentsSync=hc,this.compileModuleAndAllComponentsAsync=pc}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();const fc=(()=>Promise.resolve(0))();function mc(t){"undefined"==typeof Zone?fc.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class gc{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Il(!1),this.onMicrotaskEmpty=new Il(!1),this.onStable=new Il(!1),this.onError=new Il(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.wtfZoneSpec&&(i._inner=i._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=e,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let t=Dt.requestAnimationFrame,e=Dt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Dt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,bc(t),vc(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),bc(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(i,n,r,o,a,s)=>{try{return xc(t),i.invokeTask(r,o,a,s)}finally{e&&"eventTask"===o.type&&e(),wc(t)}},onInvoke:(e,i,n,r,o,a,s)=>{try{return xc(t),e.invoke(n,r,o,a,s)}finally{wc(t)}},onHasTask:(e,i,n,r)=>{e.hasTask(n,r),i===n&&("microTask"==r.change?(t._hasPendingMicrotasks=r.microTask,bc(t),vc(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,i,n,r)=>(e.handleError(n,r),t.runOutsideAngular(()=>t.onError.emit(r)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,n){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+n,t,_c,yc,yc);try{return r.runTask(o,e,i)}finally{r.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}}function yc(){}const _c={};function vc(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function bc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function xc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function wc(t){t._nesting--,vc(t)}class Cc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Il,this.onMicrotaskEmpty=new Il,this.onStable=new Il,this.onError=new Il}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,n){return t.apply(e,i)}}let Sc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gc.assertNotInAngularZone(),mc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())mc(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,i){let n=-1;e&&e>0&&(n=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==n),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:n,updateCb:i})}whenStable(t,e,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,i){return[]}}return t.\u0275fac=function(e){return new(e||t)(te(gc))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),Tc=(()=>{class t{constructor(){this._applications=new Map,Pc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Pc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();class kc{addToWindow(t){}findTestabilityInTree(t,e,i){return null}}let Ec,Pc=new kc;const Ic=new qt("AllowMultipleToken");class Mc{constructor(t,e){this.name=t,this.token=e}}function Ac(t,e,i=[]){const n="Platform: "+e,r=new qt(n);return(e=[])=>{let o=zc();if(!o||o.injector.get(Ic,!1))if(t)t(i.concat(e).concat({provide:r,useValue:!0}));else{const t=i.concat(e).concat({provide:r,useValue:!0},{provide:$o,useValue:"platform"});!function(t){if(Ec&&!Ec.destroyed&&!Ec.injector.get(Ic,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ec=t.get(Oc);const e=t.get(tc,null);e&&e.forEach(t=>t())}(la.create({providers:t,name:n}))}return function(t){const e=zc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function zc(){return Ec&&!Ec.destroyed?Ec:null}let Oc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const i=function(t,e){let i;return i="noop"===t?new Cc:("zone.js"===t?void 0:t)||new gc({enableLongStackTrace:Dn(),shouldCoalesceEventChangeDetection:e}),i}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),n=[{provide:gc,useValue:i}];return i.run(()=>{const e=la.create({providers:n,parent:this.injector,name:t.moduleType.name}),r=t.create(e),o=r.injector.get(Cn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return r.onDestroy(()=>Rc(this._modules,r)),i.runOutsideAngular(()=>i.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,i){try{const n=i();return Ba(n)?n.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):n}catch(n){throw e.runOutsideAngular(()=>t.handleError(n)),n}}(o,i,()=>{const t=r.injector.get(Xl);return t.runInitializers(),t.donePromise.then(()=>(Ps(r.injector.get(rc,ks)||ks),this._moduleDoBootstrap(r),r))})})}bootstrapModule(t,e=[]){const i=Lc({},e);return function(t,e,i){const n=new wl(i);return Promise.resolve(n)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,i))}_moduleDoBootstrap(t){const e=t.injector.get(Dc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${Tt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(te(la))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();function Lc(t,e){return Array.isArray(e)?e.reduce(Lc,t):Object.assign(Object.assign({},t),e)}let Dc=(()=>{class t{constructor(t,e,i,n,r,o){this._zone=t,this._console=e,this._injector=i,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Dn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new b(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),s=new b(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{gc.assertNotInAngularZone(),mc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const i=this._zone.onUnstable.subscribe(()=>{gc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),i.unsubscribe()}});this.isStable=$(a,s.pipe(rt()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=t instanceof Bs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(i.componentType);const n=i.isBoundToModule?void 0:this._injector.get(oe),r=i.create(la.NULL,[],e||i.selector,n);r.onDestroy(()=>{this._unloadComponent(r)});const o=r.injector.get(Sc,null);return o&&r.injector.get(Tc).registerApplication(r.location.nativeElement,o),this._loadComponent(r),Dn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Rc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ic,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Rc(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(te(gc),te(nc),te(la),te(Cn),te(Ns),te(Xl))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();function Rc(t,e){const i=t.indexOf(e);i>-1&&t.splice(i,1)}class Bc{}class Fc{}const Nc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Vc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Nc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,n]=t.split("#");return void 0===n&&(n="default"),i("zn8P")(e).then(t=>t[n]).then(t=>jc(t,e,n)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,n]=t.split("#"),r="NgFactory";return void 0===n&&(n="default",r=""),i("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[n+r]).then(t=>jc(t,e,n))}}return t.\u0275fac=function(e){return new(e||t)(te(dc),te(Fc,8))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();function jc(t,e,i){if(!t)throw new Error(`Cannot find '${i}' in '${e}'`);return t}const Uc=Ac(null,"core",[{provide:ec,useValue:"unknown"},{provide:Oc,deps:[la]},{provide:Tc,deps:[]},{provide:nc,deps:[]}]),qc=[{provide:Dc,useClass:Dc,deps:[gc,nc,la,Cn,Ns,Xl]},{provide:yl,deps:[gc],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Xl,useClass:Xl,deps:[[new ct,Kl]]},{provide:dc,useClass:dc,deps:[]},Yl,{provide:ol,useFactory:function(){return ll},deps:[]},{provide:al,useFactory:function(){return cl},deps:[]},{provide:rc,useFactory:function(t){return Ps(t=t||"undefined"!=typeof $localize&&$localize.locale||ks),t},deps:[[new lt(rc),new ct,new ht]]},{provide:oc,useValue:"USD"}];let Zc=(()=>{class t{constructor(t){}}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)(te(Dc))},providers:qc}),t})(),Hc=null;function Gc(){return Hc}const Wc=new qt("DocumentToken");let $c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({factory:Kc,token:t,providedIn:"platform"}),t})();function Kc(){return te(Qc)}const Xc=new qt("Location Initialized");let Qc=(()=>{class t extends $c{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=Gc().getLocation(),this._history=Gc().getHistory()}getBaseHrefFromDOM(){return Gc().getBaseHref(this._doc)}onPopState(t){Gc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){Gc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,i){Yc()?this._history.pushState(t,e,i):this.location.hash=i}replaceState(t,e,i){Yc()?this._history.replaceState(t,e,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(te(Wc))},t.\u0275prov=mt({factory:Jc,token:t,providedIn:"platform"}),t})();function Yc(){return!!window.history.pushState}function Jc(){return new Qc(te(Wc))}function tu(t,e){if(0==t.length)return e;if(0==e.length)return t;let i=0;return t.endsWith("/")&&i++,e.startsWith("/")&&i++,2==i?t+e.substring(1):1==i?t+e:t+"/"+e}function eu(t){const e=t.match(/#|\?|$/),i=e&&e.index||t.length;return t.slice(0,i-("/"===t[i-1]?1:0))+t.slice(i)}function iu(t){return t&&"?"!==t[0]?"?"+t:t}let nu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({factory:ru,token:t,providedIn:"root"}),t})();function ru(t){const e=te(Wc).location;return new au(te($c),e&&e.origin||"")}const ou=new qt("appBaseHref");let au=(()=>{class t extends nu{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return tu(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+iu(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${e}${i}`:e}pushState(t,e,i,n){const r=this.prepareExternalUrl(i+iu(n));this._platformLocation.pushState(t,e,r)}replaceState(t,e,i,n){const r=this.prepareExternalUrl(i+iu(n));this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(te($c),te(ou,8))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),su=(()=>{class t extends nu{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=tu(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,i,n){let r=this.prepareExternalUrl(i+iu(n));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)}replaceState(t,e,i,n){let r=this.prepareExternalUrl(i+iu(n));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(te($c),te(ou,8))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),lu=(()=>{class t{constructor(t,e){this._subject=new Il,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=eu(uu(i)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+iu(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,uu(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",i=null){this._platformStrategy.pushState(i,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+iu(e)),i)}replaceState(t,e="",i=null){this._platformStrategy.replaceState(i,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+iu(e)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(i=>i(t,e))}subscribe(t,e,i){return this._subject.subscribe({next:t,error:e,complete:i})}}return t.\u0275fac=function(e){return new(e||t)(te(nu),te($c))},t.normalizeQueryParams=iu,t.joinWithSlash=tu,t.stripTrailingSlash=eu,t.\u0275prov=mt({factory:cu,token:t,providedIn:"root"}),t})();function cu(){return new lu(te(nu),te($c))}function uu(t){return t.replace(/\/index.html$/,"")}var hu=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),pu=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),du=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),fu=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),mu=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function gu(t,e){return xu(Cs(t)[Ts.DateFormat],e)}function yu(t,e){return xu(Cs(t)[Ts.TimeFormat],e)}function _u(t,e){return xu(Cs(t)[Ts.DateTimeFormat],e)}function vu(t,e){const i=Cs(t),n=i[Ts.NumberSymbols][e];if(void 0===n){if(e===mu.CurrencyDecimal)return i[Ts.NumberSymbols][mu.Decimal];if(e===mu.CurrencyGroup)return i[Ts.NumberSymbols][mu.Group]}return n}function bu(t){if(!t[Ts.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Ts.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function xu(t,e){for(let i=e;i>-1;i--)if(void 0!==t[i])return t[i];throw new Error("Locale data API: locale data undefined")}function wu(t){const[e,i]=t.split(":");return{hours:+e,minutes:+i}}const Cu=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Su={},Tu=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ku=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),Eu=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),Pu=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function Iu(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,(function(t,i){return null!=e&&i in e?e[i]:t}))),t}function Mu(t,e,i="-",n,r){let o="";(t<0||r&&t<=0)&&(r?t=1-t:(t=-t,o=i));let a=String(t);for(;a.length<e;)a="0"+a;return n&&(a=a.substr(a.length-e)),o+a}function Au(t,e,i=0,n=!1,r=!1){return function(o,a){let s=function(t,e){switch(t){case Eu.FullYear:return e.getFullYear();case Eu.Month:return e.getMonth();case Eu.Date:return e.getDate();case Eu.Hours:return e.getHours();case Eu.Minutes:return e.getMinutes();case Eu.Seconds:return e.getSeconds();case Eu.FractionalSeconds:return e.getMilliseconds();case Eu.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((i>0||s>-i)&&(s+=i),t===Eu.Hours)0===s&&-12===i&&(s=12);else if(t===Eu.FractionalSeconds)return l=e,Mu(s,3).substr(0,l);var l;const c=vu(a,mu.MinusSign);return Mu(s,e,c,n,r)}}function zu(t,e,i=pu.Format,n=!1){return function(r,o){return function(t,e,i,n,r,o){switch(i){case Pu.Months:return function(t,e,i){const n=Cs(t),r=xu([n[Ts.MonthsFormat],n[Ts.MonthsStandalone]],e);return xu(r,i)}(e,r,n)[t.getMonth()];case Pu.Days:return function(t,e,i){const n=Cs(t),r=xu([n[Ts.DaysFormat],n[Ts.DaysStandalone]],e);return xu(r,i)}(e,r,n)[t.getDay()];case Pu.DayPeriods:const a=t.getHours(),s=t.getMinutes();if(o){const t=function(t){const e=Cs(t);return bu(e),(e[Ts.ExtraData][2]||[]).map(t=>"string"==typeof t?wu(t):[wu(t[0]),wu(t[1])])}(e),i=function(t,e,i){const n=Cs(t);bu(n);const r=xu([n[Ts.ExtraData][0],n[Ts.ExtraData][1]],e)||[];return xu(r,i)||[]}(e,r,n),o=t.findIndex(t=>{if(Array.isArray(t)){const[e,i]=t,n=a>=e.hours&&s>=e.minutes,r=a<i.hours||a===i.hours&&s<i.minutes;if(e.hours<i.hours){if(n&&r)return!0}else if(n||r)return!0}else if(t.hours===a&&t.minutes===s)return!0;return!1});if(-1!==o)return i[o]}return function(t,e,i){const n=Cs(t),r=xu([n[Ts.DayPeriodsFormat],n[Ts.DayPeriodsStandalone]],e);return xu(r,i)}(e,r,n)[a<12?0:1];case Pu.Eras:return function(t,e){return xu(Cs(t)[Ts.Eras],e)}(e,n)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+i)}}(r,o,t,e,i,n)}}function Ou(t){return function(e,i,n){const r=-1*n,o=vu(i,mu.MinusSign),a=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case ku.Short:return(r>=0?"+":"")+Mu(a,2,o)+Mu(Math.abs(r%60),2,o);case ku.ShortGMT:return"GMT"+(r>=0?"+":"")+Mu(a,1,o);case ku.Long:return"GMT"+(r>=0?"+":"")+Mu(a,2,o)+":"+Mu(Math.abs(r%60),2,o);case ku.Extended:return 0===n?"Z":(r>=0?"+":"")+Mu(a,2,o)+":"+Mu(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function Lu(t,e=!1){return function(i,n){let r;if(e){const t=new Date(i.getFullYear(),i.getMonth(),1).getDay()-1,e=i.getDate();r=1+Math.floor((e+t)/7)}else{const t=(o=i,new Date(o.getFullYear(),o.getMonth(),o.getDate()+(4-o.getDay()))),e=function(t){const e=new Date(t,0,1).getDay();return new Date(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),n=t.getTime()-e.getTime();r=1+Math.round(n/6048e5)}var o;return Mu(r,t,vu(n,mu.MinusSign))}}const Du={};function Ru(t,e){t=t.replace(/:/g,"");const i=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(i)?e:i}function Bu(t){return t instanceof Date&&!isNaN(t.valueOf())}class Fu{}let Nu=(()=>{class t extends Fu{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return Cs(t)[Ts.PluralCase]}(e||this.locale)(t)){case hu.Zero:return"zero";case hu.One:return"one";case hu.Two:return"two";case hu.Few:return"few";case hu.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(te(rc))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();function Vu(t,e){e=encodeURIComponent(e);for(const i of t.split(";")){const t=i.indexOf("="),[n,r]=-1==t?[i,""]:[i.slice(0,t),i.slice(t+1)];if(n.trim()===e)return decodeURIComponent(r)}return null}let ju=(()=>{class t{constructor(t,e,i,n){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=i,this._renderer=n,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(ba(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Tt(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(Ia(ol),Ia(al),Ia(Vs),Ia(Zs))},t.\u0275dir=Te({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class Uu{constructor(t,e,i,n){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=n}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let qu=(()=>{class t{constructor(t,e,i){this._viewContainer=t,this._template=e,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Dn()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const i=this._ngForOf;if(!this._differ&&i)try{this._differ=this._differs.find(i).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${i}' of type '${t=i,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,i,n)=>{if(null==t.previousIndex){const i=this._viewContainer.createEmbeddedView(this._template,new Uu(null,this._ngForOf,-1,-1),null===n?void 0:n),r=new Zu(t,i);e.push(r)}else if(null==n)this._viewContainer.remove(null===i?void 0:i);else if(null!==i){const r=this._viewContainer.get(i);this._viewContainer.move(r,n);const o=new Zu(t,r);e.push(o)}});for(let i=0;i<e.length;i++)this._perViewChange(e[i].view,e[i].record);for(let i=0,n=this._viewContainer.length;i<n;i++){const t=this._viewContainer.get(i);t.context.index=i,t.context.count=n,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ia(pl),Ia(ul),Ia(ol))},t.\u0275dir=Te({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Zu{constructor(t,e){this.record=t,this.view=e}}let Hu=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Gu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Wu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Wu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ia(pl),Ia(ul))},t.\u0275dir=Te({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Gu{constructor(){this.$implicit=null,this.ngIf=null}}function Wu(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Tt(e)}'.`)}function $u(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Tt(t)}'`)}class Ku{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class Xu{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const Qu=new Xu,Yu=new Ku;let Ju=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Ba(e))return Qu;if(Fa(e))return Yu;throw $u(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(function(t=pt.Default){const e=Zo(!0);if(null!=e||t&pt.Optional)return e;throw new Error("No provider for ChangeDetectorRef!")}())},t.\u0275pipe=ke({name:"async",type:t,pure:!1}),t})(),th=(()=>{class t{constructor(t){this.locale=t}transform(e,i="mediumDate",n,r){if(null==e||""===e||e!=e)return null;try{return function(t,e,i,n){let r=function(t){if(Bu(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,i,n]=t.split("-").map(t=>+t);return new Date(e,i-1,n)}let i;if(i=t.match(Cu))return function(t){const e=new Date(0);let i=0,n=0;const r=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(i=Number(t[9]+t[10]),n=Number(t[9]+t[11])),r.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const a=Number(t[4]||0)-i,s=Number(t[5]||0)-n,l=Number(t[6]||0),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,a,s,l,c),e}(i)}const e=new Date(t);if(!Bu(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=function t(e,i){const n=function(t){return Cs(t)[Ts.LocaleId]}(e);if(Su[n]=Su[n]||{},Su[n][i])return Su[n][i];let r="";switch(i){case"shortDate":r=gu(e,fu.Short);break;case"mediumDate":r=gu(e,fu.Medium);break;case"longDate":r=gu(e,fu.Long);break;case"fullDate":r=gu(e,fu.Full);break;case"shortTime":r=yu(e,fu.Short);break;case"mediumTime":r=yu(e,fu.Medium);break;case"longTime":r=yu(e,fu.Long);break;case"fullTime":r=yu(e,fu.Full);break;case"short":const i=t(e,"shortTime"),n=t(e,"shortDate");r=Iu(_u(e,fu.Short),[i,n]);break;case"medium":const o=t(e,"mediumTime"),a=t(e,"mediumDate");r=Iu(_u(e,fu.Medium),[o,a]);break;case"long":const s=t(e,"longTime"),l=t(e,"longDate");r=Iu(_u(e,fu.Long),[s,l]);break;case"full":const c=t(e,"fullTime"),u=t(e,"fullDate");r=Iu(_u(e,fu.Full),[c,u])}return r&&(Su[n][i]=r),r}(i,e)||e;let o,a=[];for(;e;){if(o=Tu.exec(e),!o){a.push(e);break}{a=a.concat(o.slice(1));const t=a.pop();if(!t)break;e=t}}let s=r.getTimezoneOffset();n&&(s=Ru(n,s),r=function(t,e,i){const n=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(Ru(e,n)-n))}(r,n));let l="";return a.forEach(t=>{const e=function(t){if(Du[t])return Du[t];let e;switch(t){case"G":case"GG":case"GGG":e=zu(Pu.Eras,du.Abbreviated);break;case"GGGG":e=zu(Pu.Eras,du.Wide);break;case"GGGGG":e=zu(Pu.Eras,du.Narrow);break;case"y":e=Au(Eu.FullYear,1,0,!1,!0);break;case"yy":e=Au(Eu.FullYear,2,0,!0,!0);break;case"yyy":e=Au(Eu.FullYear,3,0,!1,!0);break;case"yyyy":e=Au(Eu.FullYear,4,0,!1,!0);break;case"M":case"L":e=Au(Eu.Month,1,1);break;case"MM":case"LL":e=Au(Eu.Month,2,1);break;case"MMM":e=zu(Pu.Months,du.Abbreviated);break;case"MMMM":e=zu(Pu.Months,du.Wide);break;case"MMMMM":e=zu(Pu.Months,du.Narrow);break;case"LLL":e=zu(Pu.Months,du.Abbreviated,pu.Standalone);break;case"LLLL":e=zu(Pu.Months,du.Wide,pu.Standalone);break;case"LLLLL":e=zu(Pu.Months,du.Narrow,pu.Standalone);break;case"w":e=Lu(1);break;case"ww":e=Lu(2);break;case"W":e=Lu(1,!0);break;case"d":e=Au(Eu.Date,1);break;case"dd":e=Au(Eu.Date,2);break;case"E":case"EE":case"EEE":e=zu(Pu.Days,du.Abbreviated);break;case"EEEE":e=zu(Pu.Days,du.Wide);break;case"EEEEE":e=zu(Pu.Days,du.Narrow);break;case"EEEEEE":e=zu(Pu.Days,du.Short);break;case"a":case"aa":case"aaa":e=zu(Pu.DayPeriods,du.Abbreviated);break;case"aaaa":e=zu(Pu.DayPeriods,du.Wide);break;case"aaaaa":e=zu(Pu.DayPeriods,du.Narrow);break;case"b":case"bb":case"bbb":e=zu(Pu.DayPeriods,du.Abbreviated,pu.Standalone,!0);break;case"bbbb":e=zu(Pu.DayPeriods,du.Wide,pu.Standalone,!0);break;case"bbbbb":e=zu(Pu.DayPeriods,du.Narrow,pu.Standalone,!0);break;case"B":case"BB":case"BBB":e=zu(Pu.DayPeriods,du.Abbreviated,pu.Format,!0);break;case"BBBB":e=zu(Pu.DayPeriods,du.Wide,pu.Format,!0);break;case"BBBBB":e=zu(Pu.DayPeriods,du.Narrow,pu.Format,!0);break;case"h":e=Au(Eu.Hours,1,-12);break;case"hh":e=Au(Eu.Hours,2,-12);break;case"H":e=Au(Eu.Hours,1);break;case"HH":e=Au(Eu.Hours,2);break;case"m":e=Au(Eu.Minutes,1);break;case"mm":e=Au(Eu.Minutes,2);break;case"s":e=Au(Eu.Seconds,1);break;case"ss":e=Au(Eu.Seconds,2);break;case"S":e=Au(Eu.FractionalSeconds,1);break;case"SS":e=Au(Eu.FractionalSeconds,2);break;case"SSS":e=Au(Eu.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ou(ku.Short);break;case"ZZZZZ":e=Ou(ku.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ou(ku.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ou(ku.Long);break;default:return null}return Du[t]=e,e}(t);l+=e?e(r,i,s):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}(e,i,r||this.locale,n)}catch(o){throw $u(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(Ia(rc))},t.\u0275pipe=ke({name:"date",type:t,pure:!0}),t})(),eh=(()=>{class t{transform(e,i,n){if(null==e)return e;if(!this.supports(e))throw $u(t,e);return e.slice(i,n)}supports(t){return"string"==typeof t||Array.isArray(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=ke({name:"slice",type:t,pure:!1}),t})(),ih=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},providers:[{provide:Fu,useClass:Nu}]}),t})();function nh(t){return"browser"===t}let rh=(()=>{class t{}return t.\u0275prov=mt({token:t,providedIn:"root",factory:()=>new oh(te(Wc),window,te(Cn))}),t})();class oh{constructor(t,e,i){this.document=t,this.window=e,this.errorHandler=i,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,n=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(i-r[0],n-r[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=ah(this.window.history)||ah(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function ah(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class sh extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new sh,Hc||(Hc=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=ch||(ch=document.querySelector("base"),ch)?ch.getAttribute("href"):null;return null==e?null:(i=e,lh||(lh=document.createElement("a")),lh.setAttribute("href",i),"/"===lh.pathname.charAt(0)?lh.pathname:"/"+lh.pathname);var i}resetBaseElement(){ch=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Vu(document.cookie,t)}}let lh,ch=null;const uh=new qt("TRANSITION_ID"),hh=[{provide:Kl,useFactory:function(t,e,i){return()=>{i.get(Xl).donePromise.then(()=>{const i=Gc();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>i.remove(t))})}},deps:[uh,Wc,la],multi:!0}];class ph{static init(){var t;t=new ph,Pc=t}addToWindow(t){Dt.getAngularTestability=(e,i=!0)=>{const n=t.findTestabilityInTree(e,i);if(null==n)throw new Error("Could not find testability for element.");return n},Dt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Dt.getAllAngularRootElements=()=>t.getAllRootElements(),Dt.frameworkStabilizers||(Dt.frameworkStabilizers=[]),Dt.frameworkStabilizers.push(t=>{const e=Dt.getAllAngularTestabilities();let i=e.length,n=!1;const r=function(e){n=n||e,i--,0==i&&t(n)};e.forEach((function(t){t.whenStable(r)}))})}findTestabilityInTree(t,e,i){if(null==e)return null;const n=t.getTestability(e);return null!=n?n:i?Gc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const dh=new qt("EventManagerPlugins");let fh=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,i){return this._findPluginFor(e).addEventListener(t,e,i)}addGlobalEventListener(t,e,i){return this._findPluginFor(e).addGlobalEventListener(t,e,i)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const i=this._plugins;for(let n=0;n<i.length;n++){const e=i[n];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(te(dh),te(gc))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();class mh{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const n=Gc().getGlobalEventTarget(this._doc,t);if(!n)throw new Error(`Unsupported event target ${n} for event ${e}`);return this.addEventListener(n,e,i)}}let gh=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),yh=(()=>{class t extends gh{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const i=this._doc.createElement("style");i.textContent=t,this._styleNodes.add(e.appendChild(i))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Gc().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(te(Wc))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();const _h={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},vh=/%COMP%/g;function bh(t,e,i){for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?bh(t,r,i):(r=r.replace(vh,t),i.push(r))}return i}function xh(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let wh=(()=>{class t{constructor(t,e,i){this.eventManager=t,this.sharedStylesHost=e,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ch(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case me.Emulated:{let i=this.rendererByCompId.get(e.id);return i||(i=new Sh(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,i)),i.applyToHost(t),i}case me.Native:case me.ShadowDom:return new Th(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=bh(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(te(fh),te(yh),te(Ql))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();class Ch{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(_h[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,i){t&&t.insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,n){if(n){e=n+":"+e;const r=_h[n];r?t.setAttributeNS(r,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const n=_h[i];n?t.removeAttributeNS(n,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,n){n&qs.DashCase?t.style.setProperty(e,i,n&qs.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&qs.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,xh(i)):this.eventManager.addEventListener(t,e,xh(i))}}class Sh extends Ch{constructor(t,e,i,n){super(t),this.component=i;const r=bh(n+"-"+i.id,i.styles,[]);e.addStyles(r),this.contentAttr="_ngcontent-%COMP%".replace(vh,n+"-"+i.id),this.hostAttr="_nghost-%COMP%".replace(vh,n+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class Th extends Ch{constructor(t,e,i,n){super(t),this.sharedStylesHost=e,this.hostEl=i,this.component=n,this.shadowRoot=n.encapsulation===me.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const r=bh(n.id,n.styles,[]);for(let o=0;o<r.length;o++){const t=document.createElement("style");t.textContent=r[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let kh=(()=>{class t extends mh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,i){return t.addEventListener(e,i,!1),()=>this.removeEventListener(t,e,i)}removeEventListener(t,e,i){return t.removeEventListener(e,i)}}return t.\u0275fac=function(e){return new(e||t)(te(Wc))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();const Eh=["alt","control","meta","shift"],Ph={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ih={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Mh={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Ah=(()=>{class t extends mh{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,n){const r=t.parseEventName(i),o=t.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gc().onAndCancel(e,r.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),n=i.shift();if(0===i.length||"keydown"!==n&&"keyup"!==n)return null;const r=t._normalizeKey(i.pop());let o="";if(Eh.forEach(t=>{const e=i.indexOf(t);e>-1&&(i.splice(e,1),o+=t+".")}),o+=r,0!=i.length||0===r.length)return null;const a={};return a.domEventName=n,a.fullKey=o,a}static getEventFullKey(t){let e="",i=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Ih.hasOwnProperty(e)&&(e=Ih[e]))}return Ph[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Eh.forEach(n=>{n!=i&&(0,Mh[n])(t)&&(e+=n+".")}),e+=i,e}static eventCallback(e,i,n){return r=>{t.getEventFullKey(r)===e&&n.runGuarded(()=>i(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(te(Wc))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),zh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({factory:function(){return te(Oh)},token:t,providedIn:"root"}),t})(),Oh=(()=>{class t extends zh{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case rr.NONE:return e;case rr.HTML:return An(e,"HTML")?Mn(e):function(t,e){let i=null;try{ir=ir||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Rn:new Bn(t)}(t);let n=e?String(e):"";i=ir.getInertBodyElement(n);let r=5,o=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=o,o=i.innerHTML,i=ir.getInertBodyElement(n)}while(n!==o);const a=new Yn,s=a.sanitizeChildren(nr(i)||i);return Dn()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(i){const t=nr(i)||i;for(;t.firstChild;)t.removeChild(t.firstChild)}}}(this._doc,String(e));case rr.STYLE:return An(e,"Style")?Mn(e):e;case rr.SCRIPT:if(An(e,"Script"))return Mn(e);throw new Error("unsafe value used in a script context");case rr.URL:return zn(e),An(e,"URL")?Mn(e):Vn(String(e));case rr.RESOURCE_URL:if(An(e,"ResourceURL"))return Mn(e);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return new Tn(t)}bypassSecurityTrustStyle(t){return new kn(t)}bypassSecurityTrustScript(t){return new En(t)}bypassSecurityTrustUrl(t){return new Pn(t)}bypassSecurityTrustResourceUrl(t){return new In(t)}}return t.\u0275fac=function(e){return new(e||t)(te(Wc))},t.\u0275prov=mt({factory:function(){return t=te(Zt),new Oh(t.get(Wc));var t},token:t,providedIn:"root"}),t})();const Lh=Ac(Uc,"browser",[{provide:ec,useValue:"browser"},{provide:tc,useValue:function(){sh.makeCurrent(),ph.init()},multi:!0},{provide:Wc,useFactory:function(){return function(t){He=t}(document),document},deps:[]}]),Dh=[[],{provide:$o,useValue:"root"},{provide:Cn,useFactory:function(){return new Cn},deps:[]},{provide:dh,useClass:kh,multi:!0,deps:[Wc,gc,ec]},{provide:dh,useClass:Ah,multi:!0,deps:[Wc]},[],{provide:wh,useClass:wh,deps:[fh,yh,Ql]},{provide:Us,useExisting:wh},{provide:gh,useExisting:yh},{provide:yh,useClass:yh,deps:[Wc]},{provide:Sc,useClass:Sc,deps:[gc]},{provide:fh,useClass:fh,deps:[dh,gc]},[]];let Rh=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Ql,useValue:e.appId},{provide:uh,useExisting:Ql},hh]}}}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)(te(t,12))},providers:Dh,imports:[ih,Zc]}),t})();"undefined"!=typeof window&&window;class Bh extends T{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new w;return this._value}next(t){super.next(this._value=t)}}function Fh(...t){let e=t[t.length-1];return E(e)?(t.pop(),B(t,e)):W(t)}class Nh extends f{notifyNext(t,e,i,n,r){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Vh extends f{constructor(t,e,i){super(),this.parent=t,this.outerValue=e,this.outerIndex=i,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function jh(t,e,i,n,r=new Vh(t,i,n)){if(!r.closed)return e instanceof b?e.subscribe(r):R(e)(r)}const Uh={};function qh(...t){let e=void 0,i=void 0;return E(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),W(t,i).lift(new Zh(e))}class Zh{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Hh(t,this.resultSelector))}}class Hh extends Nh{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Uh),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let i=0;i<e;i++)this.add(jh(this,t[i],void 0,i))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,i){const n=this.values,r=this.toRespond?n[i]===Uh?--this.toRespond:this.toRespond:0;n[i]=e,0===r&&(this.resultSelector?this._tryResultSelector(n):this.destination.next(n.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}const Gh=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})(),Wh=new b(t=>t.complete());function $h(t){return t?function(t){return new b(e=>t.schedule(()=>e.complete()))}(t):Wh}function Kh(t){return e=>0===t?$h():e.lift(new Xh(t))}class Xh{constructor(t){if(this.total=t,this.total<0)throw new Gh}call(t,e){return e.subscribe(new Qh(t,this.total))}}class Qh extends f{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,i=++this.count;i<=e&&(this.destination.next(t),i===e&&(this.destination.complete(),this.unsubscribe()))}}function Yh(){return G(1)}function Jh(...t){return Yh()(Fh(...t))}function tp(...t){const e=t[t.length-1];return E(e)?(t.pop(),i=>Jh(t,i,e)):e=>Jh(t,e)}function ep(){}function ip(t,e,i){return function(n){return n.lift(new np(t,e,i))}}class np{constructor(t,e,i){this.nextOrObserver=t,this.error=e,this.complete=i}call(t,e){return e.subscribe(new rp(t,this.nextOrObserver,this.error,this.complete))}}class rp extends f{constructor(t,e,i,r){super(t),this._tapNext=ep,this._tapError=ep,this._tapComplete=ep,this._tapError=i||ep,this._tapComplete=r||ep,n(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||ep,this._tapError=e.error||ep,this._tapComplete=e.complete||ep)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function op(t){return e=>e.lift(new ap(t))}class ap{constructor(t){this.notifier=t}call(t,e){const i=new sp(t),n=j(this.notifier,new N(i));return n&&!i.seenValue?(i.add(n),e.subscribe(i)):i}}class sp extends V{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function lp(t,e){return"function"==typeof e?i=>i.pipe(lp((i,n)=>F(t(i,n)).pipe(P((t,r)=>e(i,t,n,r))))):e=>e.lift(new cp(t))}class cp{constructor(t){this.project=t}call(t,e){return e.subscribe(new up(t,this.project))}}class up extends V{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const i=this.index++;try{e=this.project(t,i)}catch(n){return void this.destination.error(n)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const i=new N(this),n=this.destination;n.add(i),this.innerSubscription=j(t,i),this.innerSubscription!==i&&n.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function hp(...t){return e=>{let i;return"function"==typeof t[t.length-1]&&(i=t.pop()),e.lift(new pp(t,i))}}class pp{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new dp(t,this.observables,this.project))}}class dp extends Nh{constructor(t,e,i){super(t),this.observables=e,this.project=i,this.toRespond=[];const n=e.length;this.values=new Array(n);for(let r=0;r<n;r++)this.toRespond.push(r);for(let r=0;r<n;r++)this.add(jh(this,e[r],void 0,r))}notifyNext(t,e,i){this.values[i]=e;const n=this.toRespond;if(n.length>0){const t=n.indexOf(i);-1!==t&&n.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}function fp(t,e){let i=!1;return arguments.length>=2&&(i=!0),function(n){return n.lift(new mp(t,e,i))}}class mp{constructor(t,e,i=!1){this.accumulator=t,this.seed=e,this.hasSeed=i}call(t,e){return e.subscribe(new gp(t,this.accumulator,this.seed,this.hasSeed))}}class gp extends f{constructor(t,e,i,n){super(t),this.accumulator=e,this._seed=i,this.hasSeed=n,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let i;try{i=this.accumulator(this.seed,t,e)}catch(n){this.destination.error(n)}this.seed=i,this.destination.next(i)}}function yp(t,e){return i=>i.lift(new _p(t,e))}class _p{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new vp(t,this.compare,this.keySelector))}}class vp extends f{constructor(t,e,i){super(t),this.keySelector=i,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:i}=this;e=i?i(t):t}catch(n){return this.destination.error(n)}let i=!1;if(this.hasKey)try{const{compare:t}=this;i=t(this.key,e)}catch(n){return this.destination.error(n)}else this.hasKey=!0;i||(this.key=e,this.destination.next(t))}}class bp{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new xp(t,this.predicate))}}class xp extends f{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function wp(t,e){return function(i){return i.lift(new Cp(t,e))}}class Cp{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Sp(t,this.predicate,this.thisArg))}}class Sp extends f{constructor(t,e,i){super(t),this.predicate=e,this.thisArg=i,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(i){return void this.destination.error(i)}e&&this.destination.next(t)}}const Tp=["youtubeContainer"];let kp=(()=>{class t{constructor(t,e){this._ngZone=t,this._youtubeContainer=new T,this._destroyed=new T,this._playerChanges=new Bh(void 0),this._videoId=new Bh(void 0),this._height=new Bh(390),this._width=new Bh(640),this._startSeconds=new Bh(void 0),this._endSeconds=new Bh(void 0),this._suggestedQuality=new Bh(void 0),this._playerVars=new Bh(void 0),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=nh(e)}get videoId(){return this._videoId.value}set videoId(t){this._videoId.next(t)}get height(){return this._height.value}set height(t){this._height.next(t||390)}get width(){return this._width.value}set width(t){this._width.next(t||640)}set startSeconds(t){this._startSeconds.next(t)}set endSeconds(t){this._endSeconds.next(t)}set suggestedQuality(t){this._suggestedQuality.next(t)}get playerVars(){return this._playerVars.value}set playerVars(t){this._playerVars.next(t)}ngOnInit(){if(!this._isBrowser)return;let t=Fh(!0);if(!window.YT||!window.YT.Player){const e=new T;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>e.next(!0))},t=e.pipe(Kh(1),tp(!1))}const e=function(t,e,i,n,r,o,a){const s=qh([e,o]).pipe(hp(qh([n,r])),P(([t,e])=>{const[i,n]=t,[r,o]=e;return i?{videoId:i,playerVars:n,width:r,height:o}:void 0}));return qh([t,s,Fh(a)]).pipe(_(function(...t){let e=null;return"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0].slice()),i=>i.lift.call(F([i,...t]),new Zh(e))}(i),(c=([t,e])=>!e,t=>t.lift(new bp(c))),P(([t])=>t)),fp(Ep,void 0),yp());var c}(this._youtubeContainer,this._videoId,t,this._width,this._height,this._playerVars,this._ngZone).pipe(ip(t=>{this._playerChanges.next(t)}),(i=t=>{Pp(t)||t.destroy()},H(t=>t?Pp(t)?Fh(t):new b(e=>{let n=!1,r=!1;const o=t=>{r=!0,n||(t.target.removeEventListener("onReady",o),e.next(t.target))};return t.addEventListener("onReady",o),()=>{n=!0,r||i(t)}}).pipe(Kh(1),tp(void 0)):Fh(void 0))),op(this._destroyed),et(new T));var i;e.subscribe(t=>{this._player=t,t&&this._pendingPlayerState&&this._initializePlayer(t,this._pendingPlayerState),this._pendingPlayerState=void 0}),function(t,e,i){qh([t,e,i]).subscribe(([t,e,i])=>t&&t.setSize(e,i))}(e,this._width,this._height),function(t,e){qh([t,e]).subscribe(([t,e])=>t&&e&&t.setPlaybackQuality(e))}(e,this._suggestedQuality),function(t,e,i,n,r,o){const a=qh([i,n]).pipe(P(([t,e])=>({startSeconds:t,endSeconds:e}))),s=a.pipe(Ip(t,t=>!!t&&!function(t){const e=t.getPlayerState();return-1!==e&&5!==e}(t))),l=e.pipe(Ip(t,(t,e)=>!!t&&t.videoId!==e));$(t.pipe(Ip(qh([e,a]),([t,e],i)=>!(!i||t==i.videoId&&!e.startSeconds&&!e.endSeconds))),l,s).pipe(hp(qh([t,e,a,r])),P(([t,e])=>e),op(o)).subscribe(([t,e,i,n])=>{e&&t&&(t.videoId=e,t.cueVideoById(Object.assign({videoId:e,suggestedQuality:n},i)))})}(e,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),e.connect()}createEventsBoundInZone(){return{}}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=1}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=2}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=5}seekTo(t,e){this._player?this._player.seekTo(t,e):this._getPendingState().seek={seconds:t,allowSeekAhead:e}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(t){this._player?this._player.setVolume(t):this._getPendingState().volume=t}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(t){if(this._player)return this._player.setPlaybackRate(t);this._getPendingState().playbackRate=t}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:-1}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(t,e){const{playbackState:i,playbackRate:n,volume:r,muted:o,seek:a}=e;switch(i){case 1:t.playVideo();break;case 2:t.pauseVideo();break;case 5:t.stopVideo()}null!=n&&t.setPlaybackRate(n),null!=r&&t.setVolume(r),null!=o&&(o?t.mute():t.unMute()),null!=a&&t.seekTo(a.seconds,a.allowSeekAhead)}_getLazyEmitter(t){return this._playerChanges.pipe(lp(e=>e?function t(e,i,r){return r?t(e,i).pipe(P(t=>l(t)?r(...t):r(t))):new b(t=>{const r=(...e)=>t.next(1===e.length?e[0]:e);let o;try{o=e(r)}catch(a){return void t.error(a)}if(n(i))return()=>i(r,o)})}(i=>{e.addEventListener(t,i)},i=>{try{e.removeEventListener&&e.removeEventListener(t,i)}catch(n){}}):Fh()),t=>new b(e=>t.subscribe({next:t=>this._ngZone.run(()=>e.next(t)),error:t=>e.error(t),complete:()=>e.complete()})),op(this._destroyed))}}return t.\u0275fac=function(e){return new(e||t)(Ia(gc),Ia(ec))},t.\u0275cmp=ve({type:t,selectors:[["youtube-player"]],viewQuery:function(t,e){var i;1&t&&Ul(Tp,!0),2&t&&Vl(i=Hl())&&(e.youtubeContainer=i.first)},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(t,e){1&t&&Da(0,"div",null,0)},encapsulation:2,changeDetection:0}),t})();function Ep(t,[e,i,n]){if(t&&i&&t.playerVars!==i.playerVars)t.destroy();else{if(!i)return void(t&&t.destroy());if(t)return t}const r=n.runOutsideAngular(()=>new YT.Player(e,i));return r.videoId=i.videoId,r.playerVars=i.playerVars,r}function Pp(t){return"getPlayerStatus"in t}function Ip(t,e){return _(hp(t),wp(([t,i])=>e(i,t)),P(([t])=>t))}let Mp=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)}}),t})();const Ap=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function zp(t){return new b(e=>{let i;try{i=t()}catch(n){return void e.error(n)}return(i?F(i):$h()).subscribe(e)})}function Op(t){return function(e){return 0===t?$h():e.lift(new Lp(t))}}class Lp{constructor(t){if(this.total=t,this.total<0)throw new Gh}call(t,e){return e.subscribe(new Dp(t,this.total))}}class Dp extends f{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,i=this.total,n=this.count++;e.length<i?e.push(t):e[n%i]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const i=this.count>=this.total?this.total:this.count,n=this.ring;for(let r=0;r<i;r++){const r=e++%i;t.next(n[r])}}t.complete()}}function Rp(t=Np){return e=>e.lift(new Bp(t))}class Bp{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Fp(t,this.errorFactory))}}class Fp extends f{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Np(){return new Ap}function Vp(t=null){return e=>e.lift(new jp(t))}class jp{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Up(t,this.defaultValue))}}class Up extends f{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function qp(t){return function(e){const i=new Zp(t),n=e.lift(i);return i.caught=n}}class Zp{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Hp(t,this.selector,this.caught))}}class Hp extends V{constructor(t,e,i){super(t),this.selector=e,this.caught=i}error(t){if(!this.isStopped){let i;try{i=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const n=new N(this);this.add(n);const r=j(i,n);r!==n&&this.add(r)}}}function Gp(t,e){return U(t,e,1)}function Wp(t,e){const i=arguments.length>=2;return n=>n.pipe(t?wp((e,i)=>t(e,i,n)):y,Kh(1),i?Vp(e):Rp(()=>new Ap))}function $p(t){return e=>e.lift(new Kp(t))}class Kp{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Xp(t,this.callback))}}class Xp extends f{constructor(t,e){super(t),this.add(new h(e))}}class Qp{constructor(t,e){this.id=t,this.url=e}}class Yp extends Qp{constructor(t,e,i="imperative",n=null){super(t,e),this.navigationTrigger=i,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jp extends Qp{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class td extends Qp{constructor(t,e,i){super(t,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ed extends Qp{constructor(t,e,i){super(t,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class id extends Qp{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nd extends Qp{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rd extends Qp{constructor(t,e,i,n,r){super(t,e),this.urlAfterRedirects=i,this.state=n,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class od extends Qp{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ad extends Qp{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sd{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ld{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cd{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ud{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hd{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pd{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dd{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const fd="primary";class md{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function gd(t){return new md(t)}function yd(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function _d(t,e,i){const n=i.path.split("/");if(n.length>t.length)return null;if("full"===i.pathMatch&&(e.hasChildren()||n.length<t.length))return null;const r={};for(let o=0;o<n.length;o++){const e=n[o],i=t[o];if(e.startsWith(":"))r[e.substring(1)]=i;else if(e!==i.path)return null}return{consumed:t.slice(0,n.length),posParams:r}}function vd(t,e){const i=Object.keys(t),n=Object.keys(e);if(!i||!n||i.length!=n.length)return!1;let r;for(let o=0;o<i.length;o++)if(r=i[o],!bd(t[r],e[r]))return!1;return!0}function bd(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const i=[...t].sort(),n=[...e].sort();return i.every((t,e)=>n[e]===t)}return t===e}function xd(t){return Array.prototype.concat.apply([],t)}function wd(t){return t.length>0?t[t.length-1]:null}function Cd(t,e){for(const i in t)t.hasOwnProperty(i)&&e(t[i],i)}function Sd(t){return Fa(t)?t:Ba(t)?F(Promise.resolve(t)):Fh(t)}function Td(t,e,i){return i?function(t,e){return vd(t,e)}(t.queryParams,e.queryParams)&&function t(e,i){if(!Id(e.segments,i.segments))return!1;if(e.numberOfChildren!==i.numberOfChildren)return!1;for(const n in i.children){if(!e.children[n])return!1;if(!t(e.children[n],i.children[n]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(i=>bd(t[i],e[i]))}(t.queryParams,e.queryParams)&&function t(e,i){return function e(i,n,r){if(i.segments.length>r.length)return!!Id(i.segments.slice(0,r.length),r)&&!n.hasChildren();if(i.segments.length===r.length){if(!Id(i.segments,r))return!1;for(const e in n.children){if(!i.children[e])return!1;if(!t(i.children[e],n.children[e]))return!1}return!0}{const t=r.slice(0,i.segments.length),o=r.slice(i.segments.length);return!!Id(i.segments,t)&&!!i.children.primary&&e(i.children.primary,n,o)}}(e,i,i.segments)}(t.root,e.root)}class kd{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gd(this.queryParams)),this._queryParamMap}toString(){return Od.serialize(this)}}class Ed{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Cd(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ld(this)}}class Pd{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=gd(this.parameters)),this._parameterMap}toString(){return Vd(this)}}function Id(t,e){return t.length===e.length&&t.every((t,i)=>t.path===e[i].path)}function Md(t,e){let i=[];return Cd(t.children,(t,n)=>{n===fd&&(i=i.concat(e(t,n)))}),Cd(t.children,(t,n)=>{n!==fd&&(i=i.concat(e(t,n)))}),i}class Ad{}class zd{parse(t){const e=new Hd(t);return new kd(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,i){if(!e.hasChildren())return Ld(e);if(i){const i=e.children.primary?t(e.children.primary,!1):"",n=[];return Cd(e.children,(e,i)=>{i!==fd&&n.push(`${i}:${t(e,!1)}`)}),n.length>0?`${i}(${n.join("//")})`:i}{const i=Md(e,(i,n)=>n===fd?[t(e.children.primary,!1)]:[`${n}:${t(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${Ld(e)}/${i[0]}`:`${Ld(e)}/(${i.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(t=>`${Rd(e)}=${Rd(t)}`).join("&"):`${Rd(e)}=${Rd(i)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const Od=new zd;function Ld(t){return t.segments.map(t=>Vd(t)).join("/")}function Dd(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rd(t){return Dd(t).replace(/%3B/gi,";")}function Bd(t){return Dd(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fd(t){return decodeURIComponent(t)}function Nd(t){return Fd(t.replace(/\+/g,"%20"))}function Vd(t){return`${Bd(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Bd(t)}=${Bd(e[t])}`).join("")}`;var e}const jd=/^[^\/()?;=#]+/;function Ud(t){const e=t.match(jd);return e?e[0]:""}const qd=/^[^=?&#]+/,Zd=/^[^?&#]+/;class Hd{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ed([],{}):new Ed([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i.primary=new Ed(t,e)),i}parseSegment(){const t=Ud(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Pd(Fd(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Ud(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const t=Ud(this.remaining);t&&(i=t,this.capture(i))}t[Fd(e)]=Fd(i)}parseQueryParam(t){const e=function(t){const e=t.match(qd);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Zd);return e?e[0]:""}(this.remaining);t&&(i=t,this.capture(i))}const n=Nd(e),r=Nd(i);if(t.hasOwnProperty(n)){let e=t[n];Array.isArray(e)||(e=[e],t[n]=e),e.push(r)}else t[n]=r}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Ud(this.remaining),n=this.remaining[i.length];if("/"!==n&&")"!==n&&";"!==n)throw new Error(`Cannot parse url '${this.url}'`);let r=void 0;i.indexOf(":")>-1?(r=i.substr(0,i.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=fd);const o=this.parseChildren();e[r]=1===Object.keys(o).length?o.primary:new Ed([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Gd{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Wd(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Wd(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=$d(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return $d(t,this._root).map(t=>t.value)}}function Wd(t,e){if(t===e.value)return e;for(const i of e.children){const e=Wd(t,i);if(e)return e}return null}function $d(t,e){if(t===e.value)return[e];for(const i of e.children){const n=$d(t,i);if(n.length)return n.unshift(e),n}return[]}class Kd{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Xd(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Qd extends Gd{constructor(t,e){super(t),this.snapshot=e,rf(this,t)}toString(){return this.snapshot.toString()}}function Yd(t,e){const i=function(t,e){const i=new ef([],{},{},"",{},fd,e,null,t.root,-1,{});return new nf("",new Kd(i,[]))}(t,e),n=new Bh([new Pd("",{})]),r=new Bh({}),o=new Bh({}),a=new Bh({}),s=new Bh(""),l=new Jd(n,r,a,s,o,fd,e,i.root);return l.snapshot=i.root,new Qd(new Kd(l,[]),i)}class Jd{constructor(t,e,i,n,r,o,a,s){this.url=t,this.params=e,this.queryParams=i,this.fragment=n,this.data=r,this.outlet=o,this.component=a,this._futureSnapshot=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(P(t=>gd(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(P(t=>gd(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function tf(t,e="emptyOnly"){const i=t.pathFromRoot;let n=0;if("always"!==e)for(n=i.length-1;n>=1;){const t=i[n],e=i[n-1];if(t.routeConfig&&""===t.routeConfig.path)n--;else{if(e.component)break;n--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(i.slice(n))}class ef{constructor(t,e,i,n,r,o,a,s,l,c,u){this.url=t,this.params=e,this.queryParams=i,this.fragment=n,this.data=r,this.outlet=o,this.component=a,this.routeConfig=s,this._urlSegment=l,this._lastPathIndex=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class nf extends Gd{constructor(t,e){super(e),this.url=t,rf(this,e)}toString(){return of(this._root)}}function rf(t,e){e.value._routerState=t,e.children.forEach(e=>rf(t,e))}function of(t){const e=t.children.length>0?` { ${t.children.map(of).join(", ")} } `:"";return`${t.value}${e}`}function af(t){if(t.snapshot){const e=t.snapshot,i=t._futureSnapshot;t.snapshot=i,vd(e.queryParams,i.queryParams)||t.queryParams.next(i.queryParams),e.fragment!==i.fragment&&t.fragment.next(i.fragment),vd(e.params,i.params)||t.params.next(i.params),function(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!vd(t[i],e[i]))return!1;return!0}(e.url,i.url)||t.url.next(i.url),vd(e.data,i.data)||t.data.next(i.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function sf(t,e){var i,n;return vd(t.params,e.params)&&Id(i=t.url,n=e.url)&&i.every((t,e)=>vd(t.parameters,n[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||sf(t.parent,e.parent))}function lf(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function cf(t,e,i,n,r){let o={};return n&&Cd(n,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new kd(i.root===t?e:function t(e,i,n){const r={};return Cd(e.children,(e,o)=>{r[o]=e===i?n:t(e,i,n)}),new Ed(e.segments,r)}(i.root,t,e),o,r)}class uf{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&lf(i[0]))throw new Error("Root segment cannot have matrix parameters");const n=i.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(n&&n!==wd(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class hf{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function pf(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function df(t,e,i){if(t||(t=new Ed([],{})),0===t.segments.length&&t.hasChildren())return ff(t,e,i);const n=function(t,e,i){let n=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(n>=i.length)return o;const e=t.segments[r],a=pf(i[n]),s=n<i.length-1?i[n+1]:null;if(r>0&&void 0===a)break;if(a&&s&&"object"==typeof s&&void 0===s.outlets){if(!_f(a,s,e))return o;n+=2}else{if(!_f(a,{},e))return o;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(t,e,i),r=i.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){const e=new Ed(t.segments.slice(0,n.pathIndex),{});return e.children.primary=new Ed(t.segments.slice(n.pathIndex),t.children),ff(e,0,r)}return n.match&&0===r.length?new Ed(t.segments,{}):n.match&&!t.hasChildren()?mf(t,e,i):n.match?ff(t,0,r):mf(t,e,i)}function ff(t,e,i){if(0===i.length)return new Ed(t.segments,{});{const n=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{[fd]:t}}(i),r={};return Cd(n,(i,n)=>{null!==i&&(r[n]=df(t.children[n],e,i))}),Cd(t.children,(t,e)=>{void 0===n[e]&&(r[e]=t)}),new Ed(t.segments,r)}}function mf(t,e,i){const n=t.segments.slice(0,e);let r=0;for(;r<i.length;){if("object"==typeof i[r]&&null!==i[r]&&void 0!==i[r].outlets){const t=gf(i[r].outlets);return new Ed(n,t)}if(0===r&&lf(i[0])){n.push(new Pd(t.segments[e].path,i[0])),r++;continue}const o=pf(i[r]),a=r<i.length-1?i[r+1]:null;o&&a&&lf(a)?(n.push(new Pd(o,yf(a))),r+=2):(n.push(new Pd(o,{})),r++)}return new Ed(n,{})}function gf(t){const e={};return Cd(t,(t,i)=>{null!==t&&(e[i]=mf(new Ed([],{}),0,t))}),e}function yf(t){const e={};return Cd(t,(t,i)=>e[i]=""+t),e}function _f(t,e,i){return t==i.path&&vd(e,i.parameters)}class vf{constructor(t,e,i,n){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=n}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),af(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const n=Xd(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,n[e],i),delete n[e]}),Cd(n,(t,e)=>{this.deactivateRouteAndItsChildren(t,i)})}deactivateRoutes(t,e,i){const n=t.value,r=e?e.value:null;if(n===r)if(n.component){const r=i.getContext(n.outlet);r&&this.deactivateChildRoutes(t,e,r.children)}else this.deactivateChildRoutes(t,e,i);else r&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet);if(i&&i.outlet){const e=i.outlet.detach(),n=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:n})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet);if(i){const n=Xd(t),r=t.value.component?i.children:e;Cd(n,(t,e)=>this.deactivateRouteAndItsChildren(t,r)),i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated())}}activateChildRoutes(t,e,i){const n=Xd(e);t.children.forEach(t=>{this.activateRoutes(t,n[t.value.outlet],i),this.forwardEvent(new pd(t.value.snapshot))}),t.children.length&&this.forwardEvent(new ud(t.value.snapshot))}activateRoutes(t,e,i){const n=t.value,r=e?e.value:null;if(af(n),n===r)if(n.component){const r=i.getOrCreateContext(n.outlet);this.activateChildRoutes(t,e,r.children)}else this.activateChildRoutes(t,e,i);else if(n.component){const e=i.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){const t=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),bf(t.route)}else{const i=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(n.snapshot),r=i?i.module.componentFactoryResolver:null;e.attachRef=null,e.route=n,e.resolver=r,e.outlet&&e.outlet.activateWith(n,r),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,i)}}function bf(t){af(t.value),t.children.forEach(bf)}class xf{constructor(t,e){this.routes=t,this.module=e}}function wf(t){return"function"==typeof t}function Cf(t){return t instanceof kd}const Sf=Symbol("INITIAL_VALUE");function Tf(){return lp(t=>qh(...t.map(t=>t.pipe(Kh(1),tp(Sf)))).pipe(fp((t,e)=>{let i=!1;return e.reduce((t,n,r)=>{if(t!==Sf)return t;if(n===Sf&&(i=!0),!i){if(!1===n)return n;if(r===e.length-1||Cf(n))return n}return t},t)},Sf),wp(t=>t!==Sf),P(t=>Cf(t)?t:!0===t),Kh(1)))}class kf{constructor(t){this.segmentGroup=t||null}}class Ef{constructor(t){this.urlTree=t}}function Pf(t){return new b(e=>e.error(new kf(t)))}function If(t){return new b(e=>e.error(new Ef(t)))}function Mf(t){return new b(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Af{constructor(t,e,i,n,r){this.configLoader=e,this.urlSerializer=i,this.urlTree=n,this.config=r,this.allowRedirects=!0,this.ngModule=t.get(oe)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,fd).pipe(P(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(qp(t=>{if(t instanceof Ef)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof kf)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,fd).pipe(P(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(qp(t=>{if(t instanceof kf)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,i){const n=t.segments.length>0?new Ed([],{[fd]:t}):t;return new kd(n,e,i)}expandSegmentGroup(t,e,i,n){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe(P(t=>new Ed([],t))):this.expandSegment(t,i,e,i.segments,n,!0)}expandChildren(t,e,i){return function(t,e){if(0===Object.keys(t).length)return Fh({});const i=[],n=[],r={};return Cd(t,(t,o)=>{const a=e(o,t).pipe(P(t=>r[o]=t));o===fd?i.push(a):n.push(a)}),Fh.apply(null,i.concat(n)).pipe(Yh(),function(t,e){const i=arguments.length>=2;return n=>n.pipe(t?wp((e,i)=>t(e,i,n)):y,Op(1),i?Vp(e):Rp(()=>new Ap))}(),P(()=>r))}(i.children,(i,n)=>this.expandSegmentGroup(t,e,n,i))}expandSegment(t,e,i,n,r,o){return Fh(...i).pipe(Gp(a=>this.expandSegmentAgainstRoute(t,e,i,a,n,r,o).pipe(qp(t=>{if(t instanceof kf)return Fh(null);throw t}))),Wp(t=>!!t),qp((t,i)=>{if(t instanceof Ap||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,n,r))return Fh(new Ed([],{}));throw new kf(e)}throw t}))}noLeftoversInUrl(t,e,i){return 0===e.length&&!t.children[i]}expandSegmentAgainstRoute(t,e,i,n,r,o,a){return Df(n)!==o?Pf(e):void 0===n.redirectTo?this.matchSegmentAgainstRoute(t,e,n,r):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,n,r,o):Pf(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,n,r,o){return"**"===n.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,n,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,n,r,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,n){const r=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?If(r):this.lineralizeSegments(i,r).pipe(U(i=>{const r=new Ed(i,{});return this.expandSegment(t,r,e,i,n,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,n,r,o){const{matched:a,consumedSegments:s,lastChild:l,positionalParamSegments:c}=zf(e,n,r);if(!a)return Pf(e);const u=this.applyRedirectCommands(s,n.redirectTo,c);return n.redirectTo.startsWith("/")?If(u):this.lineralizeSegments(n,u).pipe(U(n=>this.expandSegment(t,e,i,n.concat(r.slice(l)),o,!1)))}matchSegmentAgainstRoute(t,e,i,n){if("**"===i.path)return i.loadChildren?this.configLoader.load(t.injector,i).pipe(P(t=>(i._loadedConfig=t,new Ed(n,{})))):Fh(new Ed(n,{}));const{matched:r,consumedSegments:o,lastChild:a}=zf(e,i,n);if(!r)return Pf(e);const s=n.slice(a);return this.getChildConfig(t,i,n).pipe(U(t=>{const i=t.module,n=t.routes,{segmentGroup:r,slicedSegments:a}=function(t,e,i,n){return i.length>0&&function(t,e,i){return i.some(i=>Lf(t,e,i)&&Df(i)!==fd)}(t,i,n)?{segmentGroup:Of(new Ed(e,function(t,e){const i={};i.primary=e;for(const n of t)""===n.path&&Df(n)!==fd&&(i[Df(n)]=new Ed([],{}));return i}(n,new Ed(i,t.children)))),slicedSegments:[]}:0===i.length&&function(t,e,i){return i.some(i=>Lf(t,e,i))}(t,i,n)?{segmentGroup:Of(new Ed(t.segments,function(t,e,i,n){const r={};for(const o of i)Lf(t,e,o)&&!n[Df(o)]&&(r[Df(o)]=new Ed([],{}));return Object.assign(Object.assign({},n),r)}(t,i,n,t.children))),slicedSegments:i}:{segmentGroup:t,slicedSegments:i}}(e,o,s,n);return 0===a.length&&r.hasChildren()?this.expandChildren(i,n,r).pipe(P(t=>new Ed(o,t))):0===n.length&&0===a.length?Fh(new Ed(o,{})):this.expandSegment(i,r,n,a,fd,!0).pipe(P(t=>new Ed(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,i){return e.children?Fh(new xf(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Fh(e._loadedConfig):this.runCanLoadGuards(t.injector,e,i).pipe(U(i=>i?this.configLoader.load(t.injector,e).pipe(P(t=>(e._loadedConfig=t,t))):function(t){return new b(e=>e.error(yd(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Fh(new xf([],t))}runCanLoadGuards(t,e,i){const n=e.canLoad;return n&&0!==n.length?Fh(n.map(n=>{const r=t.get(n);let o;if(function(t){return t&&wf(t.canLoad)}(r))o=r.canLoad(e,i);else{if(!wf(r))throw new Error("Invalid CanLoad guard");o=r(e,i)}return Sd(o)})).pipe(Tf(),ip(t=>{if(!Cf(t))return;const e=yd(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),P(t=>!0===t)):Fh(!0)}lineralizeSegments(t,e){let i=[],n=e.root;for(;;){if(i=i.concat(n.segments),0===n.numberOfChildren)return Fh(i);if(n.numberOfChildren>1||!n.children.primary)return Mf(t.redirectTo);n=n.children.primary}}applyRedirectCommands(t,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreatreUrlTree(t,e,i,n){const r=this.createSegmentGroup(t,e.root,i,n);return new kd(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Cd(t,(t,n)=>{if("string"==typeof t&&t.startsWith(":")){const r=t.substring(1);i[n]=e[r]}else i[n]=t}),i}createSegmentGroup(t,e,i,n){const r=this.createSegments(t,e.segments,i,n);let o={};return Cd(e.children,(e,r)=>{o[r]=this.createSegmentGroup(t,e,i,n)}),new Ed(r,o)}createSegments(t,e,i,n){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,n):this.findOrReturn(e,i))}findPosParam(t,e,i){const n=i[e.path.substring(1)];if(!n)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return n}findOrReturn(t,e){let i=0;for(const n of e){if(n.path===t.path)return e.splice(i),n;i++}return t}}function zf(t,e,i){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||i.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const n=(e.matcher||_d)(i,t,e);return n?{matched:!0,consumedSegments:n.consumed,lastChild:n.consumed.length,positionalParamSegments:n.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Of(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Ed(t.segments.concat(e.segments),e.children)}return t}function Lf(t,e,i){return(!(t.hasChildren()||e.length>0)||"full"!==i.pathMatch)&&""===i.path&&void 0!==i.redirectTo}function Df(t){return t.outlet||fd}class Rf{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Bf{constructor(t,e){this.component=t,this.route=e}}function Ff(t,e,i){const n=t._root;return function t(e,i,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const a=Xd(i);return e.children.forEach(e=>{!function(e,i,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const a=e.value,s=i?i.value:null,l=n?n.getContext(e.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){const c=function(t,e,i){if("function"==typeof i)return i(t,e);switch(i){case"pathParamsChange":return!Id(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Id(t.url,e.url)||!vd(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sf(t,e)||!vd(t.queryParams,e.queryParams);case"paramsChange":default:return!sf(t,e)}}(s,a,a.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Rf(r)):(a.data=s.data,a._resolvedData=s._resolvedData),t(e,i,a.component?l?l.children:null:n,r,o),c&&l&&l.outlet&&l.outlet.isActivated&&o.canDeactivateChecks.push(new Bf(l.outlet.component,s))}else s&&Vf(i,l,o),o.canActivateChecks.push(new Rf(r)),t(e,null,a.component?l?l.children:null:n,r,o)}(e,a[e.value.outlet],n,r.concat([e.value]),o),delete a[e.value.outlet]}),Cd(a,(t,e)=>Vf(t,n.getContext(e),o)),o}(n,e?e._root:null,i,[n.value])}function Nf(t,e,i){const n=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(n?n.module.injector:i).get(t)}function Vf(t,e,i){const n=Xd(t),r=t.value;Cd(n,(t,n)=>{Vf(t,r.component?e?e.children.getContext(n):null:e,i)}),i.canDeactivateChecks.push(new Bf(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function jf(t,e){return null!==t&&e&&e(new hd(t)),Fh(!0)}function Uf(t,e){return null!==t&&e&&e(new cd(t)),Fh(!0)}function qf(t,e,i){const n=e.routeConfig?e.routeConfig.canActivate:null;return n&&0!==n.length?Fh(n.map(n=>zp(()=>{const r=Nf(n,e,i);let o;if(function(t){return t&&wf(t.canActivate)}(r))o=Sd(r.canActivate(e,t));else{if(!wf(r))throw new Error("Invalid CanActivate guard");o=Sd(r(e,t))}return o.pipe(Wp())}))).pipe(Tf()):Fh(!0)}function Zf(t,e,i){const n=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>zp(()=>Fh(e.guards.map(r=>{const o=Nf(r,e.node,i);let a;if(function(t){return t&&wf(t.canActivateChild)}(o))a=Sd(o.canActivateChild(n,t));else{if(!wf(o))throw new Error("Invalid CanActivateChild guard");a=Sd(o(n,t))}return a.pipe(Wp())})).pipe(Tf())));return Fh(r).pipe(Tf())}class Hf{}class Gf{constructor(t,e,i,n,r,o){this.rootComponentType=t,this.config=e,this.urlTree=i,this.url=n,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=o}recognize(){try{const t=Kf(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,fd),i=new ef([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},fd,this.rootComponentType,null,this.urlTree.root,-1,{}),n=new Kd(i,e),r=new nf(this.url,n);return this.inheritParamsAndData(r._root),Fh(r)}catch(t){return new b(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,i=tf(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,i)}processChildren(t,e){const i=Md(e,(e,i)=>this.processSegmentGroup(t,e,i));return function(t){const e={};t.forEach(t=>{const i=e[t.value.outlet];if(i){const e=i.url.map(t=>t.toString()).join("/"),n=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${n}'.`)}e[t.value.outlet]=t.value})}(i),i.sort((t,e)=>t.value.outlet===fd?-1:e.value.outlet===fd?1:t.value.outlet.localeCompare(e.value.outlet)),i}processSegment(t,e,i,n){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,i,n)}catch(r){if(!(r instanceof Hf))throw r}if(this.noLeftoversInUrl(e,i,n))return[];throw new Hf}noLeftoversInUrl(t,e,i){return 0===e.length&&!t.children[i]}processSegmentAgainstRoute(t,e,i,n){if(t.redirectTo)throw new Hf;if((t.outlet||fd)!==n)throw new Hf;let r,o=[],a=[];if("**"===t.path){const o=i.length>0?wd(i).parameters:{};r=new ef(i,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Yf(t),n,t.component,t,Wf(e),$f(e)+i.length,Jf(t))}else{const s=function(t,e,i){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||i.length>0))throw new Hf;return{consumedSegments:[],lastChild:0,parameters:{}}}const n=(e.matcher||_d)(i,t,e);if(!n)throw new Hf;const r={};Cd(n.posParams,(t,e)=>{r[e]=t.path});const o=n.consumed.length>0?Object.assign(Object.assign({},r),n.consumed[n.consumed.length-1].parameters):r;return{consumedSegments:n.consumed,lastChild:n.consumed.length,parameters:o}}(e,t,i);o=s.consumedSegments,a=i.slice(s.lastChild),r=new ef(o,s.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Yf(t),n,t.component,t,Wf(e),$f(e)+o.length,Jf(t))}const s=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:c}=Kf(e,o,a,s,this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const t=this.processChildren(s,l);return[new Kd(r,t)]}if(0===s.length&&0===c.length)return[new Kd(r,[])];const u=this.processSegment(s,l,c,fd);return[new Kd(r,u)]}}function Wf(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function $f(t){let e=t,i=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,i+=e._segmentIndexShift?e._segmentIndexShift:0;return i-1}function Kf(t,e,i,n,r){if(i.length>0&&function(t,e,i){return i.some(i=>Xf(t,e,i)&&Qf(i)!==fd)}(t,i,n)){const r=new Ed(e,function(t,e,i,n){const r={};r.primary=n,n._sourceSegment=t,n._segmentIndexShift=e.length;for(const o of i)if(""===o.path&&Qf(o)!==fd){const i=new Ed([],{});i._sourceSegment=t,i._segmentIndexShift=e.length,r[Qf(o)]=i}return r}(t,e,n,new Ed(i,t.children)));return r._sourceSegment=t,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:[]}}if(0===i.length&&function(t,e,i){return i.some(i=>Xf(t,e,i))}(t,i,n)){const o=new Ed(t.segments,function(t,e,i,n,r,o){const a={};for(const s of n)if(Xf(t,i,s)&&!r[Qf(s)]){const i=new Ed([],{});i._sourceSegment=t,i._segmentIndexShift="legacy"===o?t.segments.length:e.length,a[Qf(s)]=i}return Object.assign(Object.assign({},r),a)}(t,e,i,n,t.children,r));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:i}}const o=new Ed(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:i}}function Xf(t,e,i){return(!(t.hasChildren()||e.length>0)||"full"!==i.pathMatch)&&""===i.path&&void 0===i.redirectTo}function Qf(t){return t.outlet||fd}function Yf(t){return t.data||{}}function Jf(t){return t.resolve||{}}function tm(t){return function(e){return e.pipe(lp(e=>{const i=t(e);return i?F(i).pipe(P(()=>e)):F([e])}))}}class em extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}let im=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=ve({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Da(0,"router-outlet")},directives:function(){return[bm]},encapsulation:2}),t})();function nm(t,e=""){for(let i=0;i<t.length;i++){const n=t[i];rm(n,om(e,n))}}function rm(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==fd)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&nm(t.children,e)}function om(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function am(t){const e=t.children&&t.children.map(am),i=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!i.component&&(e||i.loadChildren)&&i.outlet&&i.outlet!==fd&&(i.component=im),i}const sm=new qt("ROUTES");class lm{constructor(t,e,i,n){this.loader=t,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=n}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(P(i=>{this.onLoadEndListener&&this.onLoadEndListener(e);const n=i.create(t);return new xf(xd(n.injector.get(sm)).map(am),n)}))}loadModuleFactory(t){return"string"==typeof t?F(this.loader.load(t)):Sd(t()).pipe(U(t=>t instanceof ae?Fh(t):F(this.compiler.compileModuleAsync(t))))}}class cm{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new um,this.attachRef=null}}class um{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const i=this.getOrCreateContext(t);i.outlet=e,this.contexts.set(t,i)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new cm,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class hm{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function pm(t){throw t}function dm(t,e,i){return e.parse("/")}function fm(t,e){return Fh(null)}let mm=(()=>{class t{constructor(t,e,i,n,r,o,a,s){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=i,this.location=n,this.config=s,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new T,this.errorHandler=pm,this.malformedUriErrorHandler=dm,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:fm,afterPreactivation:fm},this.urlHandlingStrategy=new hm,this.routeReuseStrategy=new em,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=r.get(oe),this.console=r.get(nc);const l=r.get(gc);this.isNgZoneEnabled=l instanceof gc,this.resetConfig(s),this.currentUrlTree=new kd(new Ed([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new lm(o,a,t=>this.triggerEvent(new sd(t)),t=>this.triggerEvent(new ld(t))),this.routerState=Yd(this.currentUrlTree,this.rootComponentType),this.transitions=new Bh({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(wp(t=>0!==t.id),P(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),lp(t=>{let i=!1,n=!1;return Fh(t).pipe(ip(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),lp(t=>{const i=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||i)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Fh(t).pipe(lp(t=>{const i=this.transitions.getValue();return e.next(new Yp(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),i!==this.transitions.getValue()?Wh:[t]}),lp(t=>Promise.resolve(t)),(n=this.ngModule.injector,r=this.configLoader,o=this.urlSerializer,a=this.config,function(t){return t.pipe(lp(t=>function(t,e,i,n,r){return new Af(t,e,i,n,r).apply()}(n,r,o,t.extractedUrl,a).pipe(P(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),ip(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,i,n,r){return function(o){return o.pipe(U(o=>function(t,e,i,n,r="emptyOnly",o="legacy"){return new Gf(t,e,i,n,r,o).recognize()}(t,e,o.urlAfterRedirects,i(o.urlAfterRedirects),n,r).pipe(P(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),ip(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),ip(t=>{const i=new id(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(i)}));var n,r,o,a;if(i&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:i,extractedUrl:n,source:r,restoredState:o,extras:a}=t,s=new Yp(i,this.serializeUrl(n),r,o);e.next(s);const l=Yd(n,this.rootComponentType).snapshot;return Fh(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:n,extras:Object.assign(Object.assign({},a),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Wh}),tm(t=>{const{targetSnapshot:e,id:i,extractedUrl:n,rawUrl:r,extras:{skipLocationChange:o,replaceUrl:a}}=t;return this.hooks.beforePreactivation(e,{navigationId:i,appliedUrlTree:n,rawUrlTree:r,skipLocationChange:!!o,replaceUrl:!!a})}),ip(t=>{const e=new nd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),P(t=>Object.assign(Object.assign({},t),{guards:Ff(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(i){return i.pipe(U(i=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=i;return 0===a.length&&0===o.length?Fh(Object.assign(Object.assign({},i),{guardsResult:!0})):function(t,e,i,n){return F(t).pipe(U(t=>function(t,e,i,n,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Fh(o.map(o=>{const a=Nf(o,e,r);let s;if(function(t){return t&&wf(t.canDeactivate)}(a))s=Sd(a.canDeactivate(t,e,i,n));else{if(!wf(a))throw new Error("Invalid CanDeactivate guard");s=Sd(a(t,e,i,n))}return s.pipe(Wp())})).pipe(Tf()):Fh(!0)}(t.component,t.route,i,e,n)),Wp(t=>!0!==t,!0))}(a,n,r,t).pipe(U(i=>i&&"boolean"==typeof i?function(t,e,i,n){return F(e).pipe(Gp(e=>F([Uf(e.route.parent,n),jf(e.route,n),Zf(t,e.path,i),qf(t,e.route,i)]).pipe(Yh(),Wp(t=>!0!==t,!0))),Wp(t=>!0!==t,!0))}(n,o,t,e):Fh(i)),P(t=>Object.assign(Object.assign({},i),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),ip(t=>{if(Cf(t.guardsResult)){const e=yd(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),ip(t=>{const e=new rd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),wp(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const i=new td(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(i),t.resolve(!1),!1}return!0}),tm(t=>{if(t.guards.canActivateChecks.length)return Fh(t).pipe(ip(t=>{const e=new od(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),lp(t=>{let i=!1;return Fh(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,function(t){return t.pipe(U(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return Fh(t);let o=0;return F(i).pipe(Gp(t=>function(t,e,i,n){return function(t,e,i,n){const r=Object.keys(t);if(0===r.length)return Fh({});const o={};return F(r).pipe(U(r=>function(t,e,i,n){const r=Nf(t,e,n);return Sd(r.resolve?r.resolve(e,i):r(e,i))}(t[r],e,i,n).pipe(ip(t=>{o[r]=t}))),Op(1),U(()=>Object.keys(o).length===r.length?Fh(o):Wh))}(t._resolve,t,e,n).pipe(P(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),tf(t,i).resolve),null)))}(t.route,e,n,r)),ip(()=>o++),Op(1),U(e=>o===i.length?Fh(t):Wh))}))}),ip({next:()=>i=!0,complete:()=>{if(!i){const i=new td(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(i),t.resolve(!1)}}}));var n,r}),ip(t=>{const e=new ad(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),tm(t=>{const{targetSnapshot:e,id:i,extractedUrl:n,rawUrl:r,extras:{skipLocationChange:o,replaceUrl:a}}=t;return this.hooks.afterPreactivation(e,{navigationId:i,appliedUrlTree:n,rawUrlTree:r,skipLocationChange:!!o,replaceUrl:!!a})}),P(t=>{const e=function(t,e,i){const n=function t(e,i,n){if(n&&e.shouldReuseRoute(i.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=i.value;const o=function(e,i,n){return i.children.map(i=>{for(const r of n.children)if(e.shouldReuseRoute(r.value.snapshot,i.value))return t(e,i,r);return t(e,i)})}(e,i,n);return new Kd(r,o)}{const n=e.retrieve(i.value);if(n){const t=n.route;return function t(e,i){if(e.value.routeConfig!==i.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==i.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");i.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)t(e.children[n],i.children[n])}(i,t),t}{const n=new Jd(new Bh((r=i.value).url),new Bh(r.params),new Bh(r.queryParams),new Bh(r.fragment),new Bh(r.data),r.outlet,r.component,r),o=i.children.map(i=>t(e,i));return new Kd(n,o)}}var r}(t,e._root,i?i._root:void 0);return new Qd(n,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),ip(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(r=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),P(t=>(new vf(o,t.targetRouterState,t.currentRouterState,a).activate(r),t))),ip({next(){i=!0},complete(){i=!0}}),$p(()=>{if(!i&&!n){this.resetUrlToCurrentUrlTree();const i=new td(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(i),t.resolve(!1)}this.currentNavigation=null}),qp(i=>{if(n=!0,(r=i)&&r.ngNavigationCancelingError){const n=Cf(i.url);n||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const r=new td(t.id,this.serializeUrl(t.extractedUrl),i.message);e.next(r),n?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(i.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const n=new ed(t.id,this.serializeUrl(t.extractedUrl),i);e.next(n);try{t.resolve(this.errorHandler(i))}catch(o){t.reject(o)}}var r;return Wh}));var r,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:i,urlTree:n}=e,r={replaceUrl:!0};if(i){const t=Object.assign({},i);delete t.navigationId,0!==Object.keys(t).length&&(r.state=t)}this.scheduleNavigation(n,t,i,r)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const i=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&i&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){nm(t),this.config=t.map(am),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:i,queryParams:n,fragment:r,preserveQueryParams:o,queryParamsHandling:a,preserveFragment:s}=e;Dn()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const l=i||this.routerState.root,c=s?this.currentUrlTree.fragment:r;let u=null;if(a)switch(a){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),n);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=n||null}else u=o?this.currentUrlTree.queryParams:n||null;return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,i,n,r){if(0===i.length)return cf(e.root,e.root,e,n,r);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new uf(!0,0,t);let e=0,i=!1;const n=t.reduce((t,n,r)=>{if("object"==typeof n&&null!=n){if(n.outlets){const e={};return Cd(n.outlets,(t,i)=>{e[i]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(n.segmentPath)return[...t,n.segmentPath]}return"string"!=typeof n?[...t,n]:0===r?(n.split("/").forEach((n,r)=>{0==r&&"."===n||(0==r&&""===n?i=!0:".."===n?e++:""!=n&&t.push(n))}),t):[...t,n]},[]);return new uf(i,e,n)}(i);if(o.toRoot())return cf(e.root,new Ed([],{}),e,n,r);const a=function(t,e,i){if(t.isAbsolute)return new hf(e.root,!0,0);if(-1===i.snapshot._lastPathIndex){const t=i.snapshot._urlSegment;return new hf(t,t===e.root,0)}const n=lf(t.commands[0])?0:1;return function(t,e,i){let n=t,r=e,o=i;for(;o>r;){if(o-=r,n=n.parent,!n)throw new Error("Invalid number of '../'");r=n.segments.length}return new hf(n,!1,r-o)}(i.snapshot._urlSegment,i.snapshot._lastPathIndex+n,t.numberOfDoubleDots)}(o,e,t),s=a.processChildren?ff(a.segmentGroup,a.index,o.commands):df(a.segmentGroup,a.index,o.commands);return cf(a.segmentGroup,s,e,n,r)}(l,this.currentUrlTree,t,u,c)}navigateByUrl(t,e={skipLocationChange:!1}){Dn()&&this.isNgZoneEnabled&&!gc.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const i=Cf(t)?t:this.parseUrl(t),n=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(n,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const i=t[e];if(null==i)throw new Error(`The requested path contains ${i} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(i){e=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return e}isActive(t,e){if(Cf(t))return Td(this.currentUrlTree,t,e);const i=this.parseUrl(t);return Td(this.currentUrlTree,i,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,i)=>{const n=t[i];return null!=n&&(e[i]=n),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Jp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,i,n,r){const o=this.getTransition(),a="imperative"!==e&&"imperative"===(null==o?void 0:o.source),s=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(a&&s)return Promise.resolve(!0);let l,c,u;r?(l=r.resolve,c=r.reject,u=r.promise):u=new Promise((t,e)=>{l=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:n,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,i,n){const r=this.urlSerializer.serialize(t);n=n||{},this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,"",Object.assign(Object.assign({},n),{navigationId:i})):this.location.go(r,"",Object.assign(Object.assign({},n),{navigationId:i}))}resetStateAndUrl(t,e,i){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(te(Wo),te(Ad),te(um),te(lu),te(la),te(Bc),te(dc),te(void 0))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),gm=(()=>{class t{constructor(t,e,i,n,r){this.router=t,this.route=e,this.commands=[],this.onChanges=new T,null==i&&n.setAttribute(r.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Dn()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:_m(this.skipLocationChange),replaceUrl:_m(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:_m(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:_m(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(Ia(mm),Ia(Jd),Ma("tabindex"),Ia(Zs),Ia(Vs))},t.\u0275dir=Te({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&Na("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Ve]}),t})(),ym=(()=>{class t{constructor(t,e,i){this.router=t,this.route=e,this.locationStrategy=i,this.commands=[],this.onChanges=new T,this.subscription=t.events.subscribe(t=>{t instanceof Jp&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Dn()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,i,n,r){if(0!==t||e||i||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:_m(this.skipLocationChange),replaceUrl:_m(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:_m(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:_m(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(Ia(mm),Ia(Jd),Ia(nu))},t.\u0275dir=Te({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&Na("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)})),2&t&&(_s("href",e.href,or),Ta("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Ve]}),t})();function _m(t){return""===t||!!t}let vm=(()=>{class t{constructor(t,e,i,n,r,o){this.router=t,this.element=e,this.renderer=i,this.cdr=n,this.link=r,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof Jp&&this.update()})}ngAfterContentInit(){F([this.links.changes,this.linksWithHrefs.changes,Fh(null)]).pipe(G()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=F(e).pipe(G()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(Ia(mm),Ia(Vs),Ia(Zs),Ia(Ho),Ia(gm,8),Ia(ym,8))},t.\u0275dir=Te({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,i){var n;1&t&&(Zl(i,gm,!0),Zl(i,ym,!0)),2&t&&(Vl(n=Hl())&&(e.links=n),Vl(n=Hl())&&(e.linksWithHrefs=n))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[Ve]}),t})(),bm=(()=>{class t{constructor(t,e,i,n,r){this.parentContexts=t,this.location=e,this.resolver=i,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new Il,this.deactivateEvents=new Il,this.name=n||fd,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const i=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),n=this.parentContexts.getOrCreateContext(this.name).children,r=new xm(t,n,this.location.injector);this.activated=this.location.createComponent(i,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Ia(um),Ia(pl),Ia(Ns),Ma("name"),Ia(Ho))},t.\u0275dir=Te({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class xm{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Jd?this.route:t===um?this.childContexts:this.parent.get(t,e)}}class wm{}class Cm{preload(t,e){return Fh(null)}}let Sm=(()=>{class t{constructor(t,e,i,n,r){this.router=t,this.injector=n,this.preloadingStrategy=r,this.loader=new lm(e,i,e=>t.triggerEvent(new sd(e)),e=>t.triggerEvent(new ld(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(wp(t=>t instanceof Jp),Gp(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(oe);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const i=[];for(const n of e)if(n.loadChildren&&!n.canLoad&&n._loadedConfig){const t=n._loadedConfig;i.push(this.processRoutes(t.module,t.routes))}else n.loadChildren&&!n.canLoad?i.push(this.preloadConfig(t,n)):n.children&&i.push(this.processRoutes(t,n.children));return F(i).pipe(G(),P(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(U(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(te(mm),te(Bc),te(dc),te(la),te(wm))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),Tm=(()=>{class t{constructor(t,e,i={}){this.router=t,this.viewportScroller=e,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Yp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Jp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof dd&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new dd(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(te(mm),te(rh),te(void 0))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();const km=new qt("ROUTER_CONFIGURATION"),Em=new qt("ROUTER_FORROOT_GUARD"),Pm=[lu,{provide:Ad,useClass:zd},{provide:mm,useFactory:function(t,e,i,n,r,o,a,s={},l,c){const u=new mm(null,t,e,i,n,r,o,xd(a));if(l&&(u.urlHandlingStrategy=l),c&&(u.routeReuseStrategy=c),s.errorHandler&&(u.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(u.malformedUriErrorHandler=s.malformedUriErrorHandler),s.enableTracing){const t=Gc();u.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return s.onSameUrlNavigation&&(u.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(u.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.urlUpdateStrategy&&(u.urlUpdateStrategy=s.urlUpdateStrategy),s.relativeLinkResolution&&(u.relativeLinkResolution=s.relativeLinkResolution),u},deps:[Ad,um,lu,la,Bc,dc,sm,km,[class{},new ct],[class{},new ct]]},um,{provide:Jd,useFactory:function(t){return t.routerState.root},deps:[mm]},{provide:Bc,useClass:Vc},Sm,Cm,class{preload(t,e){return e().pipe(qp(()=>Fh(null)))}},{provide:km,useValue:{enableTracing:!1}}];function Im(){return new Mc("Router",mm)}let Mm=(()=>{class t{constructor(t,e){}static forRoot(e,i){return{ngModule:t,providers:[Pm,Lm(e),{provide:Em,useFactory:Om,deps:[[mm,new ct,new ht]]},{provide:km,useValue:i||{}},{provide:nu,useFactory:zm,deps:[$c,[new lt(ou),new ct],km]},{provide:Tm,useFactory:Am,deps:[mm,rh,km]},{provide:wm,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:Cm},{provide:Mc,multi:!0,useFactory:Im},[Dm,{provide:Kl,multi:!0,useFactory:Rm,deps:[Dm]},{provide:Fm,useFactory:Bm,deps:[Dm]},{provide:ic,multi:!0,useExisting:Fm}]]}}static forChild(e){return{ngModule:t,providers:[Lm(e)]}}}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)(te(Em,8),te(mm,8))}}),t})();function Am(t,e,i){return i.scrollOffset&&e.setOffset(i.scrollOffset),new Tm(t,e,i)}function zm(t,e,i={}){return i.useHash?new su(t,e):new au(t,e)}function Om(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Lm(t){return[{provide:ca,multi:!0,useValue:t},{provide:sm,multi:!0,useValue:t}]}let Dm=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new T}appInitializer(){return this.injector.get(Xc,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),i=this.injector.get(mm),n=this.injector.get(km);if(this.isLegacyDisabled(n)||this.isLegacyEnabled(n))t(!0);else if("disabled"===n.initialNavigation)i.setUpLocationChangeListener(),t(!0);else{if("enabled"!==n.initialNavigation)throw new Error(`Invalid initialNavigation options: '${n.initialNavigation}'`);i.hooks.afterPreactivation=()=>this.initNavigation?Fh(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),i.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(km),i=this.injector.get(Sm),n=this.injector.get(Tm),r=this.injector.get(mm),o=this.injector.get(Dc);t===o.components[0]&&(this.isLegacyEnabled(e)?r.initialNavigation():this.isLegacyDisabled(e)&&r.setUpLocationChangeListener(),i.setUpPreloading(),n.init(),r.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(te(la))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();function Rm(t){return t.appInitializer.bind(t)}function Bm(t){return t.bootstrapListener.bind(t)}const Fm=new qt("Router Initializer");class Nm{}class Vm{}class jm{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const i=t.slice(0,e),n=i.toLowerCase(),r=t.slice(e+1).trim();this.maybeSetNormalizedName(i,n),this.headers.has(n)?this.headers.get(n).push(r):this.headers.set(n,[r])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const n=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(n,i),this.maybeSetNormalizedName(e,n))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof jm?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new jm;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof jm?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const n=("a"===t.op?this.headers.get(e):void 0)||[];n.push(...i),this.headers.set(e,n);break;case"d":const r=t.value;if(r){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===r.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Um{encodeKey(t){return qm(t)}encodeValue(t){return qm(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function qm(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Zm{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Um,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const i=new Map;return t.length>0&&t.split("&").forEach(t=>{const n=t.indexOf("="),[r,o]=-1==n?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,n)),e.decodeValue(t.slice(n+1))],a=i.get(r)||[];a.push(o),i.set(r,a)}),i}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e];this.map.set(e,Array.isArray(i)?i:[i])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Zm({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const i=e.indexOf(t.value);-1!==i&&e.splice(i,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Hm(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Gm(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Wm(t){return"undefined"!=typeof FormData&&t instanceof FormData}class $m{constructor(t,e,i,n){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||n?(this.body=void 0!==i?i:null,r=n):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new jm),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const i=e.indexOf("?");this.urlWithParams=e+(-1===i?"?":i<e.length-1?"&":"")+t}}else this.params=new Zm,this.urlWithParams=e}serializeBody(){return null===this.body?null:Hm(this.body)||Gm(this.body)||Wm(this.body)||"string"==typeof this.body?this.body:this.body instanceof Zm?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Wm(this.body)?null:Gm(this.body)?this.body.type||null:Hm(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Zm?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,n=t.responseType||this.responseType,r=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let s=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(s=Object.keys(t.setHeaders).reduce((e,i)=>e.set(i,t.setHeaders[i]),s)),t.setParams&&(l=Object.keys(t.setParams).reduce((e,i)=>e.set(i,t.setParams[i]),l)),new $m(e,i,r,{params:l,headers:s,reportProgress:a,responseType:n,withCredentials:o})}}var Km=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Xm{constructor(t,e=200,i="OK"){this.headers=t.headers||new jm,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Qm extends Xm{constructor(t={}){super(t),this.type=Km.ResponseHeader}clone(t={}){return new Qm({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Ym extends Xm{constructor(t={}){super(t),this.type=Km.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Ym({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Jm extends Xm{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function tg(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let eg=(()=>{class t{constructor(t){this.handler=t}request(t,e,i={}){let n;if(t instanceof $m)n=t;else{let r=void 0;r=i.headers instanceof jm?i.headers:new jm(i.headers);let o=void 0;i.params&&(o=i.params instanceof Zm?i.params:new Zm({fromObject:i.params})),n=new $m(t,e,void 0!==i.body?i.body:null,{headers:r,params:o,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const r=Fh(n).pipe(Gp(t=>this.handler.handle(t)));if(t instanceof $m||"events"===i.observe)return r;const o=r.pipe(wp(t=>t instanceof Ym));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return o.pipe(P(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(P(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(P(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(P(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Zm).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,i={}){return this.request("PATCH",t,tg(i,e))}post(t,e,i={}){return this.request("POST",t,tg(i,e))}put(t,e,i={}){return this.request("PUT",t,tg(i,e))}}return t.\u0275fac=function(e){return new(e||t)(te(Nm))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();class ig{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const ng=new qt("HTTP_INTERCEPTORS");let rg=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();const og=/^\)\]\}',?\n/;class ag{}let sg=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),lg=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new b(e=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((t,e)=>i.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&i.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();i.responseType="json"!==e?e:"text"}const n=t.serializeBody();let r=null;const o=()=>{if(null!==r)return r;const e=1223===i.status?204:i.status,n=i.statusText||"OK",o=new jm(i.getAllResponseHeaders()),a=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(i)||t.url;return r=new Qm({headers:o,status:e,statusText:n,url:a}),r},a=()=>{let{headers:n,status:r,statusText:a,url:s}=o(),l=null;204!==r&&(l=void 0===i.response?i.responseText:i.response),0===r&&(r=l?200:0);let c=r>=200&&r<300;if("json"===t.responseType&&"string"==typeof l){const t=l;l=l.replace(og,"");try{l=""!==l?JSON.parse(l):null}catch(u){l=t,c&&(c=!1,l={error:u,text:l})}}c?(e.next(new Ym({body:l,headers:n,status:r,statusText:a,url:s||void 0})),e.complete()):e.error(new Jm({error:l,headers:n,status:r,statusText:a,url:s||void 0}))},s=t=>{const{url:n}=o(),r=new Jm({error:t,status:i.status||0,statusText:i.statusText||"Unknown Error",url:n||void 0});e.error(r)};let l=!1;const c=n=>{l||(e.next(o()),l=!0);let r={type:Km.DownloadProgress,loaded:n.loaded};n.lengthComputable&&(r.total=n.total),"text"===t.responseType&&i.responseText&&(r.partialText=i.responseText),e.next(r)},u=t=>{let i={type:Km.UploadProgress,loaded:t.loaded};t.lengthComputable&&(i.total=t.total),e.next(i)};return i.addEventListener("load",a),i.addEventListener("error",s),t.reportProgress&&(i.addEventListener("progress",c),null!==n&&i.upload&&i.upload.addEventListener("progress",u)),i.send(n),e.next({type:Km.Sent}),()=>{i.removeEventListener("error",s),i.removeEventListener("load",a),t.reportProgress&&(i.removeEventListener("progress",c),null!==n&&i.upload&&i.upload.removeEventListener("progress",u)),i.readyState!==i.DONE&&i.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(te(ag))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();const cg=new qt("XSRF_COOKIE_NAME"),ug=new qt("XSRF_HEADER_NAME");class hg{}let pg=(()=>{class t{constructor(t,e,i){this.doc=t,this.platform=e,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Vu(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(te(Wc),te(ec),te(cg))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),dg=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return e.handle(t);const n=this.tokenService.getToken();return null===n||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,n)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(te(hg),te(ug))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),fg=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(ng,[]);this.chain=t.reduceRight((t,e)=>new ig(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(te(Vm),te(la))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),mg=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:dg,useClass:rg}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:cg,useValue:e.cookieName}:[],e.headerName?{provide:ug,useValue:e.headerName}:[]]}}}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},providers:[dg,{provide:ng,useExisting:dg,multi:!0},{provide:hg,useClass:pg},{provide:cg,useValue:"XSRF-TOKEN"},{provide:ug,useValue:"X-XSRF-TOKEN"}]}),t})(),gg=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},providers:[eg,{provide:Nm,useClass:fg},lg,{provide:Vm,useExisting:lg},sg,{provide:ag,useExisting:sg}],imports:[[mg.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),yg=(()=>{class t{constructor(t){this.http=t,this.url="http://159.89.22.125:8080/giacomoLeopardi/"}findAll(){return this.http.get(this.url+"vediVisite")}save(t){return this.http.post(this.url+"visita",t)}deletePrenotazione(t){return this.http.delete(this.url+"cancellaVisita/"+t)}saveVisiteCancellate(t){return this.http.post(this.url+"visiteCancellate",t)}findVisiteCancellate(){return this.http.get(this.url+"visiteCancellate")}deleteVisiteCancellate(t){return this.http.delete(this.url+"cancellaVisitaCancellata/"+t)}saveVisiteAvvenute(t){return this.http.post(this.url+"visiteAvvenute",t)}findVisiteAvvenute(){return this.http.get(this.url+"visiteAvvenute")}deleteVisiteAvvenute(t){return this.http.delete(this.url+"cancellaVisitaAvvenuta/"+t)}prendiVisitaDalVisitatore(t){return this.http.get(this.url+"prendiVisitaUtente/"+t)}}return t.\u0275fac=function(e){return new(e||t)(te(eg))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function _g(...t){if(1===t.length){const e=t[0];if(l(e))return vg(e,null);if(c(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return vg(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return vg(t=1===t.length&&l(t[0])?t[0]:t,null).pipe(P(t=>e(...t)))}return vg(t,null)}function vg(t,e){return new b(i=>{const n=t.length;if(0===n)return void i.complete();const r=new Array(n);let o=0,a=0;for(let s=0;s<n;s++){const l=F(t[s]);let c=!1;i.add(l.subscribe({next:t=>{c||(c=!0,a++),r[s]=t},error:t=>i.error(t),complete:()=>{o++,o!==n&&c||(a===n&&i.next(e?e.reduce((t,e,i)=>(t[e]=r[i],t),{}):r),i.complete())}}))}})}const bg=new qt("NgValueAccessor"),xg={provide:bg,useExisting:Pt(()=>wg),multi:!0};let wg=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ia(Zs),Ia(Vs))},t.\u0275dir=Te({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&Na("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[Rs([xg])]}),t})();const Cg={provide:bg,useExisting:Pt(()=>Tg),multi:!0},Sg=new qt("CompositionEventMode");let Tg=(()=>{class t{constructor(t,e,i){this._renderer=t,this._elementRef=e,this._compositionMode=i,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Gc()?Gc().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(Ia(Zs),Ia(Vs),Ia(Sg,8))},t.\u0275dir=Te({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Na("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[Rs([Cg])]}),t})(),kg=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Te({type:t}),t})(),Eg=(()=>{class t extends kg{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Pg(e||t)},t.\u0275dir=Te({type:t,features:[pa]}),t})();const Pg=vn(Eg);class Ig extends kg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){}get asyncValidator(){}}class Mg{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let Ag=(()=>{class t extends Mg{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Ia(Ig,2))},t.\u0275dir=Te({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&ns("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[pa]}),t})(),zg=(()=>{class t extends Mg{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Ia(Eg,2))},t.\u0275dir=Te({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&ns("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[pa]}),t})();function Og(t){return null==t||0===t.length}function Lg(t){return null!=t&&"number"==typeof t.length}const Dg=new qt("NgValidators"),Rg=new qt("NgAsyncValidators"),Bg=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Fg{static min(t){return e=>{if(Og(e.value)||Og(t))return null;const i=parseFloat(e.value);return!isNaN(i)&&i<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Og(e.value)||Og(t))return null;const i=parseFloat(e.value);return!isNaN(i)&&i>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Og(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Og(t.value)||Bg.test(t.value)?null:{email:!0}}static minLength(t){return e=>Og(e.value)||!Lg(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>Lg(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Fg.nullValidator;let e,i;return"string"==typeof t?(i="","^"!==t.charAt(0)&&(i+="^"),i+=t,"$"!==t.charAt(t.length-1)&&(i+="$"),e=new RegExp(i)):(i=t.toString(),e=t),t=>{if(Og(t.value))return null;const n=t.value;return e.test(n)?null:{pattern:{requiredPattern:i,actualValue:n}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(Ng);return 0==e.length?null:function(t){return jg(Ug(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(Ng);return 0==e.length?null:function(t){return _g(Ug(t,e).map(Vg)).pipe(P(jg))}}}function Ng(t){return null!=t}function Vg(t){const e=Ba(t)?F(t):t;return Fa(e),e}function jg(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ug(t,e){return e.map(e=>e(t))}function qg(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}const Zg={provide:bg,useExisting:Pt(()=>Hg),multi:!0};let Hg=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ia(Zs),Ia(Vs))},t.\u0275dir=Te({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&Na("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[Rs([Zg])]}),t})();const Gg={provide:bg,useExisting:Pt(()=>$g),multi:!0};let Wg=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),$g=(()=>{class t{constructor(t,e,i,n){this._renderer=t,this._elementRef=e,this._registry=i,this._injector=n,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Ig),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(Ia(Zs),Ia(Vs),Ia(Wg),Ia(la))},t.\u0275dir=Te({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&Na("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Rs([Gg])]}),t})();const Kg={provide:bg,useExisting:Pt(()=>Xg),multi:!0};let Xg=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ia(Zs),Ia(Vs))},t.\u0275dir=Te({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&Na("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[Rs([Kg])]}),t})();const Qg={provide:bg,useExisting:Pt(()=>Jg),multi:!0};function Yg(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Jg=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const i=Yg(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",i)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(Ia(Zs),Ia(Vs))},t.\u0275dir=Te({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&Na("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Rs([Qg])]}),t})(),ty=(()=>{class t{constructor(t,e,i){this._element=t,this._renderer=e,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Yg(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(Ia(Vs),Ia(Zs),Ia(Jg,9))},t.\u0275dir=Te({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const ey={provide:bg,useExisting:Pt(()=>ny),multi:!0};function iy(t,e){return null==t?""+e:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let ny=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const i=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(i.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const i=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const n=t.item(e),r=this._getOptionValue(n.value);i.push(r)}}else{const t=e.options;for(let e=0;e<t.length;e++){const n=t.item(e);if(n.selected){const t=this._getOptionValue(n.value);i.push(t)}}}this.value=i,t(i)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(Ia(Zs),Ia(Vs))},t.\u0275dir=Te({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&Na("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Rs([ey])]}),t})(),ry=(()=>{class t{constructor(t,e,i){this._element=t,this._renderer=e,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(iy(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(iy(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(Ia(Vs),Ia(Zs),Ia(ny,9))},t.\u0275dir=Te({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function oy(t,e){t.validator=Fg.compose([t.validator,e.validator]),t.asyncValidator=Fg.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(i=>{t._pendingValue=i,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ay(t,e)})}(t,e),function(t,e){t.registerOnChange((t,i)=>{e.valueAccessor.writeValue(t),i&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ay(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function ay(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function sy(t){return null!=t?Fg.compose(qg(t)):null}function ly(t){return null!=t?Fg.composeAsync(qg(t)):null}const cy=[wg,Xg,Hg,Jg,ny,$g],uy="VALID",hy="INVALID",py="PENDING",dy="DISABLED";function fy(t){return(_y(t)?t.validators:t)||null}function my(t){return Array.isArray(t)?sy(t):t||null}function gy(t,e){return(_y(e)?e.asyncValidators:t)||null}function yy(t){return Array.isArray(t)?ly(t):t||null}function _y(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class vy{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=my(this._rawValidators),this._composedAsyncValidatorFn=yy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===uy}get invalid(){return this.status===hy}get pending(){return this.status==py}get disabled(){return this.status===dy}get enabled(){return this.status!==dy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=my(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=yy(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=py,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=dy,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=uy,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==uy&&this.status!==py||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dy:uy}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=py,this._hasOwnPendingAsyncValidator=!0;const e=Vg(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,i){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let n=t;return e.forEach(t=>{n=n instanceof xy?n.controls.hasOwnProperty(t)?n.controls[t]:null:n instanceof wy&&n.at(t)||null}),n}(this,t)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Il,this.statusChanges=new Il}_calculateStatus(){return this._allControlsDisabled()?dy:this.errors?hy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(py)?py:this._anyControlsHaveStatus(hy)?hy:uy}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){_y(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class by extends vy{constructor(t=null,e,i){super(fy(e),gy(i,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class xy extends vy{constructor(t,e,i){super(fy(e),gy(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((i,n)=>{i.reset(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e instanceof by?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,i)=>((e.enabled||this.disabled)&&(t[i]=e.value),t))}_reduceChildren(t,e){let i=t;return this._forEachChild((t,n)=>{i=e(i,t,n)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,i)=>{if(void 0===t[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class wy extends vy{constructor(t,e,i){super(fy(e),gy(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,i)=>{this.at(i)&&this.at(i).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((i,n)=>{i.reset(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof by?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,i)=>{if(void 0===t[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Cy={provide:Eg,useExisting:Pt(()=>Ty)},Sy=(()=>Promise.resolve(null))();let Ty=(()=>{class t extends Eg{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Il,this.form=new xy({},sy(t),ly(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Sy.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),oy(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Sy.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),function(t,e){const i=t.indexOf(e);i>-1&&t.splice(i,1)}(this._directives,t)})}addFormGroup(t){Sy.then(()=>{const e=this._findContainer(t.path),i=new xy({});(function(t,e){t.validator=Fg.compose([t.validator,e.validator]),t.asyncValidator=Fg.composeAsync([t.asyncValidator,e.asyncValidator])})(i,t),e.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Sy.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Sy.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(Ia(Dg,10),Ia(Rg,10))},t.\u0275dir=Te({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&Na("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Rs([Cy]),pa]}),t})();const ky={provide:Ig,useExisting:Pt(()=>Py)},Ey=(()=>Promise.resolve(null))();let Py=(()=>{class t extends Ig{constructor(t,e,i,n){super(),this.control=new by,this._registered=!1,this.update=new Il,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=i||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e);let i=void 0,n=void 0,r=void 0;return e.forEach(t=>{var e;t.constructor===Tg?i=t:(e=t,cy.some(t=>e.constructor===t)?n=t:r=t)}),r||n||i||null}(0,n)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const i=t.model;return!!i.isFirstChange()||!Object.is(e,i.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return sy(this._rawValidators)}get asyncValidator(){return ly(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){oy(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Ey.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,i=""===e||e&&"false"!==e;Ey.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(Ia(Eg,9),Ia(Dg,10),Ia(Rg,10),Ia(bg,10))},t.\u0275dir=Te({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Rs([ky]),pa,Ve]}),t})(),Iy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Te({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const My={provide:Dg,useExisting:Pt(()=>zy),multi:!0},Ay={provide:Dg,useExisting:Pt(()=>Oy),multi:!0};let zy=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()}validate(t){return this.required?Fg.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Te({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&Ta("required",e.required?"":null)},inputs:{required:"required"},features:[Rs([My])]}),t})(),Oy=(()=>{class t extends zy{validate(t){return this.required?Fg.requiredTrue(t):null}}return t.\u0275fac=function(e){return Ly(e||t)},t.\u0275dir=Te({type:t,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&Ta("required",e.required?"":null)},features:[Rs([Ay]),pa]}),t})();const Ly=vn(Oy),Dy={provide:Dg,useExisting:Pt(()=>Ry),multi:!0};let Ry=(()=>{class t{constructor(){this._validator=Fg.nullValidator}ngOnChanges(t){"minlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null==this.minlength?null:this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=Fg.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Te({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&Ta("minlength",e.minlength?e.minlength:null)},inputs:{minlength:"minlength"},features:[Rs([Dy]),Ve]}),t})();const By={provide:Dg,useExisting:Pt(()=>Fy),multi:!0};let Fy=(()=>{class t{constructor(){this._validator=Fg.nullValidator}ngOnChanges(t){"maxlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null!=this.maxlength?this._validator(t):null}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=Fg.maxLength("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Te({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&Ta("maxlength",e.maxlength?e.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Rs([By]),Ve]}),t})();const Ny={provide:Dg,useExisting:Pt(()=>Vy),multi:!0};let Vy=(()=>{class t{constructor(){this._validator=Fg.nullValidator}ngOnChanges(t){"pattern"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=Fg.pattern(this.pattern)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Te({type:t,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&Ta("pattern",e.pattern?e.pattern:null)},inputs:{pattern:"pattern"},features:[Rs([Ny]),Ve]}),t})(),jy=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)}}),t})(),Uy=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},providers:[Wg],imports:[jy]}),t})();function qy(t,e){if(1&t){const t=Ra();Oa(0,"tr",12),Oa(1,"td"),ms(2),La(),Oa(3,"td",13),ms(4),La(),Oa(5,"td",14),ms(6),La(),Oa(7,"td",15),ms(8),La(),Oa(9,"td",16),ms(10),La(),Oa(11,"td",17),ms(12),La(),Oa(13,"td",17),ms(14),La(),Oa(15,"td",18),ms(16),La(),Oa(17,"td",19),ms(18),La(),Oa(19,"td",20),ms(20),La(),Oa(21,"td",21),ms(22),La(),Oa(23,"td",22),Oa(24,"input",23),Na("ngModelChange",(function(i){return ui(t),e.$implicit.motivo=i})),La(),La(),Oa(25,"td"),Oa(26,"button",24),Na("click",(function(){ui(t);const i=e.$implicit;return Za(2).send(i)}))("click",(function(){ui(t);const i=e.$implicit;return Za(2).cancellaPrenotazione(i.id)})),ms(27,"ELIMINA LA VISITA"),La(),La(),Oa(28,"td"),Oa(29,"button",25),Na("click",(function(){ui(t);const i=e.$implicit;return Za(2).PrenotazioneCompletata(i)}))("click",(function(){ui(t);const i=e.$implicit;return Za(2).cancellaPrenotazione(i.id)})),ms(30,"CONFERMA LA AVVENUTA VISITA"),La(),La(),La()}if(2&t){const t=e.$implicit;Sr(2),gs(t.id),Sr(2),gs(t.data),Sr(2),gs(t.orario),Sr(2),gs(t.numcomponenti),Sr(2),gs(t.nome),Sr(2),gs(t.cognome),Sr(2),gs(t.professione),Sr(2),gs(t.cellulare),Sr(2),gs(t.paese),Sr(2),gs(t.citta),Sr(2),gs(t.infoAggiuntiva),Sr(2),Aa("ngModel",t.motivo)}}function Zy(t,e){if(1&t){const t=Ra();Oa(0,"tr"),Oa(1,"td"),ms(2),La(),Oa(3,"td",13),ms(4),La(),Oa(5,"td",14),ms(6),La(),Oa(7,"td",15),ms(8),La(),Oa(9,"td",16),ms(10),La(),Oa(11,"td",17),ms(12),La(),Oa(13,"td",17),ms(14),La(),Oa(15,"td",18),ms(16),La(),Oa(17,"td",19),ms(18),La(),Oa(19,"td",20),ms(20),La(),Oa(21,"td",21),ms(22),La(),Oa(23,"td",22),ms(24),La(),Oa(25,"td"),Oa(26,"button",26),Na("click",(function(){ui(t);const i=e.$implicit;return Za(2).cancellaVisitaCancellata(i.id)})),ms(27,"ELIMINA LA VISITA CANCELLATA"),La(),La(),La()}if(2&t){const t=e.$implicit;Sr(2),gs(t.id),Sr(2),gs(t.data),Sr(2),gs(t.orario),Sr(2),gs(t.numcomponenti),Sr(2),gs(t.nome),Sr(2),gs(t.cognome),Sr(2),gs(t.professione),Sr(2),gs(t.cellulare),Sr(2),gs(t.paese),Sr(2),gs(t.citta),Sr(2),gs(t.infoAggiuntiva),Sr(2),gs(t.motivo)}}function Hy(t,e){if(1&t){const t=Ra();Oa(0,"tr"),Oa(1,"td"),ms(2),La(),Oa(3,"td",13),ms(4),La(),Oa(5,"td",14),ms(6),La(),Oa(7,"td",15),ms(8),La(),Oa(9,"td",16),ms(10),La(),Oa(11,"td",17),ms(12),La(),Oa(13,"td",17),ms(14),La(),Oa(15,"td",18),ms(16),La(),Oa(17,"td",19),ms(18),La(),Oa(19,"td",20),ms(20),La(),Oa(21,"td",21),ms(22),La(),Oa(23,"td"),Oa(24,"button",26),Na("click",(function(){ui(t);const i=e.$implicit;return Za(2).cancellaVisitaAvvenuta(i.id)})),ms(25,"ELIMINA LA VISITA AVVENUTA"),La(),La(),La()}if(2&t){const t=e.$implicit;Sr(2),gs(t.id),Sr(2),gs(t.data),Sr(2),gs(t.orario),Sr(2),gs(t.numcomponenti),Sr(2),gs(t.nome),Sr(2),gs(t.cognome),Sr(2),gs(t.professione),Sr(2),gs(t.cellulare),Sr(2),gs(t.paese),Sr(2),gs(t.citta),Sr(2),gs(t.infoAggiuntiva)}}function Gy(t,e){if(1&t&&(Oa(0,"div",1),Oa(1,"div",2),Oa(2,"h1",3),ms(3,"Elenco delle visite prenotate"),La(),Oa(4,"div",4),Oa(5,"div",5),Oa(6,"div",6),Oa(7,"table",7),Oa(8,"thead",8),Oa(9,"tr"),Oa(10,"th",9),ms(11,"ID"),La(),Oa(12,"th",9),ms(13,"Data"),La(),Oa(14,"th",9),ms(15,"Orario"),La(),Oa(16,"th",9),ms(17,"Numero dei componenti"),La(),Oa(18,"th",9),ms(19,"Nome"),La(),Oa(20,"th",9),ms(21,"Cognome"),La(),Oa(22,"th",9),ms(23,"Professione"),La(),Oa(24,"th",9),ms(25,"Numero di telefono"),La(),Oa(26,"th",9),ms(27,"Paese"),La(),Oa(28,"th",9),ms(29,"Citt\xe0"),La(),Oa(30,"th",9),ms(31,"Info aggiuntive"),La(),Oa(32,"th",9),ms(33,"Motivo dell'eliminazione"),La(),Da(34,"th",9),Da(35,"th",9),La(),La(),Oa(36,"tbody",8),Ea(37,qy,31,12,"tr",10),La(),La(),La(),La(),La(),La(),Oa(38,"div",2),Oa(39,"h1",3),ms(40,"Elenco delle visite cancellate"),La(),Oa(41,"div",4),Oa(42,"div",5),Oa(43,"div",6),Oa(44,"table",7),Oa(45,"thead",8),Oa(46,"tr"),Oa(47,"th",9),ms(48,"ID"),La(),Oa(49,"th",9),ms(50,"Data"),La(),Oa(51,"th",9),ms(52,"Orario"),La(),Oa(53,"th",9),ms(54,"Numero dei componenti"),La(),Oa(55,"th",9),ms(56,"Nome"),La(),Oa(57,"th",9),ms(58,"Cognome"),La(),Oa(59,"th",9),ms(60,"Professione"),La(),Oa(61,"th",9),ms(62,"Numero di telefono"),La(),Oa(63,"th",9),ms(64,"Paese"),La(),Oa(65,"th",9),ms(66,"Citt\xe0"),La(),Oa(67,"th",9),ms(68,"Info aggiuntive"),La(),Oa(69,"th",9),ms(70,"Motivo dell'eliminazione"),La(),Da(71,"th",9),La(),La(),Oa(72,"tbody",8),Ea(73,Zy,28,12,"tr",11),La(),La(),La(),La(),La(),La(),Oa(74,"div",2),Oa(75,"h1",3),ms(76,"Elenco delle visite avvenute con successo"),La(),Oa(77,"div",4),Oa(78,"div",5),Oa(79,"div",6),Oa(80,"table",7),Oa(81,"thead",8),Oa(82,"tr"),Oa(83,"th",9),ms(84,"ID"),La(),Oa(85,"th",9),ms(86,"Data"),La(),Oa(87,"th",9),ms(88,"Orario"),La(),Oa(89,"th",9),ms(90,"Numero dei componenti"),La(),Oa(91,"th",9),ms(92,"Nome"),La(),Oa(93,"th",9),ms(94,"Cognome"),La(),Oa(95,"th",9),ms(96,"Professione"),La(),Oa(97,"th",9),ms(98,"Numero di telefono"),La(),Oa(99,"th",9),ms(100,"Paese"),La(),Oa(101,"th",9),ms(102,"Citt\xe0"),La(),Oa(103,"th",9),ms(104,"Info aggiuntive"),La(),Da(105,"th",9),La(),La(),Oa(106,"tbody",8),Ea(107,Hy,26,11,"tr",11),La(),La(),La(),La(),La(),La(),La()),2&t){const t=Za();Sr(37),Aa("ngForOf",t.prenotazione),Sr(36),Aa("ngForOf",t.prenotazioniEliminate),Sr(34),Aa("ngForOf",t.prenotazioniAvvenute)}}let Wy=(()=>{class t{constructor(t,e){this.service=t,this.router=e,this.admin=!1}ngOnInit(){this.admin="ROLE_ADMIN"===sessionStorage.getItem("Role"),this.service.findAll().subscribe(t=>{this.prenotazione=t,console.log("Visite che devono avvenire: ",this.prenotazione)}),this.service.findVisiteCancellate().subscribe(t=>{this.prenotazioniEliminate=t,console.log("Visite eliminate: ",this.prenotazioniEliminate)}),this.service.findVisiteAvvenute().subscribe(t=>{this.prenotazioniAvvenute=t,console.log("Visite completate con successo: ",this.prenotazioniAvvenute)})}cancellaPrenotazione(t){console.log("id: ",t),this.service.deletePrenotazione(t).subscribe()}PrenotazioneCompletata(t){this.service.saveVisiteAvvenute(t).subscribe(),this.router.navigate(["/area-riservata"]).then(()=>{window.location.reload()})}cancellaVisitaCancellata(t){this.service.deleteVisiteCancellate(t).subscribe(),this.router.navigate(["/area-riservata"]).then(()=>{window.location.reload()})}send(t){this.service.saveVisiteCancellate(t).subscribe(),this.router.navigate(["/area-riservata"]).then(()=>{window.location.reload()})}cancellaVisitaAvvenuta(t){this.service.deleteVisiteAvvenute(t).subscribe(),this.router.navigate(["/area-riservata"]).then(()=>{window.location.reload()})}}return t.\u0275fac=function(e){return new(e||t)(Ia(yg),Ia(mm))},t.\u0275cmp=ve({type:t,selectors:[["app-area-riservata"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"card","my-5"],[2,"text-align","center"],[1,"overflow-auto"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-bordered"],[1,".table-bordered"],["scope","col"],["style","vertical-align: middle;",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[2,"vertical-align","middle"],["name","data"],["name","orario"],["name","numcomponenti"],["name","nome"],["name","cognome"],["name","cellulare"],["name","paese"],["name","citta"],["name","infoAggiuntiva"],["name","motivo"],[1,"form-control",2,"width","100px",3,"ngModel","ngModelChange"],[1,"btn","btn-danger",2,"height","100px","font-size","smaller",3,"click"],[1,"btn","btn-success",2,"height","100px","font-size","small",3,"click"],[1,"btn","btn-danger",2,"height","100px","font-size","small",3,"click"]],template:function(t,e){1&t&&Ea(0,Gy,108,3,"div",0),2&t&&Aa("ngIf",e.admin)},directives:[Hu,qu,Tg,Ag,Py],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%;font-family:Times New Roman,Times,serif}.overflow-auto[_ngcontent-%COMP%]{z-index:0;width:responsive;height:400px}td[_ngcontent-%COMP%]{vertical-align:middle}.table.table-bordered[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;font-size:large}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%;font-family:Times New Roman,Times,serif}.overflow-auto[_ngcontent-%COMP%]{z-index:0;width:responsive;height:400px}td[_ngcontent-%COMP%]{vertical-align:middle}.table.table-bordered[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;font-size:medium}}"]}),t})();var $y=i("4R65");let Ky;i("A1Ew");try{Ky="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(mP){Ky=!1}let Xy,Qy,Yy,Jy,t_=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?nh(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Ky)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(te(ec))},t.\u0275prov=mt({factory:function(){return new t(te(ec))},token:t,providedIn:"root"}),t})(),e_=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)}}),t})();function i_(t){return function(){if(null==Xy&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Xy=!0}))}finally{Xy=Xy||!1}return Xy}()?t:!!t.capture}function n_(){if("object"!=typeof document||!document)return 0;if(null==Qy){const t=document.createElement("div"),e=t.style;t.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const i=document.createElement("div"),n=i.style;n.width="2px",n.height="1px",t.appendChild(i),document.body.appendChild(t),Qy=0,0===t.scrollLeft&&(t.scrollLeft=1,Qy=0===t.scrollLeft?1:2),t.parentNode.removeChild(t)}return Qy}class r_ extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class o_ extends r_{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const i=this.id,n=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(n,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this}requestAsyncId(t,e,i=0){return setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,n=void 0;try{this.work(t)}catch(r){i=!0,n=!!r&&r||new Error(r)}if(i)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,i=e.actions,n=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&i.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let a_=(()=>{class t{constructor(e,i=t.now){this.SchedulerAction=e,this.now=i}schedule(t,e=0,i){return new this.SchedulerAction(this,t).schedule(i,e)}}return t.now=()=>Date.now(),t})();class s_ extends a_{constructor(t,e=a_.now){super(t,()=>s_.delegate&&s_.delegate!==this?s_.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,i){return s_.delegate&&s_.delegate!==this?s_.delegate.schedule(t,e,i):super.schedule(t,e,i)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}const l_=new s_(o_);function c_(t,e=l_){return i=>i.lift(new u_(t,e))}class u_{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new h_(t,this.dueTime,this.scheduler))}}class h_ extends f{constructor(t,e,i){super(t),this.dueTime=e,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(p_,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function p_(t){t.debouncedNext()}function d_(t){return null!=t&&""+t!="false"}function f_(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function m_(t){return Array.isArray(t)?t:[t]}function g_(t){return t instanceof Vs?t.nativeElement:t}let y_=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(mP){return null}}((i=t).ownerDocument&&i.ownerDocument.defaultView||window);var i;if(e){if(-1===v_(e))return!1;if(!this.isVisible(e))return!1}let n=t.nodeName.toLowerCase(),r=v_(t);return t.hasAttribute("contenteditable")?-1!==r:"iframe"!==n&&"object"!==n&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),i="input"===e&&t.type;return"text"===i||"password"===i||"select"===e||"textarea"===e}(t))&&("audio"===n?!!t.hasAttribute("controls")&&-1!==r:"video"===n?-1!==r&&(null!==r||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,e){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||__(t))}(t)&&!this.isDisabled(t)&&((null==e?void 0:e.ignoreVisibility)||this.isVisible(t))}}return t.\u0275fac=function(e){return new(e||t)(te(t_))},t.\u0275prov=mt({factory:function(){return new t(te(t_))},token:t,providedIn:"root"}),t})();function __(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function v_(t){if(!__(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class b_{constructor(t,e,i,n,r=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=n,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let i=0;i<e.length;i++)e[i].hasAttribute("cdk-focus-"+t)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[i]):e[i].hasAttribute("cdk-focus-region-"+t)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[i]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return t?(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),t.focus(),!0):this.focusFirstTabbableElement()}focusFirstTabbableElement(){const t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){const t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let i=0;i<e.length;i++){let t=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let i=e.length-1;i>=0;i--){let t=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Kh(1)).subscribe(t)}}let x_=(()=>{class t{constructor(t,e,i){this._checker=t,this._ngZone=e,this._document=i}create(t,e=!1){return new b_(t,this._checker,this._ngZone,this._document,e)}}return t.\u0275fac=function(e){return new(e||t)(te(y_),te(gc),te(Wc))},t.\u0275prov=mt({factory:function(){return new t(te(y_),te(gc),te(Wc))},token:t,providedIn:"root"}),t})();function w_(t){return 0===t.buttons}"undefined"!=typeof Element&&Element;const C_=new qt("cdk-focus-monitor-default-options"),S_=i_({passive:!0,capture:!0});let T_=(()=>{class t{constructor(t,e,i,n){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=w_(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=k_(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=k_(t),i="focus"===t.type?this._onFocus:this._onBlur;for(let n=e;n;n=n.parentElement)i.call(this,t,n)},this._document=i,this._detectionMode=(null==n?void 0:n.detectionMode)||0}monitor(t,e=!1){const i=g_(t);if(!this._platform.isBrowser||1!==i.nodeType)return Fh(null);const n=function(t){if(function(){if(null==Jy){const t="undefined"!=typeof document?document.head:null;Jy=!(!t||!t.createShadowRoot&&!t.attachShadow)}return Jy}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),r=this._elementInfo.get(i);if(r)return e&&(r.checkChildren=!0),r.subject;const o={checkChildren:e,subject:new T,rootNode:n};return this._elementInfo.set(i,o),this._registerGlobalListeners(o),o.subject}stopMonitoring(t){const e=g_(t),i=this._elementInfo.get(e);i&&(i.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(i))}focusVia(t,e,i){const n=g_(t);this._setOriginForCurrentEventQueue(e),"function"==typeof n.focus&&n.focus(i)}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,i){i?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=k_(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const i=this._elementInfo.get(e);if(!i||!i.checkChildren&&e!==k_(t))return;const n=this._getFocusOrigin(t);this._setClasses(e,n),this._emitOrigin(i.subject,n),this._lastFocusOrigin=n}_onBlur(t,e){const i=this._elementInfo.get(e);!i||i.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(i.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,i=this._rootNodeFocusListenerCount.get(e)||0;i||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,S_),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,S_)}),this._rootNodeFocusListenerCount.set(e,i+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,S_),t.addEventListener("mousedown",this._documentMousedownListener,S_),t.addEventListener("touchstart",this._documentTouchstartListener,S_),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,S_),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,S_),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,S_),t.removeEventListener("mousedown",this._documentMousedownListener,S_),t.removeEventListener("touchstart",this._documentTouchstartListener,S_),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}return t.\u0275fac=function(e){return new(e||t)(te(gc),te(t_),te(Wc,8),te(C_,8))},t.\u0275prov=mt({factory:function(){return new t(te(gc),te(t_),te(Wc,8),te(C_,8))},token:t,providedIn:"root"}),t})();function k_(t){return t.composedPath?t.composedPath()[0]:t.target}const E_="cdk-high-contrast-black-on-white",P_="cdk-high-contrast-white-on-black",I_="cdk-high-contrast-active";let M_=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,i=e&&e.getComputedStyle?e.getComputedStyle(t):null,n=(i&&i.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),n){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(I_),t.remove(E_),t.remove(P_);const e=this.getHighContrastMode();1===e?(t.add(I_),t.add(E_)):2===e&&(t.add(I_),t.add(P_))}}}return t.\u0275fac=function(e){return new(e||t)(te(t_),te(Wc))},t.\u0275prov=mt({factory:function(){return new t(te(t_),te(Wc))},token:t,providedIn:"root"}),t})();const A_=new qt("cdk-dir-doc",{providedIn:"root",factory:function(){return ee(Wc)}});let z_=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new Il,t){const e=t.documentElement?t.documentElement.dir:null,i=(t.body?t.body.dir:null)||e;this.value="ltr"===i||"rtl"===i?i:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(te(A_,8))},t.\u0275prov=mt({factory:function(){return new t(te(A_,8))},token:t,providedIn:"root"}),t})(),O_=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)}}),t})();const L_=new Ws("10.2.7");class D_{}const R_="*";function B_(t,e){return{type:7,name:t,definitions:e,options:{}}}function F_(t,e=null){return{type:4,styles:e,timings:t}}function N_(t,e=null){return{type:2,steps:t,options:e}}function V_(t){return{type:6,styles:t,offset:null}}function j_(t,e,i){return{type:0,name:t,styles:e,options:i}}function U_(t,e,i=null){return{type:1,expr:t,animation:e,options:i}}function q_(t){Promise.resolve(null).then(t)}class Z_{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){q_(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class H_{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,n=0;const r=this.players.length;0==r?q_(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==r&&this._onFinish()}),t.onDestroy(()=>{++i==r&&this._onDestroy()}),t.onStart(()=>{++n==r&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const i=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(i)})}getPosition(){let t=0;return this.players.forEach(e=>{const i=e.getPosition();t=Math.min(i,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function G_(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function W_(t){switch(t.length){case 0:return new Z_;case 1:return t[0];default:return new H_(t)}}function $_(t,e,i,n,r={},o={}){const a=[],s=[];let l=-1,c=null;if(n.forEach(t=>{const i=t.offset,n=i==l,u=n&&c||{};Object.keys(t).forEach(i=>{let n=i,s=t[i];if("offset"!==i)switch(n=e.normalizePropertyName(n,a),s){case"!":s=r[i];break;case R_:s=o[i];break;default:s=e.normalizeStyleValue(i,n,s,a)}u[n]=s}),n||s.push(u),c=u,l=i}),a.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${a.join(t)}`)}return s}function K_(t,e,i,n){switch(e){case"start":t.onStart(()=>n(i&&X_(i,"start",t)));break;case"done":t.onDone(()=>n(i&&X_(i,"done",t)));break;case"destroy":t.onDestroy(()=>n(i&&X_(i,"destroy",t)))}}function X_(t,e,i){const n=i.totalTime,r=Q_(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==n?t.totalTime:n,!!i.disabled),o=t._data;return null!=o&&(r._data=o),r}function Q_(t,e,i,n,r="",o=0,a){return{element:t,triggerName:e,fromState:i,toState:n,phaseName:r,totalTime:o,disabled:!!a}}function Y_(t,e,i){let n;return t instanceof Map?(n=t.get(e),n||t.set(e,n=i)):(n=t[e],n||(n=t[e]=i)),n}function J_(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let tv=(t,e)=>!1,ev=(t,e)=>!1,iv=(t,e,i)=>[];const nv=G_();(nv||"undefined"!=typeof Element)&&(tv=(t,e)=>t.contains(e),ev=(()=>{if(nv||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,i)=>e.apply(t,[i]):ev}})(),iv=(t,e,i)=>{let n=[];if(i)n.push(...t.querySelectorAll(e));else{const i=t.querySelector(e);i&&n.push(i)}return n});let rv=null,ov=!1;function av(t){rv||(rv=("undefined"!=typeof document?document.body:null)||{},ov=!!rv.style&&"WebkitAppearance"in rv.style);let e=!0;return rv.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in rv.style,!e&&ov)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in rv.style),e}const sv=ev,lv=tv,cv=iv;function uv(t){const e={};return Object.keys(t).forEach(i=>{const n=i.replace(/([a-z])([A-Z])/g,"$1-$2");e[n]=t[i]}),e}let hv=(()=>{class t{validateStyleProperty(t){return av(t)}matchesElement(t,e){return sv(t,e)}containsElement(t,e){return lv(t,e)}query(t,e,i){return cv(t,e,i)}computeStyle(t,e,i){return i||""}animate(t,e,i,n,r,o=[],a){return new Z_(i,n)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),pv=(()=>{class t{}return t.NOOP=new hv,t})();const dv="ng-enter",fv="ng-leave",mv="ng-trigger",gv=".ng-trigger",yv="ng-animating",_v=".ng-animating";function vv(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:bv(parseFloat(e[1]),e[2])}function bv(t,e){switch(e){case"s":return 1e3*t;default:return t}}function xv(t,e,i){return t.hasOwnProperty("duration")?t:function(t,e,i){let n,r=0,o="";if("string"==typeof t){const i=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===i)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};n=bv(parseFloat(i[1]),i[2]);const a=i[3];null!=a&&(r=bv(parseFloat(a),i[4]));const s=i[5];s&&(o=s)}else n=t;if(!i){let i=!1,o=e.length;n<0&&(e.push("Duration values below 0 are not allowed for this animation step."),i=!0),r<0&&(e.push("Delay values below 0 are not allowed for this animation step."),i=!0),i&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:n,delay:r,easing:o}}(t,e,i)}function wv(t,e={}){return Object.keys(t).forEach(i=>{e[i]=t[i]}),e}function Cv(t,e,i={}){if(e)for(let n in t)i[n]=t[n];else wv(t,i);return i}function Sv(t,e,i){return i?e+":"+i+";":""}function Tv(t){let e="";for(let i=0;i<t.style.length;i++){const n=t.style.item(i);e+=Sv(0,n,t.style.getPropertyValue(n))}for(const i in t.style)t.style.hasOwnProperty(i)&&!i.startsWith("_")&&(e+=Sv(0,i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[i]));t.setAttribute("style",e)}function kv(t,e,i){t.style&&(Object.keys(e).forEach(n=>{const r=Lv(n);i&&!i.hasOwnProperty(n)&&(i[n]=t.style[r]),t.style[r]=e[n]}),G_()&&Tv(t))}function Ev(t,e){t.style&&(Object.keys(e).forEach(e=>{const i=Lv(e);t.style[i]=""}),G_()&&Tv(t))}function Pv(t){return Array.isArray(t)?1==t.length?t[0]:N_(t):t}const Iv=new RegExp("{{\\s*(.+?)\\s*}}","g");function Mv(t){let e=[];if("string"==typeof t){let i;for(;i=Iv.exec(t);)e.push(i[1]);Iv.lastIndex=0}return e}function Av(t,e,i){const n=t.toString(),r=n.replace(Iv,(t,n)=>{let r=e[n];return e.hasOwnProperty(n)||(i.push("Please provide a value for the animation param "+n),r=""),r.toString()});return r==n?t:r}function zv(t){const e=[];let i=t.next();for(;!i.done;)e.push(i.value),i=t.next();return e}const Ov=/-+([a-z0-9])/g;function Lv(t){return t.replace(Ov,(...t)=>t[1].toUpperCase())}function Dv(t,e){return 0===t||0===e}function Rv(t,e,i){const n=Object.keys(i);if(n.length&&e.length){let o=e[0],a=[];if(n.forEach(t=>{o.hasOwnProperty(t)||a.push(t),o[t]=i[t]}),a.length)for(var r=1;r<e.length;r++){let i=e[r];a.forEach((function(e){i[e]=Fv(t,e)}))}}return e}function Bv(t,e,i){switch(e.type){case 7:return t.visitTrigger(e,i);case 0:return t.visitState(e,i);case 1:return t.visitTransition(e,i);case 2:return t.visitSequence(e,i);case 3:return t.visitGroup(e,i);case 4:return t.visitAnimate(e,i);case 5:return t.visitKeyframes(e,i);case 6:return t.visitStyle(e,i);case 8:return t.visitReference(e,i);case 9:return t.visitAnimateChild(e,i);case 10:return t.visitAnimateRef(e,i);case 11:return t.visitQuery(e,i);case 12:return t.visitStagger(e,i);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function Fv(t,e){return window.getComputedStyle(t)[e]}const Nv="*";function Vv(t,e){const i=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,i){if(":"==t[0]){const n=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,i);if("function"==typeof n)return void e.push(n);t=n}const n=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return i.push(`The provided transition expression "${t}" is not supported`),e;const r=n[1],o=n[2],a=n[3];e.push(qv(r,a)),"<"!=o[0]||r==Nv&&a==Nv||e.push(qv(a,r))}(t,i,e)):i.push(t),i}const jv=new Set(["true","1"]),Uv=new Set(["false","0"]);function qv(t,e){const i=jv.has(t)||Uv.has(t),n=jv.has(e)||Uv.has(e);return(r,o)=>{let a=t==Nv||t==r,s=e==Nv||e==o;return!a&&i&&"boolean"==typeof r&&(a=r?jv.has(t):Uv.has(t)),!s&&n&&"boolean"==typeof o&&(s=o?jv.has(e):Uv.has(e)),a&&s}}const Zv=new RegExp("s*:selfs*,?","g");function Hv(t,e,i){return new Gv(t).build(e,i)}class Gv{constructor(t){this._driver=t}build(t,e){const i=new Wv(e);return this._resetContextStyleTimingState(i),Bv(this,Pv(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,n=e.depCount=0;const r=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const i=t,n=i.name;n.toString().split(/\s*,\s*/).forEach(t=>{i.name=t,r.push(this.visitState(i,e))}),i.name=n}else if(1==t.type){const r=this.visitTransition(t,e);i+=r.queryCount,n+=r.depCount,o.push(r)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:r,transitions:o,queryCount:i,depCount:n,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),n=t.options&&t.options.params||null;if(i.containsDynamicStyles){const r=new Set,o=n||{};if(i.styles.forEach(t=>{if($v(t)){const e=t;Object.keys(e).forEach(t=>{Mv(e[t]).forEach(t=>{o.hasOwnProperty(t)||r.add(t)})})}}),r.size){const i=zv(r.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${i.join(", ")}`)}}return{type:0,name:t.name,style:i,options:n?{params:n}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Bv(this,Pv(t.animation),e);return{type:1,matchers:Vv(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Kv(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Bv(this,t,e)),options:Kv(t.options)}}visitGroup(t,e){const i=e.currentTime;let n=0;const r=t.steps.map(t=>{e.currentTime=i;const r=Bv(this,t,e);return n=Math.max(n,e.currentTime),r});return e.currentTime=n,{type:3,steps:r,options:Kv(t.options)}}visitAnimate(t,e){const i=function(t,e){let i=null;if(t.hasOwnProperty("duration"))i=t;else if("number"==typeof t)return Xv(xv(t,e).duration,0,"");const n=t;if(n.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Xv(0,0,"");return t.dynamic=!0,t.strValue=n,t}return i=i||xv(n,e),Xv(i.duration,i.delay,i.easing)}(t.timings,e.errors);let n;e.currentAnimateTimings=i;let r=t.styles?t.styles:V_({});if(5==r.type)n=this.visitKeyframes(r,e);else{let r=t.styles,o=!1;if(!r){o=!0;const t={};i.easing&&(t.easing=i.easing),r=V_(t)}e.currentTime+=i.duration+i.delay;const a=this.visitStyle(r,e);a.isEmptyStep=o,n=a}return e.currentAnimateTimings=null,{type:4,timings:i,style:n,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==R_?i.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):i.push(t)}):i.push(t.styles);let n=!1,r=null;return i.forEach(t=>{if($v(t)){const e=t,i=e.easing;if(i&&(r=i,delete e.easing),!n)for(let t in e)if(e[t].toString().indexOf("{{")>=0){n=!0;break}}}),{type:6,styles:i,easing:r,offset:t.offset,containsDynamicStyles:n,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let n=e.currentTime,r=e.currentTime;i&&r>0&&(r-=i.duration+i.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(i=>{if(!this._driver.validateStyleProperty(i))return void e.errors.push(`The provided animation property "${i}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],a=o[i];let s=!0;a&&(r!=n&&r>=a.startTime&&n<=a.endTime&&(e.errors.push(`The CSS property "${i}" that exists between the times of "${a.startTime}ms" and "${a.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${n}ms"`),s=!1),r=a.startTime),s&&(o[i]={startTime:r,endTime:n}),e.options&&function(t,e,i){const n=e.params||{},r=Mv(t);r.length&&r.forEach(t=>{n.hasOwnProperty(t)||i.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[i],e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),i;let n=0;const r=[];let o=!1,a=!1,s=0;const l=t.steps.map(t=>{const i=this._makeStyleAst(t,e);let l=null!=i.offset?i.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if($v(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if($v(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}return e}(i.styles),c=0;return null!=l&&(n++,c=i.offset=l),a=a||c<0||c>1,o=o||c<s,s=c,r.push(c),i});a&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let u=0;n>0&&n<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==n&&(u=1/(c-1));const h=c-1,p=e.currentTime,d=e.currentAnimateTimings,f=d.duration;return l.forEach((t,n)=>{const o=u>0?n==h?1:u*n:r[n],a=o*f;e.currentTime=p+d.delay+a,d.duration=a,this._validateStyleAst(t,e),t.offset=o,i.styles.push(t)}),i}visitReference(t,e){return{type:8,animation:Bv(this,Pv(t.animation),e),options:Kv(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Kv(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Kv(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,n=t.options||{};e.queryCount++,e.currentQuery=t;const[r,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Zv,"")),[t=t.replace(/@\*/g,gv).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,_v),e]}(t.selector);e.currentQuerySelector=i.length?i+" "+r:r,Y_(e.collectedStyles,e.currentQuerySelector,{});const a=Bv(this,Pv(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:r,limit:n.limit||0,optional:!!n.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:Kv(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:xv(t.timings,e.errors,!0);return{type:12,animation:Bv(this,Pv(t.animation),e),timings:i,options:null}}}class Wv{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function $v(t){return!Array.isArray(t)&&"object"==typeof t}function Kv(t){var e;return t?(t=wv(t)).params&&(t.params=(e=t.params)?wv(e):null):t={},t}function Xv(t,e,i){return{duration:t,delay:e,easing:i}}function Qv(t,e,i,n,r,o,a=null,s=!1){return{type:1,element:t,keyframes:e,preStyleProps:i,postStyleProps:n,duration:r,delay:o,totalTime:r+o,easing:a,subTimeline:s}}class Yv{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Jv=new RegExp(":enter","g"),tb=new RegExp(":leave","g");function eb(t,e,i,n,r,o={},a={},s,l,c=[]){return(new ib).buildKeyframes(t,e,i,n,r,o,a,s,l,c)}class ib{buildKeyframes(t,e,i,n,r,o,a,s,l,c=[]){l=l||new Yv;const u=new rb(t,e,l,n,r,c,[]);u.options=s,u.currentTimeline.setStyles([o],null,u.errors,s),Bv(this,i,u);const h=u.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(a).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([a],null,u.errors,s)}return h.length?h.map(t=>t.buildKeyframes()):[Qv(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.consume(e.element);if(i){const n=e.createSubContext(t.options),r=e.currentTimeline.currentTime,o=this._visitSubInstructions(i,n,n.options);r!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let n=e.currentTimeline.currentTime;const r=null!=i.duration?vv(i.duration):null,o=null!=i.delay?vv(i.delay):null;return 0!==r&&t.forEach(t=>{const i=e.appendInstructionToTimeline(t,r,o);n=Math.max(n,i.duration+i.delay)}),n}visitReference(t,e){e.updateOptions(t.options,!0),Bv(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let n=e;const r=t.options;if(r&&(r.params||r.delay)&&(n=e.createSubContext(r),n.transformIntoNewTimeline(),null!=r.delay)){6==n.previousNode.type&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=nb);const t=vv(r.delay);n.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Bv(this,t,n)),n.currentTimeline.applyStylesToKeyframe(),n.subContextCount>i&&n.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let n=e.currentTimeline.currentTime;const r=t.options&&t.options.delay?vv(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);r&&a.delayNextStep(r),Bv(this,o,a),n=Math.max(n,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(n),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return xv(e.params?Av(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),n=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),n.snapshotCurrentStyles());const r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(i.duration),this.visitStyle(r,e),n.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,n=e.currentAnimateTimings;!n&&i.getCurrentStyleProperties().length&&i.forwardFrame();const r=n&&n.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(r):i.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,n=e.currentTimeline.duration,r=i.duration,o=e.createSubContext().currentTimeline;o.easing=i.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*r),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(n+r),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,n=t.options||{},r=n.delay?vv(n.delay):0;r&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=nb);let o=i;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!n.optional,e.errors);e.currentQueryTotal=a.length;let s=null;a.forEach((i,n)=>{e.currentQueryIndex=n;const a=e.createSubContext(t.options,i);r&&a.delayNextStep(r),i===e.element&&(s=a.currentTimeline),Bv(this,t.animation,a),a.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,a.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),s&&(e.currentTimeline.mergeTimelineCollectedStyles(s),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,n=e.currentTimeline,r=t.timings,o=Math.abs(r.duration),a=o*(e.currentQueryTotal-1);let s=o*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":s=a-s;break;case"full":s=i.currentStaggerTime}const l=e.currentTimeline;s&&l.delayNextStep(s);const c=l.currentTime;Bv(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=n.currentTime-c+(n.startTime-i.currentTimeline.startTime)}}const nb={};class rb{constructor(t,e,i,n,r,o,a,s){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=n,this._leaveClassName=r,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=nb,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=s||new ob(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let n=this.options;null!=i.duration&&(n.duration=vv(i.duration)),null!=i.delay&&(n.delay=vv(i.delay));const r=i.params;if(r){let t=n.params;t||(t=this.options.params={}),Object.keys(r).forEach(i=>{e&&t.hasOwnProperty(i)||(t[i]=Av(r[i],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(t=>{i[t]=e[t]})}}return t}createSubContext(t=null,e,i){const n=e||this.element,r=new rb(this._driver,n,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(n,i||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(t),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(t){return this.previousNode=nb,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const n={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},r=new ab(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,n,t.stretchStartingKeyframe);return this.timelines.push(r),n}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,n,r,o){let a=[];if(n&&a.push(this.element),t.length>0){t=(t=t.replace(Jv,"."+this._enterClassName)).replace(tb,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=i);0!==i&&(e=i<0?e.slice(e.length+i,e.length):e.slice(0,i)),a.push(...e)}return r||0!=a.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),a}}class ob{constructor(t,e,i,n){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=n,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new ob(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||R_,this._currentKeyframe[t]=R_}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,n){e&&(this._previousKeyframe.easing=e);const r=n&&n.params||{},o=function(t,e){const i={};let n;return t.forEach(t=>{"*"===t?(n=n||Object.keys(e),n.forEach(t=>{i[t]=R_})):Cv(t,!1,i)}),i}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=Av(o[t],r,i);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:R_),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const i=this._styleSummary[e],n=t._styleSummary[e];(!i||n.time>i.time)&&this._updateStyle(e,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let n=[];this._keyframes.forEach((r,o)=>{const a=Cv(r,!0);Object.keys(a).forEach(i=>{const n=a[i];"!"==n?t.add(i):n==R_&&e.add(i)}),i||(a.offset=o/this.duration),n.push(a)});const r=t.size?zv(t.values()):[],o=e.size?zv(e.values()):[];if(i){const t=n[0],e=wv(t);t.offset=0,e.offset=1,n=[t,e]}return Qv(this.element,n,r,o,this.duration,this.startTime,this.easing,!1)}}class ab extends ob{constructor(t,e,i,n,r,o,a=!1){super(t,e,o.delay),this.element=e,this.keyframes=i,this.preStyleProps=n,this.postStyleProps=r,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:n}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],o=i+e,a=e/o,s=Cv(t[0],!1);s.offset=0,r.push(s);const l=Cv(t[0],!1);l.offset=sb(a),r.push(l);const c=t.length-1;for(let n=1;n<=c;n++){let a=Cv(t[n],!1);a.offset=sb((e+a.offset*i)/o),r.push(a)}i=o,e=0,n="",t=r}return Qv(this.element,t,this.preStyleProps,this.postStyleProps,i,e,n,!0)}}function sb(t,e=3){const i=Math.pow(10,e-1);return Math.round(t*i)/i}class lb{}class cb extends lb{normalizePropertyName(t,e){return Lv(t)}normalizeStyleValue(t,e,i,n){let r="";const o=i.toString().trim();if(ub[e]&&0!==i&&"0"!==i)if("number"==typeof i)r="px";else{const e=i.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&n.push(`Please provide a CSS unit value for ${t}:${i}`)}return o+r}}const ub=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function hb(t,e,i,n,r,o,a,s,l,c,u,h,p){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:i,fromStyles:o,toState:n,toStyles:a,timelines:s,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:p}}const pb={};class db{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,n){return function(t,e,i,n,r){return t.some(t=>t(e,i,n,r))}(this.ast.matchers,t,e,i,n)}buildStyles(t,e,i){const n=this._stateStyles["*"],r=this._stateStyles[t],o=n?n.buildStyles(e,i):{};return r?r.buildStyles(e,i):o}build(t,e,i,n,r,o,a,s,l,c){const u=[],h=this.ast.options&&this.ast.options.params||pb,p=this.buildStyles(i,a&&a.params||pb,u),d=s&&s.params||pb,f=this.buildStyles(n,d,u),m=new Set,g=new Map,y=new Map,_="void"===n,v={params:Object.assign(Object.assign({},h),d)},b=c?[]:eb(t,e,this.ast.animation,r,o,p,f,v,l,u);let x=0;if(b.forEach(t=>{x=Math.max(t.duration+t.delay,x)}),u.length)return hb(e,this._triggerName,i,n,_,p,f,[],[],g,y,x,u);b.forEach(t=>{const i=t.element,n=Y_(g,i,{});t.preStyleProps.forEach(t=>n[t]=!0);const r=Y_(y,i,{});t.postStyleProps.forEach(t=>r[t]=!0),i!==e&&m.add(i)});const w=zv(m.values());return hb(e,this._triggerName,i,n,_,p,f,b,w,g,y,x)}}class fb{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const i={},n=wv(this.defaultParams);return Object.keys(t).forEach(e=>{const i=t[e];null!=i&&(n[e]=i)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const r=t;Object.keys(r).forEach(t=>{let o=r[t];o.length>1&&(o=Av(o,n,e)),i[t]=o})}}),i}}class mb{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new fb(t.style,t.options&&t.options.params||{})}),gb(this.states,"true","1"),gb(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new db(t,e,this.states))}),this.fallbackTransition=new db(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,n){return this.transitionFactories.find(r=>r.match(t,e,i,n))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function gb(t,e,i){t.hasOwnProperty(e)?t.hasOwnProperty(i)||(t[i]=t[e]):t.hasOwnProperty(i)&&(t[e]=t[i])}const yb=new Yv;class _b{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,e){const i=[],n=Hv(this._driver,e,i);if(i.length)throw new Error("Unable to build the animation due to the following errors: "+i.join("\n"));this._animations[t]=n}_buildPlayer(t,e,i){const n=t.element,r=$_(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(n,r,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const n=[],r=this._animations[t];let o;const a=new Map;if(r?(o=eb(this._driver,e,r,dv,fv,{},{},i,yb,n),o.forEach(t=>{const e=Y_(a,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(n.push("The requested animation doesn't exist or has already been destroyed"),o=[]),n.length)throw new Error("Unable to create the animation due to the following errors: "+n.join("\n"));a.forEach((t,e)=>{Object.keys(t).forEach(i=>{t[i]=this._driver.computeStyle(e,i,R_)})});const s=W_(o.map(t=>{const e=a.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=s,s.onDestroy(()=>this.destroy(t)),this.players.push(s),s}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,i,n){const r=Q_(e,"","","");return K_(this._getPlayer(t),i,r,n),()=>{}}command(t,e,i,n){if("register"==i)return void this.register(t,n[0]);if("create"==i)return void this.create(t,e,n[0]||{});const r=this._getPlayer(t);switch(i){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(n[0]));break;case"destroy":this.destroy(t)}}}const vb="ng-animate-queued",bb="ng-animate-disabled",xb=".ng-animate-disabled",wb=[],Cb={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Sb={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Tb{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=null!=(n=i?t.value:t)?n:null,i){const e=wv(t);delete e.value,this.options=e}else this.options={};var n;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(i=>{null==t[i]&&(t[i]=e[i])})}}}const kb="void",Eb=new Tb(kb);class Pb{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Db(e,this._hostClassName)}listen(t,e,i,n){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${e}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(r=i)&&"done"!=r)throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${e}" is not supported!`);var r;const o=Y_(this._elementListeners,t,[]),a={name:e,phase:i,callback:n};o.push(a);const s=Y_(this._engine.statesByElement,t,{});return s.hasOwnProperty(e)||(Db(t,mv),Db(t,"ng-trigger-"+e),s[e]=Eb),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(a);t>=0&&o.splice(t,1),this._triggers[e]||delete s[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,i,n=!0){const r=this._getTrigger(e),o=new Mb(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(Db(t,mv),Db(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,a={}));let s=a[e];const l=new Tb(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&s&&l.absorbOptions(s.options),a[e]=l,s||(s=Eb),l.value!==kb&&s.value===l.value){if(!function(t,e){const i=Object.keys(t),n=Object.keys(e);if(i.length!=n.length)return!1;for(let r=0;r<i.length;r++){const n=i[r];if(!e.hasOwnProperty(n)||t[n]!==e[n])return!1}return!0}(s.params,l.params)){const e=[],i=r.matchStyles(s.value,s.params,e),n=r.matchStyles(l.value,l.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Ev(t,i),kv(t,n)})}return}const c=Y_(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let u=r.matchTransition(s.value,l.value,t,l.params),h=!1;if(!u){if(!n)return;u=r.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:u,fromState:s,toState:l,player:o,isFallbackTransition:h}),h||(Db(t,vb),o.onStart(()=>{Rb(t,vb)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const i=this._engine.playersByElement.get(t);if(i){let t=i.indexOf(o);t>=0&&i.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,i)=>{delete e[t]}),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,gv,!0);i.forEach(t=>{if(t.__ng_removed)return;const i=this._engine.fetchNamespacesByElement(t);i.size?i.forEach(i=>i.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,i,n){const r=this._engine.statesByElement.get(t);if(r){const o=[];if(Object.keys(r).forEach(e=>{if(this._triggers[e]){const i=this.trigger(t,e,kb,n);i&&o.push(i)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),i&&W_(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const i=new Set;e.forEach(e=>{const n=e.name;if(i.has(n))return;i.add(n);const r=this._triggers[n].fallbackTransition,o=this._engine.statesByElement.get(t)[n]||Eb,a=new Tb(kb),s=new Mb(this.id,n,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:r,fromState:o,toState:a,player:s,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let n=!1;if(i.totalAnimations){const e=i.players.length?i.playersByQueriedElement.get(t):[];if(e&&e.length)n=!0;else{let e=t;for(;e=e.parentNode;)if(i.statesByElement.get(e)){n=!0;break}}}if(this.prepareLeaveAnimationListeners(t),n)i.markElementAsRemoved(this.id,t,!1,e);else{const n=t.__ng_removed;n&&n!==Cb||(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Db(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const n=i.player;if(n.destroyed)return;const r=i.element,o=this._elementListeners.get(r);o&&o.forEach(e=>{if(e.name==i.triggerName){const n=Q_(r,i.triggerName,i.fromState.value,i.toState.value);n._data=t,K_(i.player,e.phase,n,e.callback)}}),n.markedForDestroy?this._engine.afterFlush(()=>{n.destroy()}):e.push(i)}),this._queue=[],e.sort((t,e)=>{const i=t.transition.ast.depCount,n=e.transition.ast.depCount;return 0==i||0==n?i-n:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Ib{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const i=new Pb(t,e,this);return e.parentNode?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList.length-1;if(i>=0){let n=!1;for(let r=i;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,e)){this._namespaceList.splice(r+1,0,t),n=!0;break}n||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let n=this._namespaceLookup[t];n&&n.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(i);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i){const t=Object.keys(i);for(let n=0;n<t.length;n++){const r=i[t[n]].namespaceId;if(r){const t=this._fetchNamespace(r);t&&e.add(t)}}}return e}trigger(t,e,i,n){if(Ab(e)){const r=this._fetchNamespace(t);if(r)return r.trigger(e,i,n),!0}return!1}insertNode(t,e,i,n){if(!Ab(e))return;const r=e.__ng_removed;if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const n=this._fetchNamespace(t);n&&n.insertNode(e,i)}n&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Db(t,bb)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Rb(t,bb))}removeNode(t,e,i,n){if(Ab(e)){const r=t?this._fetchNamespace(t):null;if(r?r.removeNode(e,n):this.markElementAsRemoved(t,e,!1,n),i){const i=this.namespacesByHostElement.get(e);i&&i.id!==t&&i.removeNode(e,n)}}else this._onRemovalComplete(e,n)}markElementAsRemoved(t,e,i,n){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:n,hasAnimation:i,removedBeforeQueried:!1}}listen(t,e,i,n,r){return Ab(e)?this._fetchNamespace(t).listen(e,i,n,r):()=>{}}_buildInstruction(t,e,i,n,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,n,t.fromState.options,t.toState.options,e,r)}destroyInnerAnimations(t){let e=this.driver.query(t,gv,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,_v,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return W_(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Cb,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,xb)&&this.markElementAsDisabled(t,!1),this.driver.query(t,xb,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Db(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let t=0;t<i.length;t++)i[t]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?W_(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const i=new Yv,n=[],r=new Map,o=[],a=new Map,s=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let i=0;i<e.length;i++)c.add(e[i])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),p=Lb(h,this.collectedEnterElements),d=new Map;let f=0;p.forEach((t,e)=>{const i=dv+f++;d.set(e,i),t.forEach(t=>Db(t,i))});const m=[],g=new Set,y=new Set;for(let M=0;M<this.collectedLeaveElements.length;M++){const t=this.collectedLeaveElements[M],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):y.add(t))}const _=new Map,v=Lb(h,Array.from(g));v.forEach((t,e)=>{const i=fv+f++;_.set(e,i),t.forEach(t=>Db(t,i))}),t.push(()=>{p.forEach((t,e)=>{const i=d.get(e);t.forEach(t=>Rb(t,i))}),v.forEach((t,e)=>{const i=_.get(e);t.forEach(t=>Rb(t,i))}),m.forEach(t=>{this.processLeaveNode(t)})});const b=[],x=[];for(let M=this._namespaceList.length-1;M>=0;M--)this._namespaceList[M].drainQueuedTransitions(e).forEach(t=>{const e=t.player,r=t.element;if(b.push(e),this.collectedEnterElements.length){const t=r.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!u||!this.driver.containsElement(u,r),h=_.get(r),p=d.get(r),f=this._buildInstruction(t,i,p,h,c);if(f.errors&&f.errors.length)x.push(f);else{if(c)return e.onStart(()=>Ev(r,f.fromStyles)),e.onDestroy(()=>kv(r,f.toStyles)),void n.push(e);if(t.isFallbackTransition)return e.onStart(()=>Ev(r,f.fromStyles)),e.onDestroy(()=>kv(r,f.toStyles)),void n.push(e);f.timelines.forEach(t=>t.stretchStartingKeyframe=!0),i.append(r,f.timelines),o.push({instruction:f,player:e,element:r}),f.queriedElements.forEach(t=>Y_(a,t,[]).push(e)),f.preStyleProps.forEach((t,e)=>{const i=Object.keys(t);if(i.length){let t=s.get(e);t||s.set(e,t=new Set),i.forEach(e=>t.add(e))}}),f.postStyleProps.forEach((t,e)=>{const i=Object.keys(t);let n=l.get(e);n||l.set(e,n=new Set),i.forEach(t=>n.add(t))})}});if(x.length){const t=[];x.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const w=new Map,C=new Map;o.forEach(t=>{const e=t.element;i.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,w))}),n.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Y_(w,e,[]).push(t),t.destroy()})});const S=m.filter(t=>Fb(t,s,l)),T=new Map;Ob(T,this.driver,y,l,R_).forEach(t=>{Fb(t,s,l)&&S.push(t)});const k=new Map;p.forEach((t,e)=>{Ob(k,this.driver,new Set(t),s,"!")}),S.forEach(t=>{const e=T.get(t),i=k.get(t);T.set(t,Object.assign(Object.assign({},e),i))});const E=[],P=[],I={};o.forEach(t=>{const{element:e,player:o,instruction:a}=t;if(i.has(e)){if(c.has(e))return o.onDestroy(()=>kv(e,a.toStyles)),o.disabled=!0,o.overrideTotalTime(a.totalTime),void n.push(o);let t=I;if(C.size>1){let i=e;const n=[];for(;i=i.parentNode;){const e=C.get(i);if(e){t=e;break}n.push(i)}n.forEach(e=>C.set(e,t))}const i=this._buildAnimation(o.namespaceId,a,w,r,k,T);if(o.setRealPlayer(i),t===I)E.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=W_(e)),n.push(o)}}else Ev(e,a.fromStyles),o.onDestroy(()=>kv(e,a.toStyles)),P.push(o),c.has(e)&&n.push(o)}),P.forEach(t=>{const e=r.get(t.element);if(e&&e.length){const i=W_(e);t.setRealPlayer(i)}}),n.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let M=0;M<m.length;M++){const t=m[M],e=t.__ng_removed;if(Rb(t,fv),e&&e.hasAnimation)continue;let i=[];if(a.size){let e=a.get(t);e&&e.length&&i.push(...e);let n=this.driver.query(t,_v,!0);for(let t=0;t<n.length;t++){let e=a.get(n[t]);e&&e.length&&i.push(...e)}}const n=i.filter(t=>!t.destroyed);n.length?Bb(this,t,n):this.processLeaveNode(t)}return m.length=0,E.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),E}elementContainsData(t,e){let i=!1;const n=e.__ng_removed;return n&&n.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,n,r){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!r||r==kb;e.forEach(e=>{e.queued||(t||e.triggerName==n)&&o.push(e)})}}return(i||n)&&(o=o.filter(t=>!(i&&i!=t.namespaceId||n&&n!=t.triggerName))),o}_beforeAnimationBuild(t,e,i){const n=e.element,r=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const a of e.timelines){const t=a.element,s=t!==n,l=Y_(i,t,[]);this._getPreviousPlayers(t,s,r,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})}Ev(n,e.fromStyles)}_buildAnimation(t,e,i,n,r,o){const a=e.triggerName,s=e.element,l=[],c=new Set,u=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const p=h.__ng_removed;if(p&&p.removedBeforeQueried)return new Z_(e.duration,e.delay);const d=h!==s,f=function(t){const e=[];return function t(e,i){for(let n=0;n<e.length;n++){const r=e[n];r instanceof H_?t(r.players,i):i.push(r)}}(t,e),e}((i.get(h)||wb).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=r.get(h),g=o.get(h),y=$_(0,this._normalizer,0,e.keyframes,m,g),_=this._buildPlayer(e,y,f);if(e.subTimeline&&n&&u.add(h),d){const e=new Mb(t,a,h);e.setRealPlayer(_),l.push(e)}return _});l.forEach(t=>{Y_(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,i){let n;if(t instanceof Map){if(n=t.get(e),n){if(n.length){const t=n.indexOf(i);n.splice(t,1)}0==n.length&&t.delete(e)}}else if(n=t[e],n){if(n.length){const t=n.indexOf(i);n.splice(t,1)}0==n.length&&delete t[e]}return n}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>Db(t,yv));const p=W_(h);return p.onDestroy(()=>{c.forEach(t=>Rb(t,yv)),kv(s,e.toStyles)}),u.forEach(t=>{Y_(n,t,[]).push(p)}),p}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Z_(t.duration,t.delay)}}class Mb{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new Z_,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(i=>K_(t,e,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Y_(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Ab(t){return t&&1===t.nodeType}function zb(t,e){const i=t.style.display;return t.style.display=null!=e?e:"none",i}function Ob(t,e,i,n,r){const o=[];i.forEach(t=>o.push(zb(t)));const a=[];n.forEach((i,n)=>{const o={};i.forEach(t=>{const i=o[t]=e.computeStyle(n,t,r);i&&0!=i.length||(n.__ng_removed=Sb,a.push(n))}),t.set(n,o)});let s=0;return i.forEach(t=>zb(t,o[s++])),a}function Lb(t,e){const i=new Map;if(t.forEach(t=>i.set(t,[])),0==e.length)return i;const n=new Set(e),r=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let o=r.get(e);if(o)return o;const a=e.parentNode;return o=i.has(a)?a:n.has(a)?1:t(a),r.set(e,o),o}(t);1!==e&&i.get(e).push(t)}),i}function Db(t,e){if(t.classList)t.classList.add(e);else{let i=t.$$classes;i||(i=t.$$classes={}),i[e]=!0}}function Rb(t,e){if(t.classList)t.classList.remove(e);else{let i=t.$$classes;i&&delete i[e]}}function Bb(t,e,i){W_(i).onDone(()=>t.processLeaveNode(e))}function Fb(t,e,i){const n=i.get(t);if(!n)return!1;let r=e.get(t);return r?n.forEach(t=>r.add(t)):e.set(t,n),i.delete(t),!0}class Nb{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Ib(t,e,i),this._timelineEngine=new _b(t,e,i),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,i,n,r){const o=t+"-"+n;let a=this._triggerCache[o];if(!a){const t=[],e=Hv(this._driver,r,t);if(t.length)throw new Error(`The animation trigger "${n}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);a=function(t,e){return new mb(t,e)}(n,e),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,n,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,n){this._transitionEngine.insertNode(t,e,i,n)}onRemove(t,e,i,n){this._transitionEngine.removeNode(t,e,n||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,n){if("@"==i.charAt(0)){const[t,r]=J_(i);this._timelineEngine.command(t,e,r,n)}else this._transitionEngine.trigger(t,e,i,n)}listen(t,e,i,n,r){if("@"==i.charAt(0)){const[t,n]=J_(i);return this._timelineEngine.listen(t,e,n,r)}return this._transitionEngine.listen(t,e,i,n,r)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Vb(t,e){let i=null,n=null;return Array.isArray(e)&&e.length?(i=Ub(e[0]),e.length>1&&(n=Ub(e[e.length-1]))):e&&(i=Ub(e)),i||n?new jb(t,i,n):null}let jb=(()=>{class t{constructor(e,i,n){this._element=e,this._startStyles=i,this._endStyles=n,this._state=0;let r=t.initialStylesByElement.get(e);r||t.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&kv(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(kv(this._element,this._initialStyles),this._endStyles&&(kv(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Ev(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ev(this._element,this._endStyles),this._endStyles=null),kv(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function Ub(t){let e=null;const i=Object.keys(t);for(let n=0;n<i.length;n++){const r=i[n];qb(r)&&(e=e||{},e[r]=t[r])}return e}function qb(t){return"display"===t||"position"===t}const Zb="animation",Hb="animationend";class Gb{constructor(t,e,i,n,r,o,a){this._element=t,this._name=e,this._duration=i,this._delay=n,this._easing=r,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const i=Yb(t,"").trim();i.length&&(function(t,e){let i=0;for(let n=0;n<t.length;n++)","===t.charAt(n)&&i++}(i),e=`${i}, ${e}`),Qb(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Xb(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Wb(this._element,this._name,"paused")}resume(){Wb(this._element,this._name,"running")}setPosition(t){const e=$b(this._element,this._name);this._position=t*this._duration,Qb(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Xb(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const i=Yb(t,"").split(","),n=Kb(i,e);n>=0&&(i.splice(n,1),Qb(t,"",i.join(",")))}(this._element,this._name))}}function Wb(t,e,i){Qb(t,"PlayState",i,$b(t,e))}function $b(t,e){const i=Yb(t,"");return i.indexOf(",")>0?Kb(i.split(","),e):Kb([i],e)}function Kb(t,e){for(let i=0;i<t.length;i++)if(t[i].indexOf(e)>=0)return i;return-1}function Xb(t,e,i){i?t.removeEventListener(Hb,e):t.addEventListener(Hb,e)}function Qb(t,e,i,n){const r=Zb+e;if(null!=n){const e=t.style[r];if(e.length){const t=e.split(",");t[n]=i,i=t.join(",")}}t.style[r]=i}function Yb(t,e){return t.style[Zb+e]}class Jb{constructor(t,e,i,n,r,o,a,s){this.element=t,this.keyframes=e,this.animationName=i,this._duration=n,this._delay=r,this._finalStyles=a,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=n+r,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Gb(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(t[i]=e?this._finalStyles[i]:Fv(this.element,i))})}this.currentSnapshot=t}}class tx extends Z_{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=uv(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class ex{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return av(t)}matchesElement(t,e){return sv(t,e)}containsElement(t,e){return lv(t,e)}query(t,e,i){return cv(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,i){i=i.map(t=>uv(t));let n=`@keyframes ${e} {\n`,r="";i.forEach(t=>{r=" ";const e=parseFloat(t.offset);n+=`${r}${100*e}% {\n`,r+=" ",Object.keys(t).forEach(e=>{const i=t[e];switch(e){case"offset":return;case"easing":return void(i&&(n+=`${r}animation-timing-function: ${i};\n`));default:return void(n+=`${r}${e}: ${i};\n`)}}),n+=r+"}\n"}),n+="}\n";const o=document.createElement("style");return o.textContent=n,o}animate(t,e,i,n,r,o=[],a){a&&this._notifyFaultyScrubber();const s=o.filter(t=>t instanceof Jb),l={};Dv(i,n)&&s.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(i=>{"offset"!=i&&"easing"!=i&&(e[i]=t[i])})}),e}(e=Rv(t,e,l));if(0==i)return new tx(t,c);const u="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,u,e);document.querySelector("head").appendChild(h);const p=Vb(t,e),d=new Jb(t,e,u,i,n,r,c,p);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class ix{constructor(t,e,i,n){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=n,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,i){return t.animate(e,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Fv(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class nx{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(rx().toString()),this._cssKeyframesDriver=new ex}validateStyleProperty(t){return av(t)}matchesElement(t,e){return sv(t,e)}containsElement(t,e){return lv(t,e)}query(t,e,i){return cv(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,i,n,r,o=[],a){if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,i,n,r,o);const s={duration:i,delay:n,fill:0==n?"both":"forwards"};r&&(s.easing=r);const l={},c=o.filter(t=>t instanceof ix);Dv(i,n)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const u=Vb(t,e=Rv(t,e=e.map(t=>Cv(t,!1)),l));return new ix(t,e,s,u)}}function rx(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let ox=(()=>{class t extends D_{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:me.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?N_(t):t;return lx(this._renderer,null,e,"register",[i]),new ax(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(te(Us),te(Wc))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();class ax extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new sx(this._id,t,e||{},this._renderer)}}class sx{constructor(t,e,i,n){this.id=t,this.element=e,this._renderer=n,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return lx(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function lx(t,e,i,n,r){return t.setProperty(e,`@@${i}:${n}`,r)}const cx="@",ux="@.disabled";let hx=(()=>{class t{constructor(t,e,i){this.delegate=t,this.engine=e,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const i=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(i);return t||(t=new px("",i,this.engine),this._rendererCache.set(i,t)),t}const n=e.id,r=e.id+"-"+this._currentId;this._currentId++,this.engine.register(r,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(n,r,t,e.name,e)};return e.data.animation.forEach(o),new dx(this,r,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,i){t>=0&&t<this._microtaskId?this._zone.run(()=>e(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,i]=t;e(i)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(te(Us),te(Nb),te(gc))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();class px{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,n){this.delegate.setAttribute(t,e,i,n)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,n){this.delegate.setStyle(t,e,i,n)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){e.charAt(0)==cx&&e==ux?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class dx extends px{constructor(t,e,i,n){super(e,i,n),this.factory=t,this.namespaceId=e}setProperty(t,e,i){e.charAt(0)==cx?"."==e.charAt(1)&&e==ux?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.substr(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if(e.charAt(0)==cx){const n=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let r=e.substr(1),o="";return r.charAt(0)!=cx&&([r,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(r)),this.engine.listen(this.namespaceId,n,r,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,i,t)})}return this.delegate.listen(t,e,i)}}let fx=(()=>{class t extends Nb{constructor(t,e,i){super(t.body,e,i)}}return t.\u0275fac=function(e){return new(e||t)(te(Wc),te(pv),te(lb))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();const mx=new qt("AnimationModuleType"),gx=[{provide:pv,useFactory:function(){return"function"==typeof rx()?new nx:new ex}},{provide:mx,useValue:"BrowserAnimations"},{provide:D_,useClass:ox},{provide:lb,useFactory:function(){return new cb}},{provide:Nb,useClass:fx},{provide:Us,useFactory:function(t,e,i){return new hx(t,e,i)},deps:[wh,Nb,gc]}];let yx=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},providers:gx,imports:[Rh]}),t})();const _x=new Ws("10.2.7"),vx=new qt("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let bx,xx=(()=>{class t{constructor(t,e,i){this._hasDoneGlobalChecks=!1,this._document=i,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getDocument(){const t=this._document||document;return"object"==typeof t&&t?t:null}_getWindow(){const t=this._getDocument(),e=(null==t?void 0:t.defaultView)||window;return"object"==typeof e&&e?e:null}_checksAreEnabled(){return Dn()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){const t=this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype),e=this._getDocument();t&&e&&!e.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){const t=!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme,e=this._getDocument();if(t||!e||!e.body||"function"!=typeof getComputedStyle)return;const i=e.createElement("div");i.classList.add("mat-theme-loaded-marker"),e.body.appendChild(i);const n=getComputedStyle(i);n&&"none"!==n.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),e.body.removeChild(i)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&_x.full!==L_.full&&console.warn("The Angular Material version ("+_x.full+") does not match the Angular CDK version ("+L_.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)(te(M_),te(vx,8),te(Wc,8))},imports:[[O_],O_]}),t})();function wx(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=d_(t)}}}function Cx(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),e&&this._elementRef.nativeElement.classList.add("mat-"+e),this._color=e)}}}function Sx(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=d_(t)}}}try{bx="undefined"!=typeof Intl}catch(mP){bx=!1}let Tx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Te({type:t,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),t})();function kx(t,e,i){const n=t.nativeElement.classList;i?n.add(e):n.remove(e)}let Ex=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[xx],xx]}),t})();class Px{constructor(t,e,i){this._renderer=t,this.element=e,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Ix={enterDuration:450,exitDuration:400},Mx=i_({passive:!0}),Ax=["mousedown","touchstart"],zx=["mouseup","mouseleave","touchend","touchcancel"];class Ox{constructor(t,e,i,n){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,n.isBrowser&&(this._containerElement=g_(i))}fadeInRipple(t,e,i={}){const n=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=Object.assign(Object.assign({},Ix),i.animation);i.centered&&(t=n.left+n.width/2,e=n.top+n.height/2);const o=i.radius||function(t,e,i){const n=Math.max(Math.abs(t-i.left),Math.abs(t-i.right)),r=Math.max(Math.abs(e-i.top),Math.abs(e-i.bottom));return Math.sqrt(n*n+r*r)}(t,e,n),a=t-n.left,s=e-n.top,l=r.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=a-o+"px",c.style.top=s-o+"px",c.style.height=2*o+"px",c.style.width=2*o+"px",null!=i.color&&(c.style.backgroundColor=i.color),c.style.transitionDuration=l+"ms",this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const u=new Px(this,c,i);return u.state=0,this._activeRipples.add(u),i.persistent||(this._mostRecentTransientRipple=u),this._runTimeoutOutsideZone(()=>{const t=u===this._mostRecentTransientRipple;u.state=1,i.persistent||t&&this._isPointerDown||u.fadeOut()},l),u}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const i=t.element,n=Object.assign(Object.assign({},Ix),t.config.animation);i.style.transitionDuration=n.exitDuration+"ms",i.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,i.parentNode.removeChild(i)},n.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}setupTriggerEvents(t){const e=g_(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(Ax))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(zx),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=w_(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||i||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,Mx)})})}_removeTriggerEvents(){this._triggerElement&&(Ax.forEach(t=>{this._triggerElement.removeEventListener(t,this,Mx)}),this._pointerUpEventsRegistered&&zx.forEach(t=>{this._triggerElement.removeEventListener(t,this,Mx)}))}}const Lx=new qt("mat-ripple-global-options");let Dx=(()=>{class t{constructor(t,e,i,n,r){this._elementRef=t,this._animationMode=r,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=n||{},this._rippleRenderer=new Ox(this,e,t,i)}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(Ia(Vs),Ia(gc),Ia(t_),Ia(Lx,8),Ia(mx,8))},t.\u0275dir=Te({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&ns("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),Rx=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[xx,e_],xx]}),t})(),Bx=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)}}),t})();function Fx(t,e){return new b(e?i=>e.schedule(Nx,0,{error:t,subscriber:i}):e=>e.error(t))}function Nx({error:t,subscriber:e}){e.error(t)}const Vx=["*"];function jx(t){return Error(`Unable to find icon with the name "${t}"`)}function Ux(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function qx(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class Zx{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let Hx=(()=>{class t{constructor(t,e,i,n){this._httpClient=t,this._sanitizer=e,this._errorHandler=n,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,e,i){return this.addSvgIconInNamespace("",t,e,i)}addSvgIconLiteral(t,e,i){return this.addSvgIconLiteralInNamespace("",t,e,i)}addSvgIconInNamespace(t,e,i,n){return this._addSvgIconConfig(t,e,new Zx(i,null,n))}addSvgIconLiteralInNamespace(t,e,i,n){const r=this._sanitizer.sanitize(rr.HTML,i);if(!r)throw qx(i);return this._addSvgIconConfig(t,e,new Zx("",r,n))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,i){return this._addSvgIconSetConfig(t,new Zx(e,null,i))}addSvgIconSetLiteralInNamespace(t,e,i){const n=this._sanitizer.sanitize(rr.HTML,e);if(!n)throw qx(e);return this._addSvgIconSetConfig(t,new Zx("",n,i))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(rr.RESOURCE_URL,t);if(!e)throw Ux(t);const i=this._cachedIconsByUrl.get(e);return i?Fh(Gx(i)):this._loadSvgIconFromConfig(new Zx(t,null)).pipe(ip(t=>this._cachedIconsByUrl.set(e,t)),P(t=>Gx(t)))}getNamedSvgIcon(t,e=""){const i=Wx(e,t),n=this._svgIconConfigs.get(i);if(n)return this._getSvgFromConfig(n);const r=this._iconSetConfigs.get(e);return r?this._getSvgFromIconSetConfigs(t,r):Fx(jx(i))}ngOnDestroy(){this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Fh(Gx(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(P(t=>Gx(t)))}_getSvgFromIconSetConfigs(t,e){const i=this._extractIconWithNameFromAnySet(t,e);return i?Fh(i):_g(e.filter(t=>!t.svgText).map(t=>this._loadSvgIconSetFromConfig(t).pipe(qp(e=>{const i=this._sanitizer.sanitize(rr.RESOURCE_URL,t.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${i} failed: ${e.message}`)),Fh(null)})))).pipe(P(()=>{const i=this._extractIconWithNameFromAnySet(t,e);if(!i)throw jx(t);return i}))}_extractIconWithNameFromAnySet(t,e){for(let i=e.length-1;i>=0;i--){const n=e[i];if(n.svgText&&n.svgText.indexOf(t)>-1){const e=this._svgElementFromConfig(n),i=this._extractSvgIconFromSet(e,t,n.options);if(i)return i}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(ip(e=>t.svgText=e),P(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Fh(null):this._fetchIcon(t).pipe(ip(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,i){const n=t.querySelector(`[id="${e}"]`);if(!n)return null;const r=n.cloneNode(!0);if(r.removeAttribute("id"),"svg"===r.nodeName.toLowerCase())return this._setSvgAttributes(r,i);if("symbol"===r.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(r),i);const o=this._svgElementFromString("<svg></svg>");return o.appendChild(r),this._setSvgAttributes(o,i)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const i=e.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),i=t.attributes;for(let n=0;n<i.length;n++){const{name:t,value:r}=i[n];"id"!==t&&e.setAttribute(t,r)}for(let n=0;n<t.childNodes.length;n++)t.childNodes[n].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[n].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){var e;const{url:i,options:n}=t,r=null!==(e=null==n?void 0:n.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(rr.RESOURCE_URL,i);if(!o)throw Ux(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const s=this._httpClient.get(o,{responseType:"text",withCredentials:r}).pipe($p(()=>this._inProgressUrlFetches.delete(o)),rt());return this._inProgressUrlFetches.set(o,s),s}_addSvgIconConfig(t,e,i){return this._svgIconConfigs.set(Wx(t,e),i),this}_addSvgIconSetConfig(t,e){const i=this._iconSetConfigs.get(t);return i?i.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){const e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}}return t.\u0275fac=function(e){return new(e||t)(te(eg,8),te(zh),te(Wc,8),te(Cn))},t.\u0275prov=mt({factory:function(){return new t(te(eg,8),te(zh),te(Wc,8),te(Cn))},token:t,providedIn:"root"}),t})();function Gx(t){return t.cloneNode(!0)}function Wx(t,e){return t+":"+e}class $x{constructor(t){this._elementRef=t}}const Kx=Cx($x),Xx=new qt("mat-icon-location",{providedIn:"root",factory:function(){const t=ee(Wc),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Qx=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Yx=Qx.map(t=>`[${t}]`).join(", "),Jx=/^url\(['"]?#(.*?)['"]?\)$/;let tw=(()=>{class t extends Kx{constructor(t,e,i,n,r){super(t),this._iconRegistry=e,this._location=n,this._errorHandler=r,this._inline=!1,this._currentIconFetch=h.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=d_(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let n=0;n<e.length;n++)e[n].textContent+=" ";const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const i=t.childNodes[e];1===i.nodeType&&"svg"!==i.nodeName.toLowerCase()||t.removeChild(i)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,i)=>{e.forEach(e=>{i.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(Yx),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let n=0;n<e.length;n++)Qx.forEach(t=>{const r=e[n],o=r.getAttribute(t),a=o?o.match(Jx):null;if(a){let e=i.get(r);e||(e=[],i.set(r,e)),e.push({name:t,value:a[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[e,i]=this._splitIconName(t);e&&(this._svgNamespace=e),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,e).pipe(Kh(1)).subscribe(t=>this._setSvgElement(t),t=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${e}:${i}! ${t.message}`))})}}}return t.\u0275fac=function(e){return new(e||t)(Ia(Vs),Ia(Hx),Ma("aria-hidden"),Ia(Xx),Ia(Cn))},t.\u0275cmp=ve({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,e){2&t&&(Ta("data-mat-icon-type",e._usingFontIcon()?"font":"svg")("data-mat-icon-name",e._svgName||e.fontIcon)("data-mat-icon-namespace",e._svgNamespace||e.fontSet),ns("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[pa],ngContentSelectors:Vx,decls:1,vars:0,template:function(t,e){1&t&&(Ga(),Wa(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),ew=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[xx],xx]}),t})();const iw=["map"];let nw=(()=>{class t{constructor(t){this._location=t}ngOnInit(){}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.4021,13.55142],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.4021,13.55142],{icon:e}).addTo(t)}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-autografo-inno"]],viewQuery:function(t,e){var i;1&t&&Ul(iw,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:18,vars:0,consts:[[1,"container"],[1,"button",2,"vertical-align","middle",3,"click"],["src","assets\\images\\La torre del passero solitario sovrasta il chiostro di S. Agostino_IGP1035 copia_DxOFP.jpg","alt","Card image cap",1,"card-img-top",2,"width","300px","margin-bottom","30px"],[1,"map-container"],["map",""],[1,"text"],["data-toggle","collapse","href","#multiCollapseExample1","aria-expanded","false","aria-controls","multiCollapseExample1"],["id","multiCollapseExample1",1,"collapse","multi-collapse"],["src","assets\\images\\La torre del passero solitario sovrasta il chiostro di S. Agostino_IGP1035 copia_DxOFP.jpg",2,"width","300px"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"Autografo Inno alla sua donna (Gigantografia)"),La(),Da(4,"br"),Oa(5,"button",1),Na("click",(function(){return e.goBack()})),Oa(6,"span"),Oa(7,"mat-icon"),ms(8,"arrow_back"),La(),La(),La(),La(),Da(9,"img",2),Da(10,"div",3,4),Oa(12,"div",5),ms(13," Dopo la tappa di San Vito riprendiamo via Roma che termina pochi metri pi\xf9 avanti allorch\xe9 voltando a sinistra si fiancheggia la maestosa chiesa di Sant\u2019Agostino, fino a giungere nell\u2019angusto piazzale antistante l\u2019ingresso della chiesa. Davanti a noi si staglia la torre dell\u2019acquedotto comunale scambiata dai pi\xf9 per la "),Oa(14,"a",6),ms(15,"Torre del passero solitario"),La(),Oa(16,"div",7),Da(17,"img",8),La(),La(),La())},directives:[tw],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:xx-large;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}img[_ngcontent-%COMP%]{margin-top:10%;display:block;margin-left:auto;margin-right:auto;height:200%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:medium;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}.map-container[_ngcontent-%COMP%]{height:180px;width:100%;z-index:0}.map-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}img[_ngcontent-%COMP%]{margin-top:10%;height:70%}}"]}),t})(),rw=(()=>{class t{constructor(t){this.http=t,this.url="http://159.89.22.125:8080/giacomoLeopardi/"}findImageCarousel(){return this.http.get(this.url+"immagineCarousel")}}return t.\u0275fac=function(e){return new(e||t)(te(eg))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ow(t,e){1&t&&Da(0,"li",11),2&t&&Ta("data-slide-to",e.index)}const aw=function(t){return{active:t}};function sw(t,e){if(1&t&&(Oa(0,"div",12),Da(1,"img",13),La()),2&t){const t=e.$implicit;Aa("ngClass",(3,i=aw,n=e.first,Sl(li(),yi(),3,i,n,undefined))),Sr(1),Aa("src",t.retrievedImage,or)("alt",t.name)}var i,n}let lw=(()=>{class t{constructor(t){this.service=t}ngOnInit(){this.service.findImageCarousel().subscribe(t=>{this.imageCarousel=t,this.imageCarousel.forEach(t=>{this.retrieveResonse=t,this.base64Data=this.retrieveResonse.picByte,t.retrievedImage="data:image/jpeg;base64,"+this.base64Data})})}}return t.\u0275fac=function(e){return new(e||t)(Ia(rw))},t.\u0275cmp=ve({type:t,selectors:[["app-chi-siamo"]],decls:37,vars:2,consts:[[1,"container",2,"font-family","'Times New Roman', Times, serif","padding-left","5%","padding-right","5%"],["id","carouselExampleCaptions","data-ride","carousel",1,"carousel","slide"],[1,"carousel-indicators"],["data-target","#carouselExampleCaptions",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item",3,"ngClass",4,"ngFor","ngForOf"],["href","#carouselExampleCaptions","role","button","data-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["href","#carouselExampleCaptions","role","button","data-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],["data-target","#carouselExampleCaptions"],[1,"carousel-item",3,"ngClass"],[1,"d-block","w-100",3,"src","alt"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"Chi siamo"),La(),La(),Oa(4,"h2"),Oa(5,"i"),ms(6," La Nostra Storia"),La(),La(),Oa(7,"p"),ms(8," Il centro culturale G. Leopardi nasce nel 1981 e si pone, a Recanati e nelle citt\xe0 vicine, come luogo di dialogo e di aggregazione per tutti coloro che amano l\u2019arte, la storia, la lettura, la letteratura, la musica. "),La(),Oa(9,"p"),ms(10," Dal 2002 ha allargato la sua base associativa, ha stipulato convenzioni e programmato la sua attivit\xe0 in modo preciso e sistematico abbracciando l\u2019intero territorio regionale. "),La(),Oa(11,"p"),ms(12," Dal 29/12/2004 \xe8 iscritto al n\xb0. 348/SOS nella sezione II del registro regionale delle Associazioni di Promozione Sociale, ai sensi dell\u2019art. 5 comma 4 della L.R. 9/2004. "),La(),Oa(13,"p"),ms(14," Dal 2013\xa0il centro culturale inizia una serie di pubblicazioni e di attivit\xe0 di approfondimento dell'opera e del pensiero del poeta pur mantenendo un profilo culturale ad ampio raggio che abbraccia la musica, l\u2019arte, la lettura e la letteratura. "),La(),Oa(15,"p"),ms(16," La passione che anima chi lo ha fondato e chi lo guida \xe8 l'uomo e la sua esperienza nella concretezza del reale; l'uomo e il suo desiderio di trovare ci\xf2 che d\xe0 consistenza e significato al suo fare. "),La(),Oa(17,"p"),ms(18," A questo riguardo dal 2002 \xe8 possibile associarsi versando 20 Euro al Centro Culturale G. Leopardi \u2013 Recanati "),Da(19,"br"),Oa(20,"b"),ms(21,"IBAN IT55C0311169131000000020021"),La(),Da(22,"br"),ms(23," in modo da conoscere le iniziative in programmazione e poter partecipare. "),La(),Oa(24,"div",1),Oa(25,"ol",2),Ea(26,ow,1,1,"li",3),La(),Oa(27,"div",4),Ea(28,sw,2,5,"div",5),La(),Oa(29,"a",6),Da(30,"span",7),Oa(31,"span",8),ms(32,"Previous"),La(),La(),Oa(33,"a",9),Da(34,"span",10),Oa(35,"span",8),ms(36,"Next"),La(),La(),La(),La()),2&t&&(Sr(26),Aa("ngForOf",e.imageCarousel),Sr(2),Aa("ngForOf",e.imageCarousel))},directives:[qu,ju],styles:[".container[_ngcontent-%COMP%]{margin-bottom:10%}p[_ngcontent-%COMP%]{font-size:large;text-align:justify}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif}h1[_ngcontent-%COMP%]{font-size:xx-large;text-align:center}.card-deck[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.card-text[_ngcontent-%COMP%]{font-size:smaller}h5[_ngcontent-%COMP%]{font-size:x-large}.display-4[_ngcontent-%COMP%]{color:#fff;font-size:xxx-large}.carousel-inner[_ngcontent-%COMP%]{margin-top:10px;text-align:center;width:900px;height:auto;margin-left:auto;margin-right:auto}@media (max-width:500px){p[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;font-size:normal;text-align:justify}.container[_ngcontent-%COMP%]{margin-bottom:20%}.card[_ngcontent-%COMP%]{width:250px}.display-4[_ngcontent-%COMP%]{color:#fff;font-size:xx-large}img[_ngcontent-%COMP%]{width:260px;height:300px}.carousel-inner[_ngcontent-%COMP%]{width:260px;height:220px;margin-top:10px;text-align:center;margin-left:auto;margin-right:auto}.card-deck[_ngcontent-%COMP%]{text-align:-webkit-center}}"]}),t})(),cw=(()=>{class t{constructor(t){this.http=t,this.url="http://159.89.22.125:8080/giacomoLeopardi/"}findAll(){return this.http.get(this.url+"getPoesie")}findPoesiaSingola(t){return this.http.get(this.url+"getPoesia/"+t)}findPoesiaSingolaFiltrata(t){return this.http.get(this.url+"poesiaLike/"+t)}findPoesiaSingolaByCapitolo(t){return this.http.get(this.url+"poesia/"+t)}inserisciPoesia(t){return this.http.post(this.url+"inserisciPoesia",t)}findPoesiaSingolaById(t){return this.http.get(this.url+"getPoesiaAudio/"+t)}findAudioSingoloById(t){return this.http.get(this.url+"audioId/"+t)}}return t.\u0275fac=function(e){return new(e||t)(te(eg))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const uw=["map"];let hw=(()=>{class t{constructor(t,e,i){this.service=t,this.router=e,this._location=i}ngOnInit(){}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.39976943173114,13.55255998134169],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.39976943173114,13.55255998134169],{icon:e}).addTo(t)}searchByCapitolo(t){this.service.findPoesiaSingolaByCapitolo(8).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})})}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(Ia(cw),Ia(mm),Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-casa-adelaide-antici"]],viewQuery:function(t,e){var i;1&t&&Ul(uw,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:24,vars:0,consts:[[1,"container"],[1,"button",2,"vertical-align","middle",3,"click"],["src","assets\\images\\Casa di Adelaide Antici_IGP1012 copia_DxOFP.jpg","alt","Card image cap",1,"card-img-top",2,"width","300px","margin-bottom","30px"],[1,"map-container"],["map",""],[1,"text"],["data-toggle","collapse","href","#multiCollapseExample3","aria-expanded","false","aria-controls","multiCollapseExample3"],["id","multiCollapseExample3",1,"collapse","multi-collapse"],["src","assets\\images\\Le scuderie di casa Antici_IGP1010 copia_DxOFP.jpg",2,"width","300px"],[1,"button",3,"click"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"Casa di Adelaide Antici"),La(),Da(4,"br"),Oa(5,"button",1),Na("click",(function(){return e.goBack()})),Oa(6,"span"),Oa(7,"mat-icon"),ms(8,"arrow_back"),La(),La(),La(),La(),Da(9,"img",2),Da(10,"div",3,4),Oa(12,"div",5),ms(13," Percorriamo ora l\u2019ampio viale che conduce all\u2019uscita del parco, ci immettiamo per un brevissimo tratto sulla statale, per entrare poi tramite Porta Nuova, nell\u2019abitato cittadino. Superata Porta Nuova, svoltando a sinistra, ci imbattiamo in uno spazio che sembra una piccola piazza: \xe8 l\u2019atrio delle scuderie degli Antici, la famiglia di Adelaide, la madre di Giacomo. Sul lato opposto, senza cura, "),Oa(14,"a",6),ms(15,"sta il palazzo Antici-Mattei"),La(),Oa(16,"div",7),Da(17,"img",8),La(),ms(18," del XVI secolo nella cui galleria si sposarono Monaldo e Adelaide. Qui si pu\xf2 sostare pi\xf9 a lungo per parlare di Monaldo, Adelaide e del decisivo influsso che la famiglia ebbe sulle sorti umane di Giacomo. Adelaide, rigorosa credente e fredda negli affetti nei confronti dei figli e del marito, ebbe un ruolo decisivo nella impostazione caratteriale di Giacomo, il quale ebbe verso la madre un atteggiamento di distacco e quasi di soggezione. Su Monaldo \xe8 opportuno soffermarsi perch\xe9 vale la pena conoscere alcuni flash della sua storia personale piena di tentativi economici fallimentari, carichi di conseguenze. Se Giacomo visse la sua esistenza nelle ristrettezze economiche lo si deve a suo padre il quale aveva un pessimo intuito per gli affari. Monaldo rischi\xf2 il fallimento. I creditori gli concessero fiducia ma lo espropriarono dall\u2019amministrazione economica che venne affidata ad Adelaide la quale dal quel giorno divenne arida e pragmatica, preoccupata solo di far quadrare i conti. I rapporti tra i coniugi nel tempo si raffreddarono, come testimonia Monaldo nella sua autobiografia "),Oa(19,"p"),ms(20,' Clicca sul libro per andare a leggere la poesia "A Silvia" '),Oa(21,"button",9),Na("click",(function(){return e.searchByCapitolo(8)})),Oa(22,"mat-icon"),ms(23,"menu_book"),La(),La(),La(),La(),La())},directives:[tw],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:xx-large;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}img[_ngcontent-%COMP%]{margin-top:10%;display:block;margin-left:auto;margin-right:auto;height:200%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:medium;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}.map-container[_ngcontent-%COMP%]{height:180px;width:100%;z-index:0}.map-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}img[_ngcontent-%COMP%]{margin-top:10%;height:70%}}"]}),t})();const pw=["map"];let dw=(()=>{class t{constructor(t,e,i){this.service=t,this.router=e,this._location=i}ngOnInit(){}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.39816,13.55196],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.39816,13.55196],{icon:e}).addTo(t),console.log("MAPPA LEOPARDI: ",this.mapContainer)}searchByCapitolo(t){this.service.findPoesiaSingolaByCapitolo(1).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})})}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(Ia(cw),Ia(mm),Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-casa-leopardi"]],viewQuery:function(t,e){var i;1&t&&Ul(pw,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:37,vars:0,consts:[[1,"container"],[1,"button",2,"vertical-align","middle",3,"click"],["src","assets\\images\\Casa Leopardi_IGP0936 copia_DxOFP.jpg","alt","Card image cap",1,"card-img-top",2,"width","300px","margin-bottom","30px"],[1,"map-container"],["map",""],[1,"text"],["data-toggle","collapse","href","#multiCollapseExample3","aria-expanded","false","aria-controls","multiCollapseExample3"],["id","multiCollapseExample3",1,"collapse","multi-collapse"],["src","assets\\images\\Casa Leopardi_IGP0936 copia_DxOFP.jpg",2,"width","300px"],["routerLink","/piazzuola-sabato-del-villaggio"],["data-toggle","collapse","href","#multiCollapseExample2","aria-expanded","false","aria-controls","multiCollapseExample2"],["id","multiCollapseExample2",1,"collapse","multi-collapse"],["data-toggle","collapse","href","#multiCollapseExample1","aria-expanded","false","aria-controls","multiCollapseExample1"],["id","multiCollapseExample1",1,"collapse","multi-collapse"],["src","assets\\images\\Giacomo-Leopardi-A-Silvia.jpg",2,"width","300px"],[1,"button",3,"click"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"Casa Leopardi"),La(),Da(4,"br"),Oa(5,"button",1),Na("click",(function(){return e.goBack()})),Oa(6,"span"),Oa(7,"mat-icon"),ms(8,"arrow_back"),La(),La(),La(),La(),Da(9,"img",2),Da(10,"div",3,4),Oa(12,"div",5),ms(13," La visita di Casa Leopardi permette di vedere gli ambienti frequentati dal poeta e gli autografi giovanili. All\u2019interno della "),Oa(14,"a",6),ms(15,"residenza"),La(),Oa(16,"div",7),Da(17,"img",8),La(),ms(18," abitata oggi dagli eredi, tutto ci rimanda al tempo di Giacomo, con le scalinate, i passaggi interni, gli arredi, la biblioteca. Uscendo, se ci voltiamo, cogliamo l\u2019ampia estensione del palazzo della famiglia e le finestre dietro le quali immaginiamo vederlo studiare, ripararsi dal freddo con una piccola coperta sulle gambe, prendere appunti, sfogliare uno, due, tre volumi della grande biblioteca voluta dal padre. Da sotto i veroni del paterno ostello si apre la famosa "),Oa(19,"a",9),ms(20,'"Piazzuola del sabato del villaggio"'),La(),ms(21," luogo rimasto simile a quello che vedeva Giacomo agli inizi del diciannovesimo secolo. La piazza \xe8 uno spazio scosceso, non molto ampio, dove sulla sinistra si trova la chiesa di Santa Maria in Montemorello rifatta nel 1501 da due antenati del poeta. Qui Giacomo fu battezzato da Padre Luigi Leopardi, filippino, zio di Monaldo, il giorno dopo la sua nascita il 29 giugno 1798: padrini il nonno materno Filippo Antici e la nonna paterna Virginia Mosca Leopardi; presenti Monaldo e Adelaide, genitori di Giacomo. All'interno della chiesa, ai lati, poco prima dell'altare, spiccano ancora le sedute della gentis Leopardae. "),Oa(22,"a",10),ms(23,"La chiesa di Santa Maria in Montemorello"),La(),Oa(24,"div",11),Da(25,"img",8),La(),ms(26," colpisce per il suo campanile, che presenta una forma poco usuale, ma l\u2019interesse maggiore, per quello che attiene il nostro percorso \xe8 il fatto, scontato se vogliamo, che dal campanile udiamo scandire ogni quarto d'ora il tempo e, a vari intervalli, l'inizio della messa: questo suon dell\u2019ora aveva nell\u2019animo di Giacomo un riverbero particolare, un annuncio che il tempo passa e con esso fugge quell\u2019entrar di giovinezza che a somigliar d\u2019un lampo si dilegua. Occorre porre attenzione a questi particolari, iniziando fin da subito quel lavoro di immedesimazione senza del quale non riusciremo a cogliere la profondit\xe0 del sentire del poeta. Il primo segno che \xe8 vinta la distrazione, \xe8 proprio una attenzione nuova ai rintocchi, come se questi fossero un\u2019allerta, e poi discretamente, ma via via in modo sempre pi\xf9 chiaro, ci si accorger\xe0 anche di quanto sia bella la produzione poetica leopardiana. Sull'altro lato della piazza di fronte al \"palazzo natio\" c\u2019\xe8 la "),Oa(27,"a",12),ms(28,'casa di "Silvia"'),La(),Oa(29,"div",13),Da(30,"img",14),La(),ms(31," , Teresa Fattorini, figlia del cocchiere dei Leopardi, che mor\xec giovane di tisi nel 1818 e che venne immortalata nella poesia A Silvia, composta a Pisa nel 1828. Il componimento, tutto concepito nel ricordo, \xe8 un ipotetico dialogo con la giovane, che Giacomo avr\xe0 forse visto o ascoltato a distanza, da dietro le sue finestre. \xc8 tra le poesie pi\xf9 conosciute perch\xe9 ci sono ancora saggi insegnanti che la fanno imparare a memoria ed anche perch\xe9 la sua musicalit\xe0 la rende facile all\u2019apprendimento. Per Leopardi il ricordo di Silvia \xe8 apertura al mistero, rimando alla trascendenza, estasi: la memoria \xe8 pi\xf9 potente dell\u2019assenza, della morte di Silvia. Ai primi dell\u2019Ottocento la casa dei Fattorini divideva il paese dalla campagna e col ciel sereno la vista era veramente sugli orti coltivati. Leopardi poteva vedere dal palazzo il mar da lungi e quindi il monte, una bellezza viva, espressa efficacemente dal verso lingua mortal non dice quel ch\u2019io sentiva in seno. La Recanati dalla quale voleva fuggire \xe8 qui quasi trasfigurata per la potenza del pensiero che ritorna al passato. \xc8 questa un\u2019esperienza comune a tutti: il ricordare dettagli del proprio vissuto che al momento sembrano secondari e che acquistano una luce nuova quando ritornano alla memoria. Il genio leopardiano rende questo esercizio sublime e ci lascia versi indimenticabili, eterni nel canto A Silvia, la cui struttura \xe8 data da sei domande sul senso dell\u2019esistenza cos\xec urgenti negli anni della giovinezza. "),Oa(32,"p"),ms(33,' Clicca sul libro per andare a leggere la poesia "A Silvia" '),Oa(34,"button",15),Na("click",(function(){return e.searchByCapitolo(1)})),Oa(35,"mat-icon"),ms(36,"menu_book"),La(),La(),La(),La(),La())},directives:[tw,ym],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:xx-large;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}img[_ngcontent-%COMP%]{margin-top:10%;display:block;margin-left:auto;margin-right:auto;height:200%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:medium;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}.map-container[_ngcontent-%COMP%]{height:180px;width:100%;z-index:0}.map-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}img[_ngcontent-%COMP%]{margin-top:10%;height:70%}}"]}),t})();const fw=["map"];let mw=(()=>{class t{constructor(t,e,i){this.service=t,this.router=e,this._location=i}ngOnInit(){}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.39799,13.55112],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.39799,13.55112],{icon:e}).addTo(t)}searchByCapitolo(t){this.service.findPoesiaSingolaByCapitolo(4).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})})}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(Ia(cw),Ia(mm),Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-centro-nazionale-studi-leopardiani"]],viewQuery:function(t,e){var i;1&t&&Ul(fw,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:29,vars:0,consts:[[1,"container"],[1,"button",2,"vertical-align","middle",3,"click"],["src","assets\\images\\06_Centro_Nazionale_Leopardi_2_copia_DxOFP.jpg","alt","Card image cap",1,"card-img-top",2,"width","300px","margin-bottom","30px"],[1,"map-container"],["map",""],[1,"text"],["data-toggle","collapse","href","#multiCollapseExample1","aria-expanded","false","aria-controls","multiCollapseExample1"],["id","multiCollapseExample1",1,"collapse","multi-collapse"],["src","assets\\images\\06_Centro_Nazionale_Leopardi_2_copia_DxOFP.jpg",2,"width","300px","margin-bottom","30px"],["data-toggle","collapse","href","#multiCollapseExample2","aria-expanded","false","aria-controls","multiCollapseExample2"],["id","multiCollapseExample2",1,"collapse","multi-collapse"],["src","assets\\images\\Giacomo_Leopardi_Morelli.jpg",2,"width","300px","margin-bottom","30px"],[1,"button",3,"click"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"Centro Nazionale Studi Leopardiani"),La(),Da(4,"br"),Oa(5,"button",1),Na("click",(function(){return e.goBack()})),Oa(6,"span"),Oa(7,"mat-icon"),ms(8,"arrow_back"),La(),La(),La(),La(),Da(9,"img",2),Da(10,"div",3,4),Oa(12,"div",5),ms(13," Risalendo la \"piazzuola\" e costeggiando verso sinistra casa Leopardi, percorriamo per circa cinquanta metri una stradina che porta verso il monte Tabor, meglio conosciuto come Colle dell'Infinito. Fatti pochi passi ancora, ci imbattiamo nell'ampia scalinata del "),Oa(14,"a",6),ms(15,"Centro Nazionale Studi Leopardiani"),La(),Oa(16,"div",7),Da(17,"img",8),La(),ms(18," , istituto sorto nel 1937 allo scopo di diffondere l'opera di Giacomo Leopardi attraverso convegni, seminari e presentazioni di libri. Il Centro dispone di un'ampia biblioteca e possiede il "),Oa(19,"a",9),ms(20,"ritratto del poeta, realizzato nel 1845 da Domenico Morelli"),La(),Oa(21,"div",10),Da(22,"img",11),La(),ms(23," con l\u2019assistenza di Antonio Ranieri sulla base della maschera funeraria. L\u2019orto sul Colle dell\u2019Infinito \xe8 gestito dal Fondo Ambiente Italiano che permette di effettuare visite anche su prenotazione. Per chi soggiorna a Recanati \xe8 un\u2019esperienza da non perdere. Sulla scalinata del Centro Nazionale Studi Leopardiani, immersi nel verde che lo circonda, dove \xe8 facile trovare silenzio e concentrazione, rimaniamo stupiti quando scopriamo che per Giacomo la noia \xe8 il pi\xf9 sublime dei sentimenti umani perch\xe9 \xe8 la constatazione del non potere essere soddisfatti da alcuna cosa terrena. La noia per lui \xe8 il segno della nobilt\xe0 e della grandezza della natura umana, esperienza reale di una esistenza mai paga. Nulla riesce a colmare il desiderio dell\u2019uomo che ha natura infinita. Questa contraddizione per Leopardi \xe8 strutturale, non si pu\xf2 colmare o eliminare, tanto che chiama uomini di nessun momento coloro che non vivono e non provano questo sentimento. Il poeta esprime questa sproporzione dell'animo di fronte alla realt\xe0 nel Pensiero LXVIII. "),Oa(24,"p"),ms(25,' Clicca sul libro per andare a leggere il "Pensiero LXVIII" '),Oa(26,"button",12),Na("click",(function(){return e.searchByCapitolo(4)})),Oa(27,"mat-icon"),ms(28,"menu_book"),La(),La(),La(),La(),La())},directives:[tw],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:xx-large;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}img[_ngcontent-%COMP%]{margin-top:10%;display:block;margin-left:auto;margin-right:auto;height:200%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:medium;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}.map-container[_ngcontent-%COMP%]{height:180px;width:100%;z-index:0}.map-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}img[_ngcontent-%COMP%]{margin-top:10%;height:70%}}"]}),t})();const gw=["map"];let yw=(()=>{class t{constructor(t,e,i){this.service=t,this.router=e,this._location=i}ngOnInit(){}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.39793,13.5528],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.39793,13.5528],{icon:e}).addTo(t)}searchByCapitolo(t){this.service.findPoesiaSingolaByCapitolo(2).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})})}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(Ia(cw),Ia(mm),Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-chiesa-dei-cappuccini"]],viewQuery:function(t,e){var i;1&t&&Ul(gw,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:29,vars:0,consts:[[1,"container"],[1,"button",2,"vertical-align","middle",3,"click"],["src","assets\\images\\Chiesa dei Cappuccini_IGP0958 copia_DxOFP.jpg","alt","Card image cap",1,"card-img-top",2,"width","300px","margin-bottom","30px"],[1,"map-container"],["map",""],[1,"text"],["data-toggle","collapse","href","#multiCollapseExample1","aria-expanded","false","aria-controls","multiCollapseExample1"],["id","multiCollapseExample1",1,"collapse","multi-collapse"],["src","assets\\images\\Chiesa dei Cappuccini_IGP0958 copia_DxOFP.jpg",2,"width","300px","margin-bottom","30px"],["data-toggle","collapse","href","#multiCollapseExample2","aria-expanded","false","aria-controls","multiCollapseExample2"],["id","multiCollapseExample2",1,"collapse","multi-collapse"],["src","assets\\images\\01_Ippolita Mezzalancia_DxOFP.jpg",2,"width","300px","margin-bottom","30px"],[1,"button",3,"click"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"Chiesa dei Cappuccini"),La(),Da(4,"br"),Oa(5,"button",1),Na("click",(function(){return e.goBack()})),Oa(6,"span"),Oa(7,"mat-icon"),ms(8,"arrow_back"),La(),La(),La(),La(),Da(9,"img",2),Da(10,"div",3,4),Oa(12,"div",5),ms(13," Guardando la Chiesa di Montemorello, sulla destra c'\xe8 una breve via che ci permette di arrivare in pochi minuti alla "),Oa(14,"a",6),ms(15,"chiesa porticata dei Cappuccini"),La(),Oa(16,"div",7),Da(17,"img",8),La(),ms(18," , del secolo XVII, dove oltre a due tele del Pomarancio e alla discussa \"Madonna dell'Insalata\" che alcuni attribuiscono al Caravaggio, si trova, entrando sulla destra, l'effige su lapide di "),Oa(19,"a",9),ms(20,"Ippolita Mezzalancia"),La(),Oa(21,"div",10),Da(22,"img",11),La(),ms(23," che una tradizione riferita da Vincenzo Spezioli autore di una guida di Recanati del 1898, indica essere il monumento sepolcrale che ispir\xf2 il canto Sopra il ritratto di una bella donna scolpito nel monumento sepolcrale della medesima. Il ritratto \xe8 disegnato su tela e spicca sulla cimasa della lapide con iscrizione latina, incorniciato in un ovale di marmo. La Mezzalancia apparteneva ad una antica famiglia di origine aretina, trasferitasi a Jesi, andata sposa ad Orazio Mazzagalli e morta all\u2019et\xe0 di 39 anni nel 1769. E\u2019 questo un dettaglio molto importante per la nostra indagine perch\xe9 Orazio Mazzagalli \xe8 il padre di Leandro marito di Isabella Antici sorella di Adelaide, madre di Giacomo. Quindi Leopardi oltre ad aver visto la lapide nella chiesa dei Cappuccini, complesso conventuale che frequentava da piccolo, ha avuto l\u2019opportunit\xe0 di ritornare sull\u2019effige guardando altri due quadri commemorativi conservati a casa dei cugini. La morte prematura e l\u2019eccezionalit\xe0 delle sue doti hanno fatto di questa donna sicuramente una figura esemplare e a casa Mazzagalli Giacomo pu\xf2 aver sentito conversazioni \u2013 tipiche delle famiglie nobiliari \u2013 riguardo alle virt\xf9 eroiche di Ippolita, ben evidenziate anche sulla lapide voluta dal marito che la celebra come una donna devota a Dio, caritatevole verso i bisognosi, madre esemplare e amata da tutti. Sopra il ritratto\u2026 \xe8 una poesia poco valorizzata se non addirittura dimenticata eppure \xe8 un canto sorprendente, uno tra i pi\xf9 importanti di Leopardi composto nell\u2019inverno del \u201934-\u201935 e dove emergono in modo drammatico le domande sul mistero della nostra esistenza. La poesia parla infatti della bellezza femminile, dell\u2019amore e del desiderio mai appagato, spazzati via dalla morte. Giacomo prende spunto dalla figura di Ippolita per dire \u201ceri bella, ma ora sei solo polvere e scheletro, Cos\xec riduce il fato qual sembianza fra noi parve pi\xf9 viva immagine del ciel. Misterio eterno dell'esser nostro.\u201d La natura umana \xe8 veramente un grande mistero! Per struttura fragile, ma capace di desideri infiniti e visioni altere, in continua ricerca come Ulisse, a diporto ardito notator per l\u2019oce\xe0no. Ma spesso accade che una stonatura, un accidente investa la nostra esistenza e che questa tensione si corrompa, fletta. Leopardi allora aggrava la sua domanda e grida: \u201cessere umano, se sei cos\xec fragile e vile, se sei polvere e di te non rimane niente, perch\xe9 brami, perch\xe9 senti cos\xec alto? Natura umana, or come, se frale in tutto e vile, se polve ed ombra sei, tant\u2019alto senti? Se il tuo essere \xe8 in parte nobile, spirituale, come \xe8 possibile che i migliori tuoi pensieri e azioni siano spazzati via da una esistenza che cessa, dalla distruzione del corpo? Se in parte anco gentile, come i pi\xf9 degni tuoi moti e pensieri son cos\xec di leggeri da s\xec basse cagioni e desti e spenti? "),Oa(24,"p"),ms(25,' Clicca sul libro per andare a leggere la poesia "Sopra il ritratto di una bella donna scolpito nel monumento sepolcrale della medesima" '),Oa(26,"button",12),Na("click",(function(){return e.searchByCapitolo(2)})),Oa(27,"mat-icon"),ms(28,"menu_book"),La(),La(),La(),La(),La())},directives:[tw],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:xx-large;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}img[_ngcontent-%COMP%]{margin-top:10%;display:block;margin-left:auto;margin-right:auto;height:200%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:medium;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}.map-container[_ngcontent-%COMP%]{height:180px;width:100%;z-index:0}.map-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}img[_ngcontent-%COMP%]{margin-top:10%;height:70%}}"]}),t})();const _w=["map"];let vw=(()=>{class t{constructor(t,e,i){this.service=t,this.router=e,this._location=i}ngOnInit(){}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.39809,13.54967],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.39809,13.54967],{icon:e}).addTo(t)}searchByCapitolo(t){this.service.findPoesiaSingolaByCapitolo(7).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})})}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(Ia(cw),Ia(mm),Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-il-colle-dell-infinito"]],viewQuery:function(t,e){var i;1&t&&Ul(_w,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:30,vars:0,consts:[[1,"container"],[1,"button",2,"vertical-align","middle",3,"click"],["src","assets\\images\\Dal Colle dell_infinito la Torre del Borgo_IGP1003 copia_DxOFP.jpg","alt","Card image cap",1,"card-img-top",2,"width","300px","margin-bottom","30px"],[1,"map-container"],["map",""],[1,"text"],["data-toggle","collapse","href","#multiCollapseExample1","aria-expanded","false","aria-controls","multiCollapseExample1"],["id","multiCollapseExample1",1,"collapse","multi-collapse"],["src","assets\\images\\Il colle dell_Infinito_IGP0987 copia_DxOFP.jpg",2,"width","300px"],[1,"button",3,"click"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"Colle dell'Infinito"),La(),Da(4,"br"),Oa(5,"button",1),Na("click",(function(){return e.goBack()})),Oa(6,"span"),Oa(7,"mat-icon"),ms(8,"arrow_back"),La(),La(),La(),La(),Da(9,"img",2),Da(10,"div",3,4),Oa(12,"div",5),ms(13," Con ancora negli occhi e nell'animo lo stupore della natura all\u2019orizzonte, prendiamo un sentiero un po\u2019 tortuoso, sterrato e stretto che, se si \xe8 in gruppo, occorre percorrere in fila indiana. La via \xe8 delimitata a destra ancora dall\u2019alto muro, antico, di mattoni a faccia vista e a sinistra, da una siepe continua di cipressi. \xc8 la siepe [\u2026] che il guardo esclude. Dopo aver percorso una cinquantina di metri, arriviamo ad uno spazio piano, come un altare, su cui campeggia nel muro la scritta sempre caro mi fu quest'ermo colle. \xc8 il "),Oa(14,"a",6),ms(15,"Colle dell'Infinito"),La(),Oa(16,"div",7),Da(17,"img",8),La(),ms(18," con alberi alti che lasciano intravedere gli Appennini, i monti azzurri e a nord l'abitato cittadino, quasi coperto alla vista dagli alberi, dove appare, tra due grandi rami, la torre del borgo. Spesso giunge un vento leggero che sentiamo stormire tra queste piante. \xc8 un luogo di pace ben descritto ne L\u2019Infinito, certamente la poesia pi\xf9 conosciuta di Leopardi, il quale, in una felice contraddizione, ci fa accorgere della positivit\xe0 del limite: la siepe che esclude il guardo \xe8 impedimento che permette di risvegliare il desiderio de l'eterno. "),Oa(19,"p"),ms(20,' Clicca sul libro per andare a leggere la poesia "L\'infinito" '),Oa(21,"button",9),Na("click",(function(){return e.searchByCapitolo(7)})),Oa(22,"mat-icon"),ms(23,"menu_book"),La(),La(),La(),ms(24," Mentre ancora con gli occhi scorriamo le parole de l\u2019Infinito cercando spunti sfuggiti alla prima o ennesima lettura, giunge all'improvviso il \"suon dell'ora dalla torre del borgo\". Leopardi \xe8 poeta della memoria, non scrive d\u2019istinto, ma descrive ricordi del passato in cui la memoria \xe8 pura presenza di quello che, caduco e mortale nel tempo, si fa ora presente e divino nello spirito: ecco allora che nella sua coscienza tutto diviene immortale e si salva, come il suon dell\u2019ora cos\xec gli assidui terrori. Il canto viene composto nel 1829 a Recanati dove il poeta rivive l\u2019esperienza dell\u2019infanzia, quando fanciullo, di notte, temeva il buio e anelando il mattino trovava conforto ascoltando i rintocchi dell\u2019orologio della torre cittadina. "),Oa(25,"p"),ms(26,' Clicca sul libro per andare a leggere la poesia "Le ricordanze VV 50-70" '),Oa(27,"button",9),Na("click",(function(){return e.searchByCapitolo(7)})),Oa(28,"mat-icon"),ms(29,"menu_book"),La(),La(),La(),La(),La())},directives:[tw],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:xx-large;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}img[_ngcontent-%COMP%]{margin-top:10%;display:block;margin-left:auto;margin-right:auto;height:200%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:medium;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}.map-container[_ngcontent-%COMP%]{height:180px;width:100%;z-index:0}.map-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}img[_ngcontent-%COMP%]{margin-top:10%;height:70%}}"]}),t})();const bw=["map"];let xw=(()=>{class t{constructor(t,e,i){this.service=t,this.router=e,this._location=i}ngOnInit(){}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.4024,13.55145],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.4024,13.55145],{icon:e}).addTo(t)}searchByCapitolo(t){this.service.findPoesiaSingolaByCapitolo(11).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})})}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(Ia(cw),Ia(mm),Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-lettera-della-befana"]],viewQuery:function(t,e){var i;1&t&&Ul(bw,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:25,vars:0,consts:[[1,"container"],[1,"button",2,"vertical-align","middle",3,"click"],["src","assets\\images\\Palazzo Carancini_Roberti_IGP1042 copia_DxOFP.jpg","alt","Card image cap",1,"card-img-top",2,"width","300px","margin-bottom","30px"],[1,"map-container"],["map",""],[1,"text"],["data-toggle","collapse","href","#multiCollapseExample1","aria-expanded","false","aria-controls","multiCollapseExample1"],["id","multiCollapseExample1",1,"collapse","multi-collapse"],["src","assets\\images\\Palazzo Carancini_Roberti_IGP1042 copia_DxOFP.jpg",2,"width","300px"],[1,"button",3,"click"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"La lettera alla Befana"),La(),Da(4,"br"),Oa(5,"button",1),Na("click",(function(){return e.goBack()})),Oa(6,"span"),Oa(7,"mat-icon"),ms(8,"arrow_back"),La(),La(),La(),La(),Da(9,"img",2),Da(10,"div",3,4),Oa(12,"div",5),ms(13," Usciamo dal complesso monastico degli agostiniani e ci dirigiamo verso il centro-citt\xe0 ma, appena giriamo l\u2019angolo, se non siamo distratti e la stanchezza del percorso fin qui fatto non prende il sopravvento, ci accorgiamo, sulla destra, della presenza di un grande edificio di particolare valore storico e architettonico, \xe8 "),Oa(14,"a",6),ms(15,'palazzo Caracini - Roberti"'),La(),Oa(16,"div",7),Da(17,"img",8),La(),ms(18," del XVII secolo, con un atrio di ingresso e una maestosa scala. Quasi in mezzo alla strada, disturbati dalle auto, in una zona dove per sorte la via si restringe, tentiamo, come abbiamo fatto in precedenza arrivando alla chiesa di San Vito, di ritornare con l\u2019immaginazione al 1810 quando Monaldo, \u201cfuggendo\u201d da casa propria, accompagnato dai figli maggiori, faceva \u201csalotto\u201d a casa della marchesa Volunnia Roberti, donna colta e dinamica, che riuniva amici con i quali giocava a carte, a scacchi e pi\xf9 in generale faceva conversazione sui \u201ctempi attuali\u201d. Col pensiero gi\xe0 vediamo questo gruppo di nobili recanatesi ben vestiti - Monaldo andava sempre di nero - nell\u2019ampio salone pieno di quadri e arazzi, ognuno col suo bicchierino di rosolio. Giacomo mangiava i pasticcini e riordinava i libri. Esiste una lettera che il nostro a 12 anni scrive a nome della befana, accompagnatoria di dolciumi natalizi e bagatelle che la famiglia Leopardi aveva preparato per i ragazzi che, con i genitori, si trovavano a frequentare casa Roberti. La lettera ci presenta un Giacomo ironico e pungente, nuovo rispetto all\u2019etichetta stereotipata veicolata in tante aule scolastiche. Leggiamola tutta:"),Da(19,"br"),Oa(20,"p"),ms(21," Clicca sul libro per andare a leggere la lettera alla befana "),Oa(22,"button",9),Na("click",(function(){return e.searchByCapitolo(11)})),Oa(23,"mat-icon"),ms(24,"menu_book"),La(),La(),La(),La(),La())},directives:[tw],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:xx-large;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}img[_ngcontent-%COMP%]{margin-top:10%;display:block;margin-left:auto;margin-right:auto;height:200%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:medium;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}.map-container[_ngcontent-%COMP%]{height:180px;width:100%;z-index:0}.map-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}img[_ngcontent-%COMP%]{margin-top:10%;height:70%}}"]}),t})();const ww=["map"];let Cw=(()=>{class t{constructor(t){this._location=t}ngOnInit(){}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.398230871991785,13.54970489839643],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.398230871991785,13.54970489839643],{icon:e}).addTo(t)}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-monte-tabor"]],viewQuery:function(t,e){var i;1&t&&Ul(ww,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:19,vars:0,consts:[[1,"container"],[1,"button",2,"vertical-align","middle",3,"click"],["src","assets\\images\\07_Verso_il_monte_tabor_DxOFP.jpg","alt","Card image cap",1,"card-img-top",2,"width","300px","margin-bottom","30px"],[1,"map-container"],["map",""],[1,"text"],["data-toggle","collapse","href","#multiCollapseExample1","aria-expanded","false","aria-controls","multiCollapseExample1"],["id","multiCollapseExample1",1,"collapse","multi-collapse"],["src","assets\\images\\07_Verso_il_monte_tabor_DxOFP.jpg",2,"width","300px","margin-bottom","30px"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"Monte Tabor"),La(),Da(4,"br"),Oa(5,"button",1),Na("click",(function(){return e.goBack()})),Oa(6,"span"),Oa(7,"mat-icon"),ms(8,"arrow_back"),La(),La(),La(),La(),Da(9,"img",2),Da(10,"div",3,4),Oa(12,"div",5),ms(13,' Ora ci inoltriamo verso la sommit\xe0 del colle dell\u2019Infinito, tenendo a mente l\u2019indicazione di metodo iniziale, quella cio\xe8 di guardare con attenzione ci\xf2 che c\u2019\xe8 - il viale, gli alberi, la siepe, il muro, la campagna, la torre, le case, i monti, i colori, il cielo - e ascoltare l\'eco delle cose - lo scricchiolio dei sassi sotto i piedi, una campana, il vento tra gli alberi, il silenzio interrotto, lo "stormire" degli uccelli - affinch\xe9 l\u2019immedesimazione con Leopardi acquisti spessore e si percepisca il senso della "sublimit\xe0 del sentire". Lasciato il CNSL, dopo pochi passi troviamo, a destra, delle '),Oa(14,"a",6),ms(15,"pietre simbolicamente ricomposte "),La(),Oa(16,"div",7),Da(17,"img",8),La(),ms(18," che provengono dall'originaria tomba del poeta, sepolto nel 1837 nella chiesa di San Vitale presso Fuorigrotta a Napoli. Leopardi mor\xec a 39 anni in un periodo in cui il colera stava colpendo la citt\xe0 che lo ospitava, ma la causa del suo decesso non \xe8 chiara e comunque indipendente dal morbo. Varie le ipotesi: tra le pi\xf9 accreditate c'\xe8 quella che parla dell'infiammazione del pericardio che avrebbe stressato il cuore di Giacomo tanto da condurlo alla morte, o l'altra - tratta dal referto ufficiale - di idropisia polmonare, causata dai problemi respiratori dovuti alla deformazione della colonna vertebrale. Il 21 luglio del 1900 venne ispezionata la tomba e poich\xe9 tra i frammenti trovati mancava il cranio, subito sorsero dubbi sull\u2019autenticit\xe0 delle spoglie. I frammenti ossei vennero ricomposti e oggi si trovano nel Parco Vergiliano a Piedigrotta nel quartiere Mergellina del capoluogo campano. \xc8 probabile che quelle ossa non appartengano per\xf2 a Leopardi e, quasi a conferma di questa dissonanza tomba-corpo, i pi\xf9 qui passano distrattamente. "),La(),La())},directives:[tw],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:xx-large;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}img[_ngcontent-%COMP%]{margin-top:10%;display:block;margin-left:auto;margin-right:auto;height:200%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:medium;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}.map-container[_ngcontent-%COMP%]{height:180px;width:100%;z-index:0}.map-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}img[_ngcontent-%COMP%]{margin-top:10%;height:70%}}"]}),t})();const Sw=["map"];let Tw=(()=>{class t{constructor(t,e,i){this.service=t,this.router=e,this._location=i}ngOnInit(){}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.40265,13.55022],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.40265,13.55022],{icon:e}).addTo(t)}searchByCapitolo(t){this.service.findPoesiaSingolaByCapitolo(12).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})})}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(Ia(cw),Ia(mm),Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-palazzo-venieri"]],viewQuery:function(t,e){var i;1&t&&Ul(Sw,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:24,vars:0,consts:[[1,"container"],[1,"button",2,"vertical-align","middle",3,"click"],["src","assets\\images\\Palazzo Venieri_IGP1050_DxOFP.JPG","alt","Card image cap",1,"card-img-top",2,"width","300px","margin-bottom","30px"],[1,"map-container"],["map",""],[1,"text"],["data-toggle","collapse","href","#multiCollapseExample1","aria-expanded","false","aria-controls","multiCollapseExample1"],["id","multiCollapseExample1",1,"collapse","multi-collapse"],["src","assets\\images\\Palazzo Venieri_IGP1050_DxOFP.JPG",2,"width","300px"],[1,"button",3,"click"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"Palazzo Venieri"),La(),Da(4,"br"),Oa(5,"button",1),Na("click",(function(){return e.goBack()})),Oa(6,"span"),Oa(7,"mat-icon"),ms(8,"arrow_back"),La(),La(),La(),La(),Da(9,"img",2),Da(10,"div",3,4),Oa(12,"div",5),ms(13," Col sorriso negli occhi percorriamo l\u2019ultimo tratto della nostra visita guidata dirigendoci verso Palazzo Venieri e il centro citt\xe0. Ancora non riusciamo ad intravvedere scorci di panorama poich\xe8 i caseggiati settecenteschi con stemmi, scritte latine, ideogrammi sui portali, fanno ala al nostro passaggio: testimonianza di un tempo passato che noi possiamo solo immaginare. "),Oa(14,"a",6),ms(15,"Palazzo Venieri"),La(),Oa(16,"div",7),Da(17,"img",8),La(),ms(18," , che i recanatesi chiamano palazzo degli studi, sede del liceo classico, fu edificato dal cardinale Venieri nella seconda met\xe0 del 1400 e negli anni in cui visse Giacomo era abitato dalla nobile famiglia Carradori. I giardini pubblici al di l\xe0 della strada erano parte del palazzo e collegati da una galleria alle vecchie scuderie. Entriamo nel cortile: a destra un pozzo, davanti a noi in alto sotto l\u2019antico orologio, l\u2019ammonimento \u201cvolat irreparabile tempus\u201d. Ora una apertura con balaustra ci incanta: la vista sulla costa spazia da Osimo a Civitanova Marche e oltre; davanti l\u2019Adriatico, a sinistra il Monte Conero, un po\u2019 a destra Loreto e il pinnacolo della Santa Casa, che di sera illuminato \xe8 pi\xf9 riconoscibile. L\u2019atrio di Palazzo Venieri \xe8 sempre tranquillo di pomeriggio e costituisce una sosta decisiva nel nostro procedere verso la conoscenza del grande poeta. Il luogo si presta alla lettura del canto Alla sua donna. L\u2019inno \xe8 poco conosciuto, generalmente non viene fatto studiare a scuola e presenta una certa complessit\xe0, tanto che il Manzoni stesso ad una prima lettura trov\xf2 il testo incomprensibile. Scritto a Recanati in sei giorni nel settembre del 1823 \xe8 si trova in gigantografia nella sala conferenze del Centro Culturale G. Leopardi, visitabile solo su prenotazione. Nell\u2019inno Alla sua donna, inno alla bellezza - quella bellezza che deve invadere il quotidiano e senza la quale come direbbe Pavese \u201cil vivere taglia le gambe\u201d - Leopardi dialoga con una alterit\xe0 la cui presenza \xe8 certa, \xe8 quindi il canto alla bellezza con la B maiuscola quella che neanche il suo pessimismo riesce a cancellare. "),Oa(19,"p"),ms(20,' Clicca sul libro per andare a leggere la poesia "Alla sua donna" '),Oa(21,"button",9),Na("click",(function(){return e.searchByCapitolo(12)})),Oa(22,"mat-icon"),ms(23,"menu_book"),La(),La(),La(),La(),La())},directives:[tw],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:xx-large;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}img[_ngcontent-%COMP%]{margin-top:10%;display:block;margin-left:auto;margin-right:auto;height:200%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:medium;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}.map-container[_ngcontent-%COMP%]{height:180px;width:100%;z-index:0}.map-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}img[_ngcontent-%COMP%]{margin-top:10%;height:70%}}"]}),t})();const kw=["map"];let Ew=(()=>{class t{constructor(t){this._location=t}ngOnInit(){}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.40370575976428,13.548525612239967],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.40370575976428,13.548525612239967],{icon:e}).addTo(t)}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-piazza-torre-del-borgo"]],viewQuery:function(t,e){var i;1&t&&Ul(kw,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:24,vars:0,consts:[[1,"container"],[1,"button",2,"vertical-align","middle",3,"click"],["src","assets\\images\\Piazza della torre del Borgo con la statua di G. Leopardi._IGP1059_DxOFP.JPG","alt","Card image cap",1,"card-img-top",2,"width","300px","margin-bottom","30px"],[1,"map-container"],["map",""],[1,"text"],["data-toggle","collapse","href","#multiCollapseExample1","aria-expanded","false","aria-controls","multiCollapseExample1"],["id","multiCollapseExample1",1,"collapse","multi-collapse"],["src","assets\\images\\Piazza della torre del Borgo con la statua di G. Leopardi._IGP1059_DxOFP.JPG",2,"width","300px"],["data-toggle","collapse","href","#multiCollapseExample2","aria-expanded","false","aria-controls","multiCollapseExample2"],["id","multiCollapseExample2",1,"collapse","multi-collapse"],["src","assets\\images\\La torre del Borgo e la statua di G. Leopardi_IGP1061 copia_DxOFP.jpg",2,"width","300px"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"Piazza della Torre del Borgo"),La(),Da(4,"br"),Oa(5,"button",1),Na("click",(function(){return e.goBack()})),Oa(6,"span"),Oa(7,"mat-icon"),ms(8,"arrow_back"),La(),La(),La(),La(),Da(9,"img",2),Da(10,"div",3,4),Oa(12,"div",5),ms(13," Uscendo dal Palazzo degli Studi ci troviamo gi\xe0 in "),Oa(14,"a",6),ms(15,"piazza G. Leopardi "),La(),Oa(16,"div",7),Da(17,"img",8),La(),ms(18," dominata dalla statua imponente del poeta collocata qui nel 1871 e che volge le spalle al Palazzo Comunale. Sul lato nord della piazza campeggia una torre ghibellina risalente al XII secolo: \xe8 la "),Oa(19,"a",9),ms(20,"Torre del Borgo."),La(),Oa(21,"div",10),Da(22,"img",11),La(),ms(23," Riviviamo qui nella piazza, dopo l\u2019intensa passeggiata, la stessa esperienza descritta da Giacomo nei noti versi del Canto notturno di un pastore errante dell\u2019Asia: E quando miro in cielo arder le stelle;/Dico fra me pensando:/A che tante facelle?/Che fa l'aria infinita, e quel profondo/Infinito Seren? che vuol dir questa/Solitudine immensa? ed io che sono?: \xe8 questo il valore aggiunto del genio leopardiano. Il suo pessimismo \xe8 una domanda aperta, in ogni occasione, alla ricerca del senso dell\u2019esistenza. Non ci possono essere risposte preconfezionate proprio perch\xe9 la vita di ognuno \xe8 unica e irripetibile. Apriamoci allora alla scoperta dell\u2019altra Bellezza, quella che \xe8 sottesa a tutti i suoi versi, quella che permette di verificare l\u2019effetto contrario di Leopardi da cui \xe8 partito il tour. A presto! "),La(),La())},directives:[tw],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:xx-large;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}img[_ngcontent-%COMP%]{margin-top:10%;display:block;margin-left:auto;margin-right:auto;height:200%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:medium;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}.map-container[_ngcontent-%COMP%]{height:180px;width:100%;z-index:0}.map-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}img[_ngcontent-%COMP%]{margin-top:10%;height:70%}}"]}),t})();const Pw=["map"];let Iw=(()=>{class t{constructor(t,e,i){this.service=t,this.router=e,this._location=i}ngOnInit(){}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.39803,13.55185],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.39803,13.55185],{icon:e}).addTo(t)}searchByCapitolo(t){this.service.findPoesiaSingolaByCapitolo(7).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})})}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(Ia(cw),Ia(mm),Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-piazzuola-sabato-del-villaggio"]],viewQuery:function(t,e){var i;1&t&&Ul(Pw,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:24,vars:0,consts:[[1,"container"],[1,"button",2,"vertical-align","middle",3,"click"],["src","assets\\images\\Piazzuola del Sabato del villaggio_IGP0946 copia_DxOFP.jpg","alt","Card image cap",1,"card-img-top",2,"width","300px","margin-bottom","30px"],[1,"map-container"],["map",""],[1,"text"],["data-toggle","collapse","href","#multiCollapseExample1","aria-expanded","false","aria-controls","multiCollapseExample1"],["id","multiCollapseExample1",1,"collapse","multi-collapse"],["src","assets\\images\\Piazzuola del Sabato del villaggio_IGP0946 copia_DxOFP.jpg",2,"width","300px","margin-bottom","30px"],[1,"button",3,"click"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"Piazzuola del Sabato del Villaggio"),La(),Da(4,"br"),Oa(5,"button",1),Na("click",(function(){return e.goBack()})),Oa(6,"span"),Oa(7,"mat-icon"),ms(8,"arrow_back"),La(),La(),La(),La(),Da(9,"img",2),Da(10,"div",3,4),Oa(12,"div",5),ms(13," Ritornando sui propri passi verso la "),Oa(14,"a",6),ms(15,"Piazzuola del Sabato del Villaggio"),La(),Oa(16,"div",7),Da(17,"img",8),La(),ms(18," , i pi\xf9 riandranno ai ricordi scolastici e al volto della maestra, l\u2019antica e cara maestra, la quale spiegava i versi che da questa piazza prendono spunto. La nota poesia \xe8 stata composta nel settembre del 1829, negli ultimi mesi di permanenza del poeta nel natio borgo selvaggio, luogo che dal 29 aprile del 1830 non rivedr\xe0 mai pi\xf9. Recanati \xe8 per Giacomo la terra dalla quale fuggire e nella quale voler sempre ritornare, il paese odiato e nel contempo desiderato: sentimenti che appartengono all\u2019uomo mai naturalizzato in luogo alcuno, all\u2019uomo \u201csenza patria\u201d. Qui pu\xf2 capitare, agli estremi del giorno, specialmente nelle stagioni fredde, di camminare in solitudine, senza il rumore delle auto che circolano. Ci si trova allora immersi nel silenzio e in una illuminazione soffusa, dove con l\u2019immaginazione \xe8 possibile vedere la donzelletta che vien dalla campagna in sul calar del sole [\u2026] o la vecchierella che siede con le vicine su la scala a filare. Ci si sorprende di non essersi accorti prima, che ci sono anche i fanciulli che gridando su la piazzuola in frotta, e qua e l\xe0 saltando, fanno un lieto romore mentre riede alla sua parca mensa, fischiando, il zappatore. "),Oa(19,"p"),ms(20,' Clicca sul libro per andare a leggere la poesia "Il sabato del villaggio" '),Oa(21,"button",9),Na("click",(function(){return e.searchByCapitolo(3)})),Oa(22,"mat-icon"),ms(23,"menu_book"),La(),La(),La(),La(),La())},directives:[tw],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:xx-large;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}img[_ngcontent-%COMP%]{margin-top:10%;display:block;margin-left:auto;margin-right:auto;height:200%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:medium;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}.map-container[_ngcontent-%COMP%]{height:180px;width:100%;z-index:0}.map-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}img[_ngcontent-%COMP%]{margin-top:10%;height:70%}}"]}),t})();const Mw=["map"];let Aw=(()=>{class t{constructor(t,e,i){this.service=t,this.router=e,this._location=i}ngOnInit(){}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.40187,13.5519],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.40187,13.5519],{icon:e}).addTo(t)}searchByCapitolo(t){this.service.findPoesiaSingolaByCapitolo(7).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})})}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(Ia(cw),Ia(mm),Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-torre-passero-solitario"]],viewQuery:function(t,e){var i;1&t&&Ul(Mw,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:25,vars:0,consts:[[1,"container"],[1,"button",2,"vertical-align","middle",3,"click"],["src","assets\\images\\La torre del passero solitario sovrasta il chiostro di S. Agostino_IGP1035 copia_DxOFP.jpg","alt","Card image cap",1,"card-img-top",2,"width","300px","margin-bottom","30px"],[1,"map-container"],["map",""],[1,"text"],["data-toggle","collapse","href","#multiCollapseExample1","aria-expanded","false","aria-controls","multiCollapseExample1"],["id","multiCollapseExample1",1,"collapse","multi-collapse"],["src","assets\\images\\La torre del passero solitario sovrasta il chiostro di S. Agostino_IGP1035 copia_DxOFP.jpg",2,"width","300px"],[1,"button",3,"click"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"Torre del Passero Solitario"),La(),Da(4,"br"),Oa(5,"button",1),Na("click",(function(){return e.goBack()})),Oa(6,"span"),Oa(7,"mat-icon"),ms(8,"arrow_back"),La(),La(),La(),La(),Da(9,"img",2),Da(10,"div",3,4),Oa(12,"div",5),ms(13," Dopo la tappa di San Vito riprendiamo via Roma che termina pochi metri pi\xf9 avanti allorch\xe9 voltando a sinistra si fiancheggia la maestosa chiesa di Sant\u2019Agostino, fino a giungere nell\u2019angusto piazzale antistante l\u2019ingresso della chiesa. Davanti a noi si staglia la torre dell\u2019acquedotto comunale scambiata dai pi\xf9 per la "),Oa(14,"a",6),ms(15,"Torre del passero solitario"),La(),Oa(16,"div",7),Da(17,"img",8),La(),ms(18," che invece si trova all\u2019interno del chiostro di Sant\u2019Agostino il cui accesso non \xe8 immediatamente visibile al passante. Entriamo nel chiostro fortificato risalente al XIV secolo, sulle cui lunette sono visibili tracce di affreschi che risalgono alla seconda met\xe0 del 1400 e dove campeggia una torre che aveva in passato la copertura a forma conica, oggi crollata a causa di un fulmine: \xe8 questa la torre menzionata nel primo verso del canto Il passero solitario. "),Oa(19,"p"),ms(20,' Clicca sul libro per andare a leggere "Il passero solitario" '),Oa(21,"button",9),Na("click",(function(){return e.searchByCapitolo(10)})),Oa(22,"mat-icon"),ms(23,"menu_book"),La(),La(),La(),ms(24," In questa poesia Leopardi fa una similitudine tra un passero, che aveva il suo nido sulla torre antica, e la sua esistenza. Leopardi dice che l\u2019uccello non ha coscienza del proprio vivere e vola contento, cos\xec come la giovent\xf9 che si ritrova in paese per festeggiare il santo patrono. I ragazzi cercano compagnia, si vestono a festa, guardano e vengono guardati e il cor s\u2019allegra perch\xe9 spensierati godono dei doni della giovinezza. Il poeta invece \xe8 spettatore e senza motivo decide di essere strano cio\xe8 straniero. Sceglie la solitudine nonostante accusi il dolore di una esclusione senza ragione. "),La(),La())},directives:[tw],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:xx-large;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}img[_ngcontent-%COMP%]{margin-top:10%;display:block;margin-left:auto;margin-right:auto;height:200%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:medium;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}.map-container[_ngcontent-%COMP%]{height:180px;width:100%;z-index:0}.map-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}img[_ngcontent-%COMP%]{margin-top:10%;height:70%}}"]}),t})();const zw=["map"];let Ow=(()=>{class t{constructor(t,e,i){this.service=t,this.router=e,this._location=i}ngOnInit(){}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.40131693699691,13.552225940634017],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.40131693699691,13.552225940634017],{icon:e}).addTo(t)}searchByCapitolo(t){this.service.findPoesiaSingolaByCapitolo(7).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})})}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(Ia(cw),Ia(mm),Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-via-roma"]],viewQuery:function(t,e){var i;1&t&&Ul(zw,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:35,vars:0,consts:[[1,"container"],[1,"button",2,"vertical-align","middle",3,"click"],["src","assets\\images\\Via Roma_IGP1017 copia_DxOFP.jpg","alt","Card image cap",1,"card-img-top",2,"width","300px","margin-bottom","30px"],[1,"map-container"],["map",""],[1,"text"],[1,"button",3,"click"],["data-toggle","collapse","href","#multiCollapseExample1","aria-expanded","false","aria-controls","multiCollapseExample1"],["id","multiCollapseExample1",1,"collapse","multi-collapse"],["src","assets\\images\\Via Roma_IGP1017 copia_DxOFP.jpg",2,"width","300px"],["data-toggle","collapse","href","#multiCollapseExample2","aria-expanded","false","aria-controls","multiCollapseExample2"],["id","multiCollapseExample2",1,"collapse","multi-collapse"],["src","assets\\images\\Via Roma_2_IGP1015 copia_DxOFP.jpg",2,"width","300px"],["data-toggle","collapse","href","#multiCollapseExample3","aria-expanded","false","aria-controls","multiCollapseExample3"],["id","multiCollapseExample3",1,"collapse","multi-collapse"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"Via Roma"),La(),Da(4,"br"),Oa(5,"button",1),Na("click",(function(){return e.goBack()})),Oa(6,"span"),Oa(7,"mat-icon"),ms(8,"arrow_back"),La(),La(),La(),La(),Da(9,"img",2),Da(10,"div",3,4),Oa(12,"div",5),ms(13," Percorrendo via Roma in direzione centro-citt\xe0 \xe8 opportuno citare l\u2019esperienza vissuta da Giuseppe Ungaretti nel 1950 quando ebbe l\u2019occasione di essere ospite della famiglia Leopardi e di soggiornarvi alcuni giorni: "),Oa(14,"p"),ms(15," Clicca sul libro per andare a leggere il testo di Ungaretti "),Oa(16,"button",6),Na("click",(function(){return e.searchByCapitolo(9)})),Oa(17,"mat-icon"),ms(18,"menu_book"),La(),La(),La(),ms(19," Proseguendo ora lungo la "),Oa(20,"a",7),ms(21,"via lastricata dai sampietrini"),La(),Oa(22,"div",8),Da(23,"img",9),La(),ms(24," immaginiamoci un piccolo consesso formato da Monaldo, Giacomo e i fratelli Carlo e Paolina che fanciulli si recavano nella "),Oa(25,"a",10),ms(26,"Chiesa di San Vito"),La(),Oa(27,"div",11),Da(28,"img",12),La(),ms(29," che troviamo alla fine della via, sulla destra, annunciata da un ampio piazzale. Il portale, imponente e bello, \xe8 del Vanvitelli che lo realizz\xf2 nel 1748. In questa chiesa grazie all\u2019opera del Collegio per l\u2019Istruzione della Giovent\xf9 sorgono a Recanati Pie congregazioni dei Nobili, degli Artisti e degli Agricoltori con sede in una cappellina all\u2019interno della chiesa spesso chiusa al pubblico. Nella "),Oa(30,"a",13),ms(31,"Congregazione dei Nobili"),La(),Oa(32,"div",14),Da(33,"img",12),La(),ms(34," , nel nostro \u201cvago immaginare\u201d vediamo Giacomo recitare alcuni dei suoi lavori sotto lo sguardo compiaciuto di Monaldo: Per il Santo Natale, I pastori che scambievolmente s\u2019invitano per adorare il nato bambino del 1809, Poesia per il giorno delle Ceneri nel 1810, Il trionfo della Croce nel 1812, la Crocefissione e morte di Cristo nel 1814, La Flagellazione e la Condanna e viaggio del Redentore al Calvario. "),La(),La())},directives:[tw],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:xx-large;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}img[_ngcontent-%COMP%]{margin-top:10%;display:block;margin-left:auto;margin-right:auto;height:200%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:medium;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}.map-container[_ngcontent-%COMP%]{height:180px;width:100%;z-index:0}.map-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}img[_ngcontent-%COMP%]{margin-top:10%;height:70%}}"]}),t})();const Lw=["map"];let Dw=(()=>{class t{constructor(t){this._location=t}ngOnInit(){}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.398230871991785,13.54970489839643],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.398230871991785,13.54970489839643],{icon:e}).addTo(t)}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-vista-monti-azzurri"]],viewQuery:function(t,e){var i;1&t&&Ul(Lw,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:14,vars:0,consts:[[1,"container"],[1,"button",2,"vertical-align","middle",3,"click"],["src","assets\\images\\La campagna recanatese verso i monti azzurri_IGP0985 copia_DxOFP.jpg","alt","Card image cap",1,"card-img-top",2,"width","300px","margin-bottom","30px"],[1,"map-container"],["map",""],[1,"text"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"La vista sui Monti Azzurri"),La(),Da(4,"br"),Oa(5,"button",1),Na("click",(function(){return e.goBack()})),Oa(6,"span"),Oa(7,"mat-icon"),ms(8,"arrow_back"),La(),La(),La(),La(),Da(9,"img",2),Da(10,"div",3,4),Oa(12,"div",5),ms(13," Facciamo pochi passi sulla stessa via per entrare nel boschetto del colle dell\u2019Infinito. Il viale si snoda fra gli alberi secolari che si trovano sulla sinistra mentre a destra costeggiamo un alto muro di cinta. D\u2019un tratto notiamo che il viale taglia ad angolo retto e in un varco improvviso appare una vista sulla campagna che cattura l'attenzione. Il panorama \xe8 quello tipico delle Marche, tutto collina e valli e Recanati a circa 300 metri d'altezza sul livello del mare non fa eccezione: il fronte ovest ha la vista sui monti Sibillini, i monti azzurri, da cui si vede Macerata, ma la cosa pi\xf9 bella \xe8 la campagna, ordinata dal lavoro degli agricoltori, nuova ad ogni stagione e variata. Ogni poggio \xe8 uno spettacolo in s\xe9 per forma e colore e geometria. \u201cDistratti\u201d da questa vista d\u2019insieme quasi non ci accorgiamo della panchina solitaria, messa l\xec non a caso, che serve per prendere fiato, per respirare, in attesa che ci si inoltri nell\u2019avventura degli uomini sensibili e immaginosi, quelli che si lasciano stupire dalla bellezza del creato e\u2026 immaginano. All'uomo sensibile e immaginoso, che viva, come io sono vissuto gran tempo, sentendo di continuo ed immaginando, il mondo e gli oggetti sono in certo modo doppi. Egli vedr\xe0 cogli occhi una torre, una campagna; udr\xe0 cogli orecchi un suono d'una campana; e nel tempo stesso coll'immaginazione vedr\xe0 un'altra torre, un'altra campagna, udr\xe0 un altro suono. In questo secondo genere di obbietti sta tutto il bello e il piacevole delle cose. Trista quella vita (ed \xe8 pur tale la vita comunemente) che non vede, non ode, non sente se non che oggetti semplici, quelli soli di cui gli occhi, gli orecchi e gli altri sentimenti ricevono la sensazione. Il passo \xe8 tratto dallo Zibaldone, il suo diario di pensieri, memorie, filosofia, e data 30 novembre 1828, 1a domenica dell'Avvento. Leopardi per lungo tempo dat\xf2 i passi dello Zibaldone e le lettere ai familiari inserendo le ricorrenze religiose, indizio di quanto fosse in lui radicata l\u2019educazione cattolica che pure avversava. Il Poeta in questo frammento sviluppa il geniale concetto degli oggetti doppi, vale a dire l\u2019idea che la realt\xe0 possa essere segno, rimando ad altro. Per Giacomo la realt\xe0 sperimentabile \xe8 \u201crimando\u201d perch\xe9 il guardare la campagna, una torre, il sentire il suono di una campana sono condizioni sufficienti, e potenti, per mettere in moto l\u2019immaginazione. "),La(),La())},directives:[tw],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:xx-large;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}img[_ngcontent-%COMP%]{margin-top:10%;display:block;margin-left:auto;margin-right:auto;height:200%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.button[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0;border:none;background:none;vertical-align:middle}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:10%;text-align:justify;font-size:medium;line-height:normal}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center}#in[_ngcontent-%COMP%], #log[_ngcontent-%COMP%], #marker[_ngcontent-%COMP%], #out[_ngcontent-%COMP%]{width:50px}.map-container[_ngcontent-%COMP%]{height:180px;width:100%;z-index:0}.map-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block}img[_ngcontent-%COMP%]{margin-top:10%;height:70%}}"]}),t})(),Rw=(()=>{class t{constructor(t){this.http=t,this.url="http://159.89.22.125:8080/giacomoLeopardi/"}findEvents(){return this.http.get(this.url+"vediEventi")}saveEvents(t){return this.http.post(this.url+"inserisciEventi",t)}deleteEvent(t){return this.http.delete(this.url+"cancellaEvento/"+t)}}return t.\u0275fac=function(e){return new(e||t)(te(eg))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Bw(t,e){if(1&t&&(Oa(0,"div",22),Oa(1,"div"),Da(2,"img",23),La(),Oa(3,"p",24),ms(4),La(),Da(5,"hr"),Oa(6,"p",25),ms(7),La(),Da(8,"hr"),Oa(9,"p",26),ms(10,"Descrizione evento:"),Da(11,"br"),ms(12),La(),La()),2&t){const t=e.$implicit;Sr(2),Aa("src",t.retrievedImage,or),Sr(2),ys(" ",t.nomeEvento," "),Sr(3),ys("Data evento: ",t.dataEvento,""),Sr(5),ys(" ",t.descrizione,"")}}let Fw=(()=>{class t{constructor(t,e,i){this.httpClient=t,this.service=e,this.router=i,this.admin=!1}ngOnInit(){this.service.findEvents().subscribe(t=>{this.eventi=t,this.eventi.forEach(t=>{this.httpClient.get("http://159.89.22.125:8080/giacomoLeopardi/image/get/"+t.evento_immagine.name).subscribe(e=>{this.retrieveResonse=e,this.base64Data=this.retrieveResonse.picByte,t.retrievedImage="data:image/jpeg;base64,"+this.base64Data})}),console.log(this.eventi)})}}return t.\u0275fac=function(e){return new(e||t)(Ia(eg),Ia(Rw),Ia(mm))},t.\u0275cmp=ve({type:t,selectors:[["app-home"]],decls:53,vars:9,consts:[[1,"container"],[1,"title"],[1,"overflow-auto"],[1,"card-body"],[1,"table","table-bordered","table-striped",2,"box-shadow","15px 15px 10px #dedede"],[1,"ermocolle"],["src","\\assets\\images\\LogoCentroCulturaleGL.png",1,"img",2,"margin-bottom","10%"],[1,"table","table-borderless",2,"font-family","'Times New Roman', Times, serif","font-size","large"],[2,"vertical-align","middle"],["routerLink","/mappa",1,"button",2,"margin-right","4px"],[1,"icon"],["routerLink","/mappa",2,"vertical-align","middle"],["routerLink","/prenotazione-visita",1,"button"],["routerLink","/prenotazione-visita",2,"vertical-align","middle"],[1,"desanctis"],[1,"player"],["videoId","EZtTsW2ncC8","suggestedQuality","standard",3,"height","width","startSeconds","endSeconds"],[1,"table","table-bordered","table-striped",2,"box-shadow","15px 15px 10px #dedede","margin-top","5%"],[1,"title",2,"margin-top","5%"],["routerLink","/bacheca-eventi",1,"button"],[2,"font-family","'Times New Roman', Times, serif","font-size","large","margin-left","5%"],["style","margin-bottom:10%; margin-top: 10%;",4,"ngFor","ngForOf"],[2,"margin-bottom","10%","margin-top","10%"],[1,"imgEvento",3,"src"],[1,"nomeEvento"],[1,"dataEvento"],[1,"descrizioneEvento"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1",1),Oa(2,"b"),Oa(3,"i"),ms(4,"Centro Culturale"),Da(5,"br"),ms(6,"Giacomo Leopardi"),Da(7,"br"),ms(8,"di Recanati"),La(),La(),La(),Oa(9,"div",2),Oa(10,"div",3),Oa(11,"table",4),Oa(12,"p",5),ms(13,'"Sempre caro mi fu quest\u2019ermo colle,'),Da(14,"br"),ms(15,"E questa siepe, che da tanta parte"),Da(16,"br"),ms(17,'Dell\u2019ultimo orizzonte il guardo esclude."'),La(),Da(18,"img",6),Oa(19,"table",7),Oa(20,"tr"),Oa(21,"th",8),Oa(22,"button",9),Oa(23,"mat-icon",10),ms(24,"explore"),La(),La(),La(),Oa(25,"th",11),ms(26," Esplora il percorso leopardiano "),La(),La(),Oa(27,"tr"),Oa(28,"td",8),Oa(29,"button",12),Oa(30,"mat-icon",10),ms(31,"add"),La(),La(),La(),Oa(32,"td",13),Oa(33,"b"),ms(34,"Prenota una visita"),La(),La(),La(),La(),Oa(35,"p",14),ms(36," \"Leopardi produce l'effetto contrario a quello che si propone. Non crede al progresso, e te lo fa desiderare; non crede alla libert\xe0, e te la fa amare. Chiama illuisone l'amore, la gloria, la virt\xf9, e te ne accende un desiderio inesausto. E' scettico, e ti fa credente\"."),Da(37,"br"),ms(38,"F. De Sanctis "),La(),Oa(39,"div",15),Da(40,"youtube-player",16),La(),La(),Oa(41,"table",17),Oa(42,"h1",18),Oa(43,"i"),ms(44,"Ultimo evento aggiunto"),La(),La(),Oa(45,"p"),Oa(46,"button",19),Oa(47,"mat-icon",10),ms(48,"event_note"),La(),Oa(49,"i",20),ms(50," Bacheca eventi "),La(),La(),La(),Ea(51,Bw,13,4,"div",21),Tl(52,"slice"),La(),La(),La(),La()),2&t&&(Sr(40),Aa("height",200)("width",300)("startSeconds",1)("endSeconds",200),Sr(11),Aa("ngForOf",function(t,e,i,n,r){const o=li(),a=Ye(o,52);return Pl(o,El(o,52)?function(t,e,i,n,r,o,a,s){const l=e+i;return function(t,e,i,n,r){const o=Sa(t,e,i,n);return Ca(t,e+2,r)||o}(t,l,r,o,a)?wa(t,l+3,s?n.call(s,r,o,a):n(r,o,a)):Cl(t,l+3)}(o,yi(),5,a.transform,i,n,r,a):a.transform(i,n,r))}(0,0,e.eventi,e.eventi.length-1,e.eventi.length)))},directives:[gm,tw,kp,qu],pipes:[eh],styles:[".container[_ngcontent-%COMP%]{margin-bottom:10%;text-align:-webkit-center;margin-top:10px}.title[_ngcontent-%COMP%]{font-size:xx-large}.ermocolle[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;text-align:center}.ermocolle[_ngcontent-%COMP%]{margin-top:5%;font-size:x-large;font-style:italic;line-height:200%}.img[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;height:70%}.button[_ngcontent-%COMP%], .img[_ngcontent-%COMP%]{margin-top:10%}.button[_ngcontent-%COMP%]{background:none;border:none;width:100%;text-align:left}.icon[_ngcontent-%COMP%]{color:#3cdf06;vertical-align:middle;margin-left:5%}.desanctis[_ngcontent-%COMP%]{margin-top:5%;font-size:large;font-family:Times New Roman,Times,serif;text-align:justify;font-style:italic;line-height:200%;padding:10%}.player[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:5%}.imgEvento[_ngcontent-%COMP%]{max-width:-webkit-fill-available;width:300px;display:block;margin-left:auto;margin-right:auto}.nomeEvento[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase;font-family:Times New Roman,Times,serif;padding-top:5%;font-size:large}.dataEvento[_ngcontent-%COMP%]{text-align:left;text-transform:capitalize}.dataEvento[_ngcontent-%COMP%], .descrizioneEvento[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;font-size:medium;padding-left:5%}.descrizioneEvento[_ngcontent-%COMP%]{text-align:justify;line-height:normal;margin-bottom:5%;padding-right:5%}table.table-borderless[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;font-size:x-large}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-bottom:10%;text-align:-webkit-center;margin-top:10px}.title[_ngcontent-%COMP%]{font-size:xx-large}.ermocolle[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;text-align:center}.ermocolle[_ngcontent-%COMP%]{margin-top:5%;font-size:large;font-style:italic;line-height:200%}.img[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;height:130px}.button[_ngcontent-%COMP%], .img[_ngcontent-%COMP%]{margin-top:10%}.button[_ngcontent-%COMP%]{background:none;border:none;width:100%;text-align:left}.icon[_ngcontent-%COMP%]{color:#3cdf06;vertical-align:middle;margin-left:5%}.desanctis[_ngcontent-%COMP%]{margin-top:5%;font-size:large;font-family:Times New Roman,Times,serif;text-align:justify;font-style:italic;line-height:200%;padding:10%}.player[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:5%}.imgEvento[_ngcontent-%COMP%]{max-width:-webkit-fill-available;width:300px;display:block;margin-left:auto;margin-right:auto}.nomeEvento[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase;font-family:Times New Roman,Times,serif;padding-top:5%;font-size:large}.dataEvento[_ngcontent-%COMP%]{text-align:left;text-transform:capitalize}.dataEvento[_ngcontent-%COMP%], .descrizioneEvento[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;font-size:medium;padding-left:5%}.descrizioneEvento[_ngcontent-%COMP%]{text-align:justify;line-height:normal;margin-bottom:5%;padding-right:5%}table.table-borderless[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;font-size:large}}"]}),t})();function Nw(t){this.message=t}(Nw.prototype=new Error).name="InvalidCharacterError";var Vw="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Nw("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,n,r=0,o=0,a="";n=e.charAt(o++);~n&&(i=r%4?64*i+n:n,r++%4)?a+=String.fromCharCode(255&i>>(-2*r&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return a};function jw(t){this.message=t}(jw.prototype=new Error).name="InvalidTokenError";let Uw=(()=>{class t{constructor(t,e,i){this.httpClient=t,this.router=e,this.location=i}authenticate(t,e){return this.httpClient.post("http://159.89.22.125:8080/giacomoLeopardi/authenticate",{username:t,password:e}).pipe(P(e=>(sessionStorage.setItem("username",t),sessionStorage.setItem("token",e.token),sessionStorage.setItem("Role",e.utente.authorities[0].authority),e)))}isUserLoggedIn(){let t=sessionStorage.getItem("token"),e=sessionStorage.getItem("username");return!(t&&null===e)}logOut(){sessionStorage.removeItem("username"),sessionStorage.removeItem("token"),sessionStorage.removeItem("Role"),this.router.navigate(["/home"]).then(()=>{window.location.reload()})}getRole(){return function(t,e){if("string"!=typeof t)throw new jw("Invalid token specified");var i=!0===(e=e||{}).header?0:1;try{return JSON.parse(function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(Vw(t).replace(/(.)/g,(function(t,e){var i=e.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}(e)}catch(t){return Vw(e)}}(t.split(".")[i]))}catch(t){throw new jw("Invalid token specified: "+t.message)}}(sessionStorage.getItem("token")).role}}return t.\u0275fac=function(e){return new(e||t)(te(eg),te(mm),te(lu))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),qw=(()=>{class t{constructor(t){this.http=t,this.url="http://159.89.22.125:8080/giacomoLeopardi/"}findAll(){return this.http.get(this.url+"vediUtenti")}findUtenteSingolo(t){return this.http.get(this.url+"vediUtenti/"+t)}findUtenteSingoloLogin(t){return this.http.get(this.url+"vediUtenti/"+t)}deleteUser(t){return this.http.delete(this.url+"eliminaUtente/"+t)}changeRole(t){return this.http.patch(this.url+"nominaAdmin/"+t,{})}}return t.\u0275fac=function(e){return new(e||t)(te(eg))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Zw=(()=>{class t{constructor(t){this.http=t,this.url="http://159.89.22.125:8080/giacomoLeopardi/"}save(t){return this.http.post(this.url+"user",t)}existUser(t){return this.http.get(this.url+"existUser/"+t)}}return t.\u0275fac=function(e){return new(e||t)(te(eg))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Hw(t,e){1&t&&(Oa(0,"div",21),ms(1," Devi confermare la tua mail prima di poter accedere. "),La())}function Gw(t,e){1&t&&(Oa(0,"div",22),ms(1," Il login \xe8 errato "),La())}let Ww=(()=>{class t{constructor(t,e,i,n,r){this.route=t,this.router=e,this.loginservice=i,this.gestioneUtenteService=n,this.registrazione=r,this.logEffettuato=!0,this.username="",this.password="",this.invalidLogin=!1,this.message1=!1,this.refresha=1,this.booleanErrorToken=!1,this.booleanGet=!1}ngOnInit(){}checkLogin(){this.gestioneUtenteService.findUtenteSingoloLogin(this.username).subscribe(t=>{null!=t?(this.user=t,0==this.user.enabled?this.booleanErrorToken=!0:this.loginservice.authenticate(this.user.username,this.password).subscribe(t=>{1==this.user.enabled&&this.router.navigate(["/scelta-utente"],{state:{refresha:this.refresha}})})):this.message1=!0})}}return t.\u0275fac=function(e){return new(e||t)(Ia(Jd),Ia(mm),Ia(Uw),Ia(qw),Ia(Zw))},t.\u0275cmp=ve({type:t,selectors:[["app-login-page"]],decls:30,vars:4,consts:[[1,"container",2,"height","780px"],[1,"row"],[1,"col-sm-9","col-md-7","col-lg-5","mx-auto"],[1,"card","card-signin","my-5"],[1,"card-body"],[1,"card-title","text-center"],[1,"form-signin"],[1,"form-label-group"],[2,"color","rgb(184, 17, 17)"],["type","username","name","username","id","inputUsername","placeholder","Email address","required","","autofocus","",1,"form-control",3,"ngModel","ngModelChange"],["for","inputUsername"],["type","password","name","password","id","inputPassword","placeholder","Password","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","inputPassword"],[1,"custom-control","custom-checkbox","mb-3"],["type","checkbox","id","customCheck1",1,"custom-control-input"],["style","color: red;",4,"ngIf"],["style","margin-bottom: 20px; color: red; text-align: center;",4,"ngIf"],["type","submit",1,"btn","btn-lg","btn-primary","btn-block","text-uppercase",3,"click"],[1,"my-4"],["routerLink","/registrazione",1,"btn","btn-lg","btn-google","btn-block","text-uppercase"],[1,"fab","fa-google","mr-2"],[2,"color","red"],[2,"margin-bottom","20px","color","red","text-align","center"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"div",1),Oa(2,"div",2),Oa(3,"div",3),Oa(4,"div",4),Oa(5,"h5",5),Oa(6,"b"),ms(7,"Benvenuto, effettua il login se sei gi\xe0 registrato"),La(),La(),Oa(8,"form",6),Oa(9,"div",7),Oa(10,"p",8),ms(11,"Email"),La(),Oa(12,"input",9),Na("ngModelChange",(function(t){return e.username=t})),La(),Da(13,"label",10),La(),Oa(14,"div",7),Oa(15,"p",8),ms(16,"Password"),La(),Oa(17,"input",11),Na("ngModelChange",(function(t){return e.password=t})),La(),Da(18,"label",12),La(),Oa(19,"div",13),Da(20,"input",14),La(),Ea(21,Hw,2,0,"div",15),Ea(22,Gw,2,0,"div",16),Oa(23,"button",17),Na("click",(function(){return e.checkLogin()})),ms(24,"Login"),La(),Da(25,"hr",18),La(),Oa(26,"form",6),Oa(27,"button",19),Da(28,"i",20),ms(29,"Registrati"),La(),La(),La(),La(),La(),La(),La()),2&t&&(Sr(12),Aa("ngModel",e.username),Sr(5),Aa("ngModel",e.password),Sr(4),Aa("ngIf",e.booleanErrorToken),Sr(1),Aa("ngIf",e.message1))},directives:[Iy,zg,Ty,Tg,zy,Ag,Py,Hu,gm],styles:["[_ngcontent-%COMP%]:root{--input-padding-x:1.5rem;--input-padding-y:.75rem}h5[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif}body[_ngcontent-%COMP%]{background:#87c1ff;background:linear-gradient(90deg,#5ca3ff,#b7e2ff)}.card-signin[_ngcontent-%COMP%]{border:0;border-radius:1rem;box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.1)}.card-signin[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:2rem;font-weight:300;font-size:1.5rem}.card-signin[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.form-signin[_ngcontent-%COMP%]{width:100%}.form-signin[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:80%;border-radius:5rem;letter-spacing:.1rem;font-weight:700;padding:1rem;transition:all .2s}.form-label-group[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:auto;border-radius:2rem}.form-label-group[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{padding:var(--input-padding-y) var(--input-padding-x)}.form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:block;width:100%;margin-bottom:0;line-height:1.5;color:#495057;border:1px solid transparent;border-radius:.25rem;transition:all .1s ease-in-out}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:transparent}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown){padding-top:calc(var(--input-padding-y) + var(--input-padding-y) * (2 / 3));padding-bottom:calc(var(--input-padding-y) / 3)}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) ~ label[_ngcontent-%COMP%]{padding-top:calc(var(--input-padding-y) / 3);padding-bottom:calc(var(--input-padding-y) / 3);font-size:12px;color:#777}.btn-google[_ngcontent-%COMP%]{color:#fff;background-color:#ea4335}.btn-facebook[_ngcontent-%COMP%]{color:#fff;background-color:#3b5998}@supports (-ms-ime-align:auto){.form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:none}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:#777}}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:none}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#777}}"]}),t})();const $w=["map"];function Kw(t,e){if(1&t){const t=Ra();Oa(0,"div"),Oa(1,"button",7),Na("click",(function(){return ui(t),Za().visitaSingolaMethod()})),ms(2," Visita autonoma "),La(),Oa(3,"button",8),Na("click",(function(){return ui(t),Za().visitaGuidataMethod()})),ms(4," Visita con guida "),La(),La()}}function Xw(t,e){1&t&&(Oa(0,"li",11),ms(1,"Punto di interesse 14: Autografo Inno alla sua donna (Gigantografia)"),La())}function Qw(t,e){if(1&t&&(Oa(0,"div"),Oa(1,"ul",9),Oa(2,"a",10),Oa(3,"li",11),ms(4,"Punto di interesse 1: Casa Leopardi"),La(),La(),Oa(5,"a",12),Oa(6,"li",11),ms(7,"Punto di interesse 2: Chiesa dei Cappuccini"),La(),La(),Oa(8,"a",13),Oa(9,"li",11),ms(10,"Punto di interesse 3: Piazzuola del sabato del villaggio"),La(),La(),Oa(11,"a",14),Oa(12,"li",11),ms(13,"Punto di interesse 4: Centro nazionale studi Leopardiani"),La(),La(),Oa(14,"a",15),Oa(15,"li",11),ms(16,"Punto di interesse 5: Verso il monte Tabor"),La(),La(),Oa(17,"a",16),Oa(18,"li",11),ms(19,"Punto di interesse 6: La vista sui monti azzurri"),La(),La(),Oa(20,"a",17),Oa(21,"li",11),ms(22,"Punto di interesse 7: Il colle dell'infinito"),La(),La(),Oa(23,"a",18),Oa(24,"li",11),ms(25,"Punto di interesse 8: Casa di Adelaide Antici"),La(),La(),Oa(26,"a",19),Oa(27,"li",11),ms(28,"Punto di interesse 9: Via Roma"),La(),La(),Oa(29,"a",20),Oa(30,"li",11),ms(31,"Punto di interesse 10: Torre del Passero solitario"),La(),La(),Oa(32,"a",21),Oa(33,"li",11),ms(34,"Punto di interesse 11: Lettera della befana"),La(),La(),Oa(35,"a",22),Oa(36,"li",11),ms(37,"Punto di interesse 12: Palazzo Venieri"),La(),La(),Oa(38,"a",23),Oa(39,"li",11),ms(40,"Punto di interesse 13: Piazza della torre del Borgo"),La(),La(),Oa(41,"a",24),Ea(42,Xw,2,0,"li",25),La(),La(),La()),2&t){const t=Za();Sr(42),Aa("ngIf",1==t.aggiunta)}}let Yw=(()=>{class t{constructor(t){this.http=t,this.bottoneCliccato=!1}visitaGuidataMethod(){this.visita=!0,this.aggiunta=!0,this.bottoneCliccato=!0}visitaSingolaMethod(){this.visita=!0,this.aggiunta=!1,this.bottoneCliccato=!0}ngAfterViewInit(){const t=new $y.Map(this.mapContainer.nativeElement).setView([43.4021,13.55142],16);t.attributionControl.setPrefix("").addAttribution('Powered by <a href="https://www.geoapify.com/" target="_blank">Geoapify</a> | \xa9 OpenStreetMap <a href="https://www.openstreetmap.org/copyright" target="_blank">contributors</a>'),$y.mapboxGL({style:"https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=f1148686528a4ea488296c6f9f71041d",accessToken:"no-token"}).addTo(t);var e=new $y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});$y.marker([43.3981713,13.5519596],{icon:e}).addTo(t).bindPopup("Casa Leopardi"),$y.marker([43.3981415,13.5528702],{icon:e}).addTo(t).bindPopup("Chiesa dei Cappuccini"),$y.marker([43.397988308481956,13.551873093784934],{icon:e}).addTo(t).bindPopup("Piazza Sabato del Villaggio"),$y.marker([43.39803201295075,13.551656134928862],{icon:e}).addTo(t).bindPopup("Centro Nazionale Studi Leopardiani"),$y.marker([43.39794916747729,13.551186681668128],{icon:e}).addTo(t).bindPopup("Monte Tabor"),$y.marker([43.3973867596313,13.550378307255414],{icon:e}).addTo(t).bindPopup("Monti Azzurri"),$y.marker([43.39771624888235,13.550188073299523],{icon:e}).addTo(t).bindPopup("Colle dell'Infinito"),$y.marker([43.39809170402481,13.549666815359387],{icon:e}).addTo(t).bindPopup("Casa Adelaide Antici"),$y.marker([43.39962677234598,13.552603069518],{icon:e}).addTo(t).bindPopup("Via Roma"),$y.marker([43.400688829187175,13.552380016680672],{icon:e}).addTo(t).bindPopup("Torre del Passero Solitario"),$y.marker([43.40182973979836,13.552144502578813],{icon:e}).addTo(t).bindPopup("Lettera della Befana"),$y.marker([43.40239377083367,13.551448424660066],{icon:e}).addTo(t).bindPopup("Palazzo Venieri"),$y.marker([43.40250032674169,13.549999971909983],{icon:e}).addTo(t).bindPopup("Piazza Torre del Borgo"),fetch("https://api.geoapify.com/v1/routing?waypoints=43.3981713,13.5519596|43.3981415,13.5528702|43.397988308481956,13.551873093784934|43.39803201295075,13.551656134928862|43.39794916747729,13.551186681668128|43.3973867596313,13.550378307255414|43.39771624888235,13.550188073299523|43.39809170402481,13.549666815359387|43.39962677234598,13.552603069518|43.400688829187175,13.552380016680672|43.40182973979836,13.552144502578813|43.40239377083367,13.551448424660066|43.40250032674169,13.549999971909983&mode=walk&lang=it&apiKey=f1148686528a4ea488296c6f9f71041d").then(t=>t.json()).then(e=>{$y.geoJSON(e,{style:t=>({stroke:!0,color:"#CB2B3E",weight:2,opacity:.7,fill:!0,fillColor:"#982E40",fillOpacity:.15,smoothFactor:.5,interactive:!1})}).addTo(t)})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(Ia(eg))},t.\u0275cmp=ve({type:t,selectors:[["app-mappa"]],viewQuery:function(t,e){var i;1&t&&Ul($w,!0),2&t&&Vl(i=Hl())&&(e.mapContainer=i.first)},decls:22,vars:2,consts:[[1,"container"],[1,"map-container"],["map",""],[2,"margin-top","10%"],[2,"font-family","'Times New Roman', Times, serif"],[2,"background-color","rgb(255, 255, 208)"],[4,"ngIf"],[1,"btn","btn-success",2,"margin-right","20px",3,"click"],[1,"btn","btn-success",3,"click"],[1,"list-group",2,"margin-top","40px"],["routerLink","/casa-leopardi"],[1,"list-group-item"],["routerLink","/chiesa-dei-cappuccini"],["routerLink","/piazzuola-sabato-del-villaggio"],["routerLink","/centro-nazionale-studi-leopardiani"],["routerLink","/monte-tabor"],["routerLink","/vista-monti-azzurri"],["routerLink","/il-colle-dell-infinito"],["routerLink","/casa-adelaide-antici"],["routerLink","/via-roma"],["routerLink","/torre-passero-solitario"],["routerLink","/lettera-della-befana"],["routerLink","/palazzo-venieri"],["routerLink","/piazza-torre-del-borgo"],["routerLink","/autografo-inno"],["class","list-group-item",4,"ngIf"]],template:function(t,e){1&t&&(Oa(0,"div",0),Da(1,"div",1,2),Oa(3,"h1",3),Oa(4,"i"),ms(5,"Percorso Leopardiano"),La(),La(),Oa(6,"div",4),Oa(7,"p",5),ms(8," Lunghezza percorso: 1,8 km"),Da(9,"br"),ms(10," Durata della visita guidata: 1h e 45min "),La(),Oa(11,"p"),ms(12," Scopo del tour leopardiano proposto dal Centro Culturale Giacomo Leopardi \xe8 quello di aiutare il turista a conoscere i luoghi in cui \xe8 vissuto il poeta e che alcuni suoi versi hanno reso immortali ( Il colle de L\u2019Infinito, la torre del passero solitario, la piazzuola del sabato del villaggio\u2026.). "),La(),Oa(13,"p"),ms(14," Il percorso verificher\xe0 anche l\u2019effetto contrario che la produzione leopardiana produce nel lettore secondo la geniale intuizione del critico Francesco De Sanctis, il quale nel 1958 cos\xec ebbe a scrivere: "),La(),Oa(15,"p"),Oa(16,"i"),ms(17," Leopardi produce l'effetto contrario a quello che si propone. Non crede al progresso, e te lo fa desiderare; non crede alla libert\xe0, e te la fa amare. Chiama illusioni l'amore, la gloria, la virt\xf9, e te ne accende un desiderio inesausto. \u2026 \xc8 scettico, e ti fa credente. "),La(),La(),Oa(18,"p"),ms(19," Il tour partendo da casa Leopardi si snoda per le vie del centro storico e si conclude in piazza Giacomo Leopardi. Per agevolare la comprensione a ciascun partecipante verr\xe0 consegnato un pieghevole con notizie sul poeta e la sua famiglia. "),La(),La(),Ea(20,Kw,5,0,"div",6),Ea(21,Qw,43,1,"div",6),La()),2&t&&(Sr(20),Aa("ngIf",0==e.bottoneCliccato),Sr(1),Aa("ngIf",1==e.visita))},directives:[Hu,ym],styles:[".bottone-class[_ngcontent-%COMP%]{margin-right:15px}#my-map[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;width:100%}p[_ngcontent-%COMP%]{font-size:large;text-align:justify}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif}h1[_ngcontent-%COMP%]{font-size:xx-large;text-align:center}.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}a[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif}.bottoneScelta[_ngcontent-%COMP%]{margin-right:20px}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.map-container[_ngcontent-%COMP%]{height:300px;width:100%;margin-left:auto;margin-right:auto;display:block;z-index:0}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.map-container[_ngcontent-%COMP%]{height:300px;width:100%;margin-left:auto;margin-right:auto;display:block;z-index:0}}"]}),t})();var Jw=i("T7iU");const tC=["v"];class eC{create(t){return new Jw(t.videoElement,t.options)}updateSource(t){t.plyr.source=t.source}destroy(t){t.plyr.destroy()}}let iC=(()=>{let t=class{constructor(t,e,i){this.elementRef=t,this.ngZone=e,this.renderer=i,this.playerChange=new Bh(null),this.events=new Map,this.plyrType="video",this.plyrInit=this.playerChange.pipe(wp(t=>!!t)),this.plyrProgress=this.createLazyEvent("progress"),this.plyrPlaying=this.createLazyEvent("playing"),this.plyrPlay=this.createLazyEvent("play"),this.plyrPause=this.createLazyEvent("pause"),this.plyrTimeUpdate=this.createLazyEvent("timeupdate"),this.plyrVolumeChange=this.createLazyEvent("volumechange"),this.plyrSeeking=this.createLazyEvent("seeking"),this.plyrSeeked=this.createLazyEvent("seeked"),this.plyrRateChange=this.createLazyEvent("ratechange"),this.plyrEnded=this.createLazyEvent("ended"),this.plyrEnterFullScreen=this.createLazyEvent("enterfullscreen"),this.plyrExitFullScreen=this.createLazyEvent("exitfullscreen"),this.plyrCaptionsEnabled=this.createLazyEvent("captionsenabled"),this.plyrCaptionsDisabled=this.createLazyEvent("captionsdisabled"),this.plyrLanguageChange=this.createLazyEvent("languagechange"),this.plyrControlsHidden=this.createLazyEvent("controlshidden"),this.plyrControlsShown=this.createLazyEvent("controlsshown"),this.plyrReady=this.createLazyEvent("ready"),this.plyrLoadStart=this.createLazyEvent("loadstart"),this.plyrLoadedData=this.createLazyEvent("loadeddata"),this.plyrLoadedMetadata=this.createLazyEvent("loadedmetadata"),this.plyrQualityChange=this.createLazyEvent("qualitychange"),this.plyrCanPlay=this.createLazyEvent("canplay"),this.plyrCanPlayThrough=this.createLazyEvent("canplaythrough"),this.plyrStalled=this.createLazyEvent("stalled"),this.plyrWaiting=this.createLazyEvent("waiting"),this.plyrEmptied=this.createLazyEvent("emptied"),this.plyrCueChange=this.createLazyEvent("cuechange"),this.plyrError=this.createLazyEvent("error"),this.plyrStateChange=this.createLazyEvent("statechange"),this.subscriptions=[]}get player(){return this.playerChange.getValue()}ngOnChanges(t){this.subscriptions.push(this.plyrInit.pipe(Wp()).subscribe(e=>{const i=[t.plyrOptions,t.plyrPlaysInline,t.plyrCrossOrigin].filter(t=>!!t);i.length?i.some(t=>!t.firstChange)&&this.initPlyr(!0):this.updatePlyrSource(e)}))}ngOnDestroy(){this.destroyPlayer(),this.subscriptions.forEach(t=>t.unsubscribe())}ngAfterViewInit(){this.initPlyr()}initPlyr(t=!1){!t&&this.player||this.ngZone.runOutsideAngular(()=>{this.destroyPlayer(),this.driver=this.plyrDriver||new eC,this.ensureVideoElement();const t=this.driver.create({videoElement:this.videoElement,options:this.plyrOptions});this.updatePlyrSource(t),this.playerChange.next(t)})}updatePlyrSource(t){this.driver.updateSource({videoElement:this.videoElement,plyr:t,source:{type:this.plyrType,title:this.plyrTitle,sources:this.plyrSources,poster:this.plyrPoster,tracks:this.plyrTracks}})}createLazyEvent(t){return this.plyrInit.pipe(lp(()=>new b(e=>this.on(t,t=>this.ngZone.run(()=>e.next(t))))))}destroyPlayer(){this.player&&(Array.from(this.events.keys()).forEach(t=>this.off(t)),this.driver.destroy({plyr:this.player}),this.videoElement=null)}get hostElement(){return this.elementRef.nativeElement}ensureVideoElement(){const t=this.hostElement.querySelector("video");t?this.videoElement=t:(this.videoElement=this.renderer.createElement("video"),this.videoElement.controls=!0,this.plyrCrossOrigin&&this.videoElement.setAttribute("crossorigin",""),this.plyrPlaysInline&&this.videoElement.setAttribute("playsinline",""),this.renderer.appendChild(this.hostElement,this.videoElement))}on(t,e){this.events.set(t,e),this.player.on(t,e)}off(t){this.player.off(t,this.events.get(t)),this.events.delete(t)}};return t.\u0275fac=function(e){return new(e||t)(Ia(Vs),Ia(gc),Ia(Zs))},t.\u0275cmp=ve({type:t,selectors:[["plyr"],["","plyr",""]],viewQuery:function(t,e){var i;1&t&&Ul(tC,!0),2&t&&Vl(i=Hl())&&(e.vr=i.first)},inputs:{plyrType:"plyrType",plyrDriver:"plyrDriver",plyrTitle:"plyrTitle",plyrPoster:"plyrPoster",plyrSources:"plyrSources",plyrTracks:"plyrTracks",plyrOptions:"plyrOptions",plyrCrossOrigin:"plyrCrossOrigin",plyrPlaysInline:"plyrPlaysInline"},outputs:{plyrInit:"plyrInit",plyrProgress:"plyrProgress",plyrPlaying:"plyrPlaying",plyrPlay:"plyrPlay",plyrPause:"plyrPause",plyrTimeUpdate:"plyrTimeUpdate",plyrVolumeChange:"plyrVolumeChange",plyrSeeking:"plyrSeeking",plyrSeeked:"plyrSeeked",plyrRateChange:"plyrRateChange",plyrEnded:"plyrEnded",plyrEnterFullScreen:"plyrEnterFullScreen",plyrExitFullScreen:"plyrExitFullScreen",plyrCaptionsEnabled:"plyrCaptionsEnabled",plyrCaptionsDisabled:"plyrCaptionsDisabled",plyrLanguageChange:"plyrLanguageChange",plyrControlsHidden:"plyrControlsHidden",plyrControlsShown:"plyrControlsShown",plyrReady:"plyrReady",plyrLoadStart:"plyrLoadStart",plyrLoadedData:"plyrLoadedData",plyrLoadedMetadata:"plyrLoadedMetadata",plyrQualityChange:"plyrQualityChange",plyrCanPlay:"plyrCanPlay",plyrCanPlayThrough:"plyrCanPlayThrough",plyrStalled:"plyrStalled",plyrWaiting:"plyrWaiting",plyrEmptied:"plyrEmptied",plyrCueChange:"plyrCueChange",plyrError:"plyrError",plyrStateChange:"plyrStateChange"},exportAs:["plyr"],features:[Ve],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})(),nC=(()=>{let t=class{};return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)}}),t})(),rC=(()=>{class t{constructor(t,e){this.service=t,this.router=e,this.isTextVisible=!0,this.toggle=!0,this.toggle1=!0,this.toggle2=!0,this.toggle3=!0,this.toggle4=!0,this.toggle5=!0,this.toggle6=!0,this.toggle7=!0,this.toggle8=!0,this.toggle9=!0,this.toggle10=!0,this.toggle11=!0,this.toggle12=!0,this.toggle13=!0,this.toggle14=!0,this.toggle15=!0,this.toggle16=!0,this.toggle17=!0,this.toggle18=!0,this.toggle19=!0,this.toggle20=!0,this.toggle21=!0,this.toggle22=!0,this.toggle23=!0,this.toggle24=!0,this.toggle25=!0,this.toggle26=!0,this.toggle27=!0,this.toggle28=!0,this.toggle29=!0,this.toggle30=!0,this.toggle31=!0,this.toggle32=!0,this.toggle33=!0,this.toggle34=!0,this.toggle35=!0,this.toggle36=!0,this.toggle37=!0,this.toggle38=!0,this.toggle39=!0,this.toggle40=!0,this.toggle41=!0,this.toggle42=!0,this.toggle43=!0,this.toggle44=!0,this.toggle45=!0,this.toggle46=!0,this.toggle47=!0,this.toggle48=!0,this.toggle49=!0,this.toggle50=!0,this.toggle51=!0,this.status="",this.status1="",this.status2="",this.status3="",this.status4="",this.status5="",this.status6="",this.status7="",this.status8="",this.status9="",this.status10="",this.status11="",this.status12="",this.status13="",this.status14="",this.status15="",this.status16="",this.status17="",this.status18="",this.status19="",this.status20="",this.status21="",this.status22="",this.status23="",this.status24="",this.status25="",this.status26="",this.status27="",this.status28="",this.status29="",this.status30="",this.status31="",this.status32="",this.status33="",this.status34="",this.status35="",this.status36="",this.status37="",this.status38="",this.status39="",this.status40="",this.status41="",this.status42="",this.status43="",this.status44="",this.status45="",this.status46="",this.status47="",this.status48="",this.status49="",this.status50="",this.status51=""}searchByCapitolo(t){1==t&&this.service.findPoesiaSingolaByCapitolo(1).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})}),2==t&&this.service.findPoesiaSingolaByCapitolo(2).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})}),3==t&&this.service.findPoesiaSingolaByCapitolo(3).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})}),4==t&&this.service.findPoesiaSingolaByCapitolo(4).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})}),7==t&&this.service.findPoesiaSingolaByCapitolo(7).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})}),8==t&&this.service.findPoesiaSingolaByCapitolo(8).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})}),9==t&&this.service.findPoesiaSingolaByCapitolo(9).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})}),10==t&&this.service.findPoesiaSingolaByCapitolo(10).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})}),11==t&&this.service.findPoesiaSingolaByCapitolo(11).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})}),12==t&&this.service.findPoesiaSingolaByCapitolo(12).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})}),13==t&&this.service.findPoesiaSingolaByCapitolo(13).subscribe(t=>{this.poesie=t,this.router.navigate(["/mostra-poesia"],{state:{poesie:this.poesie}})}),console.log(t)}played(t){console.log("played",t)}play(){this.player.play()}pause(){this.player.pause()}stop(){this.player.stop()}enableDisableRule(){this.toggle=!this.toggle,this.status=""}enableDisableRule1(){this.toggle1=!this.toggle1,this.status1=""}enableDisableRule2(){this.toggle2=!this.toggle2,this.status2=""}enableDisableRule3(){this.toggle3=!this.toggle3,this.status3=""}enableDisableRule4(){this.toggle4=!this.toggle4,this.status4=""}enableDisableRule5(){this.toggle5=!this.toggle5,this.status5=""}enableDisableRule6(){this.toggle6=!this.toggle6,this.status6=""}enableDisableRule7(){this.toggle7=!this.toggle7,this.status7=""}enableDisableRule8(){this.toggle8=!this.toggle8,this.status8=""}enableDisableRule9(){this.toggle9=!this.toggle9,this.status9=""}enableDisableRule10(){this.toggle10=!this.toggle10,this.status10=""}enableDisableRule11(){this.toggle11=!this.toggle11,this.status11=""}enableDisableRule12(){this.toggle12=!this.toggle12,this.status12=""}enableDisableRule13(){this.toggle13=!this.toggle13,this.status13=""}enableDisableRule14(){this.toggle14=!this.toggle14,this.status14=""}enableDisableRule15(){this.toggle15=!this.toggle15,this.status15=""}enableDisableRule16(){this.toggle16=!this.toggle16,this.status16=""}enableDisableRule17(){this.toggle17=!this.toggle17,this.status17=""}enableDisableRule18(){this.toggle18=!this.toggle18,this.status18=""}enableDisableRule19(){this.toggle19=!this.toggle19,this.status19=""}enableDisableRule20(){this.toggle20=!this.toggle20,this.status20=""}enableDisableRule21(){this.toggle21=!this.toggle21,this.status21=""}enableDisableRule22(){this.toggle22=!this.toggle22,this.status22=""}enableDisableRule23(){this.toggle23=!this.toggle23,this.status23=""}enableDisableRule24(){this.toggle24=!this.toggle24,this.status24=""}enableDisableRule25(){this.toggle25=!this.toggle25,this.status25=""}enableDisableRule26(){this.toggle26=!this.toggle26,this.status26=""}enableDisableRule27(){this.toggle27=!this.toggle27,this.status27=""}enableDisableRule28(){this.toggle28=!this.toggle28,this.status28=""}enableDisableRule29(){this.toggle29=!this.toggle29,this.status29=""}enableDisableRule30(){this.toggle30=!this.toggle30,this.status30=""}enableDisableRule31(){this.toggle31=!this.toggle31,this.status31=""}enableDisableRule32(){this.toggle32=!this.toggle32,this.status32=""}enableDisableRule33(){this.toggle33=!this.toggle33,this.status33=""}enableDisableRule34(){this.toggle34=!this.toggle34,this.status34=""}enableDisableRule35(){this.toggle35=!this.toggle35,this.status35=""}enableDisableRule36(){this.toggle36=!this.toggle36,this.status36=""}enableDisableRule37(){this.toggle37=!this.toggle37,this.status37=""}enableDisableRule38(){this.toggle38=!this.toggle38,this.status38=""}enableDisableRule39(){this.toggle39=!this.toggle39,this.status39=""}enableDisableRule40(){this.toggle40=!this.toggle40,this.status40=""}enableDisableRule41(){this.toggle41=!this.toggle41,this.status41=""}enableDisableRule42(){this.toggle42=!this.toggle42,this.status42=""}enableDisableRule43(){this.toggle43=!this.toggle43,this.status43=""}enableDisableRule44(){this.toggle44=!this.toggle44,this.status44=""}enableDisableRule45(){this.toggle45=!this.toggle45,this.status45=""}enableDisableRule46(){this.toggle46=!this.toggle46,this.status46=""}enableDisableRule47(){this.toggle47=!this.toggle47,this.status47=""}enableDisableRule48(){this.toggle48=!this.toggle48,this.status48=""}enableDisableRule49(){this.toggle49=!this.toggle49,this.status49=""}enableDisableRule50(){this.toggle50=!this.toggle50,this.status50=""}enableDisableRule51(){this.toggle51=!this.toggle51,this.status51=""}}return t.\u0275fac=function(e){return new(e||t)(Ia(cw),Ia(mm))},t.\u0275cmp=ve({type:t,selectors:[["app-poesia"]],viewQuery:function(t,e){var i;1&t&&jl(iC,!0),2&t&&Vl(i=Hl())&&(e.plyr=i.first)},decls:161,vars:0,consts:[[1,"container"],[2,"margin-top","5%"],[1,"overflow-auto"],[1,"card-body"],[1,"table","table-bordered","table-striped",2,"box-shadow","15px 15px 10px #dedede"],[1,"pMiddle"],["data-toggle","collapse","href","#multiCollapseExample1","aria-expanded","false","aria-controls","multiCollapseExample1",1,"button",2,"vertical-align","middle"],[1,"buttonCap",3,"click"],["id","multiCollapseExample1",1,"collapse","multi-collapse"],["src","\\assets\\images\\Casa Leopardi_IGP0936 copia_DxOFP.jpg","alt","CasaLeopardi"],["data-toggle","collapse","href","#multiCollapseExample2","aria-expanded","false","aria-controls","multiCollapseExample2",1,"button",2,"vertical-align","middle"],["id","multiCollapseExample2",1,"collapse","multi-collapse"],["src","\\assets\\images\\Chiesa dei Cappuccini_IGP0958 copia_DxOFP.jpg","alt","Chiesa dei Cappuccini"],["data-toggle","collapse","href","#multiCollapseExample3","aria-expanded","false","aria-controls","multiCollapseExample3",1,"button",2,"vertical-align","middle"],["id","multiCollapseExample3",1,"collapse","multi-collapse"],["src","\\assets\\images\\Piazzuola del Sabato del villaggio_IGP0946 copia_DxOFP.jpg","alt","Piazzuola del sabato del villaggio"],["data-toggle","collapse","href","#multiCollapseExample8","aria-expanded","false","aria-controls","multiCollapseExample8",1,"button",2,"vertical-align","middle"],["id","multiCollapseExample8",1,"collapse","multi-collapse"],["src","\\assets\\images\\06_Centro_Nazionale_Leopardi_2_copia_DxOFP.jpg","alt","Centro Nazionale"],["data-toggle","collapse","href","#multiCollapseExample4","aria-expanded","false","aria-controls","multiCollapseExample4",1,"button",2,"vertical-align","middle"],["id","multiCollapseExample4",1,"collapse","multi-collapse"],["src","assets\\images\\Il colle dell_Infinito_IGP0987 copia_DxOFP.jpg","alt","L'infinito"],["data-toggle","collapse","href","#multiCollapseExample9","aria-expanded","false","aria-controls","multiCollapseExample9",1,"button",2,"vertical-align","middle"],["id","multiCollapseExample9",1,"collapse","multi-collapse"],["src","assets\\images\\Le scuderie di casa Antici_IGP1010 copia_DxOFP.jpg","alt","Scuderie Antici"],["data-toggle","collapse","href","#multiCollapseExample10","aria-expanded","false","aria-controls","multiCollapseExample10",1,"button",2,"vertical-align","middle"],["id","multiCollapseExample10",1,"collapse","multi-collapse"],["src","assets\\images\\Via Roma_2_IGP1015 copia_DxOFP.jpg","alt","Via Roma"],["data-toggle","collapse","href","#multiCollapseExample5","aria-expanded","false","aria-controls","multiCollapseExample5",1,"button",2,"vertical-align","middle"],["id","multiCollapseExample5",1,"collapse","multi-collapse"],["src","\\assets\\images\\La torre del passero solitario sovrasta il chiostro di S. Agostino_IGP1035 copia_DxOFP.jpg","alt","Torre del passero solitario"],["src","assets\\images\\Palazzo Carancini_Roberti_IGP1042 copia_DxOFP.jpg","alt","Lettera Alla Befana",2,"height","120px"],["data-toggle","collapse","href","#multiCollapseExample6","aria-expanded","false","aria-controls","multiCollapseExample6",1,"button",2,"vertical-align","middle"],["id","multiCollapseExample6",1,"collapse","multi-collapse"],["src","\\assets\\images\\Palazzo Venieri_IGP1050_DxOFP.JPG","alt","Palazzo Venieri"],["data-toggle","collapse","href","#multiCollapseExample7","aria-expanded","false","aria-controls","multiCollapseExample7",1,"button",2,"vertical-align","middle"],["id","multiCollapseExample7",1,"collapse","multi-collapse"],["src","\\assets\\images\\Piazza della torre del Borgo con la statua di G. Leopardi._IGP1059_DxOFP.JPG","alt","Piazza Torre del borgo"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1",1),Oa(2,"i"),ms(3,"In questa pagina sono presenti i testi relativi ai punti di interesse del percorso Leopardiano."),La(),La(),Oa(4,"div",2),Oa(5,"div",3),Oa(6,"table",4),Oa(7,"p",1),ms(8,"Casa Leopardi"),La(),Oa(9,"p",5),Oa(10,"button",6),Oa(11,"span"),Oa(12,"mat-icon"),ms(13,"menu_book"),La(),La(),La(),Oa(14,"button",7),Na("click",(function(){return e.searchByCapitolo(1)})),Oa(15,"mat-icon"),ms(16,"forward"),La(),La(),La(),Oa(17,"div",8),Oa(18,"p"),ms(19,'Nel primo capitolo \xe8 presente la poesia "A Silvia"'),La(),La(),Da(20,"img",9),Oa(21,"p"),ms(22,"Chiesa dei Cappuccini"),La(),Oa(23,"p",5),Oa(24,"button",10),Oa(25,"span"),Oa(26,"mat-icon"),ms(27,"menu_book"),La(),La(),La(),Oa(28,"button",7),Na("click",(function(){return e.searchByCapitolo(2)})),Oa(29,"mat-icon"),ms(30,"forward"),La(),La(),La(),Oa(31,"div",11),Oa(32,"p"),ms(33,'Nel secondo capitolo \xe8 presente la poesia "Sopra il ritratto di una bella donna scolpito nel monumento sepolcrale della medesima"'),La(),La(),Da(34,"img",12),Oa(35,"p"),ms(36,"Piazzuola del sabato del villaggio"),La(),Oa(37,"p",5),Oa(38,"button",13),Oa(39,"span"),Oa(40,"mat-icon"),ms(41,"menu_book"),La(),La(),La(),Oa(42,"button",7),Na("click",(function(){return e.searchByCapitolo(3)})),Oa(43,"mat-icon"),ms(44,"forward"),La(),La(),La(),Oa(45,"div",14),Oa(46,"p"),ms(47,'Nel terzo capitolo capitolo \xe8 presente la poesia "Il sabato del villaggio"'),La(),La(),Da(48,"img",15),Oa(49,"p"),ms(50,"Centro Nazionale studi leopardiani"),La(),Oa(51,"p",5),Oa(52,"button",16),Oa(53,"span"),Oa(54,"mat-icon"),ms(55,"menu_book"),La(),La(),La(),Oa(56,"button",7),Na("click",(function(){return e.searchByCapitolo(4)})),Oa(57,"mat-icon"),ms(58,"forward"),La(),La(),La(),Oa(59,"div",17),Oa(60,"p"),ms(61,'Nel quarto capitolo capitolo \xe8 presente "Pensiero LXVIII"'),La(),La(),Da(62,"img",18),Oa(63,"p"),ms(64,"Il Colle dell'Infinito "),La(),Oa(65,"p",5),Oa(66,"button",19),Oa(67,"span"),Oa(68,"mat-icon"),ms(69,"menu_book"),La(),La(),La(),Oa(70,"button",7),Na("click",(function(){return e.searchByCapitolo(7)})),Oa(71,"mat-icon"),ms(72,"forward"),La(),La(),La(),Oa(73,"div",20),Oa(74,"p"),ms(75,'Nel settimo capitolo \xe8 presente la poesia "L\'infinito" e la poesia "Le ricordanze"'),La(),La(),Da(76,"img",21),Oa(77,"p"),ms(78,"Casa di Adelaide Antici"),La(),Oa(79,"p",5),Oa(80,"button",22),Oa(81,"span"),Oa(82,"mat-icon"),ms(83,"menu_book"),La(),La(),La(),Oa(84,"button",7),Na("click",(function(){return e.searchByCapitolo(8)})),Oa(85,"mat-icon"),ms(86,"forward"),La(),La(),La(),Oa(87,"div",23),Oa(88,"p"),ms(89,"Nell'ottavo capitolo \xe8 presente il testo di Monaldo"),La(),La(),Da(90,"img",24),Oa(91,"p"),ms(92,"Via Roma: desiderio irrefrenabile dell'infinito"),La(),Oa(93,"p",5),Oa(94,"button",25),Oa(95,"span"),Oa(96,"mat-icon"),ms(97,"menu_book"),La(),La(),La(),Oa(98,"button",7),Na("click",(function(){return e.searchByCapitolo(9)})),Oa(99,"mat-icon"),ms(100,"forward"),La(),La(),La(),Oa(101,"div",26),Oa(102,"p"),ms(103,"Nel nono capitolo \xe8 presente il testo di Ungaretti"),La(),La(),Da(104,"img",27),Oa(105,"p"),ms(106,"La torre del passero solitario"),La(),Oa(107,"p",5),Oa(108,"button",28),Oa(109,"span"),Oa(110,"mat-icon"),ms(111,"menu_book"),La(),La(),La(),Oa(112,"button",7),Na("click",(function(){return e.searchByCapitolo(10)})),Oa(113,"mat-icon"),ms(114,"forward"),La(),La(),La(),Oa(115,"div",29),Oa(116,"p"),ms(117,'Nel decimo capitolo capitolo \xe8 presente la poesia "Il passero solitario"'),La(),La(),Da(118,"img",30),Oa(119,"p"),ms(120,"La lettera della befana"),La(),Oa(121,"p",5),Oa(122,"button",16),Oa(123,"span"),Oa(124,"mat-icon"),ms(125,"menu_book"),La(),La(),La(),Oa(126,"button",7),Na("click",(function(){return e.searchByCapitolo(11)})),Oa(127,"mat-icon"),ms(128,"forward"),La(),La(),La(),Oa(129,"div",17),Oa(130,"p"),ms(131,"Nell'undicesimo capitolo \xe8 presente la lettera alla Marchesa Roberti "),La(),La(),Da(132,"img",31),Oa(133,"p"),ms(134,"Palazzo Venieri"),La(),Oa(135,"p",5),Oa(136,"button",32),Oa(137,"span"),Oa(138,"mat-icon"),ms(139,"menu_book"),La(),La(),La(),Oa(140,"button",7),Na("click",(function(){return e.searchByCapitolo(12)})),Oa(141,"mat-icon"),ms(142,"forward"),La(),La(),La(),Oa(143,"div",33),Oa(144,"p"),ms(145,'Nel dodicesimo capitolo capitolo \xe8 presente la poesia "Alla sua donna"'),La(),La(),Da(146,"img",34),Oa(147,"p"),ms(148,"Piazza della torre del borgo "),La(),Oa(149,"p",5),Oa(150,"button",35),Oa(151,"span"),Oa(152,"mat-icon"),ms(153,"menu_book"),La(),La(),La(),Oa(154,"button",7),Na("click",(function(){return e.searchByCapitolo(13)})),Oa(155,"mat-icon"),ms(156,"forward"),La(),La(),La(),Oa(157,"div",36),Oa(158,"p"),ms(159,'Nel dodicesimo capitolo capitolo sono presenti le poesie "La sera del d\xec di festa", "Il risorgimento", "Canto notturno di un pastore dell\'Asia", "Il pensiero dominante", "A se stesso", "La ginestra, o fiore del deserto", "Contro la minestra"'),La(),La(),Da(160,"img",37),La(),La(),La(),La())},directives:[tw],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:20px}h1[_ngcontent-%COMP%]{font-size:xx-large}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{text-align:center;font-family:Times New Roman,Times,serif}p[_ngcontent-%COMP%]{font-size:x-large}p[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{margin-top:auto;font-style:italic}pre[_ngcontent-%COMP%]{line-height:30px;text-align:center;font-size:medium;font-family:Times New Roman,Times,serif}.button[_ngcontent-%COMP%]{border:none;background:none}.button[_ngcontent-%COMP%], .buttonClicked[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0}.buttonClicked[_ngcontent-%COMP%]{background:rgba(76,175,79,.33725490196078434);border-radius:100%}.button1[_ngcontent-%COMP%]{border:none;background:none}.button1[_ngcontent-%COMP%], .button1Clicked[_ngcontent-%COMP%]{margin-left:5px;color:#f8f32b;padding:0}.button1Clicked[_ngcontent-%COMP%]{background:rgba(248,245,43,.3764705882352941);border-radius:100%}.arrow[_ngcontent-%COMP%]{border:solid #4caf50;border-width:0 3px 3px 0;display:inline-block;padding:3px}.down[_ngcontent-%COMP%]{transform:rotate(45deg);-webkit-transform:rotate(45deg)}.up[_ngcontent-%COMP%]{transform:rotate(-135deg);-webkit-transform:rotate(-135deg)}.buttonCap[_ngcontent-%COMP%]{margin-left:5%;vertical-align:middle;color:#4169e1;padding:0;border:none;background:none}.pMiddle[_ngcontent-%COMP%]{text-align:center}img[_ngcontent-%COMP%]{width:30%;height:30%;display:block;margin:5% auto}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20%}.overflow-auto[_ngcontent-%COMP%]{z-index:0;width:responsive;height:450px;box-shadow:15px 15px 10px #dedede}.bottone-class[_ngcontent-%COMP%]{margin-top:10px;font-size:13px;margin-bottom:-20px}.text[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;margin-top:20px}h1[_ngcontent-%COMP%]{font-size:25px;text-align:center}p[_ngcontent-%COMP%]{font-size:large}p[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{margin-top:auto;font-style:italic;text-align:center}pre[_ngcontent-%COMP%]{line-height:30px;font-size:medium;font-family:Times New Roman,Times,serif}.button[_ngcontent-%COMP%]{border:none;background:none}.button[_ngcontent-%COMP%], .buttonClicked[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0}.buttonClicked[_ngcontent-%COMP%]{background:rgba(76,175,79,.33725490196078434);border-radius:100%}.button1[_ngcontent-%COMP%]{border:none;background:none}.button1[_ngcontent-%COMP%], .button1Clicked[_ngcontent-%COMP%]{margin-left:5px;color:#f8f32b;padding:0}.button1Clicked[_ngcontent-%COMP%]{background:rgba(248,245,43,.3764705882352941);border-radius:100%}.arrow[_ngcontent-%COMP%]{border:solid #4caf50;border-width:0 3px 3px 0;display:inline-block;padding:3px}.down[_ngcontent-%COMP%]{transform:rotate(45deg);-webkit-transform:rotate(45deg)}.up[_ngcontent-%COMP%]{transform:rotate(-135deg);-webkit-transform:rotate(-135deg)}.buttonCap[_ngcontent-%COMP%]{margin-left:5%;vertical-align:middle;color:#4169e1;padding:0;border:none;background:none}.pMiddle[_ngcontent-%COMP%]{text-align:center}img[_ngcontent-%COMP%]{width:50%;height:50%;display:block;margin:5% auto 10%}}"]}),t})();class oC{}function aC(t,e){1&t&&(Oa(0,"div"),Oa(1,"h1",3),ms(2,"Per prenotare la visita devi effettuare il login"),La(),Oa(3,"button",4),ms(4,"Vai al login"),La(),La())}function sC(t,e){1&t&&(Oa(0,"div"),ms(1," Devi inserire una data. "),La())}function lC(t,e){if(1&t&&(Oa(0,"div",67),Ea(1,sC,2,0,"div",1),La()),2&t){Za();const t=Pa(20);Sr(1),Aa("ngIf",t.errors.required)}}function cC(t,e){1&t&&(Oa(0,"div"),ms(1," Devi inserire un orario. "),La())}function uC(t,e){if(1&t&&(Oa(0,"div",67),Ea(1,cC,2,0,"div",1),La()),2&t){Za();const t=Pa(30);Sr(1),Aa("ngIf",t.errors.required)}}function hC(t,e){1&t&&(Oa(0,"div"),ms(1," Devi inserire il numero di componenti che verranno alla visita. "),La())}function pC(t,e){if(1&t&&(Oa(0,"div",67),Ea(1,hC,2,0,"div",1),La()),2&t){Za();const t=Pa(40);Sr(1),Aa("ngIf",t.errors.required)}}function dC(t,e){1&t&&(Oa(0,"div"),ms(1," Devi inserire il nome del visitatore. In caso di visite di gruppo, il nome del referente. "),La())}function fC(t,e){if(1&t&&(Oa(0,"div",67),Ea(1,dC,2,0,"div",1),La()),2&t){Za();const t=Pa(51);Sr(1),Aa("ngIf",t.errors.required)}}function mC(t,e){1&t&&(Oa(0,"div"),ms(1," Devi inserire il cognome del visitatore. In caso di visite di gruppo, il cognome del referente. "),La())}function gC(t,e){if(1&t&&(Oa(0,"div",67),Ea(1,mC,2,0,"div",1),La()),2&t){Za();const t=Pa(58);Sr(1),Aa("ngIf",t.errors.required)}}function yC(t,e){if(1&t){const t=Ra();Oa(0,"div"),Oa(1,"p",68),ms(2,"Inserisci la tua categorizzazione"),La(),Oa(3,"input",69,38),Na("ngModelChange",(function(e){return ui(t),Za(2).prenotazione.professione=e})),La(),La()}if(2&t){const t=Za(2);Sr(3),Aa("ngModel",t.prenotazione.professione)}}function _C(t,e){1&t&&(Oa(0,"div"),ms(1," Devi inserire la professione. "),La())}function vC(t,e){if(1&t&&(Oa(0,"div",67),Ea(1,_C,2,0,"div",1),La()),2&t){Za();const t=Pa(65);Sr(1),Aa("ngIf",t.errors.required)}}function bC(t,e){1&t&&(Oa(0,"div"),ms(1," Inserisci il numero di cellulare del visitatore. "),La())}function xC(t,e){if(1&t&&(Oa(0,"div",67),Ea(1,bC,2,0,"div",1),La()),2&t){Za();const t=Pa(86);Sr(1),Aa("ngIf",t.errors.required)}}function wC(t,e){1&t&&(Oa(0,"div"),ms(1," Inserisci il tuo paese di provenienza "),La())}function CC(t,e){if(1&t&&(Oa(0,"div",67),Ea(1,wC,2,0,"div",1),La()),2&t){Za();const t=Pa(93);Sr(1),Aa("ngIf",t.errors.required)}}function SC(t,e){1&t&&(Oa(0,"div"),ms(1," Inserisci la tua citt\xe0 "),La())}function TC(t,e){if(1&t&&(Oa(0,"div",67),Ea(1,SC,2,0,"div",1),La()),2&t){Za();const t=Pa(100);Sr(1),Aa("ngIf",t.errors.required)}}function kC(t,e){if(1&t){const t=Ra();Oa(0,"div",5),Oa(1,"div",6),Oa(2,"div",7),Oa(3,"h1",8),ms(4,"Prenota il tuo Tour per il magnifico percorso leopardiano"),La(),La(),La(),Oa(5,"div",6),Oa(6,"div",9),Oa(7,"div",10),Oa(8,"form",11,12),Na("ngSubmit",(function(){return ui(t),Za().onSubmit()})),Oa(10,"div",6),Oa(11,"div",13),Oa(12,"h4",14),ms(13,"Dettagli prenotazione"),La(),La(),Oa(14,"div",15),Oa(15,"div",16),Oa(16,"label",17),ms(17,"Data del tour*"),La(),Oa(18,"div",18),Oa(19,"input",19,20),Na("ngModelChange",(function(e){return ui(t),Za().prenotazione.data=e})),La(),Oa(21,"span",21),Da(22,"i",22),La(),La(),Ea(23,lC,2,1,"div",23),La(),La(),Oa(24,"div",15),Oa(25,"div",16),Oa(26,"label",24),ms(27,"Orario desiderato*"),La(),Oa(28,"div",18),Oa(29,"input",25,26),Na("ngModelChange",(function(e){return ui(t),Za().prenotazione.orario=e})),La(),Oa(31,"span",21),Da(32,"i",22),La(),La(),Ea(33,uC,2,1,"div",23),La(),La(),Oa(34,"div",15),Oa(35,"div",16),Oa(36,"label",27),ms(37,"Numero dei componenti del gruppo*"),La(),Oa(38,"div",28),Oa(39,"input",29,30),Na("ngModelChange",(function(e){return ui(t),Za().prenotazione.numcomponenti=e})),La(),La(),Da(41,"span",21),La(),Ea(42,pC,2,1,"div",23),La(),Oa(43,"div",31),Oa(44,"h4",14),ms(45,"Informazioni generali referente del gruppo"),La(),La(),Oa(46,"div",15),Oa(47,"div",16),Oa(48,"label",32),ms(49,"Nome*"),La(),Oa(50,"input",33,34),Na("ngModelChange",(function(e){return ui(t),Za().prenotazione.nome=e})),La(),La(),Ea(52,fC,2,1,"div",23),La(),Oa(53,"div",15),Oa(54,"div",16),Oa(55,"label",32),ms(56,"Cognome*"),La(),Oa(57,"input",35,36),Na("ngModelChange",(function(e){return ui(t),Za().prenotazione.cognome=e})),La(),La(),Ea(59,gC,2,1,"div",23),La(),Oa(60,"div",15),Oa(61,"div",16),Oa(62,"label",27),ms(63,"Professione/Tipologia del gruppo*"),La(),Oa(64,"select",37,38),Na("change",(function(e){return ui(t),Za().onChange(e.target.value)}))("ngModelChange",(function(e){return ui(t),Za().prenotazione.professione=e})),Oa(66,"option",39),ms(67,"Seleziona chi sei"),La(),Oa(68,"option",40),ms(69,"Gruppi scolastici"),La(),Oa(70,"option",41),ms(71,"Universitari"),La(),Oa(72,"option",42),ms(73,"Associazioni culturali"),La(),Oa(74,"option",43),ms(75,"Turisti"),La(),Oa(76,"option",44),ms(77,"Altro"),La(),La(),Ea(78,yC,5,1,"div",1),Da(79,"span",21),La(),Ea(80,vC,2,1,"div",23),La(),Oa(81,"div",45),Oa(82,"div",16),Oa(83,"label",46),ms(84," Numero di telefono*"),La(),Oa(85,"input",47,48),Na("ngModelChange",(function(e){return ui(t),Za().prenotazione.cellulare=e})),La(),La(),Ea(87,xC,2,1,"div",23),La(),Oa(88,"div",45),Oa(89,"div",16),Oa(90,"label",49),ms(91,"Paese*"),La(),Oa(92,"input",50,51),Na("ngModelChange",(function(e){return ui(t),Za().prenotazione.paese=e})),La(),La(),Ea(94,CC,2,1,"div",23),La(),Oa(95,"div",45),Oa(96,"div",16),Oa(97,"label",52),ms(98,"Citt\xe0*"),La(),Oa(99,"input",53,54),Na("ngModelChange",(function(e){return ui(t),Za().prenotazione.citta=e})),La(),La(),Ea(101,TC,2,1,"div",23),La(),Oa(102,"div",13),Oa(103,"div",16),Oa(104,"label",55),ms(105,"Informazioni aggiuntive (Non obbligatorio)"),La(),Oa(106,"input",56),Na("ngModelChange",(function(e){return ui(t),Za().prenotazione.infoAggiuntiva=e})),La(),La(),La(),Oa(107,"div",57),Oa(108,"button",58),ms(109,"Invia richiesta"),La(),La(),Oa(110,"div",59),Oa(111,"div",60),Oa(112,"div",61),Oa(113,"div",62),Oa(114,"h1",63),ms(115,"Prenotazione effettuata con successo"),La(),La(),Oa(116,"div",64),Oa(117,"p"),ms(118,"Grazie per aver effettuato una prenotazione"),La(),La(),Oa(119,"div",65),Oa(120,"button",66),ms(121,"Area Riservata"),La(),La(),La(),La(),La(),La(),La(),La(),La(),La(),La()}if(2&t){const t=Pa(9),e=Pa(20),i=Pa(30),n=Pa(40),r=Pa(51),o=Pa(58),a=Pa(65),s=Pa(86),l=Pa(93),c=Pa(100),u=Za();Sr(19),Aa("ngModel",u.prenotazione.data),Sr(4),Aa("ngIf",e.invalid&&(e.dirty||e.touched)),Sr(6),Aa("ngModel",u.prenotazione.orario),Sr(4),Aa("ngIf",i.invalid&&(i.dirty||i.touched)),Sr(6),Aa("ngModel",u.prenotazione.numcomponenti),Sr(3),Aa("ngIf",n.invalid&&(n.dirty||n.touched)),Sr(8),Aa("ngModel",u.prenotazione.nome),Sr(2),Aa("ngIf",r.invalid&&(r.dirty||r.touched)),Sr(5),Aa("ngModel",u.prenotazione.cognome),Sr(2),Aa("ngIf",o.invalid&&(o.dirty||o.touched)),Sr(5),Aa("ngModel",u.prenotazione.professione),Sr(2),Aa("value",u.default),Sr(12),Aa("ngIf",1==u.input),Sr(2),Aa("ngIf",a.invalid&&(a.dirty||a.touched)),Sr(5),Aa("ngModel",u.prenotazione.cellulare),Sr(2),Aa("ngIf",s.invalid&&(s.dirty||s.touched)),Sr(5),Aa("ngModel",u.prenotazione.paese),Sr(2),Aa("ngIf",l.invalid&&(l.dirty||l.touched)),Sr(5),Aa("ngModel",u.prenotazione.citta),Sr(2),Aa("ngIf",c.invalid&&(c.dirty||c.touched)),Sr(5),Aa("ngModel",u.prenotazione.infoAggiuntiva),Sr(2),Aa("disabled",!t.form.valid)}}let EC=(()=>{class t{constructor(t,e,i){this.route=t,this.router=e,this.service=i,this.loginEffettuato=!1,this.logRicevuto=!1,this.visitor=!1,this.input=!1,this.prenotazione=new oC}ngOnInit(){this.visitor="ROLE_VISITATORE"===sessionStorage.getItem("Role")}onSubmit(){this.service.save(this.prenotazione).subscribe(),this.logRicevuto=!0}apriInput(){this.input=!0,console.log(this.input)}onChange(t){" "==t?this.input=!0:"Gruppi scolastici"!=t&&"Universitari"!=t&&"Associazioni culturali"!=t&&"Turisti"!=t||(this.input=!1)}}return t.\u0275fac=function(e){return new(e||t)(Ia(Jd),Ia(mm),Ia(yg))},t.\u0275cmp=ve({type:t,selectors:[["app-prenotazione-visita"]],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],["class","container","style","margin-top: 20px; margin-bottom: 50px;",4,"ngIf"],[1,"h1"],["routerLink","/login",1,"btn","btn-success",2,"display","block","margin-left","auto","margin-right","auto"],[1,"container",2,"margin-top","20px","margin-bottom","50px"],[1,"row"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12","mb30","text-center",2,"margin-bottom","20px"],[2,"font-size","30px"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12","mb30"],[1,"tour-booking-form"],[3,"ngSubmit"],["prenotazioneForm","ngForm"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12"],[1,"tour-form-title"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","col-12"],[1,"form-group"],["for","datepicker",1,"control-label"],[1,"input-group"],["id","datepicker","name","data","type","date","placeholder","Data desiderata","required","",1,"form-control",3,"ngModel","ngModelChange"],["data","ngModel"],[1,"input-group-addon"],[1,"fa","fa-calendar"],["class","alert alert-danger",4,"ngIf"],["for","time",1,"control-label"],["id","time","name","orario","type","time","placeholder","Orario","required","",1,"form-control",3,"ngModel","ngModelChange"],["orario","ngModel"],["for","select",1,"control-label","required"],[1,"input"],["id","number","name","numcomponenti","type","number","placeholder","0-30","min","1","max","30","required","",1,"form-control",3,"ngModel","ngModelChange"],["numcomponenti","ngModel"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mt30"],[1,"control-label"],["id","name","name","nome","type","text","placeholder","Inserisci il tuo nome","required","",1,"form-control",3,"ngModel","ngModelChange"],["nome","ngModel"],["id","name","type","text","name","cognome","placeholder","Inserisci il tuo cognome","required","",1,"form-control",3,"ngModel","ngModelChange"],["cognome","ngModel"],["id","professione","name","professione","required","",1,"form-control",3,"ngModel","change","ngModelChange"],["professione","ngModel"],["disabled","",3,"value"],["value","Gruppi scolastici"],["value","Universitari"],["value","Associazioni culturali"],["value","Turisti"],["value"," "],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","col-12"],["for","phone",1,"control-label"],["id","phone","type","text","name","cellulare","placeholder","Inserisci il tuo numero di cellulare","required","",1,"form-control",3,"ngModel","ngModelChange"],["cellulare","ngModel"],["for","country",1,"control-label"],["id","country","type","text","name","paese","placeholder","Inserisci il tuo paese","required","",1,"form-control",3,"ngModel","ngModelChange"],["paese","ngModel"],["for","city",1,"control-label"],["id","city","type","text","name","citta","placeholder","Inserisci la tua citt\xe0","required","",1,"form-control",3,"ngModel","ngModelChange"],["citta","ngModel"],["for","textarea",1,"control-label"],["name","infoAggiuntiva","id","textarea","rows","4",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12",2,"margin-bottom","40px"],["type","submit","data-toggle","modal","data-target","#creazioneEvento",1,"btn","btn-primary",3,"disabled"],["id","creazioneEvento","tabindex","-1","role","dialog","aria-labelledby","exampleModalCenterTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLongTitle",1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button","routerLink","/scelta-utente","data-dismiss","modal",1,"btn","btn-secondary"],[1,"alert","alert-danger"],[2,"margin-top","20px","color","red"],["id","professione","name","professione","required","",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(Oa(0,"div",0),Ea(1,aC,5,0,"div",1),Ea(2,kC,122,22,"div",2),La()),2&t&&(Sr(1),Aa("ngIf",!e.visitor),Sr(1),Aa("ngIf",e.visitor))},directives:[Hu,gm,Iy,zg,Ty,Tg,zy,Ag,Py,Hg,Jg,ty,ry],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif}@media (max-width:500px){.h1[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;text-align:center;font-size:large}.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif}}"]}),t})();class PC{}function IC(t,e){1&t&&(Oa(0,"div",39),ms(1," L'email esiste gi\xe0, scegline un'altra. "),La())}function MC(t,e){1&t&&(Oa(0,"div"),ms(1," Devi scrivere una e-mail. "),La())}function AC(t,e){1&t&&(Oa(0,"div"),ms(1," L'email non sembra essere corretta. "),La())}function zC(t,e){1&t&&(Oa(0,"div"),ms(1," Questa email \xe8 gi\xe0 utilizzata. "),La())}function OC(t,e){if(1&t&&(Oa(0,"div",40),Ea(1,MC,2,0,"div",41),Ea(2,AC,2,0,"div",41),Ea(3,zC,2,0,"div",41),La()),2&t){const t=Za(),e=Pa(9);Sr(1),Aa("ngIf",e.errors.required),Sr(1),Aa("ngIf",null==e.errors?null:e.errors.pattern),Sr(1),Aa("ngIf",t.userExist&&!e.errors)}}function LC(t,e){1&t&&(Oa(0,"div"),ms(1," Devi scrivere Il nome. "),La())}function DC(t,e){1&t&&(Oa(0,"div"),ms(1," Il nome deve essere lungo almeno 2 caratteri. "),La())}function RC(t,e){if(1&t&&(Oa(0,"div",40),Ea(1,LC,2,0,"div",41),Ea(2,DC,2,0,"div",41),La()),2&t){Za();const t=Pa(16);Sr(1),Aa("ngIf",t.errors.required),Sr(1),Aa("ngIf",t.errors.minlength)}}function BC(t,e){1&t&&(Oa(0,"div"),ms(1," Devi scrivere Il cognome. "),La())}function FC(t,e){1&t&&(Oa(0,"div"),ms(1," Il cognome deve essere lungo almeno 2 caratteri. "),La())}function NC(t,e){if(1&t&&(Oa(0,"div",40),Ea(1,BC,2,0,"div",41),Ea(2,FC,2,0,"div",41),La()),2&t){Za();const t=Pa(22);Sr(1),Aa("ngIf",t.errors.required),Sr(1),Aa("ngIf",t.errors.minlength)}}function VC(t,e){1&t&&(Oa(0,"div"),ms(1," Devi scrivere la Password. "),La())}function jC(t,e){1&t&&(Oa(0,"div"),ms(1," La password deve essere lunga almeno 7 caratteri. "),La())}function UC(t,e){if(1&t&&(Oa(0,"div",40),Ea(1,VC,2,0,"div",41),Ea(2,jC,2,0,"div",41),La()),2&t){Za();const t=Pa(28);Sr(1),Aa("ngIf",t.errors.required),Sr(1),Aa("ngIf",t.errors.minlength)}}function qC(t,e){1&t&&(Oa(0,"button",42),ms(1,"Submit"),La()),2&t&&(Za(),Aa("disabled",!Pa(4).form.valid))}let ZC=(()=>{class t{constructor(t,e,i,n){this.route=t,this.router=e,this.authenticate=i,this.registrazione=n,this.showMsg=!1,this.userExist=!1,this.b1=!1,this.b2=!1,this.user=new PC}onSubmit(){this.registrazione.save(this.user).subscribe(t=>{}),this.showMsg=!0}mettiRuolo(){this.authenticate.getRole()}existUser(){""!=this.user.username&&this.registrazione.existUser(this.user.username).subscribe(t=>{t?(this.userExist=!0,1==this.userExist&&(this.b1=!1,this.b2=!0)):(this.b2=!1,this.userExist=!1,this.b1=!0)})}}return t.\u0275fac=function(e){return new(e||t)(Ia(Jd),Ia(mm),Ia(Uw),Ia(Zw))},t.\u0275cmp=ve({type:t,selectors:[["app-registrazione-page"]],decls:78,vars:11,consts:[[1,"container"],[1,"card-body"],[2,"text-align","-webkit-center",3,"ngSubmit"],["userForm","ngForm"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","placeholder","Enter your email address","required","","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,3}$",1,"form-control",3,"ngModel","ngModelChange","keyup"],["username","ngModel"],["style","margin-top: 10px;","class","alert alert-danger",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["for","name"],["type","text","required","","minlength","2","id","name","name","name","placeholder","Enter your name","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","lastName"],["type","text","required","","minlength","2","id","lastName","name","lastName","placeholder","Enter your last name","required","",1,"form-control",3,"ngModel","ngModelChange"],["lastName","ngModel"],["for","password"],["type","password","required","","minlength","7","id","password","name","password","placeholder","Enter your password","required","",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12"],[1,"form-check"],["type","checkbox","id","exampleCheck1","name","check1","required","",1,"form-check-input",3,"ngModel","ngModelChange"],["checkbox1","ngModel"],["for","exampleCheck1",1,"form-check-label"],["data-toggle","modal","data-target","#exampleModalCenter",2,"color","blue"],["id","exampleModalCenter","tabindex","-1","role","dialog","aria-labelledby","exampleModalCenterTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLongTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","submit","class","btn btn-primary","class","btn btn-info","data-toggle","modal","data-target","#registrazione",3,"disabled",4,"ngIf"],["id","registrazione","tabindex","-1","role","dialog","aria-labelledby","exampleModalCenterTitle","aria-hidden","true",1,"modal","fade"],["routerLink","/home",1,"btn","btn-success",2,"display","block","margin-left","auto","margin-right","auto","margin-top","5%"],["routerLink","/login",1,"btn","btn-success",2,"display","block","margin-left","auto","margin-right","auto","margin-top","5%"],[1,"alert","alert-danger",2,"margin-top","10px"],[1,"alert","alert-danger"],[4,"ngIf"],["type","submit","data-toggle","modal","data-target","#registrazione",1,"btn","btn-info",3,"disabled"]],template:function(t,e){if(1&t&&(Oa(0,"div",0),Oa(1,"body"),Oa(2,"div",1),Oa(3,"form",2,3),Na("ngSubmit",(function(){return e.onSubmit()})),Oa(5,"div",4),Oa(6,"label",5),ms(7,"Email"),La(),Oa(8,"input",6,7),Na("ngModelChange",(function(t){return e.user.username=t}))("keyup",(function(){return e.existUser()})),La(),Ea(10,IC,2,0,"div",8),Ea(11,OC,4,3,"div",9),La(),Oa(12,"div",4),Oa(13,"label",10),ms(14,"Nome"),La(),Oa(15,"input",11,12),Na("ngModelChange",(function(t){return e.user.name=t})),La(),Ea(17,RC,3,2,"div",9),La(),Oa(18,"div",4),Oa(19,"label",13),ms(20,"Cognome"),La(),Oa(21,"input",14,15),Na("ngModelChange",(function(t){return e.user.lastname=t})),La(),Ea(23,NC,3,2,"div",9),La(),Oa(24,"div",4),Oa(25,"label",16),ms(26,"Password"),La(),Oa(27,"input",17,18),Na("ngModelChange",(function(t){return e.user.password=t})),La(),Ea(29,UC,3,2,"div",9),La(),Oa(30,"div",19),Oa(31,"div",20),Oa(32,"input",21,22),Na("ngModelChange",(function(t){return e.user.checkbox1=t})),La(),Oa(34,"label",23),ms(35,"Accetta le nostre"),Oa(36,"a",24),ms(37," condizioni"),La(),ms(38,"*"),La(),Oa(39,"div",25),Oa(40,"div",26),Oa(41,"div",27),Oa(42,"div",28),Oa(43,"h1",29),ms(44,"Benvenuti su CentroCulturaleGL"),La(),Oa(45,"button",30),Oa(46,"span",31),ms(47,"\xd7"),La(),La(),La(),Oa(48,"div",32),Oa(49,"p"),ms(50,"Le presenti Condizioni d'uso (o \"Condizioni\") disciplinano l'uso dell'app, tranne nei casi di esplicita indicazione circa l'applicazione di condizioni separate (diverse dalle presenti), e forniscono informazioni sul Servizio CentroCulturaleGL (il \"Servizio\"), descritto di seguito. Creando un account CentroCulturaleGL o usando CentroCulturaleGL, l'utente accetta le presenti Condizioni."),La(),La(),Oa(51,"div",33),Oa(52,"button",34),ms(53,"Close"),La(),La(),La(),La(),La(),La(),La(),Ea(54,qC,2,1,"button",35),Oa(55,"div",36),Oa(56,"div",26),Oa(57,"div",27),Oa(58,"div",28),Oa(59,"h1",29),ms(60,"La registrazione \xe8 andata a buon fine."),La(),Oa(61,"button",30),Oa(62,"span",31),ms(63,"\xd7"),La(),La(),La(),Oa(64,"div",32),Oa(65,"p"),ms(66,"Grazie per aver effettuato la registrazione sulla nostra applicazione"),Da(67,"br"),ms(68,"Abbiamo inviato una email per permetterle di confermare la registrazione."),La(),La(),Oa(69,"div",33),Oa(70,"button",34),ms(71,"Close"),La(),La(),La(),La(),La(),La(),Oa(72,"div"),Oa(73,"button",37),ms(74,"Torna alla Home"),La(),La(),Oa(75,"div"),Oa(76,"button",38),ms(77,"Torna al login"),La(),La(),La(),La(),La()),2&t){const t=Pa(9),i=Pa(16),n=Pa(22),r=Pa(28);Sr(8),Aa("ngModel",e.user.username),Sr(2),Aa("ngIf",1==e.b2),Sr(1),Aa("ngIf",t.invalid&&(t.dirty||t.touched)),Sr(4),Aa("ngModel",e.user.name),Sr(2),Aa("ngIf",i.invalid&&(i.dirty||i.touched)),Sr(4),Aa("ngModel",e.user.lastname),Sr(2),Aa("ngIf",n.invalid&&(n.dirty||n.touched)),Sr(4),Aa("ngModel",e.user.password),Sr(2),Aa("ngIf",r.invalid&&(n.dirty||r.touched)),Sr(3),Aa("ngModel",e.user.checkbox1),Sr(22),Aa("ngIf",1==e.b1)}},directives:[Iy,zg,Ty,Tg,zy,Vy,Ag,Py,Hu,Ry,Oy,wg,gm],styles:[".form-group[_ngcontent-%COMP%]{width:600px;justify-content:center;text-align:center;max-width:100%}body[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif}[_ngcontent-%COMP%]:root{--input-padding-x:1.5rem;--input-padding-y:.75rem}.card-signin[_ngcontent-%COMP%]{border:0;border-radius:1rem;box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.1)}.card-signin[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:2rem;font-weight:300;font-size:1.5rem}.card-signin[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.form-signin[_ngcontent-%COMP%]{width:100%}.form-signin[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:80%;border-radius:5rem;letter-spacing:.1rem;font-weight:700;padding:1rem;transition:all .2s}.form-label-group[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:auto;border-radius:2rem}.form-label-group[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{padding:var(--input-padding-y) var(--input-padding-x)}.form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:block;width:100%;margin-bottom:0;line-height:1.5;color:#495057;border:1px solid transparent;border-radius:.25rem;transition:all .1s ease-in-out}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:transparent}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown){padding-top:calc(var(--input-padding-y) + var(--input-padding-y) * (2 / 3));padding-bottom:calc(var(--input-padding-y) / 3)}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) ~ label[_ngcontent-%COMP%]{padding-top:calc(var(--input-padding-y) / 3);padding-bottom:calc(var(--input-padding-y) / 3);font-size:12px;color:#777}.btn-google[_ngcontent-%COMP%]{color:#fff;background-color:#ea4335}.btn-facebook[_ngcontent-%COMP%]{color:#fff;background-color:#3b5998}@supports (-ms-ime-align:auto){.form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:none}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:#777}}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:none}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#777}}"]}),t})();function HC(t,e){1&t&&(Oa(0,"button",8),Oa(1,"span"),Oa(2,"mat-icon"),ms(3,"account_circle"),La(),La(),ms(4," Area Riservata "),La())}function GC(t,e){1&t&&(Oa(0,"button",9),Oa(1,"span"),Oa(2,"mat-icon"),ms(3,"event_note"),La(),La(),ms(4," Nuovo Evento "),La())}function WC(t,e){1&t&&(Oa(0,"button",10),Oa(1,"span"),Oa(2,"mat-icon"),ms(3,"view_list"),La(),La(),ms(4," Modulistica "),La())}function $C(t,e){1&t&&(Oa(0,"button",11),Oa(1,"span"),Oa(2,"mat-icon",12),ms(3,"location_on"),La(),La(),ms(4," Prenotazione Visita "),La())}function KC(t,e){1&t&&(Oa(0,"button",13),Oa(1,"span"),Oa(2,"mat-icon"),ms(3,"account_circle"),La(),La(),ms(4," Informazioni "),La())}function XC(t,e){1&t&&(Oa(0,"button",14),Oa(1,"span"),Oa(2,"mat-icon"),ms(3,"supervisor_account"),La(),La(),ms(4," Utenti Registrati "),La())}let QC=(()=>{class t{constructor(t,e){this.auth=t,this.gestioneUtente=e,this.admin=!1,this.visitor=!1}ngOnInit(){this.refresha=window.history.state.refresha,1==this.refresha&&(this.refresha++,window.location.reload()),"ROLE_ADMIN"===sessionStorage.getItem("Role")?this.admin=!0:"ROLE_VISITATORE"===sessionStorage.getItem("Role")&&(this.visitor=!0),this.gestioneUtente.findUtenteSingolo(sessionStorage.getItem("username")).subscribe(t=>{this.utente=t,console.log(this.utente)}),console.log("Session storage",sessionStorage.getItem("username"))}}return t.\u0275fac=function(e){return new(e||t)(Ia(Uw),Ia(qw))},t.\u0275cmp=ve({type:t,selectors:[["app-scelta-utente"]],decls:16,vars:6,consts:[[1,"container"],["class","button","routerLink","/area-riservata",4,"ngIf"],["class","button","routerLink","/evento",4,"ngIf"],["class","button","routerLink","/vedi-moduli-socio",4,"ngIf"],["class","button","routerLink","/prenotazione-visita",4,"ngIf"],["class","button","routerLink","/info-visitatore",4,"ngIf"],["class","button","routerLink","/utenti-registrati",4,"ngIf"],["src","\\assets\\images\\Giacomo_Leopardi_Morelli.jpg","alt","Leopardi Morelli"],["routerLink","/area-riservata",1,"button"],["routerLink","/evento",1,"button"],["routerLink","/vedi-moduli-socio",1,"button"],["routerLink","/prenotazione-visita",1,"button"],[2,"color","orange"],["routerLink","/info-visitatore",1,"button"],["routerLink","/utenti-registrati",1,"button"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),ms(2,"Salve e benvenuto nella tua area riservata"),La(),Oa(3,"p"),Ea(4,HC,5,0,"button",1),La(),Oa(5,"p"),Ea(6,GC,5,0,"button",2),La(),Oa(7,"p"),Ea(8,WC,5,0,"button",3),La(),Oa(9,"p"),Ea(10,$C,5,0,"button",4),La(),Oa(11,"p"),Ea(12,KC,5,0,"button",5),La(),Oa(13,"p"),Ea(14,XC,5,0,"button",6),La(),Da(15,"img",7),La()),2&t&&(Sr(4),Aa("ngIf",e.admin),Sr(2),Aa("ngIf",e.admin),Sr(2),Aa("ngIf",e.admin),Sr(2),Aa("ngIf",e.visitor),Sr(2),Aa("ngIf",e.visitor),Sr(2),Aa("ngIf",e.admin))},directives:[Hu,gm,tw],styles:["h1[_ngcontent-%COMP%]{font-size:xx-large;font-family:Times New Roman,Times,serif;font-style:oblique;text-align:center}.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}mat-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#00f;font-size:xx-large}span[_ngcontent-%COMP%]{margin-right:5%}.button[_ngcontent-%COMP%]{margin-left:20%;margin-right:0;font-size:xx-large;background:none;border:none;width:80%}.button[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{display:block;margin-top:10%}img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:70%;border:5px solid #222;padding:5px;box-shadow:14px 7px rgba(0,0,0,.494)}@media (max-width:500px){h1[_ngcontent-%COMP%]{font-size:x-large;font-family:Times New Roman,Times,serif;font-style:oblique;text-align:center}.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}mat-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#00f;font-size:x-large}span[_ngcontent-%COMP%]{margin-right:5%}.button[_ngcontent-%COMP%]{display:flex;margin-left:none;margin-right:none;font-size:large;background:none;border:none;width:80%}.button[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin-top:10%}img[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;width:70%;border:5px solid #222;padding:5px;box-shadow:14px 7px rgba(0,0,0,.494)}}"]}),t})(),YC=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=ve({type:t,selectors:[["app-tariffa"]],decls:41,vars:0,consts:[[1,"container"],[1,"table","table-bordered"],["scope","col"],["scope","row"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"i"),ms(3,"Scopri le nostre tariffe"),La(),La(),Oa(4,"p"),ms(5," Nella tabella che troverai qui sotto potrai scoprire tutte le tariffe calcolate in base al numero dei partecipanti. "),La(),Oa(6,"table",1),Oa(7,"thead"),Oa(8,"tr"),Oa(9,"th",2),ms(10,"Numero partecipanti"),La(),Oa(11,"th",2),ms(12,"Prezzo"),La(),La(),La(),Oa(13,"tbody"),Oa(14,"tr"),Oa(15,"th",3),ms(16,"1-5"),La(),Oa(17,"td"),ms(18,"50 \u20ac"),La(),La(),Oa(19,"tr"),Oa(20,"th",3),ms(21,"6-10"),La(),Oa(22,"td"),ms(23,"75 \u20ac"),La(),La(),Oa(24,"tr"),Oa(25,"th",3),ms(26,"11-20"),La(),Oa(27,"td"),ms(28,"100 \u20ac"),La(),La(),Oa(29,"tr"),Oa(30,"th",3),ms(31,"21-30"),La(),Oa(32,"td"),ms(33,"150 \u20ac"),La(),La(),Oa(34,"tr"),Oa(35,"th",3),ms(36,"oltre 31"),La(),Oa(37,"td"),ms(38,"Chiamare "),Da(39,"br"),ms(40," 320 3077716 "),La(),La(),La(),La(),La())},styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%;font-family:Times New Roman,Times,serif}.card[_ngcontent-%COMP%]{width:250px}.display-4[_ngcontent-%COMP%]{color:#fff;font-size:xx-large}h1[_ngcontent-%COMP%]{font-size:40px;font-family:Times New Roman,Times,serif}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%;font-family:Times New Roman,Times,serif}.card[_ngcontent-%COMP%]{width:250px}.display-4[_ngcontent-%COMP%]{color:#fff;font-size:xx-large}}"]}),t})();class JC{}let tS=(()=>{class t{constructor(t){this.http=t,this.url="http://159.89.22.125:8080/giacomoLeopardi/"}mandaMessaggio(t){return this.http.post(this.url+"inserisciMessaggioContatti",t)}}return t.\u0275fac=function(e){return new(e||t)(te(eg))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function eS(t,e){1&t&&(Oa(0,"div"),ms(1," Devi scrivere una e-mail. "),La())}function iS(t,e){if(1&t&&(Oa(0,"div",17),Ea(1,eS,2,0,"div",16),Oa(2,"small",18),ms(3,"We'll never share your email with anyone else."),La(),La()),2&t){Za();const t=Pa(37);Sr(1),Aa("ngIf",t.errors.required)}}function nS(t,e){1&t&&(Oa(0,"div"),ms(1," Devi scrivere un messaggio. "),La())}function rS(t,e){1&t&&(Oa(0,"div"),ms(1," Il messaggio deve essere lungo almeno 2 caratteri. "),La())}function oS(t,e){if(1&t&&(Oa(0,"div",17),Ea(1,nS,2,0,"div",16),Ea(2,rS,2,0,"div",16),La()),2&t){const t=Za(),e=Pa(43);Sr(1),Aa("ngIf",e.errors.required),Sr(1),Aa("ngIf",t.name.errors.minlength)}}function aS(t,e){1&t&&(Oa(0,"div"),ms(1," Il tuo messaggio \xe8 stato inviato, ti risponderemo il prima possibile. "),La())}let sS=(()=>{class t{constructor(t){this.service=t,this.booleanMessaggio=!1,this.messagge=new JC}ngOnInit(){}mandaMessaggio(){this.service.mandaMessaggio(this.messagge).subscribe(),this.booleanMessaggio=!0}ngAfterViewInit(){}}return t.\u0275fac=function(e){return new(e||t)(Ia(tS))},t.\u0275cmp=ve({type:t,selectors:[["app-contatti"]],decls:48,vars:5,consts:[[1,"container"],[1,"col-lg-6","col-md-6","col-sm-12","col-xs-12"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","wrapper-contact-icon"],[1,"material-icons"],[1,"clearfix"],[3,"ngSubmit"],["messaggeForm","ngForm"],[1,"form-group"],["for","exampleInputEmail1"],["pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,3}$","placeholder","Enter your email address","required","","name","email","type","email","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["class","alert alert-danger",4,"ngIf"],["name","messaggio","placeholder","Inserisci il messaggio che vuoi inviarci","required","",1,"form-control",3,"ngModel","ngModelChange"],["messaggio","ngModel"],["type","submit",1,"btn","btn-primary",2,"margin-bottom","10%"],[4,"ngIf"],[1,"alert","alert-danger"],["id","emailHelp",1,"form-text","text-muted"]],template:function(t,e){if(1&t&&(Oa(0,"div",0),Oa(1,"div",1),Oa(2,"div",2),Oa(3,"h2"),ms(4,"Contatti"),La(),Da(5,"hr"),Oa(6,"p"),ms(7,"Hai delle domande da fare al Centro Culturale Giacomo Leopardi?"),Da(8,"br"),Da(9,"br"),ms(10," Contattaci al seguente form, ti risponderemo il prima possibile. "),La(),Da(11,"p"),La(),Oa(12,"div",3),Oa(13,"p"),Oa(14,"span",4),ms(15," place "),La(),ms(16," Centro culturale Giacomo Leopardi, Recanati (MC) \u2013 Italy"),La(),Da(17,"div",5),Oa(18,"p"),Oa(19,"span",4),ms(20," alternate_email "),La(),ms(21," Email: giacomoleopardi13@gmail.com"),La(),Da(22,"div",5),Oa(23,"p"),Oa(24,"span",4),ms(25,"phone_iphone"),La(),ms(26," +39 320 3077716 "),La(),Da(27,"hr"),Da(28,"div",5),Da(29,"p"),La(),Da(30,"p"),Oa(31,"form",6,7),Na("ngSubmit",(function(){return e.mandaMessaggio()})),Oa(33,"div",8),Oa(34,"label",9),ms(35,"Inserisci la tua email"),La(),Oa(36,"input",10,11),Na("ngModelChange",(function(t){return e.messagge.email=t})),La(),Ea(38,iS,4,1,"div",12),La(),Oa(39,"div",8),Oa(40,"label"),ms(41,"Inserisci il messaggio che vuoi inviarci"),La(),Oa(42,"input",13,14),Na("ngModelChange",(function(t){return e.messagge.messaggio=t})),La(),Ea(44,oS,3,2,"div",12),La(),Oa(45,"button",15),ms(46,"Invia il tuo messaggio"),La(),La(),Ea(47,aS,2,0,"div",16),La(),La()),2&t){const t=Pa(37),i=Pa(43);Sr(36),Aa("ngModel",e.messagge.email),Sr(2),Aa("ngIf",t.invalid&&(t.dirty||t.touched)),Sr(4),Aa("ngModel",e.messagge.messaggio),Sr(2),Aa("ngIf",i.invalid&&(i.dirty||i.touched)),Sr(3),Aa("ngIf",1==e.booleanMessaggio)}},directives:[Iy,zg,Ty,Tg,Vy,zy,Ag,Py,Hu],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.material-icons[_ngcontent-%COMP%]{color:#ebbc39;vertical-align:middle}h2[_ngcontent-%COMP%]{text-transform:uppercase;font-size:28px}h2[_ngcontent-%COMP%], hr[_ngcontent-%COMP%]{color:#ebbc39}.map-container[_ngcontent-%COMP%]{justify-content:center;height:300px;z-index:0}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}.material-icons[_ngcontent-%COMP%]{color:#ebbc39;vertical-align:middle}h2[_ngcontent-%COMP%]{text-transform:uppercase;font-size:28px}h2[_ngcontent-%COMP%], hr[_ngcontent-%COMP%]{color:#ebbc39}.map-container[_ngcontent-%COMP%]{justify-content:center;height:180px;z-index:0}}"]}),t})();function lS(t,e){if(1&t&&(Oa(0,"td"),ms(1),La()),2&t){const t=Za().$implicit;Sr(1),gs(t.username)}}function cS(t,e){if(1&t&&(Oa(0,"td"),ms(1),La()),2&t){const t=Za().$implicit;Sr(1),gs(t.name)}}function uS(t,e){if(1&t&&(Oa(0,"td"),ms(1),La()),2&t){const t=Za().$implicit;Sr(1),gs(t.lastname)}}function hS(t,e){if(1&t){const t=Ra();Oa(0,"td"),Oa(1,"button"),Oa(2,"mat-icon",13),Na("click",(function(){ui(t);const e=Za().$implicit;return Za(2).deleteUtente(e.id)})),ms(3,"delete"),La(),La(),La()}}function pS(t,e){if(1&t&&(Oa(0,"td"),ms(1),La()),2&t){const t=Za().$implicit;Sr(1),gs(t.roles[0].description)}}function dS(t,e){if(1&t&&(Oa(0,"tr"),Ea(1,lS,2,1,"td",12),Ea(2,cS,2,1,"td",12),Ea(3,uS,2,1,"td",12),Ea(4,hS,4,0,"td",12),Ea(5,pS,2,1,"td",12),La()),2&t){const t=e.$implicit;Sr(1),Aa("ngIf","ADMIN"==t.roles[0].description),Sr(1),Aa("ngIf","ADMIN"==t.roles[0].description),Sr(1),Aa("ngIf","ADMIN"==t.roles[0].description),Sr(1),Aa("ngIf","ADMIN"==t.roles[0].description),Sr(1),Aa("ngIf","ADMIN"==t.roles[0].description)}}function fS(t,e){if(1&t&&(Oa(0,"td"),ms(1),La()),2&t){const t=Za().$implicit;Sr(1),gs(t.username)}}function mS(t,e){if(1&t&&(Oa(0,"td"),ms(1),La()),2&t){const t=Za().$implicit;Sr(1),gs(t.name)}}function gS(t,e){if(1&t&&(Oa(0,"td"),ms(1),La()),2&t){const t=Za().$implicit;Sr(1),gs(t.lastname)}}function yS(t,e){if(1&t){const t=Ra();Oa(0,"td"),Oa(1,"button"),Oa(2,"mat-icon",13),Na("click",(function(){ui(t);const e=Za().$implicit;return Za(2).deleteUtente(e.id)})),ms(3,"delete"),La(),La(),Oa(4,"button"),Oa(5,"mat-icon",14),Na("click",(function(){ui(t);const e=Za().$implicit;return Za(2).cambiaRuolo(e.id)})),ms(6,"person"),La(),La(),La()}}function _S(t,e){if(1&t&&(Oa(0,"td"),ms(1),La()),2&t){const t=Za().$implicit;Sr(1),gs(t.roles[0].description)}}function vS(t,e){if(1&t&&(Oa(0,"tr"),Ea(1,fS,2,1,"td",12),Ea(2,mS,2,1,"td",12),Ea(3,gS,2,1,"td",12),Ea(4,yS,7,0,"td",12),Ea(5,_S,2,1,"td",12),La()),2&t){const t=e.$implicit;Sr(1),Aa("ngIf","ADMIN"!=t.roles[0].description),Sr(1),Aa("ngIf","ADMIN"!=t.roles[0].description),Sr(1),Aa("ngIf","ADMIN"!=t.roles[0].description),Sr(1),Aa("ngIf","ADMIN"!=t.roles[0].description),Sr(1),Aa("ngIf","ADMIN"!=t.roles[0].description)}}function bS(t,e){if(1&t&&(Oa(0,"div",1),Oa(1,"h1"),ms(2,"In questa pagina \xe8 presente la lista degli utenti registrati"),La(),Oa(3,"div",2),Oa(4,"h1",3),ms(5,"Tabella Admin"),La(),Oa(6,"div",4),Oa(7,"div",5),Oa(8,"div",6),Oa(9,"table",7),Oa(10,"thead",8),Oa(11,"tr"),Oa(12,"th",9),ms(13,"Email"),La(),Oa(14,"th",9),ms(15,"Nome"),La(),Oa(16,"th",9),ms(17,"Cognome"),La(),Oa(18,"th",9),ms(19,"Azione"),La(),Oa(20,"th",9),ms(21,"Ruolo"),La(),La(),La(),Oa(22,"tbody",8),Ea(23,dS,6,5,"tr",10),La(),La(),La(),La(),La(),La(),Oa(24,"div",11),Oa(25,"h1",3),ms(26,"Tabella Utenti"),La(),Oa(27,"div",4),Oa(28,"div",5),Oa(29,"div",6),Oa(30,"table",7),Oa(31,"thead",8),Oa(32,"tr"),Oa(33,"th",9),ms(34,"Email"),La(),Oa(35,"th",9),ms(36,"Nome"),La(),Oa(37,"th",9),ms(38,"Cognome"),La(),Oa(39,"th",9),ms(40,"Azione"),La(),Oa(41,"th",9),ms(42,"Ruolo"),La(),La(),La(),Oa(43,"tbody",8),Ea(44,vS,6,5,"tr",10),La(),La(),La(),La(),La(),La(),La()),2&t){const t=Za();Sr(23),Aa("ngForOf",t.utente),Sr(21),Aa("ngForOf",t.utente)}}let xS=(()=>{class t{constructor(t,e){this.route=t,this.service=e,this.admin=!1}ngOnInit(){this.admin="ROLE_ADMIN"===sessionStorage.getItem("Role"),this.service.findAll().subscribe(t=>{this.utente=t})}deleteUtente(t){confirm("Confermare eliminazione PERMANENTE di questo utente?")?(this.service.deleteUser(t).subscribe(),window.setTimeout("location.reload()",100)):alert("utente NON eliminato")}cambiaRuolo(t){confirm("Confermare nomina admin?")?(this.service.changeRole(t).subscribe(),window.setTimeout("location.reload()",100)):alert("utente NON nominato Admin")}}return t.\u0275fac=function(e){return new(e||t)(Ia(mm),Ia(qw))},t.\u0275cmp=ve({type:t,selectors:[["app-utenti-registrati"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"card","my-5",2,"height","350px"],[2,"margin-top","5%"],[1,"overflow-auto"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-bordered"],[1,".table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[1,"card","my-5"],[4,"ngIf"],[1,"elimina",3,"click"],[1,"changeRole",3,"click"]],template:function(t,e){1&t&&Ea(0,bS,45,2,"div",0),2&t&&Aa("ngIf",e.admin)},directives:[Hu,qu,tw],styles:[".container[_ngcontent-%COMP%]{margin-bottom:10%;margin-top:20px;font-family:Times New Roman,Times,serif;font-size:large}.overflow-auto[_ngcontent-%COMP%]{z-index:0;width:responsive;height:500px}h1[_ngcontent-%COMP%]{font-size:x-large;font-family:Times New Roman,Times,serif;text-align:center}td[_ngcontent-%COMP%]{vertical-align:middle;text-align:justify}button[_ngcontent-%COMP%]{background:none;border:none;margin-bottom:5%;margin-top:5%}.elimina[_ngcontent-%COMP%]{color:red}.changeRole[_ngcontent-%COMP%], .elimina[_ngcontent-%COMP%]{vertical-align:middle;background-color:none}.changeRole[_ngcontent-%COMP%]{color:#00f}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-bottom:10%;margin-top:20px;font-family:Times New Roman,Times,serif;font-size:medium}.overflow-auto[_ngcontent-%COMP%]{z-index:0;width:responsive;height:500px}h1[_ngcontent-%COMP%]{font-size:x-large;font-family:Times New Roman,Times,serif;text-align:center}td[_ngcontent-%COMP%]{vertical-align:middle;text-align:justify}button[_ngcontent-%COMP%]{background:none;border:none;margin-bottom:5%;margin-top:5%}.elimina[_ngcontent-%COMP%]{color:red}.changeRole[_ngcontent-%COMP%], .elimina[_ngcontent-%COMP%]{vertical-align:middle;background-color:none}.changeRole[_ngcontent-%COMP%]{color:#00f}}"]}),t})();function wS(t,e){if(1&t&&(Oa(0,"tr"),Oa(1,"td"),ms(2),La(),Oa(3,"td",10),ms(4),La(),Oa(5,"td",11),ms(6),La(),Oa(7,"td",12),ms(8),La(),Oa(9,"td",13),ms(10),La(),Oa(11,"td",14),ms(12),La(),Oa(13,"td",14),ms(14),La(),Oa(15,"td",15),ms(16),La(),Oa(17,"td",16),ms(18),La(),Oa(19,"td",17),ms(20),La(),Oa(21,"td",18),ms(22),La(),La()),2&t){const t=e.$implicit;Sr(2),gs(t.id),Sr(2),gs(t.data),Sr(2),gs(t.orario),Sr(2),gs(t.numcomponenti),Sr(2),gs(t.nome),Sr(2),gs(t.cognome),Sr(2),gs(t.professione),Sr(2),gs(t.cellulare),Sr(2),gs(t.paese),Sr(2),gs(t.citta),Sr(2),gs(t.infoAggiuntiva)}}function CS(t,e){if(1&t&&(Oa(0,"div",1),Oa(1,"h1"),ms(2,"La tabella qua sotto indica i dati del tuo account"),La(),Oa(3,"div",2),Oa(4,"div",3),Oa(5,"div",4),Oa(6,"table",5),Oa(7,"tr"),Oa(8,"th"),ms(9,"Email: "),La(),Oa(10,"td"),ms(11),La(),La(),Oa(12,"tr"),Oa(13,"th"),ms(14,"Nome: "),La(),Oa(15,"td"),ms(16),La(),La(),Oa(17,"tr"),Oa(18,"th"),ms(19,"Cognome: "),La(),Oa(20,"td"),ms(21),La(),La(),La(),La(),La(),La(),Oa(22,"p"),ms(23,"Visite che hai prenotato :"),La(),Oa(24,"div",6),Oa(25,"div",2),Oa(26,"div",3),Oa(27,"div",4),Oa(28,"table",5),Oa(29,"thead",7),Oa(30,"tr"),Oa(31,"th",8),ms(32,"ID"),La(),Oa(33,"th",8),ms(34,"Data"),La(),Oa(35,"th",8),ms(36,"Orario"),La(),Oa(37,"th",8),ms(38,"Numero dei componenti"),La(),Oa(39,"th",8),ms(40,"Nome"),La(),Oa(41,"th",8),ms(42,"Cognome"),La(),Oa(43,"th",8),ms(44,"Professione"),La(),Oa(45,"th",8),ms(46,"Numero di telefono"),La(),Oa(47,"th",8),ms(48,"Paese"),La(),Oa(49,"th",8),ms(50,"Citt\xe0"),La(),Oa(51,"th",8),ms(52,"Info aggiuntive"),La(),La(),La(),Oa(53,"tbody",7),Ea(54,wS,23,11,"tr",9),La(),La(),La(),La(),La(),La(),La()),2&t){const t=Za();Sr(11),ys("",t.utente.username," "),Sr(5),ys("",t.utente.name," "),Sr(5),ys("",t.utente.lastname," "),Sr(33),Aa("ngForOf",t.visita)}}let SS=(()=>{class t{constructor(t,e){this.gestioneUtente=t,this.service=e,this.visitor=!1}ngOnInit(){this.visitor="ROLE_VISITATORE"===sessionStorage.getItem("Role"),this.gestioneUtente.findUtenteSingolo(sessionStorage.getItem("username")).subscribe(t=>{this.utente=t,console.log(this.utente)}),console.log("Session storage",sessionStorage.getItem("username")),this.service.prendiVisitaDalVisitatore(sessionStorage.getItem("username")).subscribe(t=>{this.visita=t})}}return t.\u0275fac=function(e){return new(e||t)(Ia(qw),Ia(yg))},t.\u0275cmp=ve({type:t,selectors:[["app-info-visitatore"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"overflow-auto"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"card","my-5"],[1,".table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],["name","data"],["name","orario"],["name","numcomponenti"],["name","nome"],["name","cognome"],["name","cellulare"],["name","paese"],["name","citta"],["name","infoAggiuntiva"]],template:function(t,e){1&t&&Ea(0,CS,55,4,"div",0),2&t&&Aa("ngIf",e.visitor)},directives:[Hu,qu],styles:[".container[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10%}p[_ngcontent-%COMP%]{font-size:xx-large;font-family:Times New Roman,Times,serif;margin-top:5%;margin-bottom:5%;text-align:center}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10%}p[_ngcontent-%COMP%]{font-size:large;font-family:Times New Roman,Times,serif;margin-top:5%;margin-bottom:5%;text-align:center}}"]}),t})();class TS{}function kS(t,e){1&t&&(Oa(0,"div"),ms(1," Devi inserire una data. "),La())}function ES(t,e){if(1&t&&(Oa(0,"div",36),Ea(1,kS,2,0,"div",37),La()),2&t){Za();const t=Pa(18);Sr(1),Aa("ngIf",t.errors.required)}}function PS(t,e){if(1&t&&(Oa(0,"div",38),ms(1),La()),2&t){const t=Za(2);Sr(1),gs(t.message)}}function IS(t,e){if(1&t){const t=Ra();Oa(0,"div",1),Oa(1,"h1"),ms(2,"Crea un nuovo evento"),La(),Oa(3,"form",2,3),Na("ngSubmit",(function(){return ui(t),Za().onSubmit()})),Oa(5,"div",4),Oa(6,"div",5),Oa(7,"div",6),Oa(8,"label",7),ms(9,"Titolo Evento*"),La(),Oa(10,"input",8,9),Na("ngModelChange",(function(e){return ui(t),Za().evento.nomeEvento=e})),La(),La(),La(),La(),Oa(12,"div",4),Oa(13,"div",6),Oa(14,"label",10),ms(15,"Data dell'evento*"),La(),Oa(16,"div",11),Oa(17,"input",12,13),Na("ngModelChange",(function(e){return ui(t),Za().evento.dataEvento=e})),La(),Oa(19,"span",14),Da(20,"i",15),La(),La(),Ea(21,ES,2,1,"div",16),La(),La(),Oa(22,"div",4),Oa(23,"div",17),Oa(24,"label",18),ms(25,"Descrizione Evento*"),La(),Oa(26,"textarea",19,20),Na("ngModelChange",(function(e){return ui(t),Za().evento.descrizione=e})),La(),La(),La(),Oa(28,"div",21),Oa(29,"div",22),Oa(30,"h1"),ms(31,"Carica immagine"),La(),La(),La(),Oa(32,"div",21),Oa(33,"div",23),Oa(34,"input",24),Na("change",(function(e){return ui(t),Za().onFileChanged(e)})),La(),La(),La(),Da(35,"hr"),Oa(36,"div",21),Oa(37,"div",22),Ea(38,PS,2,1,"div",25),La(),La(),Oa(39,"div",26),Oa(40,"button",27),ms(41,"Crea Evento"),La(),La(),Oa(42,"div",28),Oa(43,"div",29),Oa(44,"div",30),Oa(45,"div",31),Oa(46,"h1",32),ms(47,"Evento creato con successo"),La(),La(),Oa(48,"div",33),Oa(49,"p"),ms(50,"Il tuo evento \xe8 stato creato con successo e visualizzabile nella bacheca eventi"),La(),La(),Oa(51,"div",34),Oa(52,"button",35),ms(53,"Area Riservata"),La(),La(),La(),La(),La(),La(),La()}if(2&t){const t=Pa(4),e=Pa(18),i=Za();Sr(10),Aa("ngModel",i.evento.nomeEvento),Sr(7),Aa("ngModel",i.evento.dataEvento),Sr(4),Aa("ngIf",e.invalid&&(e.dirty||e.touched)),Sr(5),Aa("ngModel",i.evento.descrizione),Sr(12),Aa("ngIf",i.message),Sr(2),Aa("disabled",!t.form.valid)}}let MS=(()=>{class t{constructor(t,e,i){this.service=t,this.router=e,this.httpClient=i,this.admin=!1,this.showMsg=!1,this.evento=new TS}ngOnInit(){this.admin="ROLE_ADMIN"===sessionStorage.getItem("Role")}onSubmit(){const t=new FormData;t.append("imageFile",this.selectedFile,this.selectedFile.name),this.httpClient.post("http://159.89.22.125:8080/giacomoLeopardi/image/upload",t,{observe:"response"}).subscribe(t=>{200===t.status?(console.log(t),this.service.saveEvents({event:this.evento,imageId:t.body.id}).subscribe(),this.message="Immagine caricata correttamente"):this.message="Immagine non caricata correttamente"}),this.showMsg=!0}onFileChanged(t){this.selectedFile=t.target.files[0]}}return t.\u0275fac=function(e){return new(e||t)(Ia(Rw),Ia(mm),Ia(eg))},t.\u0275cmp=ve({type:t,selectors:[["app-evento"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[3,"ngSubmit"],["eventoForm","ngForm"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","col-12"],[1,"title"],[1,"form-group"],["for","textarea",1,"control-label"],["name","nomeEvento","required","",1,"form-control",3,"ngModel","ngModelChange"],["nomeEvento","ngModel"],["for","datepicker",1,"control-label"],[1,"input-group"],["id","datepicker","name","dataEvento","type","date","placeholder","Data desiderata","required","",1,"form-control",3,"ngModel","ngModelChange"],["dataEvento","ngModel"],[1,"input-group-addon"],[1,"fa","fa-calendar"],["class","alert alert-danger",4,"ngIf"],[1,"descrizione"],["for","descrizione",1,"control-label"],["id","exampleFormControlTextarea1","rows","3","name","descrizione","required","",1,"form-control",3,"ngModel","ngModelChange"],["descrizione","ngModel"],[1,"container","row"],[1,"col-md-12"],[1,"col-md-6"],["type","file",3,"change"],["style","font-family: 'Times New Roman', Times, serif;",4,"ngIf"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12",2,"margin-bottom","40px"],["type","submit","data-toggle","modal","data-target","#creaEvento",1,"btn","btn-primary",3,"disabled"],["id","creaEvento","tabindex","-1","role","dialog","aria-labelledby","exampleModalCenterTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLongTitle",1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal","routerLink","/scelta-utente",1,"btn","btn-secondary"],[1,"alert","alert-danger"],[4,"ngIf"],[2,"font-family","'Times New Roman', Times, serif"]],template:function(t,e){1&t&&Ea(0,IS,54,6,"div",0),2&t&&Aa("ngIf",e.admin)},directives:[Hu,Iy,zg,Ty,Tg,zy,Ag,Py,gm],styles:[".container[_ngcontent-%COMP%]{margin-bottom:10%;text-align:-webkit-center;margin-top:10px}h1[_ngcontent-%COMP%]{font-size:20px;font-family:Times New Roman,Times,serif;text-align:center;text-overflow:inherit}.icon[_ngcontent-%COMP%]{color:#3cdf06;vertical-align:middle;margin-right:10%}.descrizione[_ngcontent-%COMP%], .titolo[_ngcontent-%COMP%]{margin-top:10%;margin-bottom:10%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-bottom:10%;text-align:-webkit-center;margin-top:10px}h1[_ngcontent-%COMP%]{font-size:x-large;font-family:Times New Roman,Times,serif;text-align:center;text-overflow:inherit}.descrizione[_ngcontent-%COMP%], .titolo[_ngcontent-%COMP%]{margin-top:10%;margin-bottom:10%}}"]}),t})();function AS(t,e){if(1&t){const t=Ra();Oa(0,"button",13),Na("click",(function(){ui(t);const e=Za().$implicit;return Za().deleteEvento(e.id)})),ms(1," Premi per rimuovere l'evento "),La()}}function zS(t,e){if(1&t&&(Oa(0,"div",3),Oa(1,"div",4),Oa(2,"div",5),Oa(3,"div",6),Oa(4,"table",7),Oa(5,"div"),Da(6,"img",8),La(),La(),Oa(7,"table",7),Oa(8,"p",9),ms(9),La(),Da(10,"hr"),Oa(11,"p",10),ms(12),La(),Da(13,"hr"),Oa(14,"p",11),ms(15,"Descrizione evento:"),Da(16,"br"),ms(17),La(),Ea(18,AS,2,0,"button",12),La(),La(),La(),La(),La()),2&t){const t=e.$implicit,i=Za();Sr(6),Aa("src",t.retrievedImage,or),Sr(3),ys(" ",t.nomeEvento," "),Sr(3),ys("Data evento: ",t.dataEvento,""),Sr(5),ys(" ",t.descrizione,""),Sr(1),Aa("ngIf",i.admin)}}let OS=(()=>{class t{constructor(t,e,i,n,r){this.auth=t,this.gestioneUtente=e,this.httpClient=i,this.service=n,this.router=r,this.admin=!1,this.visitor=!1}ngOnInit(){this.refresha=window.history.state.refresha,1==this.refresha&&(this.refresha++,window.location.reload()),"ROLE_ADMIN"===sessionStorage.getItem("Role")?this.admin=!0:"ROLE_VISITATORE"===sessionStorage.getItem("Role")&&(this.visitor=!0),this.gestioneUtente.findUtenteSingolo(sessionStorage.getItem("username")).subscribe(t=>{this.utente=t,console.log(this.utente)}),console.log("Session storage",sessionStorage.getItem("username")),this.service.findEvents().subscribe(t=>{this.eventi=t,this.eventi.forEach(t=>{this.httpClient.get("http://159.89.22.125:8080/giacomoLeopardi/image/get/"+t.evento_immagine.name).subscribe(e=>{this.retrieveResonse=e,this.base64Data=this.retrieveResonse.picByte,t.retrievedImage="data:image/jpeg;base64,"+this.base64Data})}),console.log(this.eventi)})}deleteEvento(t){this.service.deleteEvent(t).subscribe(),window.setTimeout("location.reload()",100)}}return t.\u0275fac=function(e){return new(e||t)(Ia(Uw),Ia(qw),Ia(eg),Ia(Rw),Ia(mm))},t.\u0275cmp=ve({type:t,selectors:[["app-bacheca-eventi"]],decls:4,vars:1,consts:[[1,"container"],[1,"title"],["style","margin-bottom:30px",4,"ngFor","ngForOf"],[2,"margin-bottom","30px"],[1,"card","my-5"],[1,"overflow-auto"],[1,"card-body"],[1,"table","table-bordered","table-striped",2,"box-shadow","15px 15px 10px #dedede"],[3,"src"],[1,"nomeEvento"],[1,"dataEvento"],[1,"descrizioneEvento"],["class","btn btn-danger","style","margin: 10% auto 5%; display: block;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"margin","10% auto 5%","display","block",3,"click"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"p",1),ms(2,"BACHECA EVENTI"),La(),Ea(3,zS,19,5,"div",2),La()),2&t&&(Sr(3),Aa("ngForOf",e.eventi))},directives:[qu,Hu],styles:[".container[_ngcontent-%COMP%]{margin-bottom:10%;text-align:-webkit-center;margin-top:10px}.title[_ngcontent-%COMP%]{font-size:xx-large;font-family:Times New Roman,Times,serif;text-align:center;font-style:italic}img[_ngcontent-%COMP%]{max-width:-webkit-fill-available;width:250px;display:block;margin:5% auto}.nomeEvento[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase;font-family:Times New Roman,Times,serif;padding-top:5%;font-size:large}.dataEvento[_ngcontent-%COMP%]{text-align:left;text-transform:capitalize}.dataEvento[_ngcontent-%COMP%], .descrizioneEvento[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;font-size:medium;padding-left:5%}.descrizioneEvento[_ngcontent-%COMP%]{text-align:justify;line-height:normal;margin-bottom:5%;padding-right:5%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-bottom:10%;text-align:-webkit-center;margin-top:10px}.title[_ngcontent-%COMP%]{font-size:xx-large;font-family:Times New Roman,Times,serif;text-align:center;font-style:italic}img[_ngcontent-%COMP%]{max-width:-webkit-fill-available;width:250px;display:block;margin:10% auto 5%}.nomeEvento[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase;font-family:Times New Roman,Times,serif;padding-top:5%;font-size:large}.dataEvento[_ngcontent-%COMP%]{text-align:left;text-transform:capitalize}.dataEvento[_ngcontent-%COMP%], .descrizioneEvento[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;font-size:medium;padding-left:5%}.descrizioneEvento[_ngcontent-%COMP%]{text-align:justify;line-height:normal;margin-bottom:5%;padding-right:5%}}"]}),t})();class LS{}let DS=(()=>{class t{constructor(t){this.http=t,this.url="http://159.89.22.125:8080/giacomoLeopardi/"}vediModuli(){return this.http.get(this.url+"vediModuli")}mandaModulo(t){return this.http.post(this.url+"inserisciModulo",t)}eliminaModulo(t){return this.http.delete(this.url+"cancellaModulo/"+t)}}return t.\u0275fac=function(e){return new(e||t)(te(eg))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function RS(t,e){1&t&&(Oa(0,"div"),ms(1," Devi inserire il nome "),La())}function BS(t,e){if(1&t&&(Oa(0,"div",51),Ea(1,RS,2,0,"div",52),La()),2&t){Za();const t=Pa(14);Sr(1),Aa("ngIf",t.errors.required)}}function FS(t,e){1&t&&(Oa(0,"div"),ms(1," Devi inserire il cognome "),La())}function NS(t,e){if(1&t&&(Oa(0,"div",51),Ea(1,FS,2,0,"div",52),La()),2&t){Za();const t=Pa(21);Sr(1),Aa("ngIf",t.errors.required)}}function VS(t,e){1&t&&(Oa(0,"div"),ms(1," Inserisci la tua citt\xe0 di residenza "),La())}function jS(t,e){if(1&t&&(Oa(0,"div",51),Ea(1,VS,2,0,"div",52),La()),2&t){Za();const t=Pa(28);Sr(1),Aa("ngIf",t.errors.required)}}function US(t,e){1&t&&(Oa(0,"div"),ms(1," Inserisci la tua citt\xe0 di nascita "),La())}function qS(t,e){if(1&t&&(Oa(0,"div",51),Ea(1,US,2,0,"div",52),La()),2&t){Za();const t=Pa(35);Sr(1),Aa("ngIf",t.errors.required)}}function ZS(t,e){1&t&&(Oa(0,"div"),ms(1," inserisci il codice postale della tua citt\xe0 "),La())}function HS(t,e){if(1&t&&(Oa(0,"div",51),Ea(1,ZS,2,0,"div",52),La()),2&t){Za();const t=Pa(48);Sr(1),Aa("ngIf",t.errors.required)}}function GS(t,e){1&t&&(Oa(0,"div"),ms(1," Inserisci la via di residenza "),La())}function WS(t,e){if(1&t&&(Oa(0,"div",51),Ea(1,GS,2,0,"div",52),La()),2&t){Za();const t=Pa(55);Sr(1),Aa("ngIf",t.errors.required)}}function $S(t,e){1&t&&(Oa(0,"div"),ms(1," Inserisci la tua email "),La())}function KS(t,e){if(1&t&&(Oa(0,"div",51),Ea(1,$S,2,0,"div",52),La()),2&t){Za();const t=Pa(62);Sr(1),Aa("ngIf",t.errors.required)}}function XS(t,e){1&t&&(Oa(0,"div"),ms(1," Inserisci il numero di cellulare del visitatore. "),La())}function QS(t,e){if(1&t&&(Oa(0,"div",51),Ea(1,XS,2,0,"div",52),La()),2&t){Za();const t=Pa(69);Sr(1),Aa("ngIf",t.errors.required)}}function YS(t,e){1&t&&(Oa(0,"div"),ms(1," Inserisci la tua professione "),La())}function JS(t,e){if(1&t&&(Oa(0,"div",51),Ea(1,YS,2,0,"div",52),La()),2&t){Za();const t=Pa(76);Sr(1),Aa("ngIf",t.errors.required)}}function tT(t,e){1&t&&(Oa(0,"div"),ms(1," Inserisci il tuo codice fiscale "),La())}function eT(t,e){if(1&t&&(Oa(0,"div",51),Ea(1,tT,2,0,"div",52),La()),2&t){Za();const t=Pa(83);Sr(1),Aa("ngIf",t.errors.required)}}function iT(t,e){1&t&&(Oa(0,"div",53),Oa(1,"div",54),Oa(2,"div",55),Oa(3,"p"),Oa(4,"strong"),ms(5,"Il modulo \xe8 stato correttamente inviato."),La(),La(),Oa(6,"a",56),ms(7,"Torna alla home"),La(),La(),La(),La())}let nT=(()=>{class t{constructor(t,e,i){this.service=t,this.route=e,this.router=i,this.todayHTML=Date.now(),this.logRicevuto=!1,this.modulo=new LS}ngOnInit(){this.service.vediModuli().subscribe(t=>{this.diventaSocio=t,console.log("Moduli: ",this.diventaSocio)})}OnSubmit(){var t=new Date,e=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),n=t.getFullYear();this.today=i+"/"+e+"/"+n,this.modulo.dataCompilazione=t,this.service.mandaModulo(this.modulo).subscribe(),this.logRicevuto=!0}}return t.\u0275fac=function(e){return new(e||t)(Ia(DS),Ia(Jd),Ia(mm))},t.\u0275cmp=ve({type:t,selectors:[["app-socio"]],decls:132,vars:28,consts:[[1,"container",2,"font-family","'Times New Roman', Times, serif"],["src","\\assets\\images\\LogoCentroCulturaleGL.png",1,"img"],[2,"margin-top","5%"],[1,"card-body"],[2,"text-align","-webkit-center",3,"ngSubmit"],["moduloForm","ngForm"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","col-12"],[1,"form-group"],[1,"control-label"],["id","name","name","nome","type","text","placeholder","Inserisci il tuo nome","required","",1,"form-control",3,"ngModel","ngModelChange"],["nome","ngModel"],["class","alert alert-danger",4,"ngIf"],["id","name","type","text","name","cognome","placeholder","Inserisci il tuo cognome","required","",1,"form-control",3,"ngModel","ngModelChange"],["cognome","ngModel"],[1,"col-xl-4","col-lg-4","col-md-12","col-sm-12","col-12"],["for","city",1,"control-label"],["id","city","type","text","name","citta","placeholder","Inserisci la tua citt\xe0","required","",1,"form-control",3,"ngModel","ngModelChange"],["citta","ngModel"],["id","city","type","text","name","luogoDiNascita","placeholder","Inserisci la tua citt\xe0","required","",1,"form-control",3,"ngModel","ngModelChange"],["luogoDiNascita","ngModel"],["type","date","required","","minlength","2","name","giornoDiNascita","required","",1,"form-control",3,"ngModel","ngModelChange"],["giornoDiNascita","ngModel"],["for","CAP"],["type","text","required","","minlength","5","name","cap","placeholder","Inserisci il codice postale","size","5","maxlength","5","required","",1,"form-control",3,"ngModel","ngModelChange"],["cap","ngModel"],["for","via"],["type","text","required","","minlength","2","name","via","placeholder","Inserisci la via di residenza","required","",1,"form-control",3,"ngModel","ngModelChange"],["via","ngModel"],["for","email"],["type","text","required","","minlength","2","name","email","placeholder","Inserisci la tua email","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["for","phone",1,"control-label"],["type","text","name","numeroTelefono","placeholder","Inserisci il tuo numero di cellulare","required","",1,"form-control",3,"ngModel","ngModelChange"],["numeroTelefono","ngModel"],["for","professione"],["type","text","required","","minlength","2","name","professione","placeholder","Inserisci la tua professione","required","",1,"form-control",3,"ngModel","ngModelChange"],["professione","ngModel"],["for","CF"],["type","text","required","","minlength","2","id","name","name","codiceFiscale","placeholder","Inserisci il tuo codice fiscale","size","16","maxlength","16","required","",1,"form-control",3,"ngModel","ngModelChange"],["codiceFiscale","ngModel"],["name","quotaAnnuale",3,"ngModel","ngModelChange"],["value","20"],["value","50"],["value","100"],["type","1",2,"text-align","justify"],["for","datepicker",1,"control-label"],[2,"font-size","medium","font-family","'Times New Roman', Times, serif"],[2,"vertical-align","middle"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12",2,"margin-bottom","10%"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","row","style","margin-top: 10%; width: 350px; height: 350px;",4,"ngIf"],[1,"alert","alert-danger"],[4,"ngIf"],[1,"row",2,"margin-top","10%","width","350px","height","350px"],[1,"col-xs-12"],[1,"alert","alert-success"],["routerLink","/home"]],template:function(t,e){if(1&t&&(Oa(0,"div",0),Da(1,"img",1),Oa(2,"h1",2),ms(3,"In questa sezione potrai compilare la domanda per diventare un socio del Centro culturale Giacomo Leopardi"),La(),Oa(4,"div",3),Oa(5,"form",4,5),Na("ngSubmit",(function(){return e.OnSubmit()})),Oa(7,"h3"),ms(8,"Al Consiglio direttivo del Centro culturale Giacomo Leopardi"),La(),Oa(9,"div",6),Oa(10,"div",7),Oa(11,"label",8),ms(12,"Il sottoscritto Nome"),La(),Oa(13,"input",9,10),Na("ngModelChange",(function(t){return e.modulo.nome=t})),La(),La(),Ea(15,BS,2,1,"div",11),La(),Oa(16,"div",6),Oa(17,"div",7),Oa(18,"label",8),ms(19,"Cognome"),La(),Oa(20,"input",12,13),Na("ngModelChange",(function(t){return e.modulo.cognome=t})),La(),La(),Ea(22,NS,2,1,"div",11),La(),Oa(23,"div",14),Oa(24,"div",7),Oa(25,"label",15),ms(26,"Residente a"),La(),Oa(27,"input",16,17),Na("ngModelChange",(function(t){return e.modulo.citta=t})),La(),La(),Ea(29,jS,2,1,"div",11),La(),Oa(30,"div",14),Oa(31,"div",7),Oa(32,"label",15),ms(33,"Nato a"),La(),Oa(34,"input",18,19),Na("ngModelChange",(function(t){return e.modulo.luogoDiNascita=t})),La(),La(),Ea(36,qS,2,1,"div",11),La(),Oa(37,"div",14),Oa(38,"div",7),Oa(39,"label"),ms(40,"il giorno"),La(),Oa(41,"input",20,21),Na("ngModelChange",(function(t){return e.modulo.giornoDiNascita=t})),La(),La(),La(),Oa(43,"div",14),Oa(44,"div",7),Oa(45,"label",22),ms(46,"CAP"),La(),Oa(47,"input",23,24),Na("ngModelChange",(function(t){return e.modulo.cap=t})),La(),Ea(49,HS,2,1,"div",11),La(),La(),Oa(50,"div",14),Oa(51,"div",7),Oa(52,"label",25),ms(53,"in via"),La(),Oa(54,"input",26,27),Na("ngModelChange",(function(t){return e.modulo.via=t})),La(),Ea(56,WS,2,1,"div",11),La(),La(),Oa(57,"div",14),Oa(58,"div",7),Oa(59,"label",28),ms(60,"email"),La(),Oa(61,"input",29,30),Na("ngModelChange",(function(t){return e.modulo.email=t})),La(),Ea(63,KS,2,1,"div",11),La(),La(),Oa(64,"div",14),Oa(65,"div",7),Oa(66,"label",31),ms(67," Numero di telefono*"),La(),Oa(68,"input",32,33),Na("ngModelChange",(function(t){return e.modulo.numeroTelefono=t})),La(),La(),Ea(70,QS,2,1,"div",11),La(),Oa(71,"div",14),Oa(72,"div",7),Oa(73,"label",34),ms(74,"professione"),La(),Oa(75,"input",35,36),Na("ngModelChange",(function(t){return e.modulo.professione=t})),La(),Ea(77,JS,2,1,"div",11),La(),La(),Oa(78,"div",14),Oa(79,"div",7),Oa(80,"label",37),ms(81,"Codice Fiscale"),La(),Oa(82,"input",38,39),Na("ngModelChange",(function(t){return e.modulo.codiceFiscale=t})),La(),Ea(84,eT,2,1,"div",11),La(),La(),Oa(85,"h2"),ms(86,"CHIEDE"),La(),Oa(87,"div",7),Oa(88,"div",14),Oa(89,"select",40),Na("ngModelChange",(function(t){return e.modulo.quotaAnnuale=t})),Oa(90,"option",41),ms(91," 20 euro "),La(),Oa(92,"option",42),ms(93," 50 euro "),La(),Oa(94,"option",43),ms(95," 100 euro "),La(),La(),La(),La(),Oa(96,"h3"),ms(97,"Informativa ai sensi della L. 679/2016 e successivo regolamento europeo"),La(),Oa(98,"p"),ms(99," Con l\u2019entrata in vigore della legge 679/2016 recante norme per la \u201ctutela delle persone e di altri soggetti rispetto al trattamento dei dati personali\u201d, siamo tenuti a fornire le seguenti informazioni circa il trattamento dei dati personali: "),La(),Oa(100,"ol",44),Oa(101,"li"),ms(102,"I dati personali sono raccolti direttamente dall\u2019interessato nell\u2019ambito dell\u2019attivit\xe0 di tesseramento svolta dal centro culturale G. Leopardi "),La(),Oa(103,"li"),ms(104,"In ragione di ci\xf2, tali dati sono da considerare sensibili, perch\xe9 da essi possono desumersi le convinzioni religiose culturali o politiche e l\u2019adesione a associazioni od organizzazioni a carattere religioso. Pertanto \xe8 necessaria un\u2019apposita manifestazione di consenso da parte dell\u2019interessato, che si intende rilasciata per il trattamento di dati di tal genere gi\xe0 in nostro possesso o che verranno acquisiti in futuro, nei limiti necessari al perseguimento degli scopi del centro culturale Leopardi. "),La(),Oa(105,"li"),ms(106,"Il trattamento dei dati personali, svolto senza/mediante elaborazione automatizzata all\u2019interno del territorio dell\u2019Unione Europea in modo tale da garantire la sicurezza e la riservatezza dei dati stessi, \xe8 funzionale allo svolgimento delle attivit\xe0 connesse alla vita del centro culturale stesso. "),La(),Oa(107,"li"),ms(108,"I dati potranno inoltre essere comunicati ad altri soggetti che aderiscono alle attivit\xe0 del centro. I soggetti destinatari della comunicazione utilizzeranno e conserveranno i dati solo per il tempo necessario alla realizzazione della singola attivit\xe0. "),La(),Oa(109,"li"),ms(110," La durata di conservazione dei dati \xe8 fissata in 36 mesi, a decorrere dall\u2019ultima interazione rilevata attraverso i nostri sistemi informatici. "),La(),Oa(111,"li"),ms(112," L\u2019interessato ha il diritto di accedere ai propri dati personali, di chiederne la rettifica, l\u2019aggiornamento, la limitazione del trattamento, la portabilit\xe0 o, ancora, la cancellazione, nonch\xe9 di opporsi al loro trattamento per motivi legittimi. L\u2019interessato ha, inoltre, diritto di proporre reclamo al Garante per la protezione dei dati personali. Le richieste possono essere rivolte al Titolare del trattamento presso l\u2019indirizzo mail: centro_leopardiirgilio.it "),La(),Oa(113,"li"),ms(114," L\u2019articolo 13 della legge 675/1996 attribuisce all\u2019interessato l\u2019esercizio di diritti specifici. In particolare, questi pu\xf2 ottenere dal titolare del trattamento la conferma dell\u2019esistenza o meno di dati personali e che tali dati vengano messi a sua disposizione; pu\xf2 chiedere di conoscere l\u2019origine dei dati nonch\xe9 la logica e le finalit\xe0 su cui si basa il trattamento; pu\xf2 ottenere la cancellazione, la trasformazione in forma anonima o il blocco dei dati trattati in violazione della legge, nonch\xe9 l\u2019aggiornamento, la rettificazione o, se vi \xe8 interesse, l\u2019integrazione dei dati; pu\xf2 opporsi, per motivi legittimi, al trattamento stesso. "),La(),Oa(115,"li"),ms(116," Il titolare del trattamento dei dati \xe8 il Centro Culturale G. Leopardi nella persona di Milena Tacconi attuale presidente del centro. "),La(),La(),Oa(117,"div",6),Oa(118,"div",7),Oa(119,"label",45),ms(120,"Data della compilazione"),La(),La(),Oa(121,"span"),Oa(122,"p",46),Oa(123,"mat-icon",47),ms(124,"today"),La(),ms(125),Tl(126,"date"),La(),La(),La(),Oa(127,"div",48),Oa(128,"button",49),ms(129,"Invia richiesta"),La(),La(),Ea(130,iT,8,0,"div",50),La(),La(),La(),ms(131,"--\x3e")),2&t){const t=Pa(6),i=Pa(14),n=Pa(21),r=Pa(28),o=Pa(35),a=Pa(48),s=Pa(55),l=Pa(62),c=Pa(69),u=Pa(76),h=Pa(83);Sr(13),Aa("ngModel",e.modulo.nome),Sr(2),Aa("ngIf",i.invalid&&(i.dirty||i.touched)),Sr(5),Aa("ngModel",e.modulo.cognome),Sr(2),Aa("ngIf",n.invalid&&(n.dirty||n.touched)),Sr(5),Aa("ngModel",e.modulo.citta),Sr(2),Aa("ngIf",r.invalid&&(r.dirty||r.touched)),Sr(5),Aa("ngModel",e.modulo.luogoDiNascita),Sr(2),Aa("ngIf",o.invalid&&(o.dirty||o.touched)),Sr(5),Aa("ngModel",e.modulo.giornoDiNascita),Sr(6),Aa("ngModel",e.modulo.cap),Sr(2),Aa("ngIf",a.invalid&&(a.dirty||a.touched)),Sr(5),Aa("ngModel",e.modulo.via),Sr(2),Aa("ngIf",s.invalid&&(s.dirty||s.touched)),Sr(5),Aa("ngModel",e.modulo.email),Sr(2),Aa("ngIf",l.invalid&&(l.dirty||l.touched)),Sr(5),Aa("ngModel",e.modulo.numeroTelefono),Sr(2),Aa("ngIf",c.invalid&&(c.dirty||c.touched)),Sr(5),Aa("ngModel",e.modulo.professione),Sr(2),Aa("ngIf",u.invalid&&(u.dirty||u.touched)),Sr(5),Aa("ngModel",e.modulo.codiceFiscale),Sr(2),Aa("ngIf",h.invalid&&(h.dirty||h.touched)),Sr(5),Aa("ngModel",e.modulo.quotaAnnuale),Sr(36),ys(" ",function(t,e,i,n){const r=li(),o=Ye(r,t);return Pl(r,El(r,t)?function(t,e,i,n,r,o,a){const s=e+i;return Sa(t,s,r,o)?wa(t,s+2,a?n.call(a,r,o):n(r,o)):Cl(t,s+2)}(r,yi(),e,o.transform,i,n,o):o.transform(i,n))}(126,25,e.todayHTML,"dd-MM-yyyy")," "),Sr(3),Aa("disabled",!t.form.valid),Sr(2),Aa("ngIf",e.logRicevuto)}},directives:[Iy,zg,Ty,Tg,zy,Ag,Py,Hu,Ry,Fy,Jg,ty,ry,tw,ym],pipes:[th],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;text-align:center;font-size:large}.img[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;height:300px}@media (max-width:500px){.h1[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif;text-align:center;font-size:large}.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}h3[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif}.img[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;height:130px}}"]}),t})();const rT=["*",[["mat-card-footer"]]],oT=["*","mat-card-footer"];let aT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Te({type:t,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),t})(),sT=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(e){return new(e||t)(Ia(mx,8))},t.\u0275cmp=ve({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&ns("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:oT,decls:2,vars:0,template:function(t,e){1&t&&(Ga(rT),Wa(0),Wa(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),lT=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[xx],xx]}),t})();function cT(t,e){if(1&t&&(Oa(0,"h2",13),ms(1),La()),2&t){const t=Za().$implicit;Sr(1),ys("Capitolo: ",t.capitolo,"")}}function uT(t,e){1&t&&(Oa(0,"h2",13),ms(1,"Capitolo: nessun capitolo"),La())}function hT(t,e){if(1&t){const t=Ra();Oa(0,"a",28),Na("click",(function(){ui(t);const e=Za().$implicit;return Za().prendiAudio(e.id)}))("click",(function(){ui(t);const e=Za().index;return Za().differenza(e)})),Oa(1,"span"),Oa(2,"mat-icon"),ms(3,"menu_book"),La(),La(),La()}2&t&&$a("href","#poesie-",Za().index,"",or)}function pT(t,e){if(1&t){const t=Ra();Oa(0,"a",29),Na("click",(function(){ui(t);const e=Za().$implicit;return Za().prendiAudio(e.id)}))("click",(function(){ui(t);const e=Za().index;return Za().differenza(e)})),Oa(1,"span"),Oa(2,"mat-icon"),ms(3,"audiotrack"),La(),La(),La()}if(2&t){const t=Za().index;$a("href","#poesie-",t,"",or),$a("aria-controls","audio-",t,"")}}function dT(t,e){if(1&t&&(Oa(0,"div",30),Oa(1,"div",31),Oa(2,"mat-card",32),Da(3,"div",33),La(),La(),La()),2&t){const t=Za(2);Sr(3),Aa("plyrPlaysInline",!0)("plyrCrossOrigin",!0)("plyrSources",t.audio)}}function fT(t,e){if(1&t&&(Oa(0,"p",34),ms(1),La()),2&t){const t=Za().$implicit;Sr(1),gs(t.testo)}}function mT(t,e){if(1&t&&(Oa(0,"pre"),ms(1),La()),2&t){const t=Za().$implicit;Sr(1),gs(t.testo)}}function gT(t,e){if(1&t&&(Oa(0,"div"),Oa(1,"h1",11),Oa(2,"b"),Oa(3,"i"),ms(4),La(),La(),La(),Da(5,"hr"),Ea(6,cT,2,1,"h2",12),Ea(7,uT,2,0,"h2",12),Da(8,"hr"),Oa(9,"p",13),Ea(10,hT,4,1,"a",14),Ea(11,pT,4,2,"a",15),La(),Oa(12,"div",16),Oa(13,"div",17),Oa(14,"div",18),Oa(15,"div",19),Oa(16,"button",20),Oa(17,"span",21),ms(18,"\xd7"),La(),La(),Oa(19,"h1",22),Oa(20,"b"),Oa(21,"i"),ms(22),La(),La(),La(),Da(23,"hr"),Ea(24,dT,4,3,"div",23),Ea(25,fT,2,1,"p",24),Ea(26,mT,2,1,"pre",25),La(),Oa(27,"div",26),Oa(28,"button",27),ms(29,"Chiudi"),La(),La(),La(),La(),La(),Da(30,"hr"),La()),2&t){const t=e.$implicit,i=e.index;Sr(4),gs(t.titolo),Sr(2),Aa("ngIf",0!=t.capitolo),Sr(1),Aa("ngIf",0==t.capitolo),Sr(3),Aa("ngIf",null!=t.testo),Sr(1),Aa("ngIf",!t.audioNotExist),Sr(1),$a("id","poesie-",i,""),Sr(10),gs(t.titolo),Sr(2),Aa("ngIf",!t.audioNotExist),Sr(1),Aa("ngIf",t.isText),Sr(1),Aa("ngIf",!t.isText)}}function yT(t,e){if(1&t){const t=Ra();Oa(0,"a",24),Na("click",(function(){ui(t);const e=Za().$implicit;return Za().prendiAudio(e.id)}))("click",(function(){ui(t);const e=Za().index;return Za().differenza(e)})),Oa(1,"span"),Oa(2,"mat-icon"),ms(3,"audiotrack"),La(),La(),La()}if(2&t){const t=Za().index;$a("href","#poesie-",t,"",or),$a("aria-controls","audio-",t,"")}}function _T(t,e){if(1&t&&(Oa(0,"div",25),Oa(1,"div",26),Oa(2,"mat-card",27),Da(3,"div",28),La(),La(),La()),2&t){const t=Za(2);Sr(3),Aa("plyrPlaysInline",!0)("plyrCrossOrigin",!0)("plyrSources",t.audio)}}function vT(t,e){if(1&t&&(Oa(0,"p",29),ms(1),La()),2&t){const t=Za().$implicit;Sr(1),gs(t.testo)}}function bT(t,e){if(1&t&&(Oa(0,"pre"),ms(1),La()),2&t){const t=Za().$implicit;Sr(1),gs(t.testo)}}function xT(t,e){if(1&t){const t=Ra();Oa(0,"div"),Oa(1,"h2",6),Oa(2,"button",7),Na("click",(function(){return ui(t),Za().goBack()})),Oa(3,"span"),Oa(4,"mat-icon",8),ms(5,"keyboard_arrow_left"),La(),La(),La(),ms(6),La(),Da(7,"hr"),Oa(8,"h1"),Oa(9,"b"),Oa(10,"i"),ms(11),La(),La(),La(),Oa(12,"p",9),Oa(13,"a",10),Na("click",(function(){ui(t);const i=e.$implicit;return Za().prendiAudio(i.id)}))("click",(function(){ui(t);const i=e.index;return Za().differenza(i)})),Oa(14,"span"),Oa(15,"mat-icon"),ms(16,"menu_book"),La(),La(),La(),Ea(17,yT,4,2,"a",11),La(),Oa(18,"div",12),Oa(19,"div",13),Oa(20,"div",14),Oa(21,"div",15),Oa(22,"button",16),Oa(23,"span",17),ms(24,"\xd7"),La(),La(),Oa(25,"h1",18),Oa(26,"b"),Oa(27,"i"),ms(28),La(),La(),La(),Da(29,"hr"),Ea(30,_T,4,3,"div",19),Ea(31,vT,2,1,"p",20),Ea(32,bT,2,1,"pre",21),La(),Oa(33,"div",22),Oa(34,"button",23),ms(35,"Chiudi"),La(),La(),La(),La(),La(),Da(36,"hr"),La()}if(2&t){const t=e.$implicit,i=e.index;Sr(6),ys(" Capitolo: ",t.capitolo," "),Sr(5),gs(t.titolo),Sr(2),$a("href","#poesie-",i,"",or),Sr(4),Aa("ngIf",!t.audioNotExist),Sr(1),$a("id","poesie-",i,""),Sr(10),gs(t.titolo),Sr(2),Aa("ngIf",!t.audioNotExist),Sr(1),Aa("ngIf",t.isText),Sr(1),Aa("ngIf",!t.isText)}}function wT(t,e){if(1&t){const t=Ra();Oa(0,"div"),Oa(1,"div",7),Oa(2,"div",8),Oa(3,"div",9),Oa(4,"table",10),Oa(5,"div",11),Oa(6,"p"),ms(7),La(),Oa(8,"p"),ms(9,"Nome:"),Oa(10,"span",12),ms(11),La(),La(),Oa(12,"p"),ms(13,"Cognome: "),Oa(14,"span",12),ms(15),La(),La(),Oa(16,"p"),ms(17,"Luogo di nascita:"),Oa(18,"span",12),ms(19),La(),La(),Oa(20,"p"),ms(21,"Giorno di nascita: "),Oa(22,"span",12),ms(23),La(),La(),Oa(24,"p"),ms(25,"Citt\xe0: "),Oa(26,"span",12),ms(27),La(),La(),Oa(28,"p"),ms(29,"Via:"),Oa(30,"span",12),ms(31),La(),La(),Oa(32,"p"),ms(33),La(),Oa(34,"p"),ms(35),La(),Oa(36,"p"),ms(37,"Professione: "),Oa(38,"span",12),ms(39),La(),La(),Oa(40,"p"),ms(41,"Codice fiscale: "),Oa(42,"span",13),ms(43),La(),La(),Oa(44,"p"),ms(45),La(),Oa(46,"p"),ms(47,"Data di compilazione: "),Oa(48,"span",12),ms(49),La(),La(),Da(50,"hr"),Oa(51,"button",4),Na("click",(function(){ui(t);const i=e.$implicit;return Za(3).deleteModulo(i.id)})),ms(52,"Conferma richiesta socio"),La(),Oa(53,"button",14),Na("click",(function(){ui(t);const i=e.$implicit;return Za(3).deleteModulo(i.id)})),ms(54,"Elimina richiesta socio"),La(),La(),La(),La(),La(),La(),La()}if(2&t){const t=e.$implicit;Sr(7),ys("ID: ",t.id,""),Sr(4),ys(" ",t.nome," "),Sr(4),gs(t.cognome),Sr(4),ys(" ",t.luogoDiNascita,""),Sr(4),gs(t.giornoDiNascita),Sr(4),gs(t.citta),Sr(4),ys(" ",t.via,""),Sr(2),ys("Email: ",t.email,""),Sr(2),ys("Numero di telefono: ",t.numeroTelefono,""),Sr(4),ys(" ",t.professione,""),Sr(4),ys(" ",t.codiceFiscale," "),Sr(2),ys("Quota annuale: ",t.quotaAnnuale,""),Sr(4),gs(t.dataCompilazione)}}function CT(t,e){if(1&t&&(Oa(0,"div"),Ea(1,wT,55,13,"div",6),La()),2&t){const t=Za(2);Sr(1),Aa("ngForOf",t.moduliCompilati)}}function ST(t,e){if(1&t&&(Oa(0,"div"),Oa(1,"div",7),Oa(2,"div",8),Oa(3,"div",9),Oa(4,"table",10),Oa(5,"div",11),Oa(6,"p"),ms(7),La(),Oa(8,"p"),ms(9,"Nome:"),Oa(10,"span",12),ms(11),La(),La(),Oa(12,"p"),ms(13,"Cognome: "),Oa(14,"span",12),ms(15),La(),La(),Oa(16,"p"),ms(17,"Luogo di nascita:"),Oa(18,"span",12),ms(19),La(),La(),Oa(20,"p"),ms(21,"Giorno di nascita:"),Oa(22,"span",12),ms(23),La(),La(),Oa(24,"p"),ms(25,"Citt\xe0: "),Oa(26,"span",12),ms(27),La(),La(),Oa(28,"p"),ms(29,"Via:"),Oa(30,"span",12),ms(31),La(),La(),Oa(32,"p"),ms(33),La(),Oa(34,"p"),ms(35),La(),Oa(36,"p"),ms(37,"Professione: "),Oa(38,"span",12),ms(39),La(),La(),Oa(40,"p"),ms(41,"Codice fiscale: "),Oa(42,"span",13),ms(43),La(),La(),Oa(44,"p"),ms(45),La(),Oa(46,"p"),ms(47),La(),Da(48,"hr"),La(),La(),La(),La(),La(),La()),2&t){const t=e.$implicit;Sr(7),ys("ID: ",t.id,""),Sr(4),ys(" ",t.nome," "),Sr(4),gs(t.cognome),Sr(4),ys(" ",t.luogoDiNascita,""),Sr(4),gs(t.giornoDiNascita),Sr(4),gs(t.citta),Sr(4),ys(" ",t.via,""),Sr(2),ys("Email: ",t.email,""),Sr(2),ys("Numero di telefono: ",t.numeroTelefono,""),Sr(4),ys(" ",t.professione,""),Sr(4),ys(" ",t.codiceFiscale," "),Sr(2),ys("Quota annuale: ",t.quotaAnnuale,""),Sr(2),ys("Data di compilazione: ",t.dataCompilazione,"")}}function TT(t,e){if(1&t&&(Oa(0,"div"),Ea(1,ST,49,13,"div",6),La()),2&t){const t=Za(2);Sr(1),Aa("ngForOf",t.moduliCompilati)}}function kT(t,e){if(1&t){const t=Ra();Oa(0,"div",1),Oa(1,"p",2),ms(2,"In questa pagina \xe8 possibile visualizzare i moduli di richiesta socio"),La(),Oa(3,"div"),Oa(4,"button",3),Na("click",(function(){return ui(t),Za().moduliNonCofermati()})),ms(5,"Lista moduli non confermati"),La(),Oa(6,"button",4),Na("click",(function(){return ui(t),Za().moduliCofermati()})),ms(7,"Lista moduli confermati"),La(),La(),Ea(8,CT,2,1,"div",5),Ea(9,TT,2,1,"div",5),La()}if(2&t){const t=Za();Sr(8),Aa("ngIf",t.moduliDaVedere),Sr(1),Aa("ngIf",t.moduliVisti)}}const ET=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:Fw},{path:"mappa",component:Yw},{path:"poesia",component:rC},{path:"chi-siamo",component:lw},{path:"login",component:Ww},{path:"registrazione",component:ZC},{path:"casa-leopardi",component:dw},{path:"chiesa-dei-cappuccini",component:yw},{path:"piazzuola-sabato-del-villaggio",component:Iw},{path:"centro-nazionale-studi-leopardiani",component:mw},{path:"via-roma",component:Ow},{path:"monte-tabor",component:Cw},{path:"vista-monti-azzurri",component:Dw},{path:"il-colle-dell-infinito",component:vw},{path:"casa-adelaide-antici",component:hw},{path:"torre-passero-solitario",component:Aw},{path:"lettera-della-befana",component:xw},{path:"palazzo-venieri",component:Tw},{path:"piazza-torre-del-borgo",component:Ew},{path:"autografo-inno",component:nw},{path:"prenotazione-visita",component:EC},{path:"scelta-utente",component:QC},{path:"area-riservata",component:Wy},{path:"tariffa",component:YC},{path:"contatti",component:sS},{path:"utenti-registrati",component:xS},{path:"info-visitatore",component:SS},{path:"evento",component:MS},{path:"bacheca-eventi",component:OS},{path:"socio",component:nT},{path:"poesia-specifica",component:(()=>{class t{constructor(t,e){this.service=t,this.router=e,this.boo1=!1,this.boo2=!1,this.chiudiAudio=!1,this.toggle=!0,this.toggle1=!0,this.status="",this.status1=""}ngOnInit(){this.service.findAll().subscribe(t=>{this.poesie=t,console.log(this.poesie)})}prendiAudio(t){this.service.findPoesiaSingolaById(t).subscribe(e=>{console.log("id: ",t),console.log("a: ",e),this.service.findAudioSingoloById(e.audio_id).subscribe(t=>{this.retrieveResonse=t,this.base64Data=this.retrieveResonse.picByte,e.retrievedAudio="data:audio/mp3;base64,"+this.base64Data,this.audio=e.retrievedAudio})})}filtra(){this.boo1=!0,console.log(this.titoloPoesia),this.service.findPoesiaSingolaFiltrata(this.titoloPoesia).subscribe(t=>{this.poesie=t})}differenza(t){this.contatore=0,console.log("Evento: ",t)}bottoneTrue(){this.boo1=!0,console.log(this.boo1)}bottoneFalse(){this.boo1=!1}played(t){console.log("played",t)}play(){this.player.play()}pause(){this.player.pause()}stop(){this.player.stop()}enableDisableRule(){this.toggle=!this.toggle,this.status=""}enableDisableRule1(){this.toggle1=!this.toggle1,this.status1=""}refresh(){window.location.reload()}}return t.\u0275fac=function(e){return new(e||t)(Ia(cw),Ia(mm))},t.\u0275cmp=ve({type:t,selectors:[["app-poesia-specifica"]],viewQuery:function(t,e){var i;1&t&&jl(iC,!0),2&t&&Vl(i=Hl())&&(e.plyr=i.first)},decls:19,vars:2,consts:[[1,"container"],["type","button",1,"btn","btn-outline-success",2,"margin-top","5%",3,"click"],[1,"input-group","mb-3",2,"margin-top","5%"],[1,"input-group-prepend"],["type","button",1,"btn","btn-outline-secondary",2,"vertical-align","middle","z-index","0",3,"click"],[2,"vertical-align","middle"],["type","text","placeholder","","aria-label","","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[1,"overflow-auto"],[1,"card-body"],[1,"table","table-bordered","table-striped",2,"box-shadow","15px 15px 10px #dedede"],[4,"ngFor","ngForOf"],[2,"margin-top","5%","text-transform","uppercase","word-break","keep-all"],["style","text-align: center;",4,"ngIf"],[2,"text-align","center"],["class","button","data-toggle","modal","aria-expanded","false","style","vertical-align:middle",3,"href","click",4,"ngIf"],["class","button1","data-toggle","modal","aria-expanded","false","style","vertical-align:middle;",3,"href","aria-controls","click",4,"ngIf"],["tabindex","-1","role","dialog","aria-labelledby","exampleModalCenterTitle","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[2,"text-align","center","text-transform","uppercase","word-break","keep-all"],["style","margin-bottom: 10%;",4,"ngIf"],["style","text-align: justify; padding: 5%;",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["data-toggle","modal","aria-expanded","false",1,"button",2,"vertical-align","middle",3,"href","click"],["data-toggle","modal","aria-expanded","false",1,"button1",2,"vertical-align","middle",3,"href","aria-controls","click"],[2,"margin-bottom","10%"],["fxLayout","column","fxLayoutGap","32px",1,"wrapper","mat-typography",2,"margin-top","5%"],[2,"width","responsive","height","50px"],["mat-card-image","","plyr","","plyrTitle","Audio","plyrType","audio",3,"plyrPlaysInline","plyrCrossOrigin","plyrSources"],[2,"text-align","justify","padding","5%"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1"),Oa(2,"b"),Oa(3,"i"),ms(4,"In questa sezione \xe8 possibile cercare un testo di Giacomo Leopardi ed ascoltarne la recitazione"),La(),La(),La(),Oa(5,"button",1),Na("click",(function(){return e.refresh()})),ms(6," Elimina filtro "),La(),Oa(7,"div",2),Oa(8,"div",3),Oa(9,"button",4),Na("click",(function(){return e.filtra()})),Oa(10,"span"),Oa(11,"mat-icon",5),ms(12,"search"),La(),La(),La(),La(),Oa(13,"input",6),Na("ngModelChange",(function(t){return e.titoloPoesia=t})),La(),La(),Oa(14,"div"),Oa(15,"div",7),Oa(16,"div",8),Oa(17,"table",9),Ea(18,gT,31,10,"div",10),La(),La(),La(),La(),La()),2&t&&(Sr(13),Aa("ngModel",e.titoloPoesia),Sr(5),Aa("ngForOf",e.poesie))},directives:[tw,Tg,Ag,Py,qu,Hu,sT,aT,iC],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}pre[_ngcontent-%COMP%]{line-height:30px;font-size:medium;margin-top:auto;font-style:italic}h1[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{text-align:center;font-family:Times New Roman,Times,serif}h1[_ngcontent-%COMP%]{font-size:xx-large}.button[_ngcontent-%COMP%]{border:none;background:none}.button[_ngcontent-%COMP%], .buttonClicked[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0}.buttonClicked[_ngcontent-%COMP%]{background:rgba(76,175,79,.33725490196078434);border-radius:100%}.button1[_ngcontent-%COMP%]{border:none;background:none}.button1[_ngcontent-%COMP%], .button1Clicked[_ngcontent-%COMP%]{margin-left:5px;color:#f8f32b;padding:0}.button1Clicked[_ngcontent-%COMP%]{background:rgba(248,245,43,.3764705882352941);border-radius:100%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}pre[_ngcontent-%COMP%]{line-height:30px;font-size:medium;margin-top:auto;font-style:italic}h1[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{text-align:center;font-family:Times New Roman,Times,serif}h1[_ngcontent-%COMP%]{font-size:xx-large}.button[_ngcontent-%COMP%]{border:none;background:none}.button[_ngcontent-%COMP%], .buttonClicked[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0}.buttonClicked[_ngcontent-%COMP%]{background:rgba(76,175,79,.33725490196078434);border-radius:100%}.button1[_ngcontent-%COMP%]{border:none;background:none}.button1[_ngcontent-%COMP%], .button1Clicked[_ngcontent-%COMP%]{margin-left:5px;color:#f8f32b;padding:0}.button1Clicked[_ngcontent-%COMP%]{background:rgba(248,245,43,.3764705882352941);border-radius:100%}}"]}),t})()},{path:"mostra-poesia",component:(()=>{class t{constructor(t,e,i){this.service=t,this.router=e,this._location=i,this.boo1=!1,this.boo2=!1,this.prova=!1,this.toggle=!0,this.toggle1=!0,this.status="",this.status1=""}ngOnInit(){this.poesie=window.history.state.poesie,console.log(this.poesie)}prendiAudio(t){this.service.findPoesiaSingolaById(t).subscribe(e=>{console.log("id: ",t),console.log("a: ",e),this.service.findAudioSingoloById(e.audio_id).subscribe(t=>{this.retrieveResonse=t,this.base64Data=this.retrieveResonse.picByte,e.retrievedAudio="data:audio/mp3;base64,"+this.base64Data,this.audio=e.retrievedAudio})})}filtra(){this.boo2=!0,console.log(this.titoloPoesia),this.service.findPoesiaSingola(this.titoloPoesia).subscribe(t=>{this.poesie=t,this.poesie.forEach(t=>{this.service.findAudioSingoloById(t.audio_id).subscribe(t=>{this.retrieveResonse=t,this.base64Data=this.retrieveResonse.picByte,this.audio="data:audio/mp3;base64,"+this.base64Data})})})}differenza(t){console.log("Evento: ",t)}goBack(){this._location.back()}bottoneTrue(){this.boo1=!0}bottoneFalse(){this.boo1=!1}played(t){console.log("played",t)}play(){this.player.play()}pause(){this.player.pause()}stop(){this.player.stop()}}return t.\u0275fac=function(e){return new(e||t)(Ia(cw),Ia(mm),Ia(lu))},t.\u0275cmp=ve({type:t,selectors:[["app-mostra-poesia"]],viewQuery:function(t,e){var i;1&t&&jl(iC,!0),2&t&&Vl(i=Hl())&&(e.plyr=i.first)},decls:6,vars:1,consts:[[1,"container"],[1,"card","my-5"],[1,"overflow-auto"],[1,"card-body"],[1,"table","table-bordered","table-striped",2,"box-shadow","15px 15px 10px #dedede"],[4,"ngFor","ngForOf"],[2,"text-align","center","margin-top","5%","word-break","keep-all"],[1,"button",3,"click"],[2,"vertical-align","middle"],[2,"text-align","center"],["data-toggle","modal","aria-expanded","false",1,"button",2,"vertical-align","middle",3,"href","click"],["class","button1","data-toggle","modal","aria-expanded","false","style","vertical-align:middle;",3,"href","aria-controls","click",4,"ngIf"],["tabindex","-1","role","dialog","aria-labelledby","exampleModalCenterTitle","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[2,"text-align","center","text-transform","uppercase","word-break","keep-all"],["style","margin-bottom: 10%;",4,"ngIf"],["style","text-align: justify; padding: 5%;",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["data-toggle","modal","aria-expanded","false",1,"button1",2,"vertical-align","middle",3,"href","aria-controls","click"],[2,"margin-bottom","10%"],["fxLayout","column","fxLayoutGap","32px",1,"wrapper","mat-typography",2,"margin-top","5%"],[2,"width","responsive","height","50px"],["mat-card-image","","plyr","","plyrTitle","Audio","plyrType","audio",3,"plyrPlaysInline","plyrCrossOrigin","plyrSources"],[2,"text-align","justify","padding","5%"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"div",1),Oa(2,"div",2),Oa(3,"div",3),Oa(4,"table",4),Ea(5,xT,37,9,"div",5),La(),La(),La(),La(),La()),2&t&&(Sr(5),Aa("ngForOf",e.poesie))},directives:[qu,tw,Hu,sT,aT,iC],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}pre[_ngcontent-%COMP%]{line-height:30px;font-size:medium;margin-top:auto;font-style:italic}h1[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{text-align:center;font-family:Times New Roman,Times,serif}h1[_ngcontent-%COMP%]{font-size:xx-large}.button[_ngcontent-%COMP%]{border:none;background:none}.button[_ngcontent-%COMP%], .buttonClicked[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0}.buttonClicked[_ngcontent-%COMP%]{background:rgba(76,175,79,.33725490196078434);border-radius:100%}.button1[_ngcontent-%COMP%]{border:none;background:none}.button1[_ngcontent-%COMP%], .button1Clicked[_ngcontent-%COMP%]{margin-left:5px;color:#f8f32b;padding:0}.button1Clicked[_ngcontent-%COMP%]{background:rgba(248,245,43,.3764705882352941);border-radius:100%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10%}pre[_ngcontent-%COMP%]{line-height:30px;font-size:medium;margin-top:auto;font-style:italic}h1[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{text-align:center;font-family:Times New Roman,Times,serif}h1[_ngcontent-%COMP%]{font-size:xx-large}.button[_ngcontent-%COMP%]{border:none;background:none}.button[_ngcontent-%COMP%], .buttonClicked[_ngcontent-%COMP%]{margin-left:5px;color:#4caf50;padding:0}.buttonClicked[_ngcontent-%COMP%]{background:rgba(76,175,79,.33725490196078434);border-radius:100%}.button1[_ngcontent-%COMP%]{border:none;background:none}.button1[_ngcontent-%COMP%], .button1Clicked[_ngcontent-%COMP%]{margin-left:5px;color:#f8f32b;padding:0}.button1Clicked[_ngcontent-%COMP%]{background:rgba(248,245,43,.3764705882352941);border-radius:100%}}"]}),t})()},{path:"vedi-moduli-socio",component:(()=>{class t{constructor(t){this.service=t,this.admin=!1}ngOnInit(){this.admin="ROLE_ADMIN"===sessionStorage.getItem("Role"),this.service.vediModuli().subscribe(t=>{this.moduliCompilati=t})}deleteModulo(t){this.service.eliminaModulo(t).subscribe(),window.location.reload()}moduliNonCofermati(){this.moduliDaVedere=!0,this.moduliVisti=!1}moduliCofermati(){this.moduliDaVedere=!1,this.moduliVisti=!0}}return t.\u0275fac=function(e){return new(e||t)(Ia(DS))},t.\u0275cmp=ve({type:t,selectors:[["app-vedi-moduli-socio"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"title"],[1,"btn","btn-outline-warning",2,"width","200px","display","block","margin","5% auto 5%",3,"click"],[1,"btn","btn-outline-success",2,"width","200px","display","block","margin","5% auto 5%",3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"card","my-5"],[1,"overflow-auto"],[1,"card-body"],[1,"table","table-bordered","table-striped",2,"box-shadow","15px 15px 10px #dedede"],[1,"campiModulo"],[2,"text-transform","capitalize"],[2,"text-transform","uppercase"],[1,"btn","btn-outline-danger",2,"width","200px","display","block","margin","5% auto 5%",3,"click"]],template:function(t,e){1&t&&Ea(0,kT,10,2,"div",0),2&t&&Aa("ngIf",e.admin)},directives:[Hu,qu],styles:["@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-bottom:10%;text-align:-webkit-center;margin-top:10px}.title[_ngcontent-%COMP%]{font-size:xx-large;text-align:center;line-height:normal;font-style:italic}.campiModulo[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif}.campiModulo[_ngcontent-%COMP%]{padding:5%}}"]}),t})()},{path:"data-privacy",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=ve({type:t,selectors:[["app-data-privacy"]],decls:20,vars:0,consts:[[1,"container"],[1,"title"],[1,"card","my-5"],[1,"overflow-auto"],[1,"card-body"],[1,"table","table-bordered","table-striped",2,"box-shadow","15px 15px 10px #dedede"],[1,"info"],[1,"ermocolle"],["src","\\assets\\images\\LogoCentroCulturaleGL.png",1,"img"]],template:function(t,e){1&t&&(Oa(0,"div",0),Oa(1,"h1",1),Oa(2,"b"),Oa(3,"i"),ms(4,"Informazioni Coockie "),Da(5,"br"),ms(6," Giacomo Leopardi APP"),La(),La(),La(),Oa(7,"div",2),Oa(8,"div",3),Oa(9,"div",4),Oa(10,"table",5),Oa(11,"p",6),ms(12," Qui inserire le condizioni che servono al tizio per informarsi sui coockie "),La(),Oa(13,"p",7),ms(14,'"Sempre caro mi fu quest\u2019ermo colle,'),Da(15,"br"),ms(16,"E questa siepe, che da tanta parte"),Da(17,"br"),ms(18,'Dell\u2019ultimo orizzonte il guardo esclude."'),La(),Da(19,"img",8),La(),La(),La(),La(),La())},styles:[".container[_ngcontent-%COMP%]{margin-bottom:10%;text-align:-webkit-center;margin-top:10px}.title[_ngcontent-%COMP%]{text-align:center}.info[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{font-size:xx-large;font-family:Times New Roman,Times,serif}.info[_ngcontent-%COMP%]{margin:5%}.ermocolle[_ngcontent-%COMP%]{margin-top:5%;font-size:x-large;font-family:Times New Roman,Times,serif;text-align:center;font-style:italic;line-height:200%}.img[_ngcontent-%COMP%]{display:block;margin:5% auto;height:70%}@media (max-width:500px){.container[_ngcontent-%COMP%]{margin-bottom:10%;text-align:-webkit-center;margin-top:10px}.title[_ngcontent-%COMP%]{font-size:xx-large;font-family:Times New Roman,Times,serif;text-align:center}.info[_ngcontent-%COMP%]{margin:5%}.ermocolle[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{font-size:large;font-family:Times New Roman,Times,serif}.ermocolle[_ngcontent-%COMP%]{margin-top:5%;text-align:center;font-style:italic;line-height:200%}.img[_ngcontent-%COMP%]{display:block;margin:5% auto;height:130px}}"]}),t})()}];let PT=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[Mm.forRoot(ET)],Mm]}),t})();class IT{constructor(t){this.total=t}call(t,e){return e.subscribe(new MT(t,this.total))}}class MT extends f{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}let AT=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)}}),t})();const zT=new Set;let OT,LT=(()=>{class t{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):DT}matchMedia(t){return this._platform.WEBKIT&&function(t){if(!zT.has(t))try{OT||(OT=document.createElement("style"),OT.setAttribute("type","text/css"),document.head.appendChild(OT)),OT.sheet&&(OT.sheet.insertRule(`@media ${t} {.fx-query-test{ }}`,0),zT.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return t.\u0275fac=function(e){return new(e||t)(te(t_))},t.\u0275prov=mt({factory:function(){return new t(te(t_))},token:t,providedIn:"root"}),t})();function DT(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let RT=(()=>{class t{constructor(t,e){this._mediaMatcher=t,this._zone=e,this._queries=new Map,this._destroySubject=new T}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return BT(m_(t)).some(t=>this._registerQuery(t).mql.matches)}observe(t){let e=qh(BT(m_(t)).map(t=>this._registerQuery(t).observable));return e=Jh(e.pipe(Kh(1)),e.pipe((1,t=>t.lift(new IT(1))),c_(0))),e.pipe(P(t=>{const e={matches:!1,breakpoints:{}};return t.forEach(({matches:t,query:i})=>{e.matches=e.matches||t,e.breakpoints[i]=t}),e}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const e=this._mediaMatcher.matchMedia(t),i={observable:new b(t=>{const i=e=>this._zone.run(()=>t.next(e));return e.addListener(i),()=>{e.removeListener(i)}}).pipe(tp(e),P(({matches:e})=>({query:t,matches:e})),op(this._destroySubject)),mql:e};return this._queries.set(t,i),i}}return t.\u0275fac=function(e){return new(e||t)(te(LT),te(gc))},t.\u0275prov=mt({factory:function(){return new t(te(LT),te(gc))},token:t,providedIn:"root"}),t})();function BT(t){return t.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}class FT extends o_{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(t,e,i):t.flush(this)}}class NT extends s_{}const VT=new NT(FT);let jT=(()=>{class t{constructor(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}}accept(t,e,i){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,i)}toObservable(){switch(this.kind){case"N":return Fh(this.value);case"E":return Fx(this.error);case"C":return $h()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();class UT extends f{constructor(t,e,i=0){super(t),this.scheduler=e,this.delay=i}static dispatch(t){const{notification:e,destination:i}=t;e.observe(i),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(UT.dispatch,this.delay,new qT(t,this.destination)))}_next(t){this.scheduleMessage(jT.createNext(t))}_error(t){this.scheduleMessage(jT.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(jT.createComplete()),this.unsubscribe()}}class qT{constructor(t,e){this.notification=t,this.destination=e}}class ZT extends T{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new HT(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,i=e?this._events:this._trimBufferThenGetEvents(),n=this.scheduler,r=i.length;let o;if(this.closed)throw new w;if(this.isStopped||this.hasError?o=h.EMPTY:(this.observers.push(t),o=new C(this,t)),n&&t.add(t=new UT(t,n)),e)for(let a=0;a<r&&!t.closed;a++)t.next(i[a]);else for(let a=0;a<r&&!t.closed;a++)t.next(i[a].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||VT).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,i=this._windowTime,n=this._events,r=n.length;let o=0;for(;o<r&&!(t-n[o].time<i);)o++;return r>e&&(o=Math.max(o,r-e)),o>0&&n.splice(0,o),n}}class HT{constructor(t,e){this.time=t,this.value=e}}function GT(t,e,i,r){return n(i)&&(r=i,i=void 0),r?GT(t,e,i).pipe(P(t=>l(t)?r(...t):r(t))):new b(n=>{!function t(e,i,n,r,o){let a;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(i,n,o),a=()=>t.removeEventListener(i,n,o)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(i,n),a=()=>t.off(i,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(i,n),a=()=>t.removeListener(i,n)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let a=0,s=e.length;a<s;a++)t(e[a],i,n,r,o)}r.add(a)}(t,e,(function(t){n.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),n,i)})}class WT{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new $T(t,this.durationSelector))}}class $T extends V{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let i;try{const{durationSelector:e}=this;i=e(t)}catch(e){return this.destination.error(e)}const n=j(i,new N(this));!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}clearThrottle(){const{value:t,hasValue:e,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function KT(t){return!l(t)&&t-parseFloat(t)+1>=0}function XT(t=0,e,i){let n=-1;return KT(e)?n=Number(e)<1?1:Number(e):E(e)&&(i=e),E(i)||(i=l_),new b(e=>{const r=KT(t)?t:+t-i.now();return i.schedule(QT,r,{index:0,period:n,subscriber:e})})}function QT(t){const{index:e,period:i,subscriber:n}=t;if(n.next(e),!n.closed){if(-1===i)return n.complete();t.index=e+1,this.schedule(t,i)}}function JT(t,e=l_){return i=()=>XT(t,e),function(t){return t.lift(new WT(i))};var i}let tk=(()=>{class t{constructor(t,e,i){this._ngZone=t,this._platform=e,this._scrolled=new T,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new b(e=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(JT(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Fh()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const i=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(wp(t=>!t||i.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((i,n)=>{this._scrollableContainsElement(n,t)&&e.push(n)}),e}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollableContainsElement(t,e){let i=e.nativeElement,n=t.getElementRef().nativeElement;do{if(i==n)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>GT(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(te(gc),te(t_),te(Wc,8))},t.\u0275prov=mt({factory:function(){return new t(te(gc),te(t_),te(Wc,8))},token:t,providedIn:"root"}),t})(),ek=(()=>{class t{constructor(t,e,i,n){this.elementRef=t,this.scrollDispatcher=e,this.ngZone=i,this.dir=n,this._destroyed=new T,this._elementScrolled=new b(t=>this.ngZone.runOutsideAngular(()=>GT(this.elementRef.nativeElement,"scroll").pipe(op(this._destroyed)).subscribe(t)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const e=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),i&&0!=n_()?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),2==n_()?t.left=t.right:1==n_()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const e=this.elementRef.nativeElement;!function(){if(null==Yy)if("object"==typeof document&&document||(Yy=!1),"scrollBehavior"in document.documentElement.style)Yy=!0;else{const t=Element.prototype.scrollTo;Yy=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}return Yy}()?(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left)):e.scrollTo(t)}measureScrollOffset(t){const e="left",i="right",n=this.elementRef.nativeElement;if("top"==t)return n.scrollTop;if("bottom"==t)return n.scrollHeight-n.clientHeight-n.scrollTop;const r=this.dir&&"rtl"==this.dir.value;return"start"==t?t=r?i:e:"end"==t&&(t=r?e:i),r&&2==n_()?t==e?n.scrollWidth-n.clientWidth-n.scrollLeft:n.scrollLeft:r&&1==n_()?t==e?n.scrollLeft+n.scrollWidth-n.clientWidth:-n.scrollLeft:t==e?n.scrollLeft:n.scrollWidth-n.clientWidth-n.scrollLeft}}return t.\u0275fac=function(e){return new(e||t)(Ia(Vs),Ia(tk),Ia(gc),Ia(z_,8))},t.\u0275dir=Te({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),t})(),ik=(()=>{class t{constructor(t,e,i){this._platform=t,this._change=new T,this._changeListener=t=>{this._change.next(t)},this._document=i,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+e,height:i,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._getDocument(),e=this._getWindow(),i=t.documentElement,n=i.getBoundingClientRect();return{top:-n.top||t.body.scrollTop||e.scrollY||i.scrollTop||0,left:-n.left||t.body.scrollLeft||e.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(JT(t)):this._change}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(te(t_),te(gc),te(Wc,8))},t.\u0275prov=mt({factory:function(){return new t(te(t_),te(gc),te(Wc,8))},token:t,providedIn:"root"}),t})(),nk=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)}}),t})();function rk(t){return e=>e.lift(new ok(t))}class ok{constructor(t){this.value=t}call(t,e){return e.subscribe(new ak(t,this.value))}}class ak extends f{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}const sk=["*"];function lk(t,e){if(1&t){const t=Ra();Oa(0,"div",2),Na("click",(function(){return ui(t),Za()._onBackdropClicked()})),La()}2&t&&ns("mat-drawer-shown",Za()._isShowingBackdrop())}function ck(t,e){1&t&&(Oa(0,"mat-drawer-content"),Wa(1,2),La())}const uk=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],hk=["mat-drawer","mat-drawer-content","*"];function pk(t,e){if(1&t){const t=Ra();Oa(0,"div",2),Na("click",(function(){return ui(t),Za()._onBackdropClicked()})),La()}2&t&&ns("mat-drawer-shown",Za()._isShowingBackdrop())}function dk(t,e){1&t&&(Oa(0,"mat-sidenav-content",3),Wa(1,2),La())}const fk=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],mk=["mat-sidenav","mat-sidenav-content","*"],gk=".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n",yk={transformDrawer:B_("transform",[j_("open, open-instant",V_({transform:"none",visibility:"visible"})),j_("void",V_({"box-shadow":"none",visibility:"hidden"})),U_("void => open-instant",F_("0ms")),U_("void <=> open, open-instant => void",F_("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},_k=new qt("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),vk=new qt("MAT_DRAWER_CONTAINER");let bk=(()=>{class t extends ek{constructor(t,e,i,n,r){super(i,n,r),this._changeDetectorRef=t,this._container=e}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(Ia(Ho),Ia(Pt(()=>wk)),Ia(Vs),Ia(tk),Ia(gc))},t.\u0275cmp=ve({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,e){2&t&&is("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[pa],ngContentSelectors:sk,decls:1,vars:0,template:function(t,e){1&t&&(Ga(),Wa(0))},encapsulation:2,changeDetection:0}),t})(),xk=(()=>{class t{constructor(t,e,i,n,r,o,a){this._elementRef=t,this._focusTrapFactory=e,this._focusMonitor=i,this._platform=n,this._ngZone=r,this._doc=o,this._container=a,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new T,this._animationEnd=new T,this._animationState="void",this.openedChange=new Il(!0),this._openedStream=this.openedChange.pipe(wp(t=>t),P(()=>{})),this.openedStart=this._animationStarted.pipe(wp(t=>t.fromState!==t.toState&&0===t.toState.indexOf("open")),rk(void 0)),this._closedStream=this.openedChange.pipe(wp(t=>!t),P(()=>{})),this.closedStart=this._animationStarted.pipe(wp(t=>t.fromState!==t.toState&&"void"===t.toState),rk(void 0)),this._destroyed=new T,this.onPositionChanged=new Il,this._modeChanged=new T,this.openedChange.subscribe(t=>{t?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus()}),this._ngZone.runOutsideAngular(()=>{GT(this._elementRef.nativeElement,"keydown").pipe(wp(t=>27===t.keyCode&&!this.disableClose&&!function(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}(t)),op(this._destroyed)).subscribe(t=>this._ngZone.run(()=>{this.close(),t.stopPropagation(),t.preventDefault()}))}),this._animationEnd.pipe(yp((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{const{fromState:e,toState:i}=t;(0===i.indexOf("open")&&"void"===e||"void"===i&&0===e.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=d_(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"!==this.mode:t}set autoFocus(t){this._autoFocus=d_(t)}get opened(){return this._opened}set opened(t){this.toggle(d_(t))}_takeFocus(){this.autoFocus&&this._focusTrap&&this._focusTrap.focusInitialElementWhenReady().then(t=>{t||"function"!=typeof this._elementRef.nativeElement.focus||this._elementRef.nativeElement.focus()})}_restoreFocus(){this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null)}_isFocusWithinDrawer(){var t;const e=null===(t=this._doc)||void 0===t?void 0:t.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0)}toggle(t=!this.opened,e){return this._setOpen(t,!t&&this._isFocusWithinDrawer(),e)}_setOpen(t,e,i="program"){return this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=i):(this._animationState="void",e&&this._restoreFocus()),this._updateFocusTrapState(),new Promise(t=>{this.openedChange.pipe(Kh(1)).subscribe(e=>t(e?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_animationStartListener(t){this._animationStarted.next(t)}_animationDoneListener(t){this._animationEnd.next(t)}}return t.\u0275fac=function(e){return new(e||t)(Ia(Vs),Ia(x_),Ia(T_),Ia(t_),Ia(gc),Ia(Wc,8),Ia(vk,8))},t.\u0275cmp=ve({type:t,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,e){1&t&&Va("@transform.start",(function(t){return e._animationStartListener(t)}))("@transform.done",(function(t){return e._animationDoneListener(t)})),2&t&&(Ta("align",null),vs("@transform",e._animationState),ns("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:sk,decls:2,vars:0,consts:[[1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(Ga(),Oa(0,"div",0),Wa(1),La())},encapsulation:2,data:{animation:[yk.transformDrawer]},changeDetection:0}),t})(),wk=(()=>{class t{constructor(t,e,i,n,r,o=!1,a){this._dir=t,this._element=e,this._ngZone=i,this._changeDetectorRef=n,this._animationMode=a,this._drawers=new Al,this.backdropClick=new Il,this._destroyed=new T,this._doCheckSubject=new T,this._contentMargins={left:null,right:null},this._contentMarginChanges=new T,t&&t.change.pipe(op(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),r.change().pipe(op(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=o}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=d_(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:d_(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(tp(this._allDrawers),op(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(t=>!t._container||t._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(tp(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(c_(10),op(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,e=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();t+=i,e-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)e+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();e+=i,t-=i}t=t||null,e=e||null,t===this._contentMargins.left&&e===this._contentMargins.right||(this._contentMargins={left:t,right:e},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(wp(t=>t.fromState!==t.toState),op(this._drawers.changes)).subscribe(t=>{"open-instant"!==t.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(op(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(op(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Kh(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(op($(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const e=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?e.add(i):e.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return t.\u0275fac=function(e){return new(e||t)(Ia(z_,8),Ia(Vs),Ia(gc),Ia(Ho),Ia(ik),Ia(_k),Ia(mx,8))},t.\u0275cmp=ve({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(t,e,i){var n;1&t&&(Zl(i,bk,!0),Zl(i,xk,!0)),2&t&&(Vl(n=Hl())&&(e._content=n.first),Vl(n=Hl())&&(e._allDrawers=n))},viewQuery:function(t,e){var i;1&t&&Ul(bk,!0),2&t&&Vl(i=Hl())&&(e._userContent=i.first)},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,e){2&t&&ns("mat-drawer-container-explicit-backdrop",e._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Rs([{provide:vk,useExisting:t}])],ngContentSelectors:hk,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,e){1&t&&(Ga(uk),Ea(0,lk,1,2,"div",0),Wa(1),Wa(2,1),Ea(3,ck,2,0,"mat-drawer-content",1)),2&t&&(Aa("ngIf",e.hasBackdrop),Sr(3),Aa("ngIf",!e._content))},directives:[Hu,bk],styles:[gk],encapsulation:2,changeDetection:0}),t})(),Ck=(()=>{class t extends bk{constructor(t,e,i,n,r){super(t,e,i,n,r)}}return t.\u0275fac=function(e){return new(e||t)(Ia(Ho),Ia(Pt(()=>kk)),Ia(Vs),Ia(tk),Ia(gc))},t.\u0275cmp=ve({type:t,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,e){2&t&&is("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[pa],ngContentSelectors:sk,decls:1,vars:0,template:function(t,e){1&t&&(Ga(),Wa(0))},encapsulation:2,changeDetection:0}),t})(),Sk=(()=>{class t extends xk{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=d_(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=f_(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=f_(t)}}return t.\u0275fac=function(e){return Tk(e||t)},t.\u0275cmp=ve({type:t,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,e){2&t&&(Ta("align",null),is("top",e.fixedInViewport?e.fixedTopGap:null,"px")("bottom",e.fixedInViewport?e.fixedBottomGap:null,"px"),ns("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened)("mat-sidenav-fixed",e.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[pa],ngContentSelectors:sk,decls:2,vars:0,consts:[[1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(Ga(),Oa(0,"div",0),Wa(1),La())},encapsulation:2,data:{animation:[yk.transformDrawer]},changeDetection:0}),t})();const Tk=vn(Sk);let kk=(()=>{class t extends wk{}return t.\u0275fac=function(e){return Ek(e||t)},t.\u0275cmp=ve({type:t,selectors:[["mat-sidenav-container"]],contentQueries:function(t,e,i){var n;1&t&&(Zl(i,Ck,!0),Zl(i,Sk,!0)),2&t&&(Vl(n=Hl())&&(e._content=n.first),Vl(n=Hl())&&(e._allDrawers=n))},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,e){2&t&&ns("mat-drawer-container-explicit-backdrop",e._backdropOverride)},exportAs:["matSidenavContainer"],features:[Rs([{provide:vk,useExisting:t}]),pa],ngContentSelectors:mk,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(t,e){1&t&&(Ga(fk),Ea(0,pk,1,2,"div",0),Wa(1),Wa(2,1),Ea(3,dk,2,0,"mat-sidenav-content",1)),2&t&&(Aa("ngIf",e.hasBackdrop),Sr(3),Aa("ngIf",!e._content))},directives:[Hu,Ck,ek],styles:[gk],encapsulation:2,changeDetection:0}),t})();const Ek=vn(kk);let Pk=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[ih,xx,e_,nk],nk,xx]}),t})();const Ik=["*",[["mat-toolbar-row"]]],Mk=["*","mat-toolbar-row"];class Ak{constructor(t){this._elementRef=t}}const zk=Cx(Ak);let Ok=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Te({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),t})(),Lk=(()=>{class t extends zk{constructor(t,e,i){super(t),this._platform=e,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return t.\u0275fac=function(e){return new(e||t)(Ia(Vs),Ia(t_),Ia(Wc))},t.\u0275cmp=ve({type:t,selectors:[["mat-toolbar"]],contentQueries:function(t,e,i){var n;1&t&&Zl(i,Ok,!0),2&t&&Vl(n=Hl())&&(e._toolbarRows=n)},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,e){2&t&&ns("mat-toolbar-multiple-rows",e._toolbarRows.length>0)("mat-toolbar-single-row",0===e._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[pa],ngContentSelectors:Mk,decls:2,vars:0,template:function(t,e){1&t&&(Ga(Ik),Wa(0),Wa(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),t})(),Dk=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[xx],xx]}),t})(),Rk=(()=>{class t{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=d_(t)}get inset(){return this._inset}set inset(t){this._inset=d_(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=ve({type:t,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,e){2&t&&(Ta("aria-orientation",e.vertical?"vertical":"horizontal"),ns("mat-divider-vertical",e.vertical)("mat-divider-horizontal",!e.vertical)("mat-divider-inset",e.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,e){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),t})(),Bk=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[xx],xx]}),t})();const Fk=["*"],Nk=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],Vk=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"];class jk{}const Uk=wx(Sx(jk));class qk{}const Zk=Sx(qk),Hk=new qt("MatList"),Gk=new qt("MatNavList");let Wk=(()=>{class t extends Uk{constructor(){super(...arguments),this._stateChanges=new T}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(e){return $k(e||t)},t.\u0275cmp=ve({type:t,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[Rs([{provide:Gk,useExisting:t}]),pa,Ve],ngContentSelectors:Fk,decls:1,vars:0,template:function(t,e){1&t&&(Ga(),Wa(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),t})();const $k=vn(Wk);let Kk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Te({type:t,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),t})(),Xk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Te({type:t,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),t})(),Qk=(()=>{class t extends Zk{constructor(t,e,i,n){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new T,this._disabled=!1,this._isInteractiveList=!!(i||n&&"action-list"===n._getListType()),this._list=i||n;const r=this._getHostElement();"button"!==r.nodeName.toLowerCase()||r.hasAttribute("type")||r.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(op(this._destroyed)).subscribe(()=>{e.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=d_(t)}ngAfterContentInit(){!function(t,e,i="mat"){t.changes.pipe(tp(t)).subscribe(({length:t})=>{kx(e,i+"-2-line",!1),kx(e,i+"-3-line",!1),kx(e,i+"-multi-line",!1),2===t||3===t?kx(e,`${i}-${t}-line`,!0):t>3&&kx(e,i+"-multi-line",!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(Ia(Vs),Ia(Ho),Ia(Gk,8),Ia(Hk,8))},t.\u0275cmp=ve({type:t,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,e,i){var n;1&t&&(Zl(i,Kk,!0),Zl(i,Xk,!0),Zl(i,Tx,!0)),2&t&&(Vl(n=Hl())&&(e._avatar=n.first),Vl(n=Hl())&&(e._icon=n.first),Vl(n=Hl())&&(e._lines=n))},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(t,e){2&t&&ns("mat-list-item-disabled",e.disabled)("mat-list-item-avatar",e._avatar||e._icon)("mat-list-item-with-avatar",e._avatar||e._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[pa],ngContentSelectors:Vk,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,e){1&t&&(Ga(Nk),Oa(0,"div",0),Da(1,"div",1),Wa(2),Oa(3,"div",2),Wa(4,1),La(),Wa(5,2),La()),2&t&&(Sr(1),Aa("matRippleTrigger",e._getHostElement())("matRippleDisabled",e._isRippleDisabled()))},directives:[Dx],encapsulation:2,changeDetection:0}),t})(),Yk=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[Ex,Rx,xx,Bx,ih],Ex,xx,Bx,Bk]}),t})();const Jk=["mat-button",""],tE=["*"],eE=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class iE{constructor(t){this._elementRef=t}}const nE=Cx(wx(Sx(iE)));let rE=(()=>{class t extends nE{constructor(t,e,i){super(t),this._focusMonitor=e,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const n of eE)this._hasHostAttributes(n)&&this._getHostElement().classList.add(n);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",e){this._focusMonitor.focusVia(this._getHostElement(),t,e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(Ia(Vs),Ia(T_),Ia(mx,8))},t.\u0275cmp=ve({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){var i;1&t&&Ul(Dx,!0),2&t&&Vl(i=Hl())&&(e.ripple=i.first)},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(Ta("disabled",e.disabled||null),ns("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[pa],attrs:Jk,ngContentSelectors:tE,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(Ga(),Oa(0,"span",0),Wa(1),La(),Da(2,"span",1),Da(3,"span",2)),2&t&&(Sr(2),ns("mat-button-ripple-round",e.isRoundButton||e.isIconButton),Aa("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[Dx],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),oE=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[Rx,xx],xx]}),t})();function aE(t,e){1&t&&(Oa(0,"a",21),Oa(1,"mat-icon"),ms(2,"person"),La(),Oa(3,"span",5),Oa(4,"i"),ms(5,"Area riservata"),La(),La(),La())}function sE(t,e){if(1&t&&(Oa(0,"a",22),Oa(1,"mat-icon"),ms(2,"person"),La(),Oa(3,"span",5),Oa(4,"i"),ms(5),La(),La(),La()),2&t){const t=Za();Sr(5),gs(t.utente.name)}}function lE(t,e){1&t&&(Oa(0,"a",22),Oa(1,"mat-icon"),ms(2,"person"),La(),Oa(3,"span",5),Oa(4,"i"),ms(5,"Admin"),La(),La(),La())}function cE(t,e){if(1&t){const t=Ra();Oa(0,"a",23),Na("click",(function(){return ui(t),Za().logOut()})),Oa(1,"mat-icon"),ms(2,"exit_to_app"),La(),Oa(3,"span",5),Oa(4,"i"),ms(5,"Log out"),La(),La(),La()}}function uE(t,e){if(1&t){const t=Ra();Oa(0,"button",24),Na("click",(function(){return ui(t),Za(),Pa(2).toggle()})),Oa(1,"mat-icon",25),ms(2,"menu"),La(),La()}}let hE=(()=>{class t{constructor(t,e,i){this.breakpointObserver=t,this.gestioneUtente=e,this.auth=i,this.sidenavClose=new Il,this.isHandset$=this.breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)").pipe(P(t=>t.matches),function(t,e,i){let n;return n={bufferSize:t,windowTime:void 0,refCount:!1,scheduler:void 0},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:i,scheduler:n}){let r,o,a=0,s=!1,l=!1;return function(c){let u;a++,!r||s?(s=!1,r=new ZT(t,e,n),u=r.subscribe(this),o=c.subscribe({next(t){r.next(t)},error(t){s=!0,r.error(t)},complete(){l=!0,o=void 0,r.complete()}})):u=r.subscribe(this),this.add(()=>{a--,u.unsubscribe(),o&&!l&&i&&0===a&&(o.unsubscribe(),o=void 0,r=void 0)})}}(n))}()),this.onSidenavClose=()=>{this.sidenavClose.emit()},this.visitor=!1,this.admin=!1}ngOnInit(){"ROLE_ADMIN"===sessionStorage.getItem("Role")?this.admin=!0:"ROLE_VISITATORE"===sessionStorage.getItem("Role")&&(this.visitor=!0),this.session=sessionStorage.getItem("username"),console.log("SESSION:"+this.session),this.gestioneUtente.findUtenteSingolo(sessionStorage.getItem("username")).subscribe(t=>{this.utente=t,console.log("utente: ",this.utente)}),console.log("Session storage",sessionStorage.getItem("username"))}logOut(){this.auth.logOut()}}return t.\u0275fac=function(e){return new(e||t)(Ia(RT),Ia(qw),Ia(Uw))},t.\u0275cmp=ve({type:t,selectors:[["app-sidenav"]],outputs:{sidenavClose:"sidenavClose"},decls:87,vars:16,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened","click"],["drawer","","sidenav",""],[2,"color","white"],["mat-list-item","","routerLink","/home","routerLinkActive","active",2,"color","red",3,"click"],[1,"nav-caption",2,"margin-left","10px"],["mat-list-item","","routerLink","/chi-siamo"],["mat-list-item","","routerLink","/contatti"],["mat-list-item","","routerLink","/mappa"],["mat-list-item","","routerLink","/poesia"],["mat-list-item","","routerLink","/poesia-specifica"],["mat-list-item","","routerLink","/tariffa"],["mat-list-item","","routerLink","/bacheca-eventi"],["mat-list-item","","routerLink","/socio"],["style","color: blue;","mat-list-item","","routerLink","/login",4,"ngIf"],["style","color: blue;","mat-list-item","","routerLink","/scelta-utente",4,"ngIf"],["style","color: red;","mat-list-item","",3,"click",4,"ngIf"],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[2,"margin-left","10px"],[1,"uptitle"],["mat-list-item","","routerLink","/login",2,"color","blue"],["mat-list-item","","routerLink","/scelta-utente",2,"color","blue"],["mat-list-item","",2,"color","red",3,"click"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"]],template:function(t,e){if(1&t){const t=Ra();Oa(0,"mat-sidenav-container",0),Oa(1,"mat-sidenav",1,2),Na("click",(function(){return ui(t),Pa(3).toggle()})),Tl(4,"async"),Tl(5,"async"),Tl(6,"async"),Oa(7,"mat-toolbar",3),Oa(8,"i"),ms(9,"Men\xf9"),La(),La(),Oa(10,"mat-nav-list"),Oa(11,"a",4),Na("click",(function(){return e.onSidenavClose()})),Oa(12,"mat-icon"),ms(13,"home"),La(),Oa(14,"span",5),Oa(15,"i"),ms(16,"Home"),La(),La(),La(),Da(17,"mat-divider"),Oa(18,"a",6),Oa(19,"mat-icon"),ms(20,"account_circle"),La(),Oa(21,"span",5),Oa(22,"i"),ms(23,"Chi siamo"),La(),La(),La(),Da(24,"mat-divider"),Oa(25,"a",7),Oa(26,"mat-icon"),ms(27,"call"),La(),Oa(28,"span",5),Oa(29,"i"),ms(30,"Contatti"),La(),La(),La(),Da(31,"mat-divider"),Oa(32,"a",8),Oa(33,"mat-icon"),ms(34,"location_on"),La(),Oa(35,"span",5),Oa(36,"i"),ms(37,"Percorso"),La(),La(),La(),Da(38,"mat-divider"),Oa(39,"a",9),Oa(40,"mat-icon"),ms(41,"queue_music"),La(),Oa(42,"span",5),Oa(43,"i"),ms(44,"Testi del Percorso Leopardiano"),La(),La(),La(),Da(45,"mat-divider"),Oa(46,"a",10),Oa(47,"mat-icon"),ms(48,"search"),La(),Oa(49,"span",5),Oa(50,"i"),ms(51,"Cerca un testo Leopardiano"),La(),La(),La(),Da(52,"mat-divider"),Oa(53,"a",11),Oa(54,"mat-icon"),ms(55,"euro_symbol"),La(),Oa(56,"span",5),Oa(57,"i"),ms(58,"Scopri le nostre tariffe"),La(),La(),La(),Da(59,"mat-divider"),Oa(60,"a",12),Oa(61,"mat-icon"),ms(62,"event_note"),La(),Oa(63,"span",5),Oa(64,"i"),ms(65,"Bacheca Eventi"),La(),La(),La(),Da(66,"mat-divider"),Oa(67,"a",13),Oa(68,"mat-icon"),ms(69,"edit"),La(),Oa(70,"span",5),Oa(71,"i"),ms(72,"Diventa un Socio"),La(),La(),La(),Da(73,"mat-divider"),Ea(74,aE,6,0,"a",14),Ea(75,sE,6,1,"a",15),Da(76,"mat-divider"),Ea(77,lE,6,0,"a",15),Da(78,"mat-divider"),Ea(79,cE,6,0,"a",16),La(),La(),Oa(80,"mat-sidenav-content"),Oa(81,"mat-toolbar",17),Ea(82,uE,3,0,"button",18),Tl(83,"async"),Oa(84,"span",19),Oa(85,"i",20),ms(86,"Centro Culturale Giacomo Leopardi"),La(),La(),La(),La(),La()}2&t&&(Sr(1),Aa("mode",kl(5,10,e.isHandset$)?"over":"side")("opened",!1===kl(6,12,e.isHandset$)),Ta("role",kl(4,8,e.isHandset$)?"dialog":"navigation"),Sr(73),Aa("ngIf",!e.visitor&&!e.admin),Sr(1),Aa("ngIf",e.visitor),Sr(2),Aa("ngIf",e.admin),Sr(2),Aa("ngIf",e.visitor||e.admin),Sr(3),Aa("ngIf",kl(83,14,e.isHandset$)))},directives:[kk,Sk,Lk,Wk,Qk,ym,vm,tw,Rk,Hu,Ck,rE],pipes:[Ju],styles:[".sidenav-container[_ngcontent-%COMP%]{margin-bottom:20px;position:sticky;top:0;bottom:0}.sidenav[_ngcontent-%COMP%]{width:20%}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:#363333}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{background-color:#363333;position:sticky;top:0;z-index:1}.uptitle[_ngcontent-%COMP%]{font-size:x-large;text-align:center}@media (max-width:500px){.sidenav-container[_ngcontent-%COMP%]{margin-bottom:20px;position:sticky;top:0;bottom:0}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:#363333}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{background-color:#363333;position:sticky;top:0;z-index:1}.uptitle[_ngcontent-%COMP%]{font-size:smaller;text-align:center}}"]}),t})(),pE=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=ve({type:t,selectors:[["app-footer"]],decls:4,vars:0,consts:[[1,"footer"],[1,"container"],[1,"m-0","text-center","text-white"]],template:function(t,e){1&t&&(Oa(0,"footer",0),Oa(1,"div",1),Oa(2,"p",2),ms(3,"Copyright \xa9 Centro Culturale Giacomo Leopardi"),La(),La(),La())},styles:[".footer[_ngcontent-%COMP%]{position:fixed;height:20px;left:0;bottom:0;width:100%;background:#363333;color:#fff;text-align:center}"]}),t})(),dE=(()=>{class t{constructor(){this.title="front-end-leopardi",this.showFiller=!1}ngOnInit(){window.cookieconsent.initialise({palette:{popup:{background:"#164969"},button:{background:"#ffe000",text:"#164969"}},theme:"classic",content:{message:"Giacomo Leopardi APP utilizza coockie per assicurarsi che tu abbia la miglior esperienza sulla sua piattaforma.",dismiss:"Accetto",link:"Informazioni",href:"/data-privacy"}})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=ve({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(t,e){1&t&&(Da(0,"app-sidenav"),Da(1,"router-outlet"),Da(2,"app-footer"))},directives:[hE,bm,pE],styles:["footer[_ngcontent-%COMP%]{margin-top:15px;max-height:5px}p[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif}.router-link-active[_ngcontent-%COMP%]{color:#fff;font-weight:700}.example-container[_ngcontent-%COMP%]{width:500px;height:300px;border:1px solid rgba(0,0,0,.5)}.example-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.example-sidenav[_ngcontent-%COMP%]{padding:20px}.active[_ngcontent-%COMP%]{color:#ea6904!important}@media (max-width:500px){footer[_ngcontent-%COMP%]{margin-top:70px}.router-link-active[_ngcontent-%COMP%]{color:#fff;font-weight:700}}"]}),t})(),fE=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)}}),t})();class mE{call(t,e){return e.subscribe(new gE(t))}}class gE extends Nh{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let i=0;i<e&&!this.hasFirst;i++){const e=jh(this,t[i],void 0,i);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,i){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==i){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}function yE(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),W(t,void 0).lift(new _E(e))}class _E{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new vE(t,this.resultSelector))}}class vE extends f{constructor(t,e,i=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;l(t)?e.push(new xE(t)):e.push("function"==typeof t[O]?new bE(t[O]()):new wE(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let i=0;i<e;i++){let e=t[i];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,i=this.destination;for(let o=0;o<e;o++){let e=t[o];if("function"==typeof e.hasValue&&!e.hasValue())return}let n=!1;const r=[];for(let o=0;o<e;o++){let e=t[o],a=e.next();if(e.hasCompleted()&&(n=!0),a.done)return void i.complete();r.push(a.value)}this.resultSelector?this._tryresultSelector(r):i.next(r),n&&i.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}class bE{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class xE{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[O](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class wE extends V{constructor(t,e,i){super(t),this.parent=e,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[O](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return j(this.observable,new N(this))}}const CE=["*"],SE=["dialog"];function TE(t){return null!=t}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const kE={animation:!0,transitionTimerDelayMs:5};let EE=(()=>{class t{constructor(){this.animation=kE.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({factory:function(){return new t},token:t,providedIn:"root"}),t})();const PE=()=>{},{transitionTimerDelayMs:IE}=kE,ME=new Map,AE=(t,e,i)=>{let n=i.context||{};const r=ME.get(t);if(r)switch(i.runningTransition){case"continue":return Wh;case"stop":r.transition$.complete(),n=Object.assign(r.context,n),ME.delete(t)}!function(t){t||document}(t);const o=e(t,n)||PE;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return o(),Fh(void 0);const a=new T,s=a.pipe(function(...t){return e=>Jh(e,Fh(...t))}(!0));ME.set(t,{transition$:a,context:n});const c=function(t){const{transitionDelay:e,transitionDuration:i}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(i))}(t),u=GT(t,"transitionend").pipe(op(s),wp(({target:e})=>e===t));return function(...t){if(1===t.length){if(!l(t[0]))return t[0];t=t[0]}return W(t,void 0).lift(new mE)}(XT(c+IE).pipe(op(s)),u).pipe(op(s)).subscribe(()=>{ME.delete(t),o(),a.next(),a.complete()}),a.asObservable()};let zE=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[ih]]}),t})(),OE=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[ih]]}),t})(),LE=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)}}),t})(),DE=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[ih]]}),t})(),RE=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)}}),t})();var BE=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});const FE=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function NE(t){const e=Array.from(t.querySelectorAll(FE)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}let VE=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[ih,Uy]]}),t})(),jE=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)}}),t})(),UE=(()=>{class t{constructor(t){this.backdrop=!0,this.keyboard=!0,this.animation=t.animation}}return t.\u0275fac=function(e){return new(e||t)(te(EE))},t.\u0275prov=mt({factory:function(){return new t(te(EE))},token:t,providedIn:"root"}),t})();class qE{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}}const ZE=()=>{};let HE=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):ZE}_adjustBody(t){const e=this._document.body,i=e.style.paddingRight,n=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=n+t+"px",()=>e.style["padding-right"]=i}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const i=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),i}}return t.\u0275fac=function(e){return new(e||t)(te(Wc))},t.\u0275prov=mt({factory:function(){return new t(te(Wc))},token:t,providedIn:"root"}),t})(),GE=(()=>{class t{constructor(t,e){this._el=t,this._zone=e}ngOnInit(){this._zone.onStable.asObservable().pipe(Kh(1)).subscribe(()=>{AE(this._el.nativeElement,({classList:t})=>t.add("show"),{animation:this.animation,runningTransition:"continue"})})}hide(){return AE(this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(Ia(Vs),Ia(gc))},t.\u0275cmp=ve({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,e){2&t&&(rs("modal-backdrop"+(e.backdropClass?" "+e.backdropClass:"")),ns("show",!e.animation)("fade",e.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class WE{close(t){}dismiss(t){}}class $E{constructor(t,e,i,n){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=n,this._closed=new T,this._dismissed=new T,this._hidden=new T,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(op(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(op(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Fh(void 0);t.subscribe(()=>{const{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),yE(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var KE=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let XE=(()=>{class t{constructor(t,e,i){this._document=t,this._elRef=e,this._zone=i,this._closed$=new T,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Il,this.shown=new T,this.hidden=new T}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){this._show()}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},i=yE(AE(t,()=>t.classList.remove("show"),e),AE(this._dialogEl.nativeElement,()=>{},e));return i.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),i}_show(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"continue"};yE(AE(t,()=>t.classList.add("show"),e),AE(this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{GT(t,"keydown").pipe(op(this._closed$),wp(t=>t.which===BE.Escape)).subscribe(t=>{this.keyboard?requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(KE.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let e=!1;GT(this._dialogEl.nativeElement,"mousedown").pipe(op(this._closed$),ip(()=>e=!1),lp(()=>GT(t,"mouseup").pipe(op(this._closed$),Kh(1))),wp(({target:e})=>t===e)).subscribe(()=>{e=!0}),GT(t,"click").pipe(op(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||e||this._zone.run(()=>this.dismiss(KE.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),i=NE(t)[0];(e||i||t).focus()}}_restoreFocus(){const t=this._document.body,e=this._elWithFocus;let i;i=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&AE(this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(Ia(Wc),Ia(Vs),Ia(gc))},t.\u0275cmp=ve({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){var i;1&t&&jl(SE,!0),2&t&&Vl(i=Hl())&&(e._dialogEl=i.first)},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,e){2&t&&(Ta("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),rs("modal d-block"+(e.windowClass?" "+e.windowClass:"")),ns("fade",e.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:CE,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(Ga(),Oa(0,"div",0,1),Oa(2,"div",2),Wa(3),La(),La()),2&t&&rs("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":""))},styles:["ngb-modal-window .component-host-scrollable{-ms-flex-direction:column;display:-ms-flexbox;display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),QE=(()=>{class t{constructor(t,e,i,n,r,o){this._applicationRef=t,this._injector=e,this._document=i,this._scrollBar=n,this._rendererFactory=r,this._ngZone=o,this._activeWindowCmptHasChanged=new T,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeInstances=new Il,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,i,n=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=GT(e,"focusin").pipe(op(i),P(t=>t.target));GT(e,"keydown").pipe(op(i),wp(t=>t.which===BE.Tab),hp(t)).subscribe(([t,i])=>{const[n,r]=NE(e);i!==n&&i!==e||!t.shiftKey||(r.focus(),t.preventDefault()),i!==r||t.shiftKey||(n.focus(),t.preventDefault())}),n&&GT(e,"click").pipe(op(i),hp(t),P(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,i,n){const r=n.container instanceof HTMLElement?n.container:TE(n.container)?this._document.querySelector(n.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),a=this._scrollBar.compensate(),s=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!r)throw new Error(`The specified modal container "${n.container||"body"}" was not found in the DOM.`);const l=new WE,c=this._getContentRef(t,n.injector||e,i,l,n);let u=!1!==n.backdrop?this._attachBackdrop(t,r):void 0,h=this._attachWindowComponent(t,r,c),p=new $E(h,c,u,n.beforeDismiss);return this._registerModalRef(p),this._registerWindowCmpt(h),p.result.then(a,a),p.result.then(s,s),l.close=t=>{p.close(t)},l.dismiss=t=>{p.dismiss(t)},this._applyWindowOptions(h.instance,n),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),u&&u.instance&&this._applyBackdropOptions(u.instance,n),p}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let i=t.resolveComponentFactory(GE).create(this._injector);return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(t,e,i){let n=t.resolveComponentFactory(XE).create(this._injector,i.nodes);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_applyWindowOptions(t,e){this._windowAttributes.forEach(i=>{TE(e[i])&&(t[i]=e[i])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(i=>{TE(e[i])&&(t[i]=e[i])})}_getContentRef(t,e,i,n,r){return i?i instanceof ul?this._createFromTemplateRef(i,n):"string"==typeof i?this._createFromString(i):this._createFromComponent(t,e,i,n,r):new qE([])}_createFromTemplateRef(t,e){const i=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(i),new qE([i.rootNodes],i)}_createFromString(t){const e=this._document.createTextNode(""+t);return new qE([[e]])}_createFromComponent(t,e,i,n,r){const o=t.resolveComponentFactory(i),a=la.create({providers:[{provide:WE,useValue:n}],parent:e}),s=o.create(a),l=s.location.nativeElement;return r.scrollable&&l.classList.add("component-host-scrollable"),this._applicationRef.attachView(s.hostView),new qE([[l]],s.hostView,s)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(te(Dc),te(la),te(Wc),te(HE),te(Us),te(gc))},t.\u0275prov=mt({factory:function(){return new t(te(Dc),te(Zt),te(Wc),te(HE),te(Us),te(gc))},token:t,providedIn:"root"}),t})(),YE=(()=>{class t{constructor(t,e,i,n){this._moduleCFR=t,this._injector=e,this._modalStack=i,this._config=n}open(t,e={}){const i=Object.assign({},this._config,e);return this._modalStack.open(this._moduleCFR,this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(te(Ns),te(la),te(QE),te(UE))},t.\u0275prov=mt({factory:function(){return new t(te(Ns),te(Zt),te(QE),te(UE))},token:t,providedIn:"root"}),t})(),JE=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},providers:[YE]}),t})(),tP=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[ih]]}),t})(),eP=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[ih]]}),t})(),iP=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[ih]]}),t})(),nP=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[ih]]}),t})(),rP=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[ih]]}),t})(),oP=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[ih]]}),t})(),aP=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[ih]]}),t})(),sP=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)}}),t})(),lP=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[[ih]]}),t})();const cP=[zE,OE,LE,DE,RE,VE,jE,JE,tP,eP,iP,nP,rP,oP,aP,sP,lP];let uP=(()=>{class t{}return t.\u0275mod=Ce({type:t}),t.\u0275inj=gt({factory:function(e){return new(e||t)},imports:[cP,zE,OE,LE,DE,RE,VE,jE,JE,tP,eP,iP,nP,rP,oP,aP,sP,lP]}),t})(),hP=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}canActivate(t,e){switch(t.routeConfig.path){case"area-riservata":return"ROLE_ADMIN"==this.authService.getRole().authority;case"prenotazione-visita":case"scelta-utente":return"ROLE_VISITATORE"==this.authService.getRole().authority;default:return!1}}}return t.\u0275fac=function(e){return new(e||t)(Ia(Uw))},t.\u0275cmp=ve({type:t,selectors:[["app-role-guard"]],decls:2,vars:0,template:function(t,e){1&t&&(Oa(0,"p"),ms(1,"role-guard works!"),La())},styles:[""]}),t})(),pP=(()=>{class t{constructor(t){this.authService=t}canActivate(){return this.authService.isUserLoggedIn()}}return t.\u0275fac=function(e){return new(e||t)(Ia(Uw))},t.\u0275cmp=ve({type:t,selectors:[["app-auth-guard"]],decls:2,vars:0,template:function(t,e){1&t&&(Oa(0,"p"),ms(1,"auth-guard works!"),La())},styles:[""]}),t})(),dP=(()=>{class t{constructor(){}intercept(t,e){return sessionStorage.getItem("username")&&sessionStorage.getItem("token")&&(t=t.clone({setHeaders:{Authorization:"Bearer "+sessionStorage.getItem("token")}})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),fP=(()=>{class t{}return t.\u0275mod=Ce({type:t,bootstrap:[dE]}),t.\u0275inj=gt({factory:function(e){return new(e||t)},providers:[pP,hP,Uw,{provide:ng,useClass:dP,multi:!0}],imports:[[gg,Uy,ih,Rh,PT,fE,Uy,uP,yx,AT,Dk,oE,Pk,ew,nC,lT,Yk,Mp]]}),t})();(function(){if(Ln)throw new Error("Cannot enable prod mode after platform setup.");On=!1})(),Lh().bootstrapModule(fP).catch(t=>console.error(t))},zn8P:function(t,e){function i(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}i.keys=function(){return[]},i.resolve=i,t.exports=i,i.id="zn8P"}},[[0,0]]]);